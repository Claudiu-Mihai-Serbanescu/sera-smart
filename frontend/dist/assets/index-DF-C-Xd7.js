(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Qr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wy={exports:{}},zh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C1;function kU(){if(C1)return zh;C1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var l in r)l!=="key"&&(s[l]=r[l])}else s=r;return r=s.ref,{$$typeof:t,type:i,key:a,ref:r!==void 0?r:null,props:s}}return zh.Fragment=e,zh.jsx=n,zh.jsxs=n,zh}var O1;function NU(){return O1||(O1=1,Wy.exports=kU()),Wy.exports}var A=NU(),Zy={exports:{}},Ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R1;function jU(){if(R1)return Ot;R1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(Z){return Z===null||typeof Z!="object"?null:(Z=p&&Z[p]||Z["@@iterator"],typeof Z=="function"?Z:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,T={};function E(Z,Y,ne){this.props=Z,this.context=Y,this.refs=T,this.updater=ne||x}E.prototype.isReactComponent={},E.prototype.setState=function(Z,Y){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,Y,"setState")},E.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function C(){}C.prototype=E.prototype;function I(Z,Y,ne){this.props=Z,this.context=Y,this.refs=T,this.updater=ne||x}var P=I.prototype=new C;P.constructor=I,b(P,E.prototype),P.isPureReactComponent=!0;var M=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function F(Z,Y,ne,me,Te,Le){return ne=Le.ref,{$$typeof:t,type:Z,key:Y,ref:ne!==void 0?ne:null,props:Le}}function G(Z,Y){return F(Z.type,Y,void 0,void 0,void 0,Z.props)}function K(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===t}function V(Z){var Y={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(ne){return Y[ne]})}var Q=/\/+/g;function J(Z,Y){return typeof Z=="object"&&Z!==null&&Z.key!=null?V(""+Z.key):Y.toString(36)}function ve(){}function se(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(ve,ve):(Z.status="pending",Z.then(function(Y){Z.status==="pending"&&(Z.status="fulfilled",Z.value=Y)},function(Y){Z.status==="pending"&&(Z.status="rejected",Z.reason=Y)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function ye(Z,Y,ne,me,Te){var Le=typeof Z;(Le==="undefined"||Le==="boolean")&&(Z=null);var Ae=!1;if(Z===null)Ae=!0;else switch(Le){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(Z.$$typeof){case t:case e:Ae=!0;break;case h:return Ae=Z._init,ye(Ae(Z._payload),Y,ne,me,Te)}}if(Ae)return Te=Te(Z),Ae=me===""?"."+J(Z,0):me,M(Te)?(ne="",Ae!=null&&(ne=Ae.replace(Q,"$&/")+"/"),ye(Te,Y,ne,"",function(fe){return fe})):Te!=null&&(K(Te)&&(Te=G(Te,ne+(Te.key==null||Z&&Z.key===Te.key?"":(""+Te.key).replace(Q,"$&/")+"/")+Ae)),Y.push(Te)),1;Ae=0;var Ve=me===""?".":me+":";if(M(Z))for(var Ue=0;Ue<Z.length;Ue++)me=Z[Ue],Le=Ve+J(me,Ue),Ae+=ye(me,Y,ne,Le,Te);else if(Ue=g(Z),typeof Ue=="function")for(Z=Ue.call(Z),Ue=0;!(me=Z.next()).done;)me=me.value,Le=Ve+J(me,Ue++),Ae+=ye(me,Y,ne,Le,Te);else if(Le==="object"){if(typeof Z.then=="function")return ye(se(Z),Y,ne,me,Te);throw Y=String(Z),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function X(Z,Y,ne){if(Z==null)return Z;var me=[],Te=0;return ye(Z,me,"","",function(Le){return Y.call(ne,Le,Te++)}),me}function oe(Z){if(Z._status===-1){var Y=Z._result;Y=Y(),Y.then(function(ne){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=ne)},function(ne){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=ne)}),Z._status===-1&&(Z._status=0,Z._result=Y)}if(Z._status===1)return Z._result.default;throw Z._result}var ie=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)};function Ie(){}return Ot.Children={map:X,forEach:function(Z,Y,ne){X(Z,function(){Y.apply(this,arguments)},ne)},count:function(Z){var Y=0;return X(Z,function(){Y++}),Y},toArray:function(Z){return X(Z,function(Y){return Y})||[]},only:function(Z){if(!K(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},Ot.Component=E,Ot.Fragment=n,Ot.Profiler=r,Ot.PureComponent=I,Ot.StrictMode=i,Ot.Suspense=f,Ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Ot.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return k.H.useMemoCache(Z)}},Ot.cache=function(Z){return function(){return Z.apply(null,arguments)}},Ot.cloneElement=function(Z,Y,ne){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var me=b({},Z.props),Te=Z.key,Le=void 0;if(Y!=null)for(Ae in Y.ref!==void 0&&(Le=void 0),Y.key!==void 0&&(Te=""+Y.key),Y)!z.call(Y,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&Y.ref===void 0||(me[Ae]=Y[Ae]);var Ae=arguments.length-2;if(Ae===1)me.children=ne;else if(1<Ae){for(var Ve=Array(Ae),Ue=0;Ue<Ae;Ue++)Ve[Ue]=arguments[Ue+2];me.children=Ve}return F(Z.type,Te,void 0,void 0,Le,me)},Ot.createContext=function(Z){return Z={$$typeof:a,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:s,_context:Z},Z},Ot.createElement=function(Z,Y,ne){var me,Te={},Le=null;if(Y!=null)for(me in Y.key!==void 0&&(Le=""+Y.key),Y)z.call(Y,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Te[me]=Y[me]);var Ae=arguments.length-2;if(Ae===1)Te.children=ne;else if(1<Ae){for(var Ve=Array(Ae),Ue=0;Ue<Ae;Ue++)Ve[Ue]=arguments[Ue+2];Te.children=Ve}if(Z&&Z.defaultProps)for(me in Ae=Z.defaultProps,Ae)Te[me]===void 0&&(Te[me]=Ae[me]);return F(Z,Le,void 0,void 0,null,Te)},Ot.createRef=function(){return{current:null}},Ot.forwardRef=function(Z){return{$$typeof:l,render:Z}},Ot.isValidElement=K,Ot.lazy=function(Z){return{$$typeof:h,_payload:{_status:-1,_result:Z},_init:oe}},Ot.memo=function(Z,Y){return{$$typeof:c,type:Z,compare:Y===void 0?null:Y}},Ot.startTransition=function(Z){var Y=k.T,ne={};k.T=ne;try{var me=Z(),Te=k.S;Te!==null&&Te(ne,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(Ie,ie)}catch(Le){ie(Le)}finally{k.T=Y}},Ot.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Ot.use=function(Z){return k.H.use(Z)},Ot.useActionState=function(Z,Y,ne){return k.H.useActionState(Z,Y,ne)},Ot.useCallback=function(Z,Y){return k.H.useCallback(Z,Y)},Ot.useContext=function(Z){return k.H.useContext(Z)},Ot.useDebugValue=function(){},Ot.useDeferredValue=function(Z,Y){return k.H.useDeferredValue(Z,Y)},Ot.useEffect=function(Z,Y,ne){var me=k.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return me.useEffect(Z,Y)},Ot.useId=function(){return k.H.useId()},Ot.useImperativeHandle=function(Z,Y,ne){return k.H.useImperativeHandle(Z,Y,ne)},Ot.useInsertionEffect=function(Z,Y){return k.H.useInsertionEffect(Z,Y)},Ot.useLayoutEffect=function(Z,Y){return k.H.useLayoutEffect(Z,Y)},Ot.useMemo=function(Z,Y){return k.H.useMemo(Z,Y)},Ot.useOptimistic=function(Z,Y){return k.H.useOptimistic(Z,Y)},Ot.useReducer=function(Z,Y,ne){return k.H.useReducer(Z,Y,ne)},Ot.useRef=function(Z){return k.H.useRef(Z)},Ot.useState=function(Z){return k.H.useState(Z)},Ot.useSyncExternalStore=function(Z,Y,ne){return k.H.useSyncExternalStore(Z,Y,ne)},Ot.useTransition=function(){return k.H.useTransition()},Ot.version="19.1.0",Ot}var P1;function $d(){return P1||(P1=1,Zy.exports=jU()),Zy.exports}var O=$d();const vi=Qr(O);var Xy={exports:{}},Gh={},Qy={exports:{}},Jy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D1;function BU(){return D1||(D1=1,function(t){function e(X,oe){var ie=X.length;X.push(oe);e:for(;0<ie;){var Ie=ie-1>>>1,Z=X[Ie];if(0<r(Z,oe))X[Ie]=oe,X[ie]=Z,ie=Ie;else break e}}function n(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var oe=X[0],ie=X.pop();if(ie!==oe){X[0]=ie;e:for(var Ie=0,Z=X.length,Y=Z>>>1;Ie<Y;){var ne=2*(Ie+1)-1,me=X[ne],Te=ne+1,Le=X[Te];if(0>r(me,ie))Te<Z&&0>r(Le,me)?(X[Ie]=Le,X[Te]=ie,Ie=Te):(X[Ie]=me,X[ne]=ie,Ie=ne);else if(Te<Z&&0>r(Le,ie))X[Ie]=Le,X[Te]=ie,Ie=Te;else break e}}return oe}function r(X,oe){var ie=X.sortIndex-oe.sortIndex;return ie!==0?ie:X.id-oe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var f=[],c=[],h=1,p=null,g=3,x=!1,b=!1,T=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function M(X){for(var oe=n(c);oe!==null;){if(oe.callback===null)i(c);else if(oe.startTime<=X)i(c),oe.sortIndex=oe.expirationTime,e(f,oe);else break;oe=n(c)}}function k(X){if(T=!1,M(X),!b)if(n(f)!==null)b=!0,z||(z=!0,J());else{var oe=n(c);oe!==null&&ye(k,oe.startTime-X)}}var z=!1,F=-1,G=5,K=-1;function V(){return E?!0:!(t.unstable_now()-K<G)}function Q(){if(E=!1,z){var X=t.unstable_now();K=X;var oe=!0;try{e:{b=!1,T&&(T=!1,I(F),F=-1),x=!0;var ie=g;try{t:{for(M(X),p=n(f);p!==null&&!(p.expirationTime>X&&V());){var Ie=p.callback;if(typeof Ie=="function"){p.callback=null,g=p.priorityLevel;var Z=Ie(p.expirationTime<=X);if(X=t.unstable_now(),typeof Z=="function"){p.callback=Z,M(X),oe=!0;break t}p===n(f)&&i(f),M(X)}else i(f);p=n(f)}if(p!==null)oe=!0;else{var Y=n(c);Y!==null&&ye(k,Y.startTime-X),oe=!1}}break e}finally{p=null,g=ie,x=!1}oe=void 0}}finally{oe?J():z=!1}}}var J;if(typeof P=="function")J=function(){P(Q)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,se=ve.port2;ve.port1.onmessage=Q,J=function(){se.postMessage(null)}}else J=function(){C(Q,0)};function ye(X,oe){F=C(function(){X(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(X){switch(g){case 1:case 2:case 3:var oe=3;break;default:oe=g}var ie=g;g=oe;try{return X()}finally{g=ie}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ie=g;g=X;try{return oe()}finally{g=ie}},t.unstable_scheduleCallback=function(X,oe,ie){var Ie=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Ie+ie:Ie):ie=Ie,X){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ie+Z,X={id:h++,callback:oe,priorityLevel:X,startTime:ie,expirationTime:Z,sortIndex:-1},ie>Ie?(X.sortIndex=ie,e(c,X),n(f)===null&&X===n(c)&&(T?(I(F),F=-1):T=!0,ye(k,ie-Ie))):(X.sortIndex=Z,e(f,X),b||x||(b=!0,z||(z=!0,J()))),X},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(X){var oe=g;return function(){var ie=g;g=oe;try{return X.apply(this,arguments)}finally{g=ie}}}}(Jy)),Jy}var I1;function FU(){return I1||(I1=1,Qy.exports=BU()),Qy.exports}var eb={exports:{}},fr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M1;function UU(){if(M1)return fr;M1=1;var t=$d();function e(f){var c="https://react.dev/errors/"+f;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+f+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(f,c,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:f,containerInfo:c,implementation:h}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(f,c){if(f==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,fr.createPortal=function(f,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(f,c,null,h)},fr.flushSync=function(f){var c=a.T,h=i.p;try{if(a.T=null,i.p=2,f)return f()}finally{a.T=c,i.p=h,i.d.f()}},fr.preconnect=function(f,c){typeof f=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,i.d.C(f,c))},fr.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},fr.preinit=function(f,c){if(typeof f=="string"&&c&&typeof c.as=="string"){var h=c.as,p=l(h,c.crossOrigin),g=typeof c.integrity=="string"?c.integrity:void 0,x=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;h==="style"?i.d.S(f,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:x}):h==="script"&&i.d.X(f,{crossOrigin:p,integrity:g,fetchPriority:x,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},fr.preinitModule=function(f,c){if(typeof f=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var h=l(c.as,c.crossOrigin);i.d.M(f,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&i.d.M(f)},fr.preload=function(f,c){if(typeof f=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var h=c.as,p=l(h,c.crossOrigin);i.d.L(f,h,{crossOrigin:p,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},fr.preloadModule=function(f,c){if(typeof f=="string")if(c){var h=l(c.as,c.crossOrigin);i.d.m(f,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else i.d.m(f)},fr.requestFormReset=function(f){i.d.r(f)},fr.unstable_batchedUpdates=function(f,c){return f(c)},fr.useFormState=function(f,c,h){return a.H.useFormState(f,c,h)},fr.useFormStatus=function(){return a.H.useHostTransitionStatus()},fr.version="19.1.0",fr}var k1;function ZD(){if(k1)return eb.exports;k1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),eb.exports=UU(),eb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1;function $U(){if(N1)return Gh;N1=1;var t=FU(),e=$d(),n=ZD();function i(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var u=o,m=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(m=u.return),o=u.return;while(o)}return u.tag===3?m:null}function a(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(s(o)!==o)throw Error(i(188))}function f(o){var u=o.alternate;if(!u){if(u=s(o),u===null)throw Error(i(188));return u!==o?null:o}for(var m=o,y=u;;){var S=m.return;if(S===null)break;var R=S.alternate;if(R===null){if(y=S.return,y!==null){m=y;continue}break}if(S.child===R.child){for(R=S.child;R;){if(R===m)return l(S),o;if(R===y)return l(S),u;R=R.sibling}throw Error(i(188))}if(m.return!==y.return)m=S,y=R;else{for(var U=!1,q=S.child;q;){if(q===m){U=!0,m=S,y=R;break}if(q===y){U=!0,y=S,m=R;break}q=q.sibling}if(!U){for(q=R.child;q;){if(q===m){U=!0,m=R,y=S;break}if(q===y){U=!0,y=R,m=S;break}q=q.sibling}if(!U)throw Error(i(189))}}if(m.alternate!==y)throw Error(i(190))}if(m.tag!==3)throw Error(i(188));return m.stateNode.current===m?o:u}function c(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=c(o),u!==null)return u;o=o.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),P=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function J(o){return o===null||typeof o!="object"?null:(o=Q&&o[Q]||o["@@iterator"],typeof o=="function"?o:null)}var ve=Symbol.for("react.client.reference");function se(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===ve?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case b:return"Fragment";case E:return"Profiler";case T:return"StrictMode";case k:return"Suspense";case z:return"SuspenseList";case K:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case P:return(o.displayName||"Context")+".Provider";case I:return(o._context.displayName||"Context")+".Consumer";case M:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case F:return u=o.displayName||null,u!==null?u:se(o.type)||"Memo";case G:u=o._payload,o=o._init;try{return se(o(u))}catch{}}return null}var ye=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},Ie=[],Z=-1;function Y(o){return{current:o}}function ne(o){0>Z||(o.current=Ie[Z],Ie[Z]=null,Z--)}function me(o,u){Z++,Ie[Z]=o.current,o.current=u}var Te=Y(null),Le=Y(null),Ae=Y(null),Ve=Y(null);function Ue(o,u){switch(me(Ae,u),me(Le,o),me(Te,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?n1(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=n1(u),o=i1(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ne(Te),me(Te,o)}function fe(){ne(Te),ne(Le),ne(Ae)}function je(o){o.memoizedState!==null&&me(Ve,o);var u=Te.current,m=i1(u,o.type);u!==m&&(me(Le,o),me(Te,m))}function Ge(o){Le.current===o&&(ne(Te),ne(Le)),Ve.current===o&&(ne(Ve),jh._currentValue=ie)}var Pe=Object.prototype.hasOwnProperty,ot=t.unstable_scheduleCallback,ct=t.unstable_cancelCallback,xe=t.unstable_shouldYield,we=t.unstable_requestPaint,Be=t.unstable_now,Je=t.unstable_getCurrentPriorityLevel,_t=t.unstable_ImmediatePriority,Ft=t.unstable_UserBlockingPriority,kt=t.unstable_NormalPriority,Un=t.unstable_LowPriority,Gi=t.unstable_IdlePriority,xi=t.log,_i=t.unstable_setDisableYieldValue,rt=null,Kt=null;function qn(o){if(typeof xi=="function"&&_i(o),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(rt,o)}catch{}}var En=Math.clz32?Math.clz32:Ds,ar=Math.log,Jn=Math.LN2;function Ds(o){return o>>>=0,o===0?32:31-(ar(o)/Jn|0)|0}var Lr=256,Is=4194304;function Cr(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Wl(o,u,m){var y=o.pendingLanes;if(y===0)return 0;var S=0,R=o.suspendedLanes,U=o.pingedLanes;o=o.warmLanes;var q=y&134217727;return q!==0?(y=q&~R,y!==0?S=Cr(y):(U&=q,U!==0?S=Cr(U):m||(m=q&~o,m!==0&&(S=Cr(m))))):(q=y&~R,q!==0?S=Cr(q):U!==0?S=Cr(U):m||(m=y&~o,m!==0&&(S=Cr(m)))),S===0?0:u!==0&&u!==S&&(u&R)===0&&(R=S&-S,m=u&-u,R>=m||R===32&&(m&4194048)!==0)?u:S}function es(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function nh(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ff(){var o=Lr;return Lr<<=1,(Lr&4194048)===0&&(Lr=256),o}function ic(){var o=Is;return Is<<=1,(Is&62914560)===0&&(Is=4194304),o}function Zl(o){for(var u=[],m=0;31>m;m++)u.push(o);return u}function da(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Xl(o,u,m,y,S,R){var U=o.pendingLanes;o.pendingLanes=m,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=m,o.entangledLanes&=m,o.errorRecoveryDisabledLanes&=m,o.shellSuspendCounter=0;var q=o.entanglements,te=o.expirationTimes,ge=o.hiddenUpdates;for(m=U&~m;0<m;){var Oe=31-En(m),ke=1<<Oe;q[Oe]=0,te[Oe]=-1;var be=ge[Oe];if(be!==null)for(ge[Oe]=null,Oe=0;Oe<be.length;Oe++){var Se=be[Oe];Se!==null&&(Se.lane&=-536870913)}m&=~ke}y!==0&&rc(o,y,0),R!==0&&S===0&&o.tag!==0&&(o.suspendedLanes|=R&~(U&~u))}function rc(o,u,m){o.pendingLanes|=u,o.suspendedLanes&=~u;var y=31-En(u);o.entangledLanes|=u,o.entanglements[y]=o.entanglements[y]|1073741824|m&4194090}function sc(o,u){var m=o.entangledLanes|=u;for(o=o.entanglements;m;){var y=31-En(m),S=1<<y;S&u|o[y]&u&&(o[y]|=u),m&=~S}}function ac(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function oc(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function df(){var o=oe.p;return o!==0?o:(o=window.event,o===void 0?32:S1(o.type))}function lc(o,u){var m=oe.p;try{return oe.p=o,u()}finally{oe.p=m}}var Hi=Math.random().toString(36).slice(2),In="__reactFiber$"+Hi,Si="__reactProps$"+Hi,ro="__reactContainer$"+Hi,or="__reactEvents$"+Hi,st="__reactListeners$"+Hi,hf="__reactHandles$"+Hi,Uo="__reactResources$"+Hi,yr="__reactMarker$"+Hi;function ha(o){delete o[In],delete o[Si],delete o[or],delete o[st],delete o[hf]}function Ms(o){var u=o[In];if(u)return u;for(var m=o.parentNode;m;){if(u=m[ro]||m[In]){if(m=u.alternate,u.child!==null||m!==null&&m.child!==null)for(o=o1(o);o!==null;){if(m=o[In])return m;o=o1(o)}return u}o=m,m=o.parentNode}return null}function ts(o){if(o=o[In]||o[ro]){var u=o.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return o}return null}function Or(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(i(33))}function ma(o){var u=o[Uo];return u||(u=o[Uo]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function vn(o){o[yr]=!0}var ei=new Set,Ei={};function $n(o,u){On(o,u),On(o+"Capture",u)}function On(o,u){for(Ei[o]=u,o=0;o<u.length;o++)ei.add(u[o])}var Ql=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rr={},ks={};function so(o){return Pe.call(ks,o)?!0:Pe.call(Rr,o)?!1:Ql.test(o)?ks[o]=!0:(Rr[o]=!0,!1)}function $o(o,u,m){if(so(u))if(m===null)o.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+m)}}function ao(o,u,m){if(m===null)o.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+m)}}function Ti(o,u,m,y){if(y===null)o.removeAttribute(m);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(m);return}o.setAttributeNS(u,m,""+y)}}var oo,Ns;function ns(o){if(oo===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);oo=u&&u[1]||"",Ns=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oo+o+Ns}var zo=!1;function js(o,u){if(!o||zo)return"";zo=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var ke=function(){throw Error()};if(Object.defineProperty(ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ke,[])}catch(Se){var be=Se}Reflect.construct(o,[],ke)}else{try{ke.call()}catch(Se){be=Se}o.call(ke.prototype)}}else{try{throw Error()}catch(Se){be=Se}(ke=o())&&typeof ke.catch=="function"&&ke.catch(function(){})}}catch(Se){if(Se&&be&&typeof Se.stack=="string")return[Se.stack,be.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=y.DetermineComponentFrameRoot(),U=R[0],q=R[1];if(U&&q){var te=U.split(`
`),ge=q.split(`
`);for(S=y=0;y<te.length&&!te[y].includes("DetermineComponentFrameRoot");)y++;for(;S<ge.length&&!ge[S].includes("DetermineComponentFrameRoot");)S++;if(y===te.length||S===ge.length)for(y=te.length-1,S=ge.length-1;1<=y&&0<=S&&te[y]!==ge[S];)S--;for(;1<=y&&0<=S;y--,S--)if(te[y]!==ge[S]){if(y!==1||S!==1)do if(y--,S--,0>S||te[y]!==ge[S]){var Oe=`
`+te[y].replace(" at new "," at ");return o.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",o.displayName)),Oe}while(1<=y&&0<=S);break}}}finally{zo=!1,Error.prepareStackTrace=m}return(m=o?o.displayName||o.name:"")?ns(m):""}function Nt(o){switch(o.tag){case 26:case 27:case 5:return ns(o.type);case 16:return ns("Lazy");case 13:return ns("Suspense");case 19:return ns("SuspenseList");case 0:case 15:return js(o.type,!1);case 11:return js(o.type.render,!1);case 1:return js(o.type,!0);case 31:return ns("Activity");default:return""}}function rn(o){try{var u="";do u+=Nt(o),o=o.return;while(o);return u}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function ti(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Bs(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function pa(o){var u=Bs(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,u),y=""+o[u];if(!o.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var S=m.get,R=m.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return S.call(this)},set:function(U){y=""+U,R.call(this,U)}}),Object.defineProperty(o,u,{enumerable:m.enumerable}),{getValue:function(){return y},setValue:function(U){y=""+U},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function ga(o){o._valueTracker||(o._valueTracker=pa(o))}function At(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var m=u.getValue(),y="";return o&&(y=Bs(o)?o.checked?"true":"false":o.value),o=y,o!==m?(u.setValue(o),!0):!1}function sn(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var lr=/[\n"\\]/g;function Xt(o){return o.replace(lr,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Mn(o,u,m,y,S,R,U,q){o.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?o.type=U:o.removeAttribute("type"),u!=null?U==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+ti(u)):o.value!==""+ti(u)&&(o.value=""+ti(u)):U!=="submit"&&U!=="reset"||o.removeAttribute("value"),u!=null?Fs(o,U,ti(u)):m!=null?Fs(o,U,ti(m)):y!=null&&o.removeAttribute("value"),S==null&&R!=null&&(o.defaultChecked=!!R),S!=null&&(o.checked=S&&typeof S!="function"&&typeof S!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?o.name=""+ti(q):o.removeAttribute("name")}function Ki(o,u,m,y,S,R,U,q){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(o.type=R),u!=null||m!=null){if(!(R!=="submit"&&R!=="reset"||u!=null))return;m=m!=null?""+ti(m):"",u=u!=null?""+ti(u):m,q||u===o.value||(o.value=u),o.defaultValue=u}y=y??S,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=q?o.checked:!!y,o.defaultChecked=!!y,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(o.name=U)}function Fs(o,u,m){u==="number"&&sn(o.ownerDocument)===o||o.defaultValue===""+m||(o.defaultValue=""+m)}function Ai(o,u,m,y){if(o=o.options,u){u={};for(var S=0;S<m.length;S++)u["$"+m[S]]=!0;for(m=0;m<o.length;m++)S=u.hasOwnProperty("$"+o[m].value),o[m].selected!==S&&(o[m].selected=S),S&&y&&(o[m].defaultSelected=!0)}else{for(m=""+ti(m),u=null,S=0;S<o.length;S++){if(o[S].value===m){o[S].selected=!0,y&&(o[S].defaultSelected=!0);return}u!==null||o[S].disabled||(u=o[S])}u!==null&&(u.selected=!0)}}function zt(o,u,m){if(u!=null&&(u=""+ti(u),u!==o.value&&(o.value=u),m==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=m!=null?""+ti(m):""}function wi(o,u,m,y){if(u==null){if(y!=null){if(m!=null)throw Error(i(92));if(ye(y)){if(1<y.length)throw Error(i(93));y=y[0]}m=y}m==null&&(m=""),u=m}m=ti(u),o.defaultValue=m,y=o.textContent,y===m&&y!==""&&y!==null&&(o.value=y)}function qi(o,u){if(u){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=u;return}}o.textContent=u}var Pr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lo(o,u,m){var y=u.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?y?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":y?o.setProperty(u,m):typeof m!="number"||m===0||Pr.has(u)?u==="float"?o.cssFloat=m:o[u]=(""+m).trim():o[u]=m+"px"}function va(o,u,m){if(u!=null&&typeof u!="object")throw Error(i(62));if(o=o.style,m!=null){for(var y in m)!m.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var S in u)y=u[S],u.hasOwnProperty(S)&&m[S]!==y&&lo(o,S,y)}else for(var R in u)u.hasOwnProperty(R)&&lo(o,R,u[R])}function Dr(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Go=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ho=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Li(o){return Ho.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Ko=null;function Vi(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ir=null,is=null;function uo(o){var u=ts(o);if(u&&(o=u.stateNode)){var m=o[Si]||null;e:switch(o=u.stateNode,u.type){case"input":if(Mn(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),u=m.name,m.type==="radio"&&u!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Xt(""+u)+'"][type="radio"]'),u=0;u<m.length;u++){var y=m[u];if(y!==o&&y.form===o.form){var S=y[Si]||null;if(!S)throw Error(i(90));Mn(y,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(u=0;u<m.length;u++)y=m[u],y.form===o.form&&At(y)}break e;case"textarea":zt(o,m.value,m.defaultValue);break e;case"select":u=m.value,u!=null&&Ai(o,!!m.multiple,u,!1)}}}var pt=!1;function ui(o,u,m){if(pt)return o(u,m);pt=!0;try{var y=o(u);return y}finally{if(pt=!1,(Ir!==null||is!==null)&&(Ip(),Ir&&(u=Ir,o=is,is=Ir=null,uo(u),o)))for(u=0;u<o.length;u++)uo(o[u])}}function $t(o,u){var m=o.stateNode;if(m===null)return null;var y=m[Si]||null;if(y===null)return null;m=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(i(231,u,typeof m));return m}var br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),co=!1;if(br)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){co=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{co=!1}var Mr=null,kr=null,Us=null;function rs(){if(Us)return Us;var o,u=kr,m=u.length,y,S="value"in Mr?Mr.value:Mr.textContent,R=S.length;for(o=0;o<m&&u[o]===S[o];o++);var U=m-o;for(y=1;y<=U&&u[m-y]===S[R-y];y++);return Us=S.slice(o,1<y?1-y:void 0)}function Tn(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Nr(){return!0}function fo(){return!1}function ci(o){function u(m,y,S,R,U){this._reactName=m,this._targetInst=S,this.type=y,this.nativeEvent=R,this.target=U,this.currentTarget=null;for(var q in o)o.hasOwnProperty(q)&&(m=o[q],this[q]=m?m(R):R[q]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Nr:fo,this.isPropagationStopped=fo,this}return h(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),u}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ya=ci($s),ss=h({},$s,{view:0,detail:0}),uc=ci(ss),qo,Lt,ba,fi=h({},ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tu,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ba&&(ba&&o.type==="mousemove"?(qo=o.screenX-ba.screenX,Lt=o.screenY-ba.screenY):Lt=qo=0,ba=o),qo)},movementY:function(o){return"movementY"in o?o.movementY:Lt}}),xa=ci(fi),_a=h({},fi,{dataTransfer:0}),ih=ci(_a),Jl=h({},ss,{relatedTarget:0}),eu=ci(Jl),cc=h({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),mf=ci(cc),pf=h({},$s,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Vo=ci(pf),gf=h({},$s,{data:0}),xr=ci(gf),rh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},as={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yo(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=as[o])?!!u[o]:!1}function tu(){return Yo}var dc=h({},ss,{key:function(o){if(o.key){var u=rh[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Tn(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?fc[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tu,charCode:function(o){return o.type==="keypress"?Tn(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Tn(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),hc=ci(dc),mc=h({},fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nu=ci(mc),Sa=h({},ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tu}),pc=ci(Sa),gc=h({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),vf=ci(gc),yf=h({},fi,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),bf=ci(yf),iu=h({},$s,{newState:0,oldState:0}),Ea=ci(iu),xf=[9,13,27,32],zs=br&&"CompositionEvent"in window,ni=null;br&&"documentMode"in document&&(ni=document.documentMode);var Ta=br&&"TextEvent"in window&&!ni,os=br&&(!zs||ni&&8<ni&&11>=ni),_f=" ",Aa=!1;function ru(o,u){switch(o){case"keyup":return xf.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sf(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ho=!1;function Ef(o,u){switch(o){case"compositionend":return Sf(u);case"keypress":return u.which!==32?null:(Aa=!0,_f);case"textInput":return o=u.data,o===_f&&Aa?null:o;default:return null}}function sh(o,u){if(ho)return o==="compositionend"||!zs&&ru(o,u)?(o=rs(),Us=kr=Mr=null,ho=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return os&&u.locale!=="ko"?null:u.data;default:return null}}var _r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wa(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!_r[o.type]:u==="textarea"}function Tf(o,u,m,y){Ir?is?is.push(y):is=[y]:Ir=y,u=Fp(u,"onChange"),0<u.length&&(m=new ya("onChange","change",null,m,y),o.push({event:m,listeners:u}))}var yn=null,mo=null;function La(o){Xw(o,0)}function Wo(o){var u=Or(o);if(At(u))return o}function po(o,u){if(o==="change")return u}var vc=!1;if(br){var Ca;if(br){var go="oninput"in document;if(!go){var ls=document.createElement("div");ls.setAttribute("oninput","return;"),go=typeof ls.oninput=="function"}Ca=go}else Ca=!1;vc=Ca&&(!document.documentMode||9<document.documentMode)}function Zo(){yn&&(yn.detachEvent("onpropertychange",yc),mo=yn=null)}function yc(o){if(o.propertyName==="value"&&Wo(mo)){var u=[];Tf(u,mo,o,Vi(o)),ui(La,u)}}function bc(o,u,m){o==="focusin"?(Zo(),yn=u,mo=m,yn.attachEvent("onpropertychange",yc)):o==="focusout"&&Zo()}function ah(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Wo(mo)}function jr(o,u){if(o==="click")return Wo(u)}function Af(o,u){if(o==="input"||o==="change")return Wo(u)}function Oa(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var ii=typeof Object.is=="function"?Object.is:Oa;function Ci(o,u){if(ii(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var m=Object.keys(o),y=Object.keys(u);if(m.length!==y.length)return!1;for(y=0;y<m.length;y++){var S=m[y];if(!Pe.call(u,S)||!ii(o[S],u[S]))return!1}return!0}function Ra(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Oi(o,u){var m=Ra(o);o=0;for(var y;m;){if(m.nodeType===3){if(y=o+m.textContent.length,o<=u&&y>=u)return{node:m,offset:u-o};o=y}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Ra(m)}}function su(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?su(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function Xo(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=sn(o.document);u instanceof o.HTMLIFrameElement;){try{var m=typeof u.contentWindow.location.href=="string"}catch{m=!1}if(m)o=u.contentWindow;else break;u=sn(o.document)}return u}function vo(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var Qo=br&&"documentMode"in document&&11>=document.documentMode,Sr=null,yo=null,Pa=null,au=!1;function wf(o,u,m){var y=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;au||Sr==null||Sr!==sn(y)||(y=Sr,"selectionStart"in y&&vo(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Pa&&Ci(Pa,y)||(Pa=y,y=Fp(yo,"onSelect"),0<y.length&&(u=new ya("onSelect","select",null,u,m),o.push({event:u,listeners:y}),u.target=Sr)))}function Br(o,u){var m={};return m[o.toLowerCase()]=u.toLowerCase(),m["Webkit"+o]="webkit"+u,m["Moz"+o]="moz"+u,m}var Da={animationend:Br("Animation","AnimationEnd"),animationiteration:Br("Animation","AnimationIteration"),animationstart:Br("Animation","AnimationStart"),transitionrun:Br("Transition","TransitionRun"),transitionstart:Br("Transition","TransitionStart"),transitioncancel:Br("Transition","TransitionCancel"),transitionend:Br("Transition","TransitionEnd")},Jo={},ou={};br&&(ou=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function Gs(o){if(Jo[o])return Jo[o];if(!Da[o])return o;var u=Da[o],m;for(m in u)if(u.hasOwnProperty(m)&&m in ou)return Jo[o]=u[m];return o}var Lf=Gs("animationend"),Wn=Gs("animationiteration"),Yi=Gs("animationstart"),Cf=Gs("transitionrun"),lu=Gs("transitionstart"),Of=Gs("transitioncancel"),uu=Gs("transitionend"),xc=new Map,Hs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hs.push("scrollEnd");function Er(o,u){xc.set(o,u),$n(u,[o])}var Ia=new WeakMap;function Wi(o,u){if(typeof o=="object"&&o!==null){var m=Ia.get(o);return m!==void 0?m:(u={value:o,source:u,stack:rn(u)},Ia.set(o,u),u)}return{value:o,source:u,stack:rn(u)}}var Ri=[],Ma=0,Tr=0;function el(){for(var o=Ma,u=Tr=Ma=0;u<o;){var m=Ri[u];Ri[u++]=null;var y=Ri[u];Ri[u++]=null;var S=Ri[u];Ri[u++]=null;var R=Ri[u];if(Ri[u++]=null,y!==null&&S!==null){var U=y.pending;U===null?S.next=S:(S.next=U.next,U.next=S),y.pending=S}R!==0&&Zi(m,S,R)}}function tl(o,u,m,y){Ri[Ma++]=o,Ri[Ma++]=u,Ri[Ma++]=m,Ri[Ma++]=y,Tr|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function ka(o,u,m,y){return tl(o,u,m,y),us(o)}function bo(o,u){return tl(o,null,null,u),us(o)}function Zi(o,u,m){o.lanes|=m;var y=o.alternate;y!==null&&(y.lanes|=m);for(var S=!1,R=o.return;R!==null;)R.childLanes|=m,y=R.alternate,y!==null&&(y.childLanes|=m),R.tag===22&&(o=R.stateNode,o===null||o._visibility&1||(S=!0)),o=R,R=R.return;return o.tag===3?(R=o.stateNode,S&&u!==null&&(S=31-En(m),o=R.hiddenUpdates,y=o[S],y===null?o[S]=[u]:y.push(u),u.lane=m|536870912),R):null}function us(o){if(50<Oh)throw Oh=0,by=null,Error(i(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var Na={};function Rf(o,u,m,y){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xi(o,u,m,y){return new Rf(o,u,m,y)}function cu(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Fr(o,u){var m=o.alternate;return m===null?(m=Xi(o.tag,u,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=u,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&65011712,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,u=o.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m.refCleanup=o.refCleanup,m}function _c(o,u){o.flags&=65011714;var m=o.alternate;return m===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=m.childLanes,o.lanes=m.lanes,o.child=m.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=m.memoizedProps,o.memoizedState=m.memoizedState,o.updateQueue=m.updateQueue,o.type=m.type,u=m.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function nl(o,u,m,y,S,R){var U=0;if(y=o,typeof o=="function")cu(o)&&(U=1);else if(typeof o=="string")U=SU(o,m,Te.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case K:return o=Xi(31,m,u,S),o.elementType=K,o.lanes=R,o;case b:return Ks(m.children,S,R,u);case T:U=8,S|=24;break;case E:return o=Xi(12,m,u,S|2),o.elementType=E,o.lanes=R,o;case k:return o=Xi(13,m,u,S),o.elementType=k,o.lanes=R,o;case z:return o=Xi(19,m,u,S),o.elementType=z,o.lanes=R,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case C:case P:U=10;break e;case I:U=9;break e;case M:U=11;break e;case F:U=14;break e;case G:U=16,y=null;break e}U=29,m=Error(i(130,o===null?"null":typeof o,"")),y=null}return u=Xi(U,m,u,S),u.elementType=o,u.type=y,u.lanes=R,u}function Ks(o,u,m,y){return o=Xi(7,o,y,u),o.lanes=m,o}function il(o,u,m){return o=Xi(6,o,null,u),o.lanes=m,o}function ja(o,u,m){return u=Xi(4,o.children!==null?o.children:[],o.key,u),u.lanes=m,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var Ba=[],Fa=0,d=null,v=0,_=[],D=0,j=null,H=1,ee="";function ue(o,u){Ba[Fa++]=v,Ba[Fa++]=d,d=o,v=u}function _e(o,u,m){_[D++]=H,_[D++]=ee,_[D++]=j,j=o;var y=H;o=ee;var S=32-En(y)-1;y&=~(1<<S),m+=1;var R=32-En(u)+S;if(30<R){var U=S-S%5;R=(y&(1<<U)-1).toString(32),y>>=U,S-=U,H=1<<32-En(u)+S|m<<S|y,ee=R+o}else H=1<<R|m<<S|y,ee=o}function Ne(o){o.return!==null&&(ue(o,1),_e(o,1,0))}function He(o){for(;o===d;)d=Ba[--Fa],Ba[Fa]=null,v=Ba[--Fa],Ba[Fa]=null;for(;o===j;)j=_[--D],_[D]=null,ee=_[--D],_[D]=null,H=_[--D],_[D]=null}var Ze=null,Xe=null,ht=!1,dn=null,An=!1,ri=Error(i(519));function Zn(o){var u=Error(i(418,""));throw Ur(Wi(u,o)),ri}function fu(o){var u=o.stateNode,m=o.type,y=o.memoizedProps;switch(u[In]=o,u[Si]=y,m){case"dialog":Bt("cancel",u),Bt("close",u);break;case"iframe":case"object":case"embed":Bt("load",u);break;case"video":case"audio":for(m=0;m<Ph.length;m++)Bt(Ph[m],u);break;case"source":Bt("error",u);break;case"img":case"image":case"link":Bt("error",u),Bt("load",u);break;case"details":Bt("toggle",u);break;case"input":Bt("invalid",u),Ki(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),ga(u);break;case"select":Bt("invalid",u);break;case"textarea":Bt("invalid",u),wi(u,y.value,y.defaultValue,y.children),ga(u)}m=y.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||u.textContent===""+m||y.suppressHydrationWarning===!0||t1(u.textContent,m)?(y.popover!=null&&(Bt("beforetoggle",u),Bt("toggle",u)),y.onScroll!=null&&Bt("scroll",u),y.onScrollEnd!=null&&Bt("scrollend",u),y.onClick!=null&&(u.onclick=Up),u=!0):u=!1,u||Zn(o)}function Sc(o){for(Ze=o.return;Ze;)switch(Ze.tag){case 5:case 13:An=!1;return;case 27:case 3:An=!0;return;default:Ze=Ze.return}}function rl(o){if(o!==Ze)return!1;if(!ht)return Sc(o),ht=!0,!1;var u=o.tag,m;if((m=u!==3&&u!==27)&&((m=u===5)&&(m=o.type,m=!(m!=="form"&&m!=="button")||ky(o.type,o.memoizedProps)),m=!m),m&&Xe&&Zn(o),Sc(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,u=0;o;){if(o.nodeType===8)if(m=o.data,m==="/$"){if(u===0){Xe=za(o.nextSibling);break e}u--}else m!=="$"&&m!=="$!"&&m!=="$?"||u++;o=o.nextSibling}Xe=null}}else u===27?(u=Xe,Ru(o.type)?(o=Fy,Fy=null,Xe=o):Xe=u):Xe=Ze?za(o.stateNode.nextSibling):null;return!0}function xo(){Xe=Ze=null,ht=!1}function Pf(){var o=dn;return o!==null&&(qr===null?qr=o:qr.push.apply(qr,o),dn=null),o}function Ur(o){dn===null?dn=[o]:dn.push(o)}var Vt=Y(null),$r=null,cs=null;function qs(o,u,m){me(Vt,u._currentValue),u._currentValue=m}function fs(o){o._currentValue=Vt.current,ne(Vt)}function sl(o,u,m){for(;o!==null;){var y=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),o===m)break;o=o.return}}function du(o,u,m,y){var S=o.child;for(S!==null&&(S.return=o);S!==null;){var R=S.dependencies;if(R!==null){var U=S.child;R=R.firstContext;e:for(;R!==null;){var q=R;R=S;for(var te=0;te<u.length;te++)if(q.context===u[te]){R.lanes|=m,q=R.alternate,q!==null&&(q.lanes|=m),sl(R.return,m,o),y||(U=null);break e}R=q.next}}else if(S.tag===18){if(U=S.return,U===null)throw Error(i(341));U.lanes|=m,R=U.alternate,R!==null&&(R.lanes|=m),sl(U,m,o),U=null}else U=S.child;if(U!==null)U.return=S;else for(U=S;U!==null;){if(U===o){U=null;break}if(S=U.sibling,S!==null){S.return=U.return,U=S;break}U=U.return}S=U}}function al(o,u,m,y){o=null;for(var S=u,R=!1;S!==null;){if(!R){if((S.flags&524288)!==0)R=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var U=S.alternate;if(U===null)throw Error(i(387));if(U=U.memoizedProps,U!==null){var q=S.type;ii(S.pendingProps.value,U.value)||(o!==null?o.push(q):o=[q])}}else if(S===Ve.current){if(U=S.alternate,U===null)throw Error(i(387));U.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(o!==null?o.push(jh):o=[jh])}S=S.return}o!==null&&du(u,o,m,y),u.flags|=262144}function Df(o){for(o=o.firstContext;o!==null;){if(!ii(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function _o(o){$r=o,cs=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Pi(o){return If($r,o)}function Ec(o,u){return $r===null&&_o(o),If(o,u)}function If(o,u){var m=u._currentValue;if(u={context:u,memoizedValue:m,next:null},cs===null){if(o===null)throw Error(i(308));cs=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else cs=cs.next=u;return m}var sp=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(m,y){o.push(y)}};this.abort=function(){u.aborted=!0,o.forEach(function(m){return m()})}},ol=t.unstable_scheduleCallback,ap=t.unstable_NormalPriority,zn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mf(){return{controller:new sp,data:new Map,refCount:0}}function ll(o){o.refCount--,o.refCount===0&&ol(ap,function(){o.controller.abort()})}var hu=null,Tc=0,mu=0,zr=null;function So(o,u){if(hu===null){var m=hu=[];Tc=0,mu=wy(),zr={status:"pending",value:void 0,then:function(y){m.push(y)}}}return Tc++,u.then(op,op),u}function op(){if(--Tc===0&&hu!==null){zr!==null&&(zr.status="fulfilled");var o=hu;hu=null,mu=0,zr=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function G0(o,u){var m=[],y={status:"pending",value:null,reason:null,then:function(S){m.push(S)}};return o.then(function(){y.status="fulfilled",y.value=u;for(var S=0;S<m.length;S++)(0,m[S])(u)},function(S){for(y.status="rejected",y.reason=S,S=0;S<m.length;S++)(0,m[S])(void 0)}),y}var lp=X.S;X.S=function(o,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&So(o,u),lp!==null&&lp(o,u)};var ul=Y(null);function oh(){var o=ul.current;return o!==null?o:Ln.pooledCache}function kf(o,u){u===null?me(ul,ul.current):me(ul,u.pool)}function up(){var o=oh();return o===null?null:{parent:zn._currentValue,pool:o}}var Ac=Error(i(460)),lh=Error(i(474)),cl=Error(i(542)),pu={then:function(){}};function cp(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Nf(){}function gu(o,u,m){switch(m=o[m],m===void 0?o.push(u):m!==u&&(u.then(Nf,Nf),u=m),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,N(o),o;default:if(typeof u.status=="string")u.then(Nf,Nf);else{if(o=Ln,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=u,o.status="pending",o.then(function(y){if(u.status==="pending"){var S=u;S.status="fulfilled",S.value=y}},function(y){if(u.status==="pending"){var S=u;S.status="rejected",S.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,N(o),o}throw $=u,Ac}}var $=null;function w(){if($===null)throw Error(i(459));var o=$;return $=null,o}function N(o){if(o===Ac||o===cl)throw Error(i(483))}var W=!1;function ae(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function le(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Ee(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Me(o,u,m){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(on&2)!==0){var S=y.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),y.pending=u,u=us(o),Zi(o,null,m),u}return tl(o,y,u,m),us(o)}function Fe(o,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194048)!==0)){var y=u.lanes;y&=o.pendingLanes,m|=y,u.lanes=m,sc(o,m)}}function Ye(o,u){var m=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,m===y)){var S=null,R=null;if(m=m.firstBaseUpdate,m!==null){do{var U={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};R===null?S=R=U:R=R.next=U,m=m.next}while(m!==null);R===null?S=R=u:R=R.next=u}else S=R=u;m={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:R,shared:y.shared,callbacks:y.callbacks},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=u:o.next=u,m.lastBaseUpdate=u}var We=!1;function ze(){if(We){var o=zr;if(o!==null)throw o}}function St(o,u,m,y){We=!1;var S=o.updateQueue;W=!1;var R=S.firstBaseUpdate,U=S.lastBaseUpdate,q=S.shared.pending;if(q!==null){S.shared.pending=null;var te=q,ge=te.next;te.next=null,U===null?R=ge:U.next=ge,U=te;var Oe=o.alternate;Oe!==null&&(Oe=Oe.updateQueue,q=Oe.lastBaseUpdate,q!==U&&(q===null?Oe.firstBaseUpdate=ge:q.next=ge,Oe.lastBaseUpdate=te))}if(R!==null){var ke=S.baseState;U=0,Oe=ge=te=null,q=R;do{var be=q.lane&-536870913,Se=be!==q.lane;if(Se?(Ht&be)===be:(y&be)===be){be!==0&&be===mu&&(We=!0),Oe!==null&&(Oe=Oe.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var bt=o,mt=q;be=u;var mn=m;switch(mt.tag){case 1:if(bt=mt.payload,typeof bt=="function"){ke=bt.call(mn,ke,be);break e}ke=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=mt.payload,be=typeof bt=="function"?bt.call(mn,ke,be):bt,be==null)break e;ke=h({},ke,be);break e;case 2:W=!0}}be=q.callback,be!==null&&(o.flags|=64,Se&&(o.flags|=8192),Se=S.callbacks,Se===null?S.callbacks=[be]:Se.push(be))}else Se={lane:be,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Oe===null?(ge=Oe=Se,te=ke):Oe=Oe.next=Se,U|=be;if(q=q.next,q===null){if(q=S.shared.pending,q===null)break;Se=q,q=Se.next,Se.next=null,S.lastBaseUpdate=Se,S.shared.pending=null}}while(!0);Oe===null&&(te=ke),S.baseState=te,S.firstBaseUpdate=ge,S.lastBaseUpdate=Oe,R===null&&(S.shared.lanes=0),wu|=U,o.lanes=U,o.memoizedState=ke}}function dt(o,u){if(typeof o!="function")throw Error(i(191,o));o.call(u)}function Et(o,u){var m=o.callbacks;if(m!==null)for(o.callbacks=null,o=0;o<m.length;o++)dt(m[o],u)}var ft=Y(null),yt=Y(0);function Qt(o,u){o=yl,me(yt,o),me(ft,u),yl=o|u.baseLanes}function en(){me(yt,yl),me(ft,ft.current)}function Ct(){yl=yt.current,ne(ft),ne(yt)}var Rt=0,$e=null,tt=null,gt=null,qt=!1,Ut=!1,an=!1,Di=0,Qi=0,Vn=null,Gr=0;function Gt(){throw Error(i(321))}function wn(o,u){if(u===null)return!1;for(var m=0;m<u.length&&m<o.length;m++)if(!ii(o[m],u[m]))return!1;return!0}function Hr(o,u,m,y,S,R){return Rt=R,$e=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,X.H=o===null||o.memoizedState===null?kA:NA,an=!1,R=m(y,S),an=!1,Ut&&(R=fl(u,m,y,S)),ds(o),R}function ds(o){X.H=xp;var u=tt!==null&&tt.next!==null;if(Rt=0,gt=tt=$e=null,qt=!1,Qi=0,Vn=null,u)throw Error(i(300));o===null||Ii||(o=o.dependencies,o!==null&&Df(o)&&(Ii=!0))}function fl(o,u,m,y){$e=o;var S=0;do{if(Ut&&(Vn=null),Qi=0,Ut=!1,25<=S)throw Error(i(301));if(S+=1,gt=tt=null,o.updateQueue!=null){var R=o.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}X.H=IF,R=u(m,y)}while(Ut);return R}function si(){var o=X.H,u=o.useState()[0];return u=typeof u.then=="function"?vu(u):u,o=o.useState()[0],(tt!==null?tt.memoizedState:null)!==o&&($e.flags|=1024),u}function Jt(){var o=Di!==0;return Di=0,o}function di(o,u,m){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~m}function cr(o){if(qt){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}qt=!1}Rt=0,gt=tt=$e=null,Ut=!1,Qi=Di=0,Vn=null}function Gn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?$e.memoizedState=gt=o:gt=gt.next=o,gt}function Rn(){if(tt===null){var o=$e.alternate;o=o!==null?o.memoizedState:null}else o=tt.next;var u=gt===null?$e.memoizedState:gt.next;if(u!==null)gt=u,tt=o;else{if(o===null)throw $e.alternate===null?Error(i(467)):Error(i(310));tt=o,o={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},gt===null?$e.memoizedState=gt=o:gt=gt.next=o}return gt}function jf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vu(o){var u=Qi;return Qi+=1,Vn===null&&(Vn=[]),o=gu(Vn,o,u),u=$e,(gt===null?u.memoizedState:gt.next)===null&&(u=u.alternate,X.H=u===null||u.memoizedState===null?kA:NA),o}function dl(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return vu(o);if(o.$$typeof===P)return Pi(o)}throw Error(i(438,String(o)))}function uh(o){var u=null,m=$e.updateQueue;if(m!==null&&(u=m.memoCache),u==null){var y=$e.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(S){return S.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),m===null&&(m=jf(),$e.updateQueue=m),m.memoCache=u,m=u.data[u.index],m===void 0)for(m=u.data[u.index]=Array(o),y=0;y<o;y++)m[y]=V;return u.index++,m}function Ua(o,u){return typeof u=="function"?u(o):u}function yu(o){var u=Rn();return ch(u,tt,o)}function ch(o,u,m){var y=o.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=m;var S=o.baseQueue,R=y.pending;if(R!==null){if(S!==null){var U=S.next;S.next=R.next,R.next=U}u.baseQueue=S=R,y.pending=null}if(R=o.baseState,S===null)o.memoizedState=R;else{u=S.next;var q=U=null,te=null,ge=u,Oe=!1;do{var ke=ge.lane&-536870913;if(ke!==ge.lane?(Ht&ke)===ke:(Rt&ke)===ke){var be=ge.revertLane;if(be===0)te!==null&&(te=te.next={lane:0,revertLane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),ke===mu&&(Oe=!0);else if((Rt&be)===be){ge=ge.next,be===mu&&(Oe=!0);continue}else ke={lane:0,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},te===null?(q=te=ke,U=R):te=te.next=ke,$e.lanes|=be,wu|=be;ke=ge.action,an&&m(R,ke),R=ge.hasEagerState?ge.eagerState:m(R,ke)}else be={lane:ke,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},te===null?(q=te=be,U=R):te=te.next=be,$e.lanes|=ke,wu|=ke;ge=ge.next}while(ge!==null&&ge!==u);if(te===null?U=R:te.next=q,!ii(R,o.memoizedState)&&(Ii=!0,Oe&&(m=zr,m!==null)))throw m;o.memoizedState=R,o.baseState=U,o.baseQueue=te,y.lastRenderedState=R}return S===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function Bf(o){var u=Rn(),m=u.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=o;var y=m.dispatch,S=m.pending,R=u.memoizedState;if(S!==null){m.pending=null;var U=S=S.next;do R=o(R,U.action),U=U.next;while(U!==S);ii(R,u.memoizedState)||(Ii=!0),u.memoizedState=R,u.baseQueue===null&&(u.baseState=R),m.lastRenderedState=R}return[R,y]}function fp(o,u,m){var y=$e,S=Rn(),R=ht;if(R){if(m===void 0)throw Error(i(407));m=m()}else m=u();var U=!ii((tt||S).memoizedState,m);U&&(S.memoizedState=m,Ii=!0),S=S.queue;var q=dp.bind(null,y,S,o);if(yh(2048,8,q,[o]),S.getSnapshot!==u||U||gt!==null&&gt.memoizedState.tag&1){if(y.flags|=2048,zf(9,vp(),dh.bind(null,y,S,m,u),null),Ln===null)throw Error(i(349));R||(Rt&124)!==0||fh(y,u,m)}return m}function fh(o,u,m){o.flags|=16384,o={getSnapshot:u,value:m},u=$e.updateQueue,u===null?(u=jf(),$e.updateQueue=u,u.stores=[o]):(m=u.stores,m===null?u.stores=[o]:m.push(o))}function dh(o,u,m,y){u.value=m,u.getSnapshot=y,hp(u)&&Eo(o)}function dp(o,u,m){return m(function(){hp(u)&&Eo(o)})}function hp(o){var u=o.getSnapshot;o=o.value;try{var m=u();return!ii(o,m)}catch{return!0}}function Eo(o){var u=bo(o,2);u!==null&&vs(u,o,2)}function bu(o){var u=Gn();if(typeof o=="function"){var m=o;if(o=m(),an){qn(!0);try{m()}finally{qn(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:o},u}function hh(o,u,m,y){return o.baseState=m,ch(o,tt,typeof y=="function"?y:Ua)}function mp(o,u,m,y,S){if(bp(o))throw Error(i(485));if(o=u.action,o!==null){var R={payload:S,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){R.listeners.push(U)}};X.T!==null?m(!0):R.isTransition=!1,y(R),m=u.pending,m===null?(R.next=u.pending=R,Ff(u,R)):(R.next=m.next,u.pending=m.next=R)}}function Ff(o,u){var m=u.action,y=u.payload,S=o.state;if(u.isTransition){var R=X.T,U={};X.T=U;try{var q=m(S,y),te=X.S;te!==null&&te(U,q),mh(o,u,q)}catch(ge){Uf(o,u,ge)}finally{X.T=R}}else try{R=m(S,y),mh(o,u,R)}catch(ge){Uf(o,u,ge)}}function mh(o,u,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(y){ph(o,u,y)},function(y){return Uf(o,u,y)}):ph(o,u,m)}function ph(o,u,m){u.status="fulfilled",u.value=m,gh(u),o.state=m,u=o.pending,u!==null&&(m=u.next,m===u?o.pending=null:(m=m.next,u.next=m,Ff(o,m)))}function Uf(o,u,m){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=m,gh(u),u=u.next;while(u!==y)}o.action=null}function gh(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function pp(o,u){return u}function gp(o,u){if(ht){var m=Ln.formState;if(m!==null){e:{var y=$e;if(ht){if(Xe){t:{for(var S=Xe,R=An;S.nodeType!==8;){if(!R){S=null;break t}if(S=za(S.nextSibling),S===null){S=null;break t}}R=S.data,S=R==="F!"||R==="F"?S:null}if(S){Xe=za(S.nextSibling),y=S.data==="F!";break e}}Zn(y)}y=!1}y&&(u=m[0])}}return m=Gn(),m.memoizedState=m.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pp,lastRenderedState:u},m.queue=y,m=DA.bind(null,$e,y),y.dispatch=m,y=bu(!1),R=Y0.bind(null,$e,!1,y.queue),y=Gn(),S={state:u,dispatch:null,action:o,pending:null},y.queue=S,m=mp.bind(null,$e,S,R,m),S.dispatch=m,y.memoizedState=o,[u,m,!1]}function $f(o){var u=Rn();return vh(u,tt,o)}function vh(o,u,m){if(u=ch(o,u,pp)[0],o=yu(Ua)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=vu(u)}catch(U){throw U===Ac?cl:U}else y=u;u=Rn();var S=u.queue,R=S.dispatch;return m!==u.memoizedState&&($e.flags|=2048,zf(9,vp(),OF.bind(null,S,m),null)),[y,R,o]}function OF(o,u){o.action=u}function gA(o){var u=Rn(),m=tt;if(m!==null)return vh(u,m,o);Rn(),u=u.memoizedState,m=Rn();var y=m.queue.dispatch;return m.memoizedState=o,[u,y,!1]}function zf(o,u,m,y){return o={tag:o,create:m,deps:y,inst:u,next:null},u=$e.updateQueue,u===null&&(u=jf(),$e.updateQueue=u),m=u.lastEffect,m===null?u.lastEffect=o.next=o:(y=m.next,m.next=o,o.next=y,u.lastEffect=o),o}function vp(){return{destroy:void 0,resource:void 0}}function vA(){return Rn().memoizedState}function yp(o,u,m,y){var S=Gn();y=y===void 0?null:y,$e.flags|=o,S.memoizedState=zf(1|u,vp(),m,y)}function yh(o,u,m,y){var S=Rn();y=y===void 0?null:y;var R=S.memoizedState.inst;tt!==null&&y!==null&&wn(y,tt.memoizedState.deps)?S.memoizedState=zf(u,R,m,y):($e.flags|=o,S.memoizedState=zf(1|u,R,m,y))}function yA(o,u){yp(8390656,8,o,u)}function bA(o,u){yh(2048,8,o,u)}function xA(o,u){return yh(4,2,o,u)}function _A(o,u){return yh(4,4,o,u)}function SA(o,u){if(typeof u=="function"){o=o();var m=u(o);return function(){typeof m=="function"?m():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function EA(o,u,m){m=m!=null?m.concat([o]):null,yh(4,4,SA.bind(null,u,o),m)}function H0(){}function TA(o,u){var m=Rn();u=u===void 0?null:u;var y=m.memoizedState;return u!==null&&wn(u,y[1])?y[0]:(m.memoizedState=[o,u],o)}function AA(o,u){var m=Rn();u=u===void 0?null:u;var y=m.memoizedState;if(u!==null&&wn(u,y[1]))return y[0];if(y=o(),an){qn(!0);try{o()}finally{qn(!1)}}return m.memoizedState=[y,u],y}function K0(o,u,m){return m===void 0||(Rt&1073741824)!==0?o.memoizedState=u:(o.memoizedState=m,o=Cw(),$e.lanes|=o,wu|=o,m)}function wA(o,u,m,y){return ii(m,u)?m:ft.current!==null?(o=K0(o,m,y),ii(o,u)||(Ii=!0),o):(Rt&42)===0?(Ii=!0,o.memoizedState=m):(o=Cw(),$e.lanes|=o,wu|=o,u)}function LA(o,u,m,y,S){var R=oe.p;oe.p=R!==0&&8>R?R:8;var U=X.T,q={};X.T=q,Y0(o,!1,u,m);try{var te=S(),ge=X.S;if(ge!==null&&ge(q,te),te!==null&&typeof te=="object"&&typeof te.then=="function"){var Oe=G0(te,y);bh(o,u,Oe,gs(o))}else bh(o,u,y,gs(o))}catch(ke){bh(o,u,{then:function(){},status:"rejected",reason:ke},gs())}finally{oe.p=R,X.T=U}}function RF(){}function q0(o,u,m,y){if(o.tag!==5)throw Error(i(476));var S=CA(o).queue;LA(o,S,u,ie,m===null?RF:function(){return OA(o),m(y)})}function CA(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:ie},next:null};var m={};return u.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:m},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function OA(o){var u=CA(o).next.queue;bh(o,u,{},gs())}function V0(){return Pi(jh)}function RA(){return Rn().memoizedState}function PA(){return Rn().memoizedState}function PF(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var m=gs();o=Ee(m);var y=Me(u,o,m);y!==null&&(vs(y,u,m),Fe(y,u,m)),u={cache:Mf()},o.payload=u;return}u=u.return}}function DF(o,u,m){var y=gs();m={lane:y,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},bp(o)?IA(u,m):(m=ka(o,u,m,y),m!==null&&(vs(m,o,y),MA(m,u,y)))}function DA(o,u,m){var y=gs();bh(o,u,m,y)}function bh(o,u,m,y){var S={lane:y,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(bp(o))IA(u,S);else{var R=o.alternate;if(o.lanes===0&&(R===null||R.lanes===0)&&(R=u.lastRenderedReducer,R!==null))try{var U=u.lastRenderedState,q=R(U,m);if(S.hasEagerState=!0,S.eagerState=q,ii(q,U))return tl(o,u,S,0),Ln===null&&el(),!1}catch{}finally{}if(m=ka(o,u,S,y),m!==null)return vs(m,o,y),MA(m,u,y),!0}return!1}function Y0(o,u,m,y){if(y={lane:2,revertLane:wy(),action:y,hasEagerState:!1,eagerState:null,next:null},bp(o)){if(u)throw Error(i(479))}else u=ka(o,m,y,2),u!==null&&vs(u,o,2)}function bp(o){var u=o.alternate;return o===$e||u!==null&&u===$e}function IA(o,u){Ut=qt=!0;var m=o.pending;m===null?u.next=u:(u.next=m.next,m.next=u),o.pending=u}function MA(o,u,m){if((m&4194048)!==0){var y=u.lanes;y&=o.pendingLanes,m|=y,u.lanes=m,sc(o,m)}}var xp={readContext:Pi,use:dl,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useLayoutEffect:Gt,useInsertionEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useSyncExternalStore:Gt,useId:Gt,useHostTransitionStatus:Gt,useFormState:Gt,useActionState:Gt,useOptimistic:Gt,useMemoCache:Gt,useCacheRefresh:Gt},kA={readContext:Pi,use:dl,useCallback:function(o,u){return Gn().memoizedState=[o,u===void 0?null:u],o},useContext:Pi,useEffect:yA,useImperativeHandle:function(o,u,m){m=m!=null?m.concat([o]):null,yp(4194308,4,SA.bind(null,u,o),m)},useLayoutEffect:function(o,u){return yp(4194308,4,o,u)},useInsertionEffect:function(o,u){yp(4,2,o,u)},useMemo:function(o,u){var m=Gn();u=u===void 0?null:u;var y=o();if(an){qn(!0);try{o()}finally{qn(!1)}}return m.memoizedState=[y,u],y},useReducer:function(o,u,m){var y=Gn();if(m!==void 0){var S=m(u);if(an){qn(!0);try{m(u)}finally{qn(!1)}}}else S=u;return y.memoizedState=y.baseState=S,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:S},y.queue=o,o=o.dispatch=DF.bind(null,$e,o),[y.memoizedState,o]},useRef:function(o){var u=Gn();return o={current:o},u.memoizedState=o},useState:function(o){o=bu(o);var u=o.queue,m=DA.bind(null,$e,u);return u.dispatch=m,[o.memoizedState,m]},useDebugValue:H0,useDeferredValue:function(o,u){var m=Gn();return K0(m,o,u)},useTransition:function(){var o=bu(!1);return o=LA.bind(null,$e,o.queue,!0,!1),Gn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,m){var y=$e,S=Gn();if(ht){if(m===void 0)throw Error(i(407));m=m()}else{if(m=u(),Ln===null)throw Error(i(349));(Ht&124)!==0||fh(y,u,m)}S.memoizedState=m;var R={value:m,getSnapshot:u};return S.queue=R,yA(dp.bind(null,y,R,o),[o]),y.flags|=2048,zf(9,vp(),dh.bind(null,y,R,m,u),null),m},useId:function(){var o=Gn(),u=Ln.identifierPrefix;if(ht){var m=ee,y=H;m=(y&~(1<<32-En(y)-1)).toString(32)+m,u=""+u+"R"+m,m=Di++,0<m&&(u+="H"+m.toString(32)),u+=""}else m=Gr++,u=""+u+"r"+m.toString(32)+"";return o.memoizedState=u},useHostTransitionStatus:V0,useFormState:gp,useActionState:gp,useOptimistic:function(o){var u=Gn();u.memoizedState=u.baseState=o;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=m,u=Y0.bind(null,$e,!0,m),m.dispatch=u,[o,u]},useMemoCache:uh,useCacheRefresh:function(){return Gn().memoizedState=PF.bind(null,$e)}},NA={readContext:Pi,use:dl,useCallback:TA,useContext:Pi,useEffect:bA,useImperativeHandle:EA,useInsertionEffect:xA,useLayoutEffect:_A,useMemo:AA,useReducer:yu,useRef:vA,useState:function(){return yu(Ua)},useDebugValue:H0,useDeferredValue:function(o,u){var m=Rn();return wA(m,tt.memoizedState,o,u)},useTransition:function(){var o=yu(Ua)[0],u=Rn().memoizedState;return[typeof o=="boolean"?o:vu(o),u]},useSyncExternalStore:fp,useId:RA,useHostTransitionStatus:V0,useFormState:$f,useActionState:$f,useOptimistic:function(o,u){var m=Rn();return hh(m,tt,o,u)},useMemoCache:uh,useCacheRefresh:PA},IF={readContext:Pi,use:dl,useCallback:TA,useContext:Pi,useEffect:bA,useImperativeHandle:EA,useInsertionEffect:xA,useLayoutEffect:_A,useMemo:AA,useReducer:Bf,useRef:vA,useState:function(){return Bf(Ua)},useDebugValue:H0,useDeferredValue:function(o,u){var m=Rn();return tt===null?K0(m,o,u):wA(m,tt.memoizedState,o,u)},useTransition:function(){var o=Bf(Ua)[0],u=Rn().memoizedState;return[typeof o=="boolean"?o:vu(o),u]},useSyncExternalStore:fp,useId:RA,useHostTransitionStatus:V0,useFormState:gA,useActionState:gA,useOptimistic:function(o,u){var m=Rn();return tt!==null?hh(m,tt,o,u):(m.baseState=o,[o,m.queue.dispatch])},useMemoCache:uh,useCacheRefresh:PA},Gf=null,xh=0;function _p(o){var u=xh;return xh+=1,Gf===null&&(Gf=[]),gu(Gf,o,u)}function _h(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Sp(o,u){throw u.$$typeof===p?Error(i(525)):(o=Object.prototype.toString.call(u),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function jA(o){var u=o._init;return u(o._payload)}function BA(o){function u(ce,re){if(o){var he=ce.deletions;he===null?(ce.deletions=[re],ce.flags|=16):he.push(re)}}function m(ce,re){if(!o)return null;for(;re!==null;)u(ce,re),re=re.sibling;return null}function y(ce){for(var re=new Map;ce!==null;)ce.key!==null?re.set(ce.key,ce):re.set(ce.index,ce),ce=ce.sibling;return re}function S(ce,re){return ce=Fr(ce,re),ce.index=0,ce.sibling=null,ce}function R(ce,re,he){return ce.index=he,o?(he=ce.alternate,he!==null?(he=he.index,he<re?(ce.flags|=67108866,re):he):(ce.flags|=67108866,re)):(ce.flags|=1048576,re)}function U(ce){return o&&ce.alternate===null&&(ce.flags|=67108866),ce}function q(ce,re,he,De){return re===null||re.tag!==6?(re=il(he,ce.mode,De),re.return=ce,re):(re=S(re,he),re.return=ce,re)}function te(ce,re,he,De){var nt=he.type;return nt===b?Oe(ce,re,he.props.children,De,he.key):re!==null&&(re.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===G&&jA(nt)===re.type)?(re=S(re,he.props),_h(re,he),re.return=ce,re):(re=nl(he.type,he.key,he.props,null,ce.mode,De),_h(re,he),re.return=ce,re)}function ge(ce,re,he,De){return re===null||re.tag!==4||re.stateNode.containerInfo!==he.containerInfo||re.stateNode.implementation!==he.implementation?(re=ja(he,ce.mode,De),re.return=ce,re):(re=S(re,he.children||[]),re.return=ce,re)}function Oe(ce,re,he,De,nt){return re===null||re.tag!==7?(re=Ks(he,ce.mode,De,nt),re.return=ce,re):(re=S(re,he),re.return=ce,re)}function ke(ce,re,he){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=il(""+re,ce.mode,he),re.return=ce,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case g:return he=nl(re.type,re.key,re.props,null,ce.mode,he),_h(he,re),he.return=ce,he;case x:return re=ja(re,ce.mode,he),re.return=ce,re;case G:var De=re._init;return re=De(re._payload),ke(ce,re,he)}if(ye(re)||J(re))return re=Ks(re,ce.mode,he,null),re.return=ce,re;if(typeof re.then=="function")return ke(ce,_p(re),he);if(re.$$typeof===P)return ke(ce,Ec(ce,re),he);Sp(ce,re)}return null}function be(ce,re,he,De){var nt=re!==null?re.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return nt!==null?null:q(ce,re,""+he,De);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case g:return he.key===nt?te(ce,re,he,De):null;case x:return he.key===nt?ge(ce,re,he,De):null;case G:return nt=he._init,he=nt(he._payload),be(ce,re,he,De)}if(ye(he)||J(he))return nt!==null?null:Oe(ce,re,he,De,null);if(typeof he.then=="function")return be(ce,re,_p(he),De);if(he.$$typeof===P)return be(ce,re,Ec(ce,he),De);Sp(ce,he)}return null}function Se(ce,re,he,De,nt){if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return ce=ce.get(he)||null,q(re,ce,""+De,nt);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case g:return ce=ce.get(De.key===null?he:De.key)||null,te(re,ce,De,nt);case x:return ce=ce.get(De.key===null?he:De.key)||null,ge(re,ce,De,nt);case G:var It=De._init;return De=It(De._payload),Se(ce,re,he,De,nt)}if(ye(De)||J(De))return ce=ce.get(he)||null,Oe(re,ce,De,nt,null);if(typeof De.then=="function")return Se(ce,re,he,_p(De),nt);if(De.$$typeof===P)return Se(ce,re,he,Ec(re,De),nt);Sp(re,De)}return null}function bt(ce,re,he,De){for(var nt=null,It=null,lt=re,vt=re=0,ki=null;lt!==null&&vt<he.length;vt++){lt.index>vt?(ki=lt,lt=null):ki=lt.sibling;var Yt=be(ce,lt,he[vt],De);if(Yt===null){lt===null&&(lt=ki);break}o&&lt&&Yt.alternate===null&&u(ce,lt),re=R(Yt,re,vt),It===null?nt=Yt:It.sibling=Yt,It=Yt,lt=ki}if(vt===he.length)return m(ce,lt),ht&&ue(ce,vt),nt;if(lt===null){for(;vt<he.length;vt++)lt=ke(ce,he[vt],De),lt!==null&&(re=R(lt,re,vt),It===null?nt=lt:It.sibling=lt,It=lt);return ht&&ue(ce,vt),nt}for(lt=y(lt);vt<he.length;vt++)ki=Se(lt,ce,vt,he[vt],De),ki!==null&&(o&&ki.alternate!==null&&lt.delete(ki.key===null?vt:ki.key),re=R(ki,re,vt),It===null?nt=ki:It.sibling=ki,It=ki);return o&&lt.forEach(function(ku){return u(ce,ku)}),ht&&ue(ce,vt),nt}function mt(ce,re,he,De){if(he==null)throw Error(i(151));for(var nt=null,It=null,lt=re,vt=re=0,ki=null,Yt=he.next();lt!==null&&!Yt.done;vt++,Yt=he.next()){lt.index>vt?(ki=lt,lt=null):ki=lt.sibling;var ku=be(ce,lt,Yt.value,De);if(ku===null){lt===null&&(lt=ki);break}o&&lt&&ku.alternate===null&&u(ce,lt),re=R(ku,re,vt),It===null?nt=ku:It.sibling=ku,It=ku,lt=ki}if(Yt.done)return m(ce,lt),ht&&ue(ce,vt),nt;if(lt===null){for(;!Yt.done;vt++,Yt=he.next())Yt=ke(ce,Yt.value,De),Yt!==null&&(re=R(Yt,re,vt),It===null?nt=Yt:It.sibling=Yt,It=Yt);return ht&&ue(ce,vt),nt}for(lt=y(lt);!Yt.done;vt++,Yt=he.next())Yt=Se(lt,ce,vt,Yt.value,De),Yt!==null&&(o&&Yt.alternate!==null&&lt.delete(Yt.key===null?vt:Yt.key),re=R(Yt,re,vt),It===null?nt=Yt:It.sibling=Yt,It=Yt);return o&&lt.forEach(function(MU){return u(ce,MU)}),ht&&ue(ce,vt),nt}function mn(ce,re,he,De){if(typeof he=="object"&&he!==null&&he.type===b&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case g:e:{for(var nt=he.key;re!==null;){if(re.key===nt){if(nt=he.type,nt===b){if(re.tag===7){m(ce,re.sibling),De=S(re,he.props.children),De.return=ce,ce=De;break e}}else if(re.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===G&&jA(nt)===re.type){m(ce,re.sibling),De=S(re,he.props),_h(De,he),De.return=ce,ce=De;break e}m(ce,re);break}else u(ce,re);re=re.sibling}he.type===b?(De=Ks(he.props.children,ce.mode,De,he.key),De.return=ce,ce=De):(De=nl(he.type,he.key,he.props,null,ce.mode,De),_h(De,he),De.return=ce,ce=De)}return U(ce);case x:e:{for(nt=he.key;re!==null;){if(re.key===nt)if(re.tag===4&&re.stateNode.containerInfo===he.containerInfo&&re.stateNode.implementation===he.implementation){m(ce,re.sibling),De=S(re,he.children||[]),De.return=ce,ce=De;break e}else{m(ce,re);break}else u(ce,re);re=re.sibling}De=ja(he,ce.mode,De),De.return=ce,ce=De}return U(ce);case G:return nt=he._init,he=nt(he._payload),mn(ce,re,he,De)}if(ye(he))return bt(ce,re,he,De);if(J(he)){if(nt=J(he),typeof nt!="function")throw Error(i(150));return he=nt.call(he),mt(ce,re,he,De)}if(typeof he.then=="function")return mn(ce,re,_p(he),De);if(he.$$typeof===P)return mn(ce,re,Ec(ce,he),De);Sp(ce,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,re!==null&&re.tag===6?(m(ce,re.sibling),De=S(re,he),De.return=ce,ce=De):(m(ce,re),De=il(he,ce.mode,De),De.return=ce,ce=De),U(ce)):m(ce,re)}return function(ce,re,he,De){try{xh=0;var nt=mn(ce,re,he,De);return Gf=null,nt}catch(lt){if(lt===Ac||lt===cl)throw lt;var It=Xi(29,lt,null,ce.mode);return It.lanes=De,It.return=ce,It}finally{}}}var Hf=BA(!0),FA=BA(!1),Vs=Y(null),To=null;function xu(o){var u=o.alternate;me(hi,hi.current&1),me(Vs,o),To===null&&(u===null||ft.current!==null||u.memoizedState!==null)&&(To=o)}function UA(o){if(o.tag===22){if(me(hi,hi.current),me(Vs,o),To===null){var u=o.alternate;u!==null&&u.memoizedState!==null&&(To=o)}}else _u()}function _u(){me(hi,hi.current),me(Vs,Vs.current)}function hl(o){ne(Vs),To===o&&(To=null),ne(hi)}var hi=Y(0);function Ep(o){for(var u=o;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||By(m)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function W0(o,u,m,y){u=o.memoizedState,m=m(y,u),m=m==null?u:h({},u,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var Z0={enqueueSetState:function(o,u,m){o=o._reactInternals;var y=gs(),S=Ee(y);S.payload=u,m!=null&&(S.callback=m),u=Me(o,S,y),u!==null&&(vs(u,o,y),Fe(u,o,y))},enqueueReplaceState:function(o,u,m){o=o._reactInternals;var y=gs(),S=Ee(y);S.tag=1,S.payload=u,m!=null&&(S.callback=m),u=Me(o,S,y),u!==null&&(vs(u,o,y),Fe(u,o,y))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var m=gs(),y=Ee(m);y.tag=2,u!=null&&(y.callback=u),u=Me(o,y,m),u!==null&&(vs(u,o,m),Fe(u,o,m))}};function $A(o,u,m,y,S,R,U){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,R,U):u.prototype&&u.prototype.isPureReactComponent?!Ci(m,y)||!Ci(S,R):!0}function zA(o,u,m,y){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,y),u.state!==o&&Z0.enqueueReplaceState(u,u.state,null)}function wc(o,u){var m=u;if("ref"in u){m={};for(var y in u)y!=="ref"&&(m[y]=u[y])}if(o=o.defaultProps){m===u&&(m=h({},m));for(var S in o)m[S]===void 0&&(m[S]=o[S])}return m}var Tp=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function GA(o){Tp(o)}function HA(o){console.error(o)}function KA(o){Tp(o)}function Ap(o,u){try{var m=o.onUncaughtError;m(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function qA(o,u,m){try{var y=o.onCaughtError;y(m.value,{componentStack:m.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function X0(o,u,m){return m=Ee(m),m.tag=3,m.payload={element:null},m.callback=function(){Ap(o,u)},m}function VA(o){return o=Ee(o),o.tag=3,o}function YA(o,u,m,y){var S=m.type.getDerivedStateFromError;if(typeof S=="function"){var R=y.value;o.payload=function(){return S(R)},o.callback=function(){qA(u,m,y)}}var U=m.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(o.callback=function(){qA(u,m,y),typeof S!="function"&&(Lu===null?Lu=new Set([this]):Lu.add(this));var q=y.stack;this.componentDidCatch(y.value,{componentStack:q!==null?q:""})})}function MF(o,u,m,y,S){if(m.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=m.alternate,u!==null&&al(u,m,S,!0),m=Vs.current,m!==null){switch(m.tag){case 13:return To===null?_y():m.alternate===null&&Yn===0&&(Yn=3),m.flags&=-257,m.flags|=65536,m.lanes=S,y===pu?m.flags|=16384:(u=m.updateQueue,u===null?m.updateQueue=new Set([y]):u.add(y),Ey(o,y,S)),!1;case 22:return m.flags|=65536,y===pu?m.flags|=16384:(u=m.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},m.updateQueue=u):(m=u.retryQueue,m===null?u.retryQueue=new Set([y]):m.add(y)),Ey(o,y,S)),!1}throw Error(i(435,m.tag))}return Ey(o,y,S),_y(),!1}if(ht)return u=Vs.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=S,y!==ri&&(o=Error(i(422),{cause:y}),Ur(Wi(o,m)))):(y!==ri&&(u=Error(i(423),{cause:y}),Ur(Wi(u,m))),o=o.current.alternate,o.flags|=65536,S&=-S,o.lanes|=S,y=Wi(y,m),S=X0(o.stateNode,y,S),Ye(o,S),Yn!==4&&(Yn=2)),!1;var R=Error(i(520),{cause:y});if(R=Wi(R,m),Ch===null?Ch=[R]:Ch.push(R),Yn!==4&&(Yn=2),u===null)return!0;y=Wi(y,m),m=u;do{switch(m.tag){case 3:return m.flags|=65536,o=S&-S,m.lanes|=o,o=X0(m.stateNode,y,o),Ye(m,o),!1;case 1:if(u=m.type,R=m.stateNode,(m.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Lu===null||!Lu.has(R))))return m.flags|=65536,S&=-S,m.lanes|=S,S=VA(S),YA(S,o,m,y),Ye(m,S),!1}m=m.return}while(m!==null);return!1}var WA=Error(i(461)),Ii=!1;function Ji(o,u,m,y){u.child=o===null?FA(u,null,m,y):Hf(u,o.child,m,y)}function ZA(o,u,m,y,S){m=m.render;var R=u.ref;if("ref"in y){var U={};for(var q in y)q!=="ref"&&(U[q]=y[q])}else U=y;return _o(u),y=Hr(o,u,m,U,R,S),q=Jt(),o!==null&&!Ii?(di(o,u,S),ml(o,u,S)):(ht&&q&&Ne(u),u.flags|=1,Ji(o,u,y,S),u.child)}function XA(o,u,m,y,S){if(o===null){var R=m.type;return typeof R=="function"&&!cu(R)&&R.defaultProps===void 0&&m.compare===null?(u.tag=15,u.type=R,QA(o,u,R,y,S)):(o=nl(m.type,null,y,u,u.mode,S),o.ref=u.ref,o.return=u,u.child=o)}if(R=o.child,!sy(o,S)){var U=R.memoizedProps;if(m=m.compare,m=m!==null?m:Ci,m(U,y)&&o.ref===u.ref)return ml(o,u,S)}return u.flags|=1,o=Fr(R,y),o.ref=u.ref,o.return=u,u.child=o}function QA(o,u,m,y,S){if(o!==null){var R=o.memoizedProps;if(Ci(R,y)&&o.ref===u.ref)if(Ii=!1,u.pendingProps=y=R,sy(o,S))(o.flags&131072)!==0&&(Ii=!0);else return u.lanes=o.lanes,ml(o,u,S)}return Q0(o,u,m,y,S)}function JA(o,u,m){var y=u.pendingProps,S=y.children,R=o!==null?o.memoizedState:null;if(y.mode==="hidden"){if((u.flags&128)!==0){if(y=R!==null?R.baseLanes|m:m,o!==null){for(S=u.child=o.child,R=0;S!==null;)R=R|S.lanes|S.childLanes,S=S.sibling;u.childLanes=R&~y}else u.childLanes=0,u.child=null;return ew(o,u,y,m)}if((m&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&kf(u,R!==null?R.cachePool:null),R!==null?Qt(u,R):en(),UA(u);else return u.lanes=u.childLanes=536870912,ew(o,u,R!==null?R.baseLanes|m:m,m)}else R!==null?(kf(u,R.cachePool),Qt(u,R),_u(),u.memoizedState=null):(o!==null&&kf(u,null),en(),_u());return Ji(o,u,S,m),u.child}function ew(o,u,m,y){var S=oh();return S=S===null?null:{parent:zn._currentValue,pool:S},u.memoizedState={baseLanes:m,cachePool:S},o!==null&&kf(u,null),en(),UA(u),o!==null&&al(o,u,y,!0),null}function wp(o,u){var m=u.ref;if(m===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(i(284));(o===null||o.ref!==m)&&(u.flags|=4194816)}}function Q0(o,u,m,y,S){return _o(u),m=Hr(o,u,m,y,void 0,S),y=Jt(),o!==null&&!Ii?(di(o,u,S),ml(o,u,S)):(ht&&y&&Ne(u),u.flags|=1,Ji(o,u,m,S),u.child)}function tw(o,u,m,y,S,R){return _o(u),u.updateQueue=null,m=fl(u,y,m,S),ds(o),y=Jt(),o!==null&&!Ii?(di(o,u,R),ml(o,u,R)):(ht&&y&&Ne(u),u.flags|=1,Ji(o,u,m,R),u.child)}function nw(o,u,m,y,S){if(_o(u),u.stateNode===null){var R=Na,U=m.contextType;typeof U=="object"&&U!==null&&(R=Pi(U)),R=new m(y,R),u.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=Z0,u.stateNode=R,R._reactInternals=u,R=u.stateNode,R.props=y,R.state=u.memoizedState,R.refs={},ae(u),U=m.contextType,R.context=typeof U=="object"&&U!==null?Pi(U):Na,R.state=u.memoizedState,U=m.getDerivedStateFromProps,typeof U=="function"&&(W0(u,m,U,y),R.state=u.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(U=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),U!==R.state&&Z0.enqueueReplaceState(R,R.state,null),St(u,y,R,S),ze(),R.state=u.memoizedState),typeof R.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(o===null){R=u.stateNode;var q=u.memoizedProps,te=wc(m,q);R.props=te;var ge=R.context,Oe=m.contextType;U=Na,typeof Oe=="object"&&Oe!==null&&(U=Pi(Oe));var ke=m.getDerivedStateFromProps;Oe=typeof ke=="function"||typeof R.getSnapshotBeforeUpdate=="function",q=u.pendingProps!==q,Oe||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(q||ge!==U)&&zA(u,R,y,U),W=!1;var be=u.memoizedState;R.state=be,St(u,y,R,S),ze(),ge=u.memoizedState,q||be!==ge||W?(typeof ke=="function"&&(W0(u,m,ke,y),ge=u.memoizedState),(te=W||$A(u,m,te,y,be,ge,U))?(Oe||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(u.flags|=4194308)):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=ge),R.props=y,R.state=ge,R.context=U,y=te):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{R=u.stateNode,le(o,u),U=u.memoizedProps,Oe=wc(m,U),R.props=Oe,ke=u.pendingProps,be=R.context,ge=m.contextType,te=Na,typeof ge=="object"&&ge!==null&&(te=Pi(ge)),q=m.getDerivedStateFromProps,(ge=typeof q=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(U!==ke||be!==te)&&zA(u,R,y,te),W=!1,be=u.memoizedState,R.state=be,St(u,y,R,S),ze();var Se=u.memoizedState;U!==ke||be!==Se||W||o!==null&&o.dependencies!==null&&Df(o.dependencies)?(typeof q=="function"&&(W0(u,m,q,y),Se=u.memoizedState),(Oe=W||$A(u,m,Oe,y,be,Se,te)||o!==null&&o.dependencies!==null&&Df(o.dependencies))?(ge||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(y,Se,te),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(y,Se,te)),typeof R.componentDidUpdate=="function"&&(u.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof R.componentDidUpdate!="function"||U===o.memoizedProps&&be===o.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&be===o.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=Se),R.props=y,R.state=Se,R.context=te,y=Oe):(typeof R.componentDidUpdate!="function"||U===o.memoizedProps&&be===o.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&be===o.memoizedState||(u.flags|=1024),y=!1)}return R=y,wp(o,u),y=(u.flags&128)!==0,R||y?(R=u.stateNode,m=y&&typeof m.getDerivedStateFromError!="function"?null:R.render(),u.flags|=1,o!==null&&y?(u.child=Hf(u,o.child,null,S),u.child=Hf(u,null,m,S)):Ji(o,u,m,S),u.memoizedState=R.state,o=u.child):o=ml(o,u,S),o}function iw(o,u,m,y){return xo(),u.flags|=256,Ji(o,u,m,y),u.child}var J0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ey(o){return{baseLanes:o,cachePool:up()}}function ty(o,u,m){return o=o!==null?o.childLanes&~m:0,u&&(o|=Ys),o}function rw(o,u,m){var y=u.pendingProps,S=!1,R=(u.flags&128)!==0,U;if((U=R)||(U=o!==null&&o.memoizedState===null?!1:(hi.current&2)!==0),U&&(S=!0,u.flags&=-129),U=(u.flags&32)!==0,u.flags&=-33,o===null){if(ht){if(S?xu(u):_u(),ht){var q=Xe,te;if(te=q){e:{for(te=q,q=An;te.nodeType!==8;){if(!q){q=null;break e}if(te=za(te.nextSibling),te===null){q=null;break e}}q=te}q!==null?(u.memoizedState={dehydrated:q,treeContext:j!==null?{id:H,overflow:ee}:null,retryLane:536870912,hydrationErrors:null},te=Xi(18,null,null,0),te.stateNode=q,te.return=u,u.child=te,Ze=u,Xe=null,te=!0):te=!1}te||Zn(u)}if(q=u.memoizedState,q!==null&&(q=q.dehydrated,q!==null))return By(q)?u.lanes=32:u.lanes=536870912,null;hl(u)}return q=y.children,y=y.fallback,S?(_u(),S=u.mode,q=Lp({mode:"hidden",children:q},S),y=Ks(y,S,m,null),q.return=u,y.return=u,q.sibling=y,u.child=q,S=u.child,S.memoizedState=ey(m),S.childLanes=ty(o,U,m),u.memoizedState=J0,y):(xu(u),ny(u,q))}if(te=o.memoizedState,te!==null&&(q=te.dehydrated,q!==null)){if(R)u.flags&256?(xu(u),u.flags&=-257,u=iy(o,u,m)):u.memoizedState!==null?(_u(),u.child=o.child,u.flags|=128,u=null):(_u(),S=y.fallback,q=u.mode,y=Lp({mode:"visible",children:y.children},q),S=Ks(S,q,m,null),S.flags|=2,y.return=u,S.return=u,y.sibling=S,u.child=y,Hf(u,o.child,null,m),y=u.child,y.memoizedState=ey(m),y.childLanes=ty(o,U,m),u.memoizedState=J0,u=S);else if(xu(u),By(q)){if(U=q.nextSibling&&q.nextSibling.dataset,U)var ge=U.dgst;U=ge,y=Error(i(419)),y.stack="",y.digest=U,Ur({value:y,source:null,stack:null}),u=iy(o,u,m)}else if(Ii||al(o,u,m,!1),U=(m&o.childLanes)!==0,Ii||U){if(U=Ln,U!==null&&(y=m&-m,y=(y&42)!==0?1:ac(y),y=(y&(U.suspendedLanes|m))!==0?0:y,y!==0&&y!==te.retryLane))throw te.retryLane=y,bo(o,y),vs(U,o,y),WA;q.data==="$?"||_y(),u=iy(o,u,m)}else q.data==="$?"?(u.flags|=192,u.child=o.child,u=null):(o=te.treeContext,Xe=za(q.nextSibling),Ze=u,ht=!0,dn=null,An=!1,o!==null&&(_[D++]=H,_[D++]=ee,_[D++]=j,H=o.id,ee=o.overflow,j=u),u=ny(u,y.children),u.flags|=4096);return u}return S?(_u(),S=y.fallback,q=u.mode,te=o.child,ge=te.sibling,y=Fr(te,{mode:"hidden",children:y.children}),y.subtreeFlags=te.subtreeFlags&65011712,ge!==null?S=Fr(ge,S):(S=Ks(S,q,m,null),S.flags|=2),S.return=u,y.return=u,y.sibling=S,u.child=y,y=S,S=u.child,q=o.child.memoizedState,q===null?q=ey(m):(te=q.cachePool,te!==null?(ge=zn._currentValue,te=te.parent!==ge?{parent:ge,pool:ge}:te):te=up(),q={baseLanes:q.baseLanes|m,cachePool:te}),S.memoizedState=q,S.childLanes=ty(o,U,m),u.memoizedState=J0,y):(xu(u),m=o.child,o=m.sibling,m=Fr(m,{mode:"visible",children:y.children}),m.return=u,m.sibling=null,o!==null&&(U=u.deletions,U===null?(u.deletions=[o],u.flags|=16):U.push(o)),u.child=m,u.memoizedState=null,m)}function ny(o,u){return u=Lp({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function Lp(o,u){return o=Xi(22,o,null,u),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function iy(o,u,m){return Hf(u,o.child,null,m),o=ny(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function sw(o,u,m){o.lanes|=u;var y=o.alternate;y!==null&&(y.lanes|=u),sl(o.return,u,m)}function ry(o,u,m,y,S){var R=o.memoizedState;R===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:m,tailMode:S}:(R.isBackwards=u,R.rendering=null,R.renderingStartTime=0,R.last=y,R.tail=m,R.tailMode=S)}function aw(o,u,m){var y=u.pendingProps,S=y.revealOrder,R=y.tail;if(Ji(o,u,y.children,m),y=hi.current,(y&2)!==0)y=y&1|2,u.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&sw(o,m,u);else if(o.tag===19)sw(o,m,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}switch(me(hi,y),S){case"forwards":for(m=u.child,S=null;m!==null;)o=m.alternate,o!==null&&Ep(o)===null&&(S=m),m=m.sibling;m=S,m===null?(S=u.child,u.child=null):(S=m.sibling,m.sibling=null),ry(u,!1,S,m,R);break;case"backwards":for(m=null,S=u.child,u.child=null;S!==null;){if(o=S.alternate,o!==null&&Ep(o)===null){u.child=S;break}o=S.sibling,S.sibling=m,m=S,S=o}ry(u,!0,m,null,R);break;case"together":ry(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function ml(o,u,m){if(o!==null&&(u.dependencies=o.dependencies),wu|=u.lanes,(m&u.childLanes)===0)if(o!==null){if(al(o,u,m,!1),(m&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(i(153));if(u.child!==null){for(o=u.child,m=Fr(o,o.pendingProps),u.child=m,m.return=u;o.sibling!==null;)o=o.sibling,m=m.sibling=Fr(o,o.pendingProps),m.return=u;m.sibling=null}return u.child}function sy(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Df(o)))}function kF(o,u,m){switch(u.tag){case 3:Ue(u,u.stateNode.containerInfo),qs(u,zn,o.memoizedState.cache),xo();break;case 27:case 5:je(u);break;case 4:Ue(u,u.stateNode.containerInfo);break;case 10:qs(u,u.type,u.memoizedProps.value);break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(xu(u),u.flags|=128,null):(m&u.child.childLanes)!==0?rw(o,u,m):(xu(u),o=ml(o,u,m),o!==null?o.sibling:null);xu(u);break;case 19:var S=(o.flags&128)!==0;if(y=(m&u.childLanes)!==0,y||(al(o,u,m,!1),y=(m&u.childLanes)!==0),S){if(y)return aw(o,u,m);u.flags|=128}if(S=u.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),me(hi,hi.current),y)break;return null;case 22:case 23:return u.lanes=0,JA(o,u,m);case 24:qs(u,zn,o.memoizedState.cache)}return ml(o,u,m)}function ow(o,u,m){if(o!==null)if(o.memoizedProps!==u.pendingProps)Ii=!0;else{if(!sy(o,m)&&(u.flags&128)===0)return Ii=!1,kF(o,u,m);Ii=(o.flags&131072)!==0}else Ii=!1,ht&&(u.flags&1048576)!==0&&_e(u,v,u.index);switch(u.lanes=0,u.tag){case 16:e:{o=u.pendingProps;var y=u.elementType,S=y._init;if(y=S(y._payload),u.type=y,typeof y=="function")cu(y)?(o=wc(y,o),u.tag=1,u=nw(null,u,y,o,m)):(u.tag=0,u=Q0(null,u,y,o,m));else{if(y!=null){if(S=y.$$typeof,S===M){u.tag=11,u=ZA(null,u,y,o,m);break e}else if(S===F){u.tag=14,u=XA(null,u,y,o,m);break e}}throw u=se(y)||y,Error(i(306,u,""))}}return u;case 0:return Q0(o,u,u.type,u.pendingProps,m);case 1:return y=u.type,S=wc(y,u.pendingProps),nw(o,u,y,S,m);case 3:e:{if(Ue(u,u.stateNode.containerInfo),o===null)throw Error(i(387));y=u.pendingProps;var R=u.memoizedState;S=R.element,le(o,u),St(u,y,null,m);var U=u.memoizedState;if(y=U.cache,qs(u,zn,y),y!==R.cache&&du(u,[zn],m,!0),ze(),y=U.element,R.isDehydrated)if(R={element:y,isDehydrated:!1,cache:U.cache},u.updateQueue.baseState=R,u.memoizedState=R,u.flags&256){u=iw(o,u,y,m);break e}else if(y!==S){S=Wi(Error(i(424)),u),Ur(S),u=iw(o,u,y,m);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Xe=za(o.firstChild),Ze=u,ht=!0,dn=null,An=!0,m=FA(u,null,y,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(xo(),y===S){u=ml(o,u,m);break e}Ji(o,u,y,m)}u=u.child}return u;case 26:return wp(o,u),o===null?(m=f1(u.type,null,u.pendingProps,null))?u.memoizedState=m:ht||(m=u.type,o=u.pendingProps,y=$p(Ae.current).createElement(m),y[In]=u,y[Si]=o,tr(y,m,o),vn(y),u.stateNode=y):u.memoizedState=f1(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return je(u),o===null&&ht&&(y=u.stateNode=l1(u.type,u.pendingProps,Ae.current),Ze=u,An=!0,S=Xe,Ru(u.type)?(Fy=S,Xe=za(y.firstChild)):Xe=S),Ji(o,u,u.pendingProps.children,m),wp(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&ht&&((S=y=Xe)&&(y=uU(y,u.type,u.pendingProps,An),y!==null?(u.stateNode=y,Ze=u,Xe=za(y.firstChild),An=!1,S=!0):S=!1),S||Zn(u)),je(u),S=u.type,R=u.pendingProps,U=o!==null?o.memoizedProps:null,y=R.children,ky(S,R)?y=null:U!==null&&ky(S,U)&&(u.flags|=32),u.memoizedState!==null&&(S=Hr(o,u,si,null,null,m),jh._currentValue=S),wp(o,u),Ji(o,u,y,m),u.child;case 6:return o===null&&ht&&((o=m=Xe)&&(m=cU(m,u.pendingProps,An),m!==null?(u.stateNode=m,Ze=u,Xe=null,o=!0):o=!1),o||Zn(u)),null;case 13:return rw(o,u,m);case 4:return Ue(u,u.stateNode.containerInfo),y=u.pendingProps,o===null?u.child=Hf(u,null,y,m):Ji(o,u,y,m),u.child;case 11:return ZA(o,u,u.type,u.pendingProps,m);case 7:return Ji(o,u,u.pendingProps,m),u.child;case 8:return Ji(o,u,u.pendingProps.children,m),u.child;case 12:return Ji(o,u,u.pendingProps.children,m),u.child;case 10:return y=u.pendingProps,qs(u,u.type,y.value),Ji(o,u,y.children,m),u.child;case 9:return S=u.type._context,y=u.pendingProps.children,_o(u),S=Pi(S),y=y(S),u.flags|=1,Ji(o,u,y,m),u.child;case 14:return XA(o,u,u.type,u.pendingProps,m);case 15:return QA(o,u,u.type,u.pendingProps,m);case 19:return aw(o,u,m);case 31:return y=u.pendingProps,m=u.mode,y={mode:y.mode,children:y.children},o===null?(m=Lp(y,m),m.ref=u.ref,u.child=m,m.return=u,u=m):(m=Fr(o.child,y),m.ref=u.ref,u.child=m,m.return=u,u=m),u;case 22:return JA(o,u,m);case 24:return _o(u),y=Pi(zn),o===null?(S=oh(),S===null&&(S=Ln,R=Mf(),S.pooledCache=R,R.refCount++,R!==null&&(S.pooledCacheLanes|=m),S=R),u.memoizedState={parent:y,cache:S},ae(u),qs(u,zn,S)):((o.lanes&m)!==0&&(le(o,u),St(u,null,null,m),ze()),S=o.memoizedState,R=u.memoizedState,S.parent!==y?(S={parent:y,cache:y},u.memoizedState=S,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=S),qs(u,zn,y)):(y=R.cache,qs(u,zn,y),y!==S.cache&&du(u,[zn],m,!0))),Ji(o,u,u.pendingProps.children,m),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function pl(o){o.flags|=4}function lw(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!g1(u)){if(u=Vs.current,u!==null&&((Ht&4194048)===Ht?To!==null:(Ht&62914560)!==Ht&&(Ht&536870912)===0||u!==To))throw $=pu,lh;o.flags|=8192}}function Cp(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?ic():536870912,o.lanes|=u,Yf|=u)}function Sh(o,u){if(!ht)switch(o.tailMode){case"hidden":u=o.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var y=null;m!==null;)m.alternate!==null&&(y=m),m=m.sibling;y===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function Hn(o){var u=o.alternate!==null&&o.alternate.child===o.child,m=0,y=0;if(u)for(var S=o.child;S!==null;)m|=S.lanes|S.childLanes,y|=S.subtreeFlags&65011712,y|=S.flags&65011712,S.return=o,S=S.sibling;else for(S=o.child;S!==null;)m|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=o,S=S.sibling;return o.subtreeFlags|=y,o.childLanes=m,u}function NF(o,u,m){var y=u.pendingProps;switch(He(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(u),null;case 1:return Hn(u),null;case 3:return m=u.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),fs(zn),fe(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(rl(u)?pl(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Pf())),Hn(u),null;case 26:return m=u.memoizedState,o===null?(pl(u),m!==null?(Hn(u),lw(u,m)):(Hn(u),u.flags&=-16777217)):m?m!==o.memoizedState?(pl(u),Hn(u),lw(u,m)):(Hn(u),u.flags&=-16777217):(o.memoizedProps!==y&&pl(u),Hn(u),u.flags&=-16777217),null;case 27:Ge(u),m=Ae.current;var S=u.type;if(o!==null&&u.stateNode!=null)o.memoizedProps!==y&&pl(u);else{if(!y){if(u.stateNode===null)throw Error(i(166));return Hn(u),null}o=Te.current,rl(u)?fu(u):(o=l1(S,y,m),u.stateNode=o,pl(u))}return Hn(u),null;case 5:if(Ge(u),m=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==y&&pl(u);else{if(!y){if(u.stateNode===null)throw Error(i(166));return Hn(u),null}if(o=Te.current,rl(u))fu(u);else{switch(S=$p(Ae.current),o){case 1:o=S.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:o=S.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":o=S.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":o=S.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":o=S.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof y.is=="string"?S.createElement("select",{is:y.is}):S.createElement("select"),y.multiple?o.multiple=!0:y.size&&(o.size=y.size);break;default:o=typeof y.is=="string"?S.createElement(m,{is:y.is}):S.createElement(m)}}o[In]=u,o[Si]=y;e:for(S=u.child;S!==null;){if(S.tag===5||S.tag===6)o.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===u)break e;for(;S.sibling===null;){if(S.return===null||S.return===u)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}u.stateNode=o;e:switch(tr(o,m,y),m){case"button":case"input":case"select":case"textarea":o=!!y.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&pl(u)}}return Hn(u),u.flags&=-16777217,null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==y&&pl(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(i(166));if(o=Ae.current,rl(u)){if(o=u.stateNode,m=u.memoizedProps,y=null,S=Ze,S!==null)switch(S.tag){case 27:case 5:y=S.memoizedProps}o[In]=u,o=!!(o.nodeValue===m||y!==null&&y.suppressHydrationWarning===!0||t1(o.nodeValue,m)),o||Zn(u)}else o=$p(o).createTextNode(y),o[In]=u,u.stateNode=o}return Hn(u),null;case 13:if(y=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(S=rl(u),y!==null&&y.dehydrated!==null){if(o===null){if(!S)throw Error(i(318));if(S=u.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(i(317));S[In]=u}else xo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Hn(u),S=!1}else S=Pf(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=S),S=!0;if(!S)return u.flags&256?(hl(u),u):(hl(u),null)}if(hl(u),(u.flags&128)!==0)return u.lanes=m,u;if(m=y!==null,o=o!==null&&o.memoizedState!==null,m){y=u.child,S=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(S=y.alternate.memoizedState.cachePool.pool);var R=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(R=y.memoizedState.cachePool.pool),R!==S&&(y.flags|=2048)}return m!==o&&m&&(u.child.flags|=8192),Cp(u,u.updateQueue),Hn(u),null;case 4:return fe(),o===null&&Ry(u.stateNode.containerInfo),Hn(u),null;case 10:return fs(u.type),Hn(u),null;case 19:if(ne(hi),S=u.memoizedState,S===null)return Hn(u),null;if(y=(u.flags&128)!==0,R=S.rendering,R===null)if(y)Sh(S,!1);else{if(Yn!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(R=Ep(o),R!==null){for(u.flags|=128,Sh(S,!1),o=R.updateQueue,u.updateQueue=o,Cp(u,o),u.subtreeFlags=0,o=m,m=u.child;m!==null;)_c(m,o),m=m.sibling;return me(hi,hi.current&1|2),u.child}o=o.sibling}S.tail!==null&&Be()>Pp&&(u.flags|=128,y=!0,Sh(S,!1),u.lanes=4194304)}else{if(!y)if(o=Ep(R),o!==null){if(u.flags|=128,y=!0,o=o.updateQueue,u.updateQueue=o,Cp(u,o),Sh(S,!0),S.tail===null&&S.tailMode==="hidden"&&!R.alternate&&!ht)return Hn(u),null}else 2*Be()-S.renderingStartTime>Pp&&m!==536870912&&(u.flags|=128,y=!0,Sh(S,!1),u.lanes=4194304);S.isBackwards?(R.sibling=u.child,u.child=R):(o=S.last,o!==null?o.sibling=R:u.child=R,S.last=R)}return S.tail!==null?(u=S.tail,S.rendering=u,S.tail=u.sibling,S.renderingStartTime=Be(),u.sibling=null,o=hi.current,me(hi,y?o&1|2:o&1),u):(Hn(u),null);case 22:case 23:return hl(u),Ct(),y=u.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(m&536870912)!==0&&(u.flags&128)===0&&(Hn(u),u.subtreeFlags&6&&(u.flags|=8192)):Hn(u),m=u.updateQueue,m!==null&&Cp(u,m.retryQueue),m=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048),o!==null&&ne(ul),null;case 24:return m=null,o!==null&&(m=o.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),fs(zn),Hn(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function jF(o,u){switch(He(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return fs(zn),fe(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return Ge(u),null;case 13:if(hl(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(i(340));xo()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return ne(hi),null;case 4:return fe(),null;case 10:return fs(u.type),null;case 22:case 23:return hl(u),Ct(),o!==null&&ne(ul),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return fs(zn),null;case 25:return null;default:return null}}function uw(o,u){switch(He(u),u.tag){case 3:fs(zn),fe();break;case 26:case 27:case 5:Ge(u);break;case 4:fe();break;case 13:hl(u);break;case 19:ne(hi);break;case 10:fs(u.type);break;case 22:case 23:hl(u),Ct(),o!==null&&ne(ul);break;case 24:fs(zn)}}function Eh(o,u){try{var m=u.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var S=y.next;m=S;do{if((m.tag&o)===o){y=void 0;var R=m.create,U=m.inst;y=R(),U.destroy=y}m=m.next}while(m!==S)}}catch(q){bn(u,u.return,q)}}function Su(o,u,m){try{var y=u.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var R=S.next;y=R;do{if((y.tag&o)===o){var U=y.inst,q=U.destroy;if(q!==void 0){U.destroy=void 0,S=u;var te=m,ge=q;try{ge()}catch(Oe){bn(S,te,Oe)}}}y=y.next}while(y!==R)}}catch(Oe){bn(u,u.return,Oe)}}function cw(o){var u=o.updateQueue;if(u!==null){var m=o.stateNode;try{Et(u,m)}catch(y){bn(o,o.return,y)}}}function fw(o,u,m){m.props=wc(o.type,o.memoizedProps),m.state=o.memoizedState;try{m.componentWillUnmount()}catch(y){bn(o,u,y)}}function Th(o,u){try{var m=o.ref;if(m!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof m=="function"?o.refCleanup=m(y):m.current=y}}catch(S){bn(o,u,S)}}function Ao(o,u){var m=o.ref,y=o.refCleanup;if(m!==null)if(typeof y=="function")try{y()}catch(S){bn(o,u,S)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(S){bn(o,u,S)}else m.current=null}function dw(o){var u=o.type,m=o.memoizedProps,y=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":m.autoFocus&&y.focus();break e;case"img":m.src?y.src=m.src:m.srcSet&&(y.srcset=m.srcSet)}}catch(S){bn(o,o.return,S)}}function ay(o,u,m){try{var y=o.stateNode;rU(y,o.type,m,u),y[Si]=u}catch(S){bn(o,o.return,S)}}function hw(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Ru(o.type)||o.tag===4}function oy(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||hw(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Ru(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ly(o,u,m){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(o,u):(u=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,u.appendChild(o),m=m._reactRootContainer,m!=null||u.onclick!==null||(u.onclick=Up));else if(y!==4&&(y===27&&Ru(o.type)&&(m=o.stateNode,u=null),o=o.child,o!==null))for(ly(o,u,m),o=o.sibling;o!==null;)ly(o,u,m),o=o.sibling}function Op(o,u,m){var y=o.tag;if(y===5||y===6)o=o.stateNode,u?m.insertBefore(o,u):m.appendChild(o);else if(y!==4&&(y===27&&Ru(o.type)&&(m=o.stateNode),o=o.child,o!==null))for(Op(o,u,m),o=o.sibling;o!==null;)Op(o,u,m),o=o.sibling}function mw(o){var u=o.stateNode,m=o.memoizedProps;try{for(var y=o.type,S=u.attributes;S.length;)u.removeAttributeNode(S[0]);tr(u,y,m),u[In]=o,u[Si]=m}catch(R){bn(o,o.return,R)}}var gl=!1,Xn=!1,uy=!1,pw=typeof WeakSet=="function"?WeakSet:Set,Mi=null;function BF(o,u){if(o=o.containerInfo,Iy=Vp,o=Xo(o),vo(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var y=m.getSelection&&m.getSelection();if(y&&y.rangeCount!==0){m=y.anchorNode;var S=y.anchorOffset,R=y.focusNode;y=y.focusOffset;try{m.nodeType,R.nodeType}catch{m=null;break e}var U=0,q=-1,te=-1,ge=0,Oe=0,ke=o,be=null;t:for(;;){for(var Se;ke!==m||S!==0&&ke.nodeType!==3||(q=U+S),ke!==R||y!==0&&ke.nodeType!==3||(te=U+y),ke.nodeType===3&&(U+=ke.nodeValue.length),(Se=ke.firstChild)!==null;)be=ke,ke=Se;for(;;){if(ke===o)break t;if(be===m&&++ge===S&&(q=U),be===R&&++Oe===y&&(te=U),(Se=ke.nextSibling)!==null)break;ke=be,be=ke.parentNode}ke=Se}m=q===-1||te===-1?null:{start:q,end:te}}else m=null}m=m||{start:0,end:0}}else m=null;for(My={focusedElem:o,selectionRange:m},Vp=!1,Mi=u;Mi!==null;)if(u=Mi,o=u.child,(u.subtreeFlags&1024)!==0&&o!==null)o.return=u,Mi=o;else for(;Mi!==null;){switch(u=Mi,R=u.alternate,o=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&R!==null){o=void 0,m=u,S=R.memoizedProps,R=R.memoizedState,y=m.stateNode;try{var bt=wc(m.type,S,m.elementType===m.type);o=y.getSnapshotBeforeUpdate(bt,R),y.__reactInternalSnapshotBeforeUpdate=o}catch(mt){bn(m,m.return,mt)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,m=o.nodeType,m===9)jy(o);else if(m===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":jy(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=u.sibling,o!==null){o.return=u.return,Mi=o;break}Mi=u.return}}function gw(o,u,m){var y=m.flags;switch(m.tag){case 0:case 11:case 15:Eu(o,m),y&4&&Eh(5,m);break;case 1:if(Eu(o,m),y&4)if(o=m.stateNode,u===null)try{o.componentDidMount()}catch(U){bn(m,m.return,U)}else{var S=wc(m.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(S,u,o.__reactInternalSnapshotBeforeUpdate)}catch(U){bn(m,m.return,U)}}y&64&&cw(m),y&512&&Th(m,m.return);break;case 3:if(Eu(o,m),y&64&&(o=m.updateQueue,o!==null)){if(u=null,m.child!==null)switch(m.child.tag){case 27:case 5:u=m.child.stateNode;break;case 1:u=m.child.stateNode}try{Et(o,u)}catch(U){bn(m,m.return,U)}}break;case 27:u===null&&y&4&&mw(m);case 26:case 5:Eu(o,m),u===null&&y&4&&dw(m),y&512&&Th(m,m.return);break;case 12:Eu(o,m);break;case 13:Eu(o,m),y&4&&bw(o,m),y&64&&(o=m.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(m=VF.bind(null,m),fU(o,m))));break;case 22:if(y=m.memoizedState!==null||gl,!y){u=u!==null&&u.memoizedState!==null||Xn,S=gl;var R=Xn;gl=y,(Xn=u)&&!R?Tu(o,m,(m.subtreeFlags&8772)!==0):Eu(o,m),gl=S,Xn=R}break;case 30:break;default:Eu(o,m)}}function vw(o){var u=o.alternate;u!==null&&(o.alternate=null,vw(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&ha(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var kn=null,Kr=!1;function vl(o,u,m){for(m=m.child;m!==null;)yw(o,u,m),m=m.sibling}function yw(o,u,m){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(rt,m)}catch{}switch(m.tag){case 26:Xn||Ao(m,u),vl(o,u,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Xn||Ao(m,u);var y=kn,S=Kr;Ru(m.type)&&(kn=m.stateNode,Kr=!1),vl(o,u,m),Ih(m.stateNode),kn=y,Kr=S;break;case 5:Xn||Ao(m,u);case 6:if(y=kn,S=Kr,kn=null,vl(o,u,m),kn=y,Kr=S,kn!==null)if(Kr)try{(kn.nodeType===9?kn.body:kn.nodeName==="HTML"?kn.ownerDocument.body:kn).removeChild(m.stateNode)}catch(R){bn(m,u,R)}else try{kn.removeChild(m.stateNode)}catch(R){bn(m,u,R)}break;case 18:kn!==null&&(Kr?(o=kn,a1(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,m.stateNode),$h(o)):a1(kn,m.stateNode));break;case 4:y=kn,S=Kr,kn=m.stateNode.containerInfo,Kr=!0,vl(o,u,m),kn=y,Kr=S;break;case 0:case 11:case 14:case 15:Xn||Su(2,m,u),Xn||Su(4,m,u),vl(o,u,m);break;case 1:Xn||(Ao(m,u),y=m.stateNode,typeof y.componentWillUnmount=="function"&&fw(m,u,y)),vl(o,u,m);break;case 21:vl(o,u,m);break;case 22:Xn=(y=Xn)||m.memoizedState!==null,vl(o,u,m),Xn=y;break;default:vl(o,u,m)}}function bw(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{$h(o)}catch(m){bn(u,u.return,m)}}function FF(o){switch(o.tag){case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new pw),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new pw),u;default:throw Error(i(435,o.tag))}}function cy(o,u){var m=FF(o);u.forEach(function(y){var S=YF.bind(null,o,y);m.has(y)||(m.add(y),y.then(S,S))})}function hs(o,u){var m=u.deletions;if(m!==null)for(var y=0;y<m.length;y++){var S=m[y],R=o,U=u,q=U;e:for(;q!==null;){switch(q.tag){case 27:if(Ru(q.type)){kn=q.stateNode,Kr=!1;break e}break;case 5:kn=q.stateNode,Kr=!1;break e;case 3:case 4:kn=q.stateNode.containerInfo,Kr=!0;break e}q=q.return}if(kn===null)throw Error(i(160));yw(R,U,S),kn=null,Kr=!1,R=S.alternate,R!==null&&(R.return=null),S.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)xw(u,o),u=u.sibling}var $a=null;function xw(o,u){var m=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:hs(u,o),ms(o),y&4&&(Su(3,o,o.return),Eh(3,o),Su(5,o,o.return));break;case 1:hs(u,o),ms(o),y&512&&(Xn||m===null||Ao(m,m.return)),y&64&&gl&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(m=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=m===null?y:m.concat(y))));break;case 26:var S=$a;if(hs(u,o),ms(o),y&512&&(Xn||m===null||Ao(m,m.return)),y&4){var R=m!==null?m.memoizedState:null;if(y=o.memoizedState,m===null)if(y===null)if(o.stateNode===null){e:{y=o.type,m=o.memoizedProps,S=S.ownerDocument||S;t:switch(y){case"title":R=S.getElementsByTagName("title")[0],(!R||R[yr]||R[In]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=S.createElement(y),S.head.insertBefore(R,S.querySelector("head > title"))),tr(R,y,m),R[In]=o,vn(R),y=R;break e;case"link":var U=m1("link","href",S).get(y+(m.href||""));if(U){for(var q=0;q<U.length;q++)if(R=U[q],R.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&R.getAttribute("rel")===(m.rel==null?null:m.rel)&&R.getAttribute("title")===(m.title==null?null:m.title)&&R.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){U.splice(q,1);break t}}R=S.createElement(y),tr(R,y,m),S.head.appendChild(R);break;case"meta":if(U=m1("meta","content",S).get(y+(m.content||""))){for(q=0;q<U.length;q++)if(R=U[q],R.getAttribute("content")===(m.content==null?null:""+m.content)&&R.getAttribute("name")===(m.name==null?null:m.name)&&R.getAttribute("property")===(m.property==null?null:m.property)&&R.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&R.getAttribute("charset")===(m.charSet==null?null:m.charSet)){U.splice(q,1);break t}}R=S.createElement(y),tr(R,y,m),S.head.appendChild(R);break;default:throw Error(i(468,y))}R[In]=o,vn(R),y=R}o.stateNode=y}else p1(S,o.type,o.stateNode);else o.stateNode=h1(S,y,o.memoizedProps);else R!==y?(R===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):R.count--,y===null?p1(S,o.type,o.stateNode):h1(S,y,o.memoizedProps)):y===null&&o.stateNode!==null&&ay(o,o.memoizedProps,m.memoizedProps)}break;case 27:hs(u,o),ms(o),y&512&&(Xn||m===null||Ao(m,m.return)),m!==null&&y&4&&ay(o,o.memoizedProps,m.memoizedProps);break;case 5:if(hs(u,o),ms(o),y&512&&(Xn||m===null||Ao(m,m.return)),o.flags&32){S=o.stateNode;try{qi(S,"")}catch(Se){bn(o,o.return,Se)}}y&4&&o.stateNode!=null&&(S=o.memoizedProps,ay(o,S,m!==null?m.memoizedProps:S)),y&1024&&(uy=!0);break;case 6:if(hs(u,o),ms(o),y&4){if(o.stateNode===null)throw Error(i(162));y=o.memoizedProps,m=o.stateNode;try{m.nodeValue=y}catch(Se){bn(o,o.return,Se)}}break;case 3:if(Hp=null,S=$a,$a=zp(u.containerInfo),hs(u,o),$a=S,ms(o),y&4&&m!==null&&m.memoizedState.isDehydrated)try{$h(u.containerInfo)}catch(Se){bn(o,o.return,Se)}uy&&(uy=!1,_w(o));break;case 4:y=$a,$a=zp(o.stateNode.containerInfo),hs(u,o),ms(o),$a=y;break;case 12:hs(u,o),ms(o);break;case 13:hs(u,o),ms(o),o.child.flags&8192&&o.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(gy=Be()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,cy(o,y)));break;case 22:S=o.memoizedState!==null;var te=m!==null&&m.memoizedState!==null,ge=gl,Oe=Xn;if(gl=ge||S,Xn=Oe||te,hs(u,o),Xn=Oe,gl=ge,ms(o),y&8192)e:for(u=o.stateNode,u._visibility=S?u._visibility&-2:u._visibility|1,S&&(m===null||te||gl||Xn||Lc(o)),m=null,u=o;;){if(u.tag===5||u.tag===26){if(m===null){te=m=u;try{if(R=te.stateNode,S)U=R.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{q=te.stateNode;var ke=te.memoizedProps.style,be=ke!=null&&ke.hasOwnProperty("display")?ke.display:null;q.style.display=be==null||typeof be=="boolean"?"":(""+be).trim()}}catch(Se){bn(te,te.return,Se)}}}else if(u.tag===6){if(m===null){te=u;try{te.stateNode.nodeValue=S?"":te.memoizedProps}catch(Se){bn(te,te.return,Se)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=o.updateQueue,y!==null&&(m=y.retryQueue,m!==null&&(y.retryQueue=null,cy(o,m))));break;case 19:hs(u,o),ms(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,cy(o,y)));break;case 30:break;case 21:break;default:hs(u,o),ms(o)}}function ms(o){var u=o.flags;if(u&2){try{for(var m,y=o.return;y!==null;){if(hw(y)){m=y;break}y=y.return}if(m==null)throw Error(i(160));switch(m.tag){case 27:var S=m.stateNode,R=oy(o);Op(o,R,S);break;case 5:var U=m.stateNode;m.flags&32&&(qi(U,""),m.flags&=-33);var q=oy(o);Op(o,q,U);break;case 3:case 4:var te=m.stateNode.containerInfo,ge=oy(o);ly(o,ge,te);break;default:throw Error(i(161))}}catch(Oe){bn(o,o.return,Oe)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function _w(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;_w(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function Eu(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)gw(o,u.alternate,u),u=u.sibling}function Lc(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Su(4,u,u.return),Lc(u);break;case 1:Ao(u,u.return);var m=u.stateNode;typeof m.componentWillUnmount=="function"&&fw(u,u.return,m),Lc(u);break;case 27:Ih(u.stateNode);case 26:case 5:Ao(u,u.return),Lc(u);break;case 22:u.memoizedState===null&&Lc(u);break;case 30:Lc(u);break;default:Lc(u)}o=o.sibling}}function Tu(o,u,m){for(m=m&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,S=o,R=u,U=R.flags;switch(R.tag){case 0:case 11:case 15:Tu(S,R,m),Eh(4,R);break;case 1:if(Tu(S,R,m),y=R,S=y.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(ge){bn(y,y.return,ge)}if(y=R,S=y.updateQueue,S!==null){var q=y.stateNode;try{var te=S.shared.hiddenCallbacks;if(te!==null)for(S.shared.hiddenCallbacks=null,S=0;S<te.length;S++)dt(te[S],q)}catch(ge){bn(y,y.return,ge)}}m&&U&64&&cw(R),Th(R,R.return);break;case 27:mw(R);case 26:case 5:Tu(S,R,m),m&&y===null&&U&4&&dw(R),Th(R,R.return);break;case 12:Tu(S,R,m);break;case 13:Tu(S,R,m),m&&U&4&&bw(S,R);break;case 22:R.memoizedState===null&&Tu(S,R,m),Th(R,R.return);break;case 30:break;default:Tu(S,R,m)}u=u.sibling}}function fy(o,u){var m=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==m&&(o!=null&&o.refCount++,m!=null&&ll(m))}function dy(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&ll(o))}function wo(o,u,m,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Sw(o,u,m,y),u=u.sibling}function Sw(o,u,m,y){var S=u.flags;switch(u.tag){case 0:case 11:case 15:wo(o,u,m,y),S&2048&&Eh(9,u);break;case 1:wo(o,u,m,y);break;case 3:wo(o,u,m,y),S&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&ll(o)));break;case 12:if(S&2048){wo(o,u,m,y),o=u.stateNode;try{var R=u.memoizedProps,U=R.id,q=R.onPostCommit;typeof q=="function"&&q(U,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(te){bn(u,u.return,te)}}else wo(o,u,m,y);break;case 13:wo(o,u,m,y);break;case 23:break;case 22:R=u.stateNode,U=u.alternate,u.memoizedState!==null?R._visibility&2?wo(o,u,m,y):Ah(o,u):R._visibility&2?wo(o,u,m,y):(R._visibility|=2,Kf(o,u,m,y,(u.subtreeFlags&10256)!==0)),S&2048&&fy(U,u);break;case 24:wo(o,u,m,y),S&2048&&dy(u.alternate,u);break;default:wo(o,u,m,y)}}function Kf(o,u,m,y,S){for(S=S&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var R=o,U=u,q=m,te=y,ge=U.flags;switch(U.tag){case 0:case 11:case 15:Kf(R,U,q,te,S),Eh(8,U);break;case 23:break;case 22:var Oe=U.stateNode;U.memoizedState!==null?Oe._visibility&2?Kf(R,U,q,te,S):Ah(R,U):(Oe._visibility|=2,Kf(R,U,q,te,S)),S&&ge&2048&&fy(U.alternate,U);break;case 24:Kf(R,U,q,te,S),S&&ge&2048&&dy(U.alternate,U);break;default:Kf(R,U,q,te,S)}u=u.sibling}}function Ah(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var m=o,y=u,S=y.flags;switch(y.tag){case 22:Ah(m,y),S&2048&&fy(y.alternate,y);break;case 24:Ah(m,y),S&2048&&dy(y.alternate,y);break;default:Ah(m,y)}u=u.sibling}}var wh=8192;function qf(o){if(o.subtreeFlags&wh)for(o=o.child;o!==null;)Ew(o),o=o.sibling}function Ew(o){switch(o.tag){case 26:qf(o),o.flags&wh&&o.memoizedState!==null&&TU($a,o.memoizedState,o.memoizedProps);break;case 5:qf(o);break;case 3:case 4:var u=$a;$a=zp(o.stateNode.containerInfo),qf(o),$a=u;break;case 22:o.memoizedState===null&&(u=o.alternate,u!==null&&u.memoizedState!==null?(u=wh,wh=16777216,qf(o),wh=u):qf(o));break;default:qf(o)}}function Tw(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function Lh(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var m=0;m<u.length;m++){var y=u[m];Mi=y,ww(y,o)}Tw(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Aw(o),o=o.sibling}function Aw(o){switch(o.tag){case 0:case 11:case 15:Lh(o),o.flags&2048&&Su(9,o,o.return);break;case 3:Lh(o);break;case 12:Lh(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,Rp(o)):Lh(o);break;default:Lh(o)}}function Rp(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var m=0;m<u.length;m++){var y=u[m];Mi=y,ww(y,o)}Tw(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Su(8,u,u.return),Rp(u);break;case 22:m=u.stateNode,m._visibility&2&&(m._visibility&=-3,Rp(u));break;default:Rp(u)}o=o.sibling}}function ww(o,u){for(;Mi!==null;){var m=Mi;switch(m.tag){case 0:case 11:case 15:Su(8,m,u);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var y=m.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:ll(m.memoizedState.cache)}if(y=m.child,y!==null)y.return=m,Mi=y;else e:for(m=o;Mi!==null;){y=Mi;var S=y.sibling,R=y.return;if(vw(y),y===m){Mi=null;break e}if(S!==null){S.return=R,Mi=S;break e}Mi=R}}}var UF={getCacheForType:function(o){var u=Pi(zn),m=u.data.get(o);return m===void 0&&(m=o(),u.data.set(o,m)),m}},$F=typeof WeakMap=="function"?WeakMap:Map,on=0,Ln=null,jt=null,Ht=0,ln=0,ps=null,Au=!1,Vf=!1,hy=!1,yl=0,Yn=0,wu=0,Cc=0,my=0,Ys=0,Yf=0,Ch=null,qr=null,py=!1,gy=0,Pp=1/0,Dp=null,Lu=null,er=0,Cu=null,Wf=null,Zf=0,vy=0,yy=null,Lw=null,Oh=0,by=null;function gs(){if((on&2)!==0&&Ht!==0)return Ht&-Ht;if(X.T!==null){var o=mu;return o!==0?o:wy()}return df()}function Cw(){Ys===0&&(Ys=(Ht&536870912)===0||ht?ff():536870912);var o=Vs.current;return o!==null&&(o.flags|=32),Ys}function vs(o,u,m){(o===Ln&&(ln===2||ln===9)||o.cancelPendingCommit!==null)&&(Xf(o,0),Ou(o,Ht,Ys,!1)),da(o,m),((on&2)===0||o!==Ln)&&(o===Ln&&((on&2)===0&&(Cc|=m),Yn===4&&Ou(o,Ht,Ys,!1)),Lo(o))}function Ow(o,u,m){if((on&6)!==0)throw Error(i(327));var y=!m&&(u&124)===0&&(u&o.expiredLanes)===0||es(o,u),S=y?HF(o,u):Sy(o,u,!0),R=y;do{if(S===0){Vf&&!y&&Ou(o,u,0,!1);break}else{if(m=o.current.alternate,R&&!zF(m)){S=Sy(o,u,!1),R=!1;continue}if(S===2){if(R=u,o.errorRecoveryDisabledLanes&R)var U=0;else U=o.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){u=U;e:{var q=o;S=Ch;var te=q.current.memoizedState.isDehydrated;if(te&&(Xf(q,U).flags|=256),U=Sy(q,U,!1),U!==2){if(hy&&!te){q.errorRecoveryDisabledLanes|=R,Cc|=R,S=4;break e}R=qr,qr=S,R!==null&&(qr===null?qr=R:qr.push.apply(qr,R))}S=U}if(R=!1,S!==2)continue}}if(S===1){Xf(o,0),Ou(o,u,0,!0);break}e:{switch(y=o,R=S,R){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:Ou(y,u,Ys,!Au);break e;case 2:qr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(S=gy+300-Be(),10<S)){if(Ou(y,u,Ys,!Au),Wl(y,0,!0)!==0)break e;y.timeoutHandle=r1(Rw.bind(null,y,m,qr,Dp,py,u,Ys,Cc,Yf,Au,R,2,-0,0),S);break e}Rw(y,m,qr,Dp,py,u,Ys,Cc,Yf,Au,R,0,-0,0)}}break}while(!0);Lo(o)}function Rw(o,u,m,y,S,R,U,q,te,ge,Oe,ke,be,Se){if(o.timeoutHandle=-1,ke=u.subtreeFlags,(ke&8192||(ke&16785408)===16785408)&&(Nh={stylesheets:null,count:0,unsuspend:EU},Ew(u),ke=AU(),ke!==null)){o.cancelPendingCommit=ke(jw.bind(null,o,u,R,m,y,S,U,q,te,Oe,1,be,Se)),Ou(o,R,U,!ge);return}jw(o,u,R,m,y,S,U,q,te)}function zF(o){for(var u=o;;){var m=u.tag;if((m===0||m===11||m===15)&&u.flags&16384&&(m=u.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var y=0;y<m.length;y++){var S=m[y],R=S.getSnapshot;S=S.value;try{if(!ii(R(),S))return!1}catch{return!1}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ou(o,u,m,y){u&=~my,u&=~Cc,o.suspendedLanes|=u,o.pingedLanes&=~u,y&&(o.warmLanes|=u),y=o.expirationTimes;for(var S=u;0<S;){var R=31-En(S),U=1<<R;y[R]=-1,S&=~U}m!==0&&rc(o,m,u)}function Ip(){return(on&6)===0?(Rh(0),!1):!0}function xy(){if(jt!==null){if(ln===0)var o=jt.return;else o=jt,cs=$r=null,cr(o),Gf=null,xh=0,o=jt;for(;o!==null;)uw(o.alternate,o),o=o.return;jt=null}}function Xf(o,u){var m=o.timeoutHandle;m!==-1&&(o.timeoutHandle=-1,aU(m)),m=o.cancelPendingCommit,m!==null&&(o.cancelPendingCommit=null,m()),xy(),Ln=o,jt=m=Fr(o.current,null),Ht=u,ln=0,ps=null,Au=!1,Vf=es(o,u),hy=!1,Yf=Ys=my=Cc=wu=Yn=0,qr=Ch=null,py=!1,(u&8)!==0&&(u|=u&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=u;0<y;){var S=31-En(y),R=1<<S;u|=o[S],y&=~R}return yl=u,el(),m}function Pw(o,u){$e=null,X.H=xp,u===Ac||u===cl?(u=w(),ln=3):u===lh?(u=w(),ln=4):ln=u===WA?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ps=u,jt===null&&(Yn=1,Ap(o,Wi(u,o.current)))}function Dw(){var o=X.H;return X.H=xp,o===null?xp:o}function Iw(){var o=X.A;return X.A=UF,o}function _y(){Yn=4,Au||(Ht&4194048)!==Ht&&Vs.current!==null||(Vf=!0),(wu&134217727)===0&&(Cc&134217727)===0||Ln===null||Ou(Ln,Ht,Ys,!1)}function Sy(o,u,m){var y=on;on|=2;var S=Dw(),R=Iw();(Ln!==o||Ht!==u)&&(Dp=null,Xf(o,u)),u=!1;var U=Yn;e:do try{if(ln!==0&&jt!==null){var q=jt,te=ps;switch(ln){case 8:xy(),U=6;break e;case 3:case 2:case 9:case 6:Vs.current===null&&(u=!0);var ge=ln;if(ln=0,ps=null,Qf(o,q,te,ge),m&&Vf){U=0;break e}break;default:ge=ln,ln=0,ps=null,Qf(o,q,te,ge)}}GF(),U=Yn;break}catch(Oe){Pw(o,Oe)}while(!0);return u&&o.shellSuspendCounter++,cs=$r=null,on=y,X.H=S,X.A=R,jt===null&&(Ln=null,Ht=0,el()),U}function GF(){for(;jt!==null;)Mw(jt)}function HF(o,u){var m=on;on|=2;var y=Dw(),S=Iw();Ln!==o||Ht!==u?(Dp=null,Pp=Be()+500,Xf(o,u)):Vf=es(o,u);e:do try{if(ln!==0&&jt!==null){u=jt;var R=ps;t:switch(ln){case 1:ln=0,ps=null,Qf(o,u,R,1);break;case 2:case 9:if(cp(R)){ln=0,ps=null,kw(u);break}u=function(){ln!==2&&ln!==9||Ln!==o||(ln=7),Lo(o)},R.then(u,u);break e;case 3:ln=7;break e;case 4:ln=5;break e;case 7:cp(R)?(ln=0,ps=null,kw(u)):(ln=0,ps=null,Qf(o,u,R,7));break;case 5:var U=null;switch(jt.tag){case 26:U=jt.memoizedState;case 5:case 27:var q=jt;if(!U||g1(U)){ln=0,ps=null;var te=q.sibling;if(te!==null)jt=te;else{var ge=q.return;ge!==null?(jt=ge,Mp(ge)):jt=null}break t}}ln=0,ps=null,Qf(o,u,R,5);break;case 6:ln=0,ps=null,Qf(o,u,R,6);break;case 8:xy(),Yn=6;break e;default:throw Error(i(462))}}KF();break}catch(Oe){Pw(o,Oe)}while(!0);return cs=$r=null,X.H=y,X.A=S,on=m,jt!==null?0:(Ln=null,Ht=0,el(),Yn)}function KF(){for(;jt!==null&&!xe();)Mw(jt)}function Mw(o){var u=ow(o.alternate,o,yl);o.memoizedProps=o.pendingProps,u===null?Mp(o):jt=u}function kw(o){var u=o,m=u.alternate;switch(u.tag){case 15:case 0:u=tw(m,u,u.pendingProps,u.type,void 0,Ht);break;case 11:u=tw(m,u,u.pendingProps,u.type.render,u.ref,Ht);break;case 5:cr(u);default:uw(m,u),u=jt=_c(u,yl),u=ow(m,u,yl)}o.memoizedProps=o.pendingProps,u===null?Mp(o):jt=u}function Qf(o,u,m,y){cs=$r=null,cr(u),Gf=null,xh=0;var S=u.return;try{if(MF(o,S,u,m,Ht)){Yn=1,Ap(o,Wi(m,o.current)),jt=null;return}}catch(R){if(S!==null)throw jt=S,R;Yn=1,Ap(o,Wi(m,o.current)),jt=null;return}u.flags&32768?(ht||y===1?o=!0:Vf||(Ht&536870912)!==0?o=!1:(Au=o=!0,(y===2||y===9||y===3||y===6)&&(y=Vs.current,y!==null&&y.tag===13&&(y.flags|=16384))),Nw(u,o)):Mp(u)}function Mp(o){var u=o;do{if((u.flags&32768)!==0){Nw(u,Au);return}o=u.return;var m=NF(u.alternate,u,yl);if(m!==null){jt=m;return}if(u=u.sibling,u!==null){jt=u;return}jt=u=o}while(u!==null);Yn===0&&(Yn=5)}function Nw(o,u){do{var m=jF(o.alternate,o);if(m!==null){m.flags&=32767,jt=m;return}if(m=o.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!u&&(o=o.sibling,o!==null)){jt=o;return}jt=o=m}while(o!==null);Yn=6,jt=null}function jw(o,u,m,y,S,R,U,q,te){o.cancelPendingCommit=null;do kp();while(er!==0);if((on&6)!==0)throw Error(i(327));if(u!==null){if(u===o.current)throw Error(i(177));if(R=u.lanes|u.childLanes,R|=Tr,Xl(o,m,R,U,q,te),o===Ln&&(jt=Ln=null,Ht=0),Wf=u,Cu=o,Zf=m,vy=R,yy=S,Lw=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,WF(kt,function(){return zw(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=X.T,X.T=null,S=oe.p,oe.p=2,U=on,on|=4;try{BF(o,u,m)}finally{on=U,oe.p=S,X.T=y}}er=1,Bw(),Fw(),Uw()}}function Bw(){if(er===1){er=0;var o=Cu,u=Wf,m=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||m){m=X.T,X.T=null;var y=oe.p;oe.p=2;var S=on;on|=4;try{xw(u,o);var R=My,U=Xo(o.containerInfo),q=R.focusedElem,te=R.selectionRange;if(U!==q&&q&&q.ownerDocument&&su(q.ownerDocument.documentElement,q)){if(te!==null&&vo(q)){var ge=te.start,Oe=te.end;if(Oe===void 0&&(Oe=ge),"selectionStart"in q)q.selectionStart=ge,q.selectionEnd=Math.min(Oe,q.value.length);else{var ke=q.ownerDocument||document,be=ke&&ke.defaultView||window;if(be.getSelection){var Se=be.getSelection(),bt=q.textContent.length,mt=Math.min(te.start,bt),mn=te.end===void 0?mt:Math.min(te.end,bt);!Se.extend&&mt>mn&&(U=mn,mn=mt,mt=U);var ce=Oi(q,mt),re=Oi(q,mn);if(ce&&re&&(Se.rangeCount!==1||Se.anchorNode!==ce.node||Se.anchorOffset!==ce.offset||Se.focusNode!==re.node||Se.focusOffset!==re.offset)){var he=ke.createRange();he.setStart(ce.node,ce.offset),Se.removeAllRanges(),mt>mn?(Se.addRange(he),Se.extend(re.node,re.offset)):(he.setEnd(re.node,re.offset),Se.addRange(he))}}}}for(ke=[],Se=q;Se=Se.parentNode;)Se.nodeType===1&&ke.push({element:Se,left:Se.scrollLeft,top:Se.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<ke.length;q++){var De=ke[q];De.element.scrollLeft=De.left,De.element.scrollTop=De.top}}Vp=!!Iy,My=Iy=null}finally{on=S,oe.p=y,X.T=m}}o.current=u,er=2}}function Fw(){if(er===2){er=0;var o=Cu,u=Wf,m=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||m){m=X.T,X.T=null;var y=oe.p;oe.p=2;var S=on;on|=4;try{gw(o,u.alternate,u)}finally{on=S,oe.p=y,X.T=m}}er=3}}function Uw(){if(er===4||er===3){er=0,we();var o=Cu,u=Wf,m=Zf,y=Lw;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?er=5:(er=0,Wf=Cu=null,$w(o,o.pendingLanes));var S=o.pendingLanes;if(S===0&&(Lu=null),oc(m),u=u.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(rt,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=X.T,S=oe.p,oe.p=2,X.T=null;try{for(var R=o.onRecoverableError,U=0;U<y.length;U++){var q=y[U];R(q.value,{componentStack:q.stack})}}finally{X.T=u,oe.p=S}}(Zf&3)!==0&&kp(),Lo(o),S=o.pendingLanes,(m&4194090)!==0&&(S&42)!==0?o===by?Oh++:(Oh=0,by=o):Oh=0,Rh(0)}}function $w(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,ll(u)))}function kp(o){return Bw(),Fw(),Uw(),zw()}function zw(){if(er!==5)return!1;var o=Cu,u=vy;vy=0;var m=oc(Zf),y=X.T,S=oe.p;try{oe.p=32>m?32:m,X.T=null,m=yy,yy=null;var R=Cu,U=Zf;if(er=0,Wf=Cu=null,Zf=0,(on&6)!==0)throw Error(i(331));var q=on;if(on|=4,Aw(R.current),Sw(R,R.current,U,m),on=q,Rh(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(rt,R)}catch{}return!0}finally{oe.p=S,X.T=y,$w(o,u)}}function Gw(o,u,m){u=Wi(m,u),u=X0(o.stateNode,u,2),o=Me(o,u,2),o!==null&&(da(o,2),Lo(o))}function bn(o,u,m){if(o.tag===3)Gw(o,o,m);else for(;u!==null;){if(u.tag===3){Gw(u,o,m);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Lu===null||!Lu.has(y))){o=Wi(m,o),m=VA(2),y=Me(u,m,2),y!==null&&(YA(m,y,u,o),da(y,2),Lo(y));break}}u=u.return}}function Ey(o,u,m){var y=o.pingCache;if(y===null){y=o.pingCache=new $F;var S=new Set;y.set(u,S)}else S=y.get(u),S===void 0&&(S=new Set,y.set(u,S));S.has(m)||(hy=!0,S.add(m),o=qF.bind(null,o,u,m),u.then(o,o))}function qF(o,u,m){var y=o.pingCache;y!==null&&y.delete(u),o.pingedLanes|=o.suspendedLanes&m,o.warmLanes&=~m,Ln===o&&(Ht&m)===m&&(Yn===4||Yn===3&&(Ht&62914560)===Ht&&300>Be()-gy?(on&2)===0&&Xf(o,0):my|=m,Yf===Ht&&(Yf=0)),Lo(o)}function Hw(o,u){u===0&&(u=ic()),o=bo(o,u),o!==null&&(da(o,u),Lo(o))}function VF(o){var u=o.memoizedState,m=0;u!==null&&(m=u.retryLane),Hw(o,m)}function YF(o,u){var m=0;switch(o.tag){case 13:var y=o.stateNode,S=o.memoizedState;S!==null&&(m=S.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(i(314))}y!==null&&y.delete(u),Hw(o,m)}function WF(o,u){return ot(o,u)}var Np=null,Jf=null,Ty=!1,jp=!1,Ay=!1,Oc=0;function Lo(o){o!==Jf&&o.next===null&&(Jf===null?Np=Jf=o:Jf=Jf.next=o),jp=!0,Ty||(Ty=!0,XF())}function Rh(o,u){if(!Ay&&jp){Ay=!0;do for(var m=!1,y=Np;y!==null;){if(o!==0){var S=y.pendingLanes;if(S===0)var R=0;else{var U=y.suspendedLanes,q=y.pingedLanes;R=(1<<31-En(42|o)+1)-1,R&=S&~(U&~q),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(m=!0,Yw(y,R))}else R=Ht,R=Wl(y,y===Ln?R:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(R&3)===0||es(y,R)||(m=!0,Yw(y,R));y=y.next}while(m);Ay=!1}}function ZF(){Kw()}function Kw(){jp=Ty=!1;var o=0;Oc!==0&&(sU()&&(o=Oc),Oc=0);for(var u=Be(),m=null,y=Np;y!==null;){var S=y.next,R=qw(y,u);R===0?(y.next=null,m===null?Np=S:m.next=S,S===null&&(Jf=m)):(m=y,(o!==0||(R&3)!==0)&&(jp=!0)),y=S}Rh(o)}function qw(o,u){for(var m=o.suspendedLanes,y=o.pingedLanes,S=o.expirationTimes,R=o.pendingLanes&-62914561;0<R;){var U=31-En(R),q=1<<U,te=S[U];te===-1?((q&m)===0||(q&y)!==0)&&(S[U]=nh(q,u)):te<=u&&(o.expiredLanes|=q),R&=~q}if(u=Ln,m=Ht,m=Wl(o,o===u?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,m===0||o===u&&(ln===2||ln===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&ct(y),o.callbackNode=null,o.callbackPriority=0;if((m&3)===0||es(o,m)){if(u=m&-m,u===o.callbackPriority)return u;switch(y!==null&&ct(y),oc(m)){case 2:case 8:m=Ft;break;case 32:m=kt;break;case 268435456:m=Gi;break;default:m=kt}return y=Vw.bind(null,o),m=ot(m,y),o.callbackPriority=u,o.callbackNode=m,u}return y!==null&&y!==null&&ct(y),o.callbackPriority=2,o.callbackNode=null,2}function Vw(o,u){if(er!==0&&er!==5)return o.callbackNode=null,o.callbackPriority=0,null;var m=o.callbackNode;if(kp()&&o.callbackNode!==m)return null;var y=Ht;return y=Wl(o,o===Ln?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(Ow(o,y,u),qw(o,Be()),o.callbackNode!=null&&o.callbackNode===m?Vw.bind(null,o):null)}function Yw(o,u){if(kp())return null;Ow(o,u,!0)}function XF(){oU(function(){(on&6)!==0?ot(_t,ZF):Kw()})}function wy(){return Oc===0&&(Oc=ff()),Oc}function Ww(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Li(""+o)}function Zw(o,u){var m=u.ownerDocument.createElement("input");return m.name=u.name,m.value=u.value,o.id&&m.setAttribute("form",o.id),u.parentNode.insertBefore(m,u),o=new FormData(o),m.parentNode.removeChild(m),o}function QF(o,u,m,y,S){if(u==="submit"&&m&&m.stateNode===S){var R=Ww((S[Si]||null).action),U=y.submitter;U&&(u=(u=U[Si]||null)?Ww(u.formAction):U.getAttribute("formAction"),u!==null&&(R=u,U=null));var q=new ya("action","action",null,y,S);o.push({event:q,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Oc!==0){var te=U?Zw(S,U):new FormData(S);q0(m,{pending:!0,data:te,method:S.method,action:R},null,te)}}else typeof R=="function"&&(q.preventDefault(),te=U?Zw(S,U):new FormData(S),q0(m,{pending:!0,data:te,method:S.method,action:R},R,te))},currentTarget:S}]})}}for(var Ly=0;Ly<Hs.length;Ly++){var Cy=Hs[Ly],JF=Cy.toLowerCase(),eU=Cy[0].toUpperCase()+Cy.slice(1);Er(JF,"on"+eU)}Er(Lf,"onAnimationEnd"),Er(Wn,"onAnimationIteration"),Er(Yi,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(Cf,"onTransitionRun"),Er(lu,"onTransitionStart"),Er(Of,"onTransitionCancel"),Er(uu,"onTransitionEnd"),On("onMouseEnter",["mouseout","mouseover"]),On("onMouseLeave",["mouseout","mouseover"]),On("onPointerEnter",["pointerout","pointerover"]),On("onPointerLeave",["pointerout","pointerover"]),$n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$n("onBeforeInput",["compositionend","keypress","textInput","paste"]),$n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ph));function Xw(o,u){u=(u&4)!==0;for(var m=0;m<o.length;m++){var y=o[m],S=y.event;y=y.listeners;e:{var R=void 0;if(u)for(var U=y.length-1;0<=U;U--){var q=y[U],te=q.instance,ge=q.currentTarget;if(q=q.listener,te!==R&&S.isPropagationStopped())break e;R=q,S.currentTarget=ge;try{R(S)}catch(Oe){Tp(Oe)}S.currentTarget=null,R=te}else for(U=0;U<y.length;U++){if(q=y[U],te=q.instance,ge=q.currentTarget,q=q.listener,te!==R&&S.isPropagationStopped())break e;R=q,S.currentTarget=ge;try{R(S)}catch(Oe){Tp(Oe)}S.currentTarget=null,R=te}}}}function Bt(o,u){var m=u[or];m===void 0&&(m=u[or]=new Set);var y=o+"__bubble";m.has(y)||(Qw(u,o,2,!1),m.add(y))}function Oy(o,u,m){var y=0;u&&(y|=4),Qw(m,o,y,u)}var Bp="_reactListening"+Math.random().toString(36).slice(2);function Ry(o){if(!o[Bp]){o[Bp]=!0,ei.forEach(function(m){m!=="selectionchange"&&(tU.has(m)||Oy(m,!1,o),Oy(m,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[Bp]||(u[Bp]=!0,Oy("selectionchange",!1,u))}}function Qw(o,u,m,y){switch(S1(u)){case 2:var S=CU;break;case 8:S=OU;break;default:S=Hy}m=S.bind(null,u,m,o),S=void 0,!co||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(S=!0),y?S!==void 0?o.addEventListener(u,m,{capture:!0,passive:S}):o.addEventListener(u,m,!0):S!==void 0?o.addEventListener(u,m,{passive:S}):o.addEventListener(u,m,!1)}function Py(o,u,m,y,S){var R=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var U=y.tag;if(U===3||U===4){var q=y.stateNode.containerInfo;if(q===S)break;if(U===4)for(U=y.return;U!==null;){var te=U.tag;if((te===3||te===4)&&U.stateNode.containerInfo===S)return;U=U.return}for(;q!==null;){if(U=Ms(q),U===null)return;if(te=U.tag,te===5||te===6||te===26||te===27){y=R=U;continue e}q=q.parentNode}}y=y.return}ui(function(){var ge=R,Oe=Vi(m),ke=[];e:{var be=xc.get(o);if(be!==void 0){var Se=ya,bt=o;switch(o){case"keypress":if(Tn(m)===0)break e;case"keydown":case"keyup":Se=hc;break;case"focusin":bt="focus",Se=eu;break;case"focusout":bt="blur",Se=eu;break;case"beforeblur":case"afterblur":Se=eu;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=xa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=ih;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=pc;break;case Lf:case Wn:case Yi:Se=mf;break;case uu:Se=vf;break;case"scroll":case"scrollend":Se=uc;break;case"wheel":Se=bf;break;case"copy":case"cut":case"paste":Se=Vo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=nu;break;case"toggle":case"beforetoggle":Se=Ea}var mt=(u&4)!==0,mn=!mt&&(o==="scroll"||o==="scrollend"),ce=mt?be!==null?be+"Capture":null:be;mt=[];for(var re=ge,he;re!==null;){var De=re;if(he=De.stateNode,De=De.tag,De!==5&&De!==26&&De!==27||he===null||ce===null||(De=$t(re,ce),De!=null&&mt.push(Dh(re,De,he))),mn)break;re=re.return}0<mt.length&&(be=new Se(be,bt,null,m,Oe),ke.push({event:be,listeners:mt}))}}if((u&7)===0){e:{if(be=o==="mouseover"||o==="pointerover",Se=o==="mouseout"||o==="pointerout",be&&m!==Ko&&(bt=m.relatedTarget||m.fromElement)&&(Ms(bt)||bt[ro]))break e;if((Se||be)&&(be=Oe.window===Oe?Oe:(be=Oe.ownerDocument)?be.defaultView||be.parentWindow:window,Se?(bt=m.relatedTarget||m.toElement,Se=ge,bt=bt?Ms(bt):null,bt!==null&&(mn=s(bt),mt=bt.tag,bt!==mn||mt!==5&&mt!==27&&mt!==6)&&(bt=null)):(Se=null,bt=ge),Se!==bt)){if(mt=xa,De="onMouseLeave",ce="onMouseEnter",re="mouse",(o==="pointerout"||o==="pointerover")&&(mt=nu,De="onPointerLeave",ce="onPointerEnter",re="pointer"),mn=Se==null?be:Or(Se),he=bt==null?be:Or(bt),be=new mt(De,re+"leave",Se,m,Oe),be.target=mn,be.relatedTarget=he,De=null,Ms(Oe)===ge&&(mt=new mt(ce,re+"enter",bt,m,Oe),mt.target=he,mt.relatedTarget=mn,De=mt),mn=De,Se&&bt)t:{for(mt=Se,ce=bt,re=0,he=mt;he;he=ed(he))re++;for(he=0,De=ce;De;De=ed(De))he++;for(;0<re-he;)mt=ed(mt),re--;for(;0<he-re;)ce=ed(ce),he--;for(;re--;){if(mt===ce||ce!==null&&mt===ce.alternate)break t;mt=ed(mt),ce=ed(ce)}mt=null}else mt=null;Se!==null&&Jw(ke,be,Se,mt,!1),bt!==null&&mn!==null&&Jw(ke,mn,bt,mt,!0)}}e:{if(be=ge?Or(ge):window,Se=be.nodeName&&be.nodeName.toLowerCase(),Se==="select"||Se==="input"&&be.type==="file")var nt=po;else if(wa(be))if(vc)nt=Af;else{nt=ah;var It=bc}else Se=be.nodeName,!Se||Se.toLowerCase()!=="input"||be.type!=="checkbox"&&be.type!=="radio"?ge&&Dr(ge.elementType)&&(nt=po):nt=jr;if(nt&&(nt=nt(o,ge))){Tf(ke,nt,m,Oe);break e}It&&It(o,be,ge),o==="focusout"&&ge&&be.type==="number"&&ge.memoizedProps.value!=null&&Fs(be,"number",be.value)}switch(It=ge?Or(ge):window,o){case"focusin":(wa(It)||It.contentEditable==="true")&&(Sr=It,yo=ge,Pa=null);break;case"focusout":Pa=yo=Sr=null;break;case"mousedown":au=!0;break;case"contextmenu":case"mouseup":case"dragend":au=!1,wf(ke,m,Oe);break;case"selectionchange":if(Qo)break;case"keydown":case"keyup":wf(ke,m,Oe)}var lt;if(zs)e:{switch(o){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else ho?ru(o,m)&&(vt="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(vt="onCompositionStart");vt&&(os&&m.locale!=="ko"&&(ho||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&ho&&(lt=rs()):(Mr=Oe,kr="value"in Mr?Mr.value:Mr.textContent,ho=!0)),It=Fp(ge,vt),0<It.length&&(vt=new xr(vt,o,null,m,Oe),ke.push({event:vt,listeners:It}),lt?vt.data=lt:(lt=Sf(m),lt!==null&&(vt.data=lt)))),(lt=Ta?Ef(o,m):sh(o,m))&&(vt=Fp(ge,"onBeforeInput"),0<vt.length&&(It=new xr("onBeforeInput","beforeinput",null,m,Oe),ke.push({event:It,listeners:vt}),It.data=lt)),QF(ke,o,ge,m,Oe)}Xw(ke,u)})}function Dh(o,u,m){return{instance:o,listener:u,currentTarget:m}}function Fp(o,u){for(var m=u+"Capture",y=[];o!==null;){var S=o,R=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||R===null||(S=$t(o,m),S!=null&&y.unshift(Dh(o,S,R)),S=$t(o,u),S!=null&&y.push(Dh(o,S,R))),o.tag===3)return y;o=o.return}return[]}function ed(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Jw(o,u,m,y,S){for(var R=u._reactName,U=[];m!==null&&m!==y;){var q=m,te=q.alternate,ge=q.stateNode;if(q=q.tag,te!==null&&te===y)break;q!==5&&q!==26&&q!==27||ge===null||(te=ge,S?(ge=$t(m,R),ge!=null&&U.unshift(Dh(m,ge,te))):S||(ge=$t(m,R),ge!=null&&U.push(Dh(m,ge,te)))),m=m.return}U.length!==0&&o.push({event:u,listeners:U})}var nU=/\r\n?/g,iU=/\u0000|\uFFFD/g;function e1(o){return(typeof o=="string"?o:""+o).replace(nU,`
`).replace(iU,"")}function t1(o,u){return u=e1(u),e1(o)===u}function Up(){}function hn(o,u,m,y,S,R){switch(m){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||qi(o,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&qi(o,""+y);break;case"className":ao(o,"class",y);break;case"tabIndex":ao(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":ao(o,m,y);break;case"style":va(o,y,R);break;case"data":if(u!=="object"){ao(o,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||m!=="href")){o.removeAttribute(m);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(m);break}y=Li(""+y),o.setAttribute(m,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(m==="formAction"?(u!=="input"&&hn(o,u,"name",S.name,S,null),hn(o,u,"formEncType",S.formEncType,S,null),hn(o,u,"formMethod",S.formMethod,S,null),hn(o,u,"formTarget",S.formTarget,S,null)):(hn(o,u,"encType",S.encType,S,null),hn(o,u,"method",S.method,S,null),hn(o,u,"target",S.target,S,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(m);break}y=Li(""+y),o.setAttribute(m,y);break;case"onClick":y!=null&&(o.onclick=Up);break;case"onScroll":y!=null&&Bt("scroll",o);break;case"onScrollEnd":y!=null&&Bt("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(m=y.__html,m!=null){if(S.children!=null)throw Error(i(60));o.innerHTML=m}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}m=Li(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(m,""+y):o.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(m,""):o.removeAttribute(m);break;case"capture":case"download":y===!0?o.setAttribute(m,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(m,y):o.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(m,y):o.removeAttribute(m);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(m):o.setAttribute(m,y);break;case"popover":Bt("beforetoggle",o),Bt("toggle",o),$o(o,"popover",y);break;case"xlinkActuate":Ti(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Ti(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Ti(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Ti(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Ti(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Ti(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Ti(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Ti(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Ti(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":$o(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Go.get(m)||m,$o(o,m,y))}}function Dy(o,u,m,y,S,R){switch(m){case"style":va(o,y,R);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(m=y.__html,m!=null){if(S.children!=null)throw Error(i(60));o.innerHTML=m}}break;case"children":typeof y=="string"?qi(o,y):(typeof y=="number"||typeof y=="bigint")&&qi(o,""+y);break;case"onScroll":y!=null&&Bt("scroll",o);break;case"onScrollEnd":y!=null&&Bt("scrollend",o);break;case"onClick":y!=null&&(o.onclick=Up);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ei.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(S=m.endsWith("Capture"),u=m.slice(2,S?m.length-7:void 0),R=o[Si]||null,R=R!=null?R[m]:null,typeof R=="function"&&o.removeEventListener(u,R,S),typeof y=="function")){typeof R!="function"&&R!==null&&(m in o?o[m]=null:o.hasAttribute(m)&&o.removeAttribute(m)),o.addEventListener(u,y,S);break e}m in o?o[m]=y:y===!0?o.setAttribute(m,""):$o(o,m,y)}}}function tr(o,u,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",o),Bt("load",o);var y=!1,S=!1,R;for(R in m)if(m.hasOwnProperty(R)){var U=m[R];if(U!=null)switch(R){case"src":y=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:hn(o,u,R,U,m,null)}}S&&hn(o,u,"srcSet",m.srcSet,m,null),y&&hn(o,u,"src",m.src,m,null);return;case"input":Bt("invalid",o);var q=R=U=S=null,te=null,ge=null;for(y in m)if(m.hasOwnProperty(y)){var Oe=m[y];if(Oe!=null)switch(y){case"name":S=Oe;break;case"type":U=Oe;break;case"checked":te=Oe;break;case"defaultChecked":ge=Oe;break;case"value":R=Oe;break;case"defaultValue":q=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(i(137,u));break;default:hn(o,u,y,Oe,m,null)}}Ki(o,R,q,te,ge,U,S,!1),ga(o);return;case"select":Bt("invalid",o),y=U=R=null;for(S in m)if(m.hasOwnProperty(S)&&(q=m[S],q!=null))switch(S){case"value":R=q;break;case"defaultValue":U=q;break;case"multiple":y=q;default:hn(o,u,S,q,m,null)}u=R,m=U,o.multiple=!!y,u!=null?Ai(o,!!y,u,!1):m!=null&&Ai(o,!!y,m,!0);return;case"textarea":Bt("invalid",o),R=S=y=null;for(U in m)if(m.hasOwnProperty(U)&&(q=m[U],q!=null))switch(U){case"value":y=q;break;case"defaultValue":S=q;break;case"children":R=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(91));break;default:hn(o,u,U,q,m,null)}wi(o,y,S,R),ga(o);return;case"option":for(te in m)if(m.hasOwnProperty(te)&&(y=m[te],y!=null))switch(te){case"selected":o.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:hn(o,u,te,y,m,null)}return;case"dialog":Bt("beforetoggle",o),Bt("toggle",o),Bt("cancel",o),Bt("close",o);break;case"iframe":case"object":Bt("load",o);break;case"video":case"audio":for(y=0;y<Ph.length;y++)Bt(Ph[y],o);break;case"image":Bt("error",o),Bt("load",o);break;case"details":Bt("toggle",o);break;case"embed":case"source":case"link":Bt("error",o),Bt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in m)if(m.hasOwnProperty(ge)&&(y=m[ge],y!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:hn(o,u,ge,y,m,null)}return;default:if(Dr(u)){for(Oe in m)m.hasOwnProperty(Oe)&&(y=m[Oe],y!==void 0&&Dy(o,u,Oe,y,m,void 0));return}}for(q in m)m.hasOwnProperty(q)&&(y=m[q],y!=null&&hn(o,u,q,y,m,null))}function rU(o,u,m,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,R=null,U=null,q=null,te=null,ge=null,Oe=null;for(Se in m){var ke=m[Se];if(m.hasOwnProperty(Se)&&ke!=null)switch(Se){case"checked":break;case"value":break;case"defaultValue":te=ke;default:y.hasOwnProperty(Se)||hn(o,u,Se,null,y,ke)}}for(var be in y){var Se=y[be];if(ke=m[be],y.hasOwnProperty(be)&&(Se!=null||ke!=null))switch(be){case"type":R=Se;break;case"name":S=Se;break;case"checked":ge=Se;break;case"defaultChecked":Oe=Se;break;case"value":U=Se;break;case"defaultValue":q=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(i(137,u));break;default:Se!==ke&&hn(o,u,be,Se,y,ke)}}Mn(o,U,q,te,ge,Oe,R,S);return;case"select":Se=U=q=be=null;for(R in m)if(te=m[R],m.hasOwnProperty(R)&&te!=null)switch(R){case"value":break;case"multiple":Se=te;default:y.hasOwnProperty(R)||hn(o,u,R,null,y,te)}for(S in y)if(R=y[S],te=m[S],y.hasOwnProperty(S)&&(R!=null||te!=null))switch(S){case"value":be=R;break;case"defaultValue":q=R;break;case"multiple":U=R;default:R!==te&&hn(o,u,S,R,y,te)}u=q,m=U,y=Se,be!=null?Ai(o,!!m,be,!1):!!y!=!!m&&(u!=null?Ai(o,!!m,u,!0):Ai(o,!!m,m?[]:"",!1));return;case"textarea":Se=be=null;for(q in m)if(S=m[q],m.hasOwnProperty(q)&&S!=null&&!y.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:hn(o,u,q,null,y,S)}for(U in y)if(S=y[U],R=m[U],y.hasOwnProperty(U)&&(S!=null||R!=null))switch(U){case"value":be=S;break;case"defaultValue":Se=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:S!==R&&hn(o,u,U,S,y,R)}zt(o,be,Se);return;case"option":for(var bt in m)if(be=m[bt],m.hasOwnProperty(bt)&&be!=null&&!y.hasOwnProperty(bt))switch(bt){case"selected":o.selected=!1;break;default:hn(o,u,bt,null,y,be)}for(te in y)if(be=y[te],Se=m[te],y.hasOwnProperty(te)&&be!==Se&&(be!=null||Se!=null))switch(te){case"selected":o.selected=be&&typeof be!="function"&&typeof be!="symbol";break;default:hn(o,u,te,be,y,Se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in m)be=m[mt],m.hasOwnProperty(mt)&&be!=null&&!y.hasOwnProperty(mt)&&hn(o,u,mt,null,y,be);for(ge in y)if(be=y[ge],Se=m[ge],y.hasOwnProperty(ge)&&be!==Se&&(be!=null||Se!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(i(137,u));break;default:hn(o,u,ge,be,y,Se)}return;default:if(Dr(u)){for(var mn in m)be=m[mn],m.hasOwnProperty(mn)&&be!==void 0&&!y.hasOwnProperty(mn)&&Dy(o,u,mn,void 0,y,be);for(Oe in y)be=y[Oe],Se=m[Oe],!y.hasOwnProperty(Oe)||be===Se||be===void 0&&Se===void 0||Dy(o,u,Oe,be,y,Se);return}}for(var ce in m)be=m[ce],m.hasOwnProperty(ce)&&be!=null&&!y.hasOwnProperty(ce)&&hn(o,u,ce,null,y,be);for(ke in y)be=y[ke],Se=m[ke],!y.hasOwnProperty(ke)||be===Se||be==null&&Se==null||hn(o,u,ke,be,y,Se)}var Iy=null,My=null;function $p(o){return o.nodeType===9?o:o.ownerDocument}function n1(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function i1(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function ky(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Ny=null;function sU(){var o=window.event;return o&&o.type==="popstate"?o===Ny?!1:(Ny=o,!0):(Ny=null,!1)}var r1=typeof setTimeout=="function"?setTimeout:void 0,aU=typeof clearTimeout=="function"?clearTimeout:void 0,s1=typeof Promise=="function"?Promise:void 0,oU=typeof queueMicrotask=="function"?queueMicrotask:typeof s1<"u"?function(o){return s1.resolve(null).then(o).catch(lU)}:r1;function lU(o){setTimeout(function(){throw o})}function Ru(o){return o==="head"}function a1(o,u){var m=u,y=0,S=0;do{var R=m.nextSibling;if(o.removeChild(m),R&&R.nodeType===8)if(m=R.data,m==="/$"){if(0<y&&8>y){m=y;var U=o.ownerDocument;if(m&1&&Ih(U.documentElement),m&2&&Ih(U.body),m&4)for(m=U.head,Ih(m),U=m.firstChild;U;){var q=U.nextSibling,te=U.nodeName;U[yr]||te==="SCRIPT"||te==="STYLE"||te==="LINK"&&U.rel.toLowerCase()==="stylesheet"||m.removeChild(U),U=q}}if(S===0){o.removeChild(R),$h(u);return}S--}else m==="$"||m==="$?"||m==="$!"?S++:y=m.charCodeAt(0)-48;else y=0;m=R}while(m);$h(u)}function jy(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var m=u;switch(u=u.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":jy(m),ha(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}o.removeChild(m)}}function uU(o,u,m,y){for(;o.nodeType===1;){var S=m;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[yr])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(R=o.getAttribute("rel"),R==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(R!==S.rel||o.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||o.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||o.getAttribute("title")!==(S.title==null?null:S.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(R=o.getAttribute("src"),(R!==(S.src==null?null:S.src)||o.getAttribute("type")!==(S.type==null?null:S.type)||o.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&R&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var R=S.name==null?null:""+S.name;if(S.type==="hidden"&&o.getAttribute("name")===R)return o}else return o;if(o=za(o.nextSibling),o===null)break}return null}function cU(o,u,m){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!m||(o=za(o.nextSibling),o===null))return null;return o}function By(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function fU(o,u){var m=o.ownerDocument;if(o.data!=="$?"||m.readyState==="complete")u();else{var y=function(){u(),m.removeEventListener("DOMContentLoaded",y)};m.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function za(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return o}var Fy=null;function o1(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(u===0)return o;u--}else m==="/$"&&u++}o=o.previousSibling}return null}function l1(o,u,m){switch(u=$p(m),o){case"html":if(o=u.documentElement,!o)throw Error(i(452));return o;case"head":if(o=u.head,!o)throw Error(i(453));return o;case"body":if(o=u.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Ih(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);ha(o)}var Ws=new Map,u1=new Set;function zp(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var bl=oe.d;oe.d={f:dU,r:hU,D:mU,C:pU,L:gU,m:vU,X:bU,S:yU,M:xU};function dU(){var o=bl.f(),u=Ip();return o||u}function hU(o){var u=ts(o);u!==null&&u.tag===5&&u.type==="form"?OA(u):bl.r(o)}var td=typeof document>"u"?null:document;function c1(o,u,m){var y=td;if(y&&typeof u=="string"&&u){var S=Xt(u);S='link[rel="'+o+'"][href="'+S+'"]',typeof m=="string"&&(S+='[crossorigin="'+m+'"]'),u1.has(S)||(u1.add(S),o={rel:o,crossOrigin:m,href:u},y.querySelector(S)===null&&(u=y.createElement("link"),tr(u,"link",o),vn(u),y.head.appendChild(u)))}}function mU(o){bl.D(o),c1("dns-prefetch",o,null)}function pU(o,u){bl.C(o,u),c1("preconnect",o,u)}function gU(o,u,m){bl.L(o,u,m);var y=td;if(y&&o&&u){var S='link[rel="preload"][as="'+Xt(u)+'"]';u==="image"&&m&&m.imageSrcSet?(S+='[imagesrcset="'+Xt(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(S+='[imagesizes="'+Xt(m.imageSizes)+'"]')):S+='[href="'+Xt(o)+'"]';var R=S;switch(u){case"style":R=nd(o);break;case"script":R=id(o)}Ws.has(R)||(o=h({rel:"preload",href:u==="image"&&m&&m.imageSrcSet?void 0:o,as:u},m),Ws.set(R,o),y.querySelector(S)!==null||u==="style"&&y.querySelector(Mh(R))||u==="script"&&y.querySelector(kh(R))||(u=y.createElement("link"),tr(u,"link",o),vn(u),y.head.appendChild(u)))}}function vU(o,u){bl.m(o,u);var m=td;if(m&&o){var y=u&&typeof u.as=="string"?u.as:"script",S='link[rel="modulepreload"][as="'+Xt(y)+'"][href="'+Xt(o)+'"]',R=S;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=id(o)}if(!Ws.has(R)&&(o=h({rel:"modulepreload",href:o},u),Ws.set(R,o),m.querySelector(S)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(kh(R)))return}y=m.createElement("link"),tr(y,"link",o),vn(y),m.head.appendChild(y)}}}function yU(o,u,m){bl.S(o,u,m);var y=td;if(y&&o){var S=ma(y).hoistableStyles,R=nd(o);u=u||"default";var U=S.get(R);if(!U){var q={loading:0,preload:null};if(U=y.querySelector(Mh(R)))q.loading=5;else{o=h({rel:"stylesheet",href:o,"data-precedence":u},m),(m=Ws.get(R))&&Uy(o,m);var te=U=y.createElement("link");vn(te),tr(te,"link",o),te._p=new Promise(function(ge,Oe){te.onload=ge,te.onerror=Oe}),te.addEventListener("load",function(){q.loading|=1}),te.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Gp(U,u,y)}U={type:"stylesheet",instance:U,count:1,state:q},S.set(R,U)}}}function bU(o,u){bl.X(o,u);var m=td;if(m&&o){var y=ma(m).hoistableScripts,S=id(o),R=y.get(S);R||(R=m.querySelector(kh(S)),R||(o=h({src:o,async:!0},u),(u=Ws.get(S))&&$y(o,u),R=m.createElement("script"),vn(R),tr(R,"link",o),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},y.set(S,R))}}function xU(o,u){bl.M(o,u);var m=td;if(m&&o){var y=ma(m).hoistableScripts,S=id(o),R=y.get(S);R||(R=m.querySelector(kh(S)),R||(o=h({src:o,async:!0,type:"module"},u),(u=Ws.get(S))&&$y(o,u),R=m.createElement("script"),vn(R),tr(R,"link",o),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},y.set(S,R))}}function f1(o,u,m,y){var S=(S=Ae.current)?zp(S):null;if(!S)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(u=nd(m.href),m=ma(S).hoistableStyles,y=m.get(u),y||(y={type:"style",instance:null,count:0,state:null},m.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){o=nd(m.href);var R=ma(S).hoistableStyles,U=R.get(o);if(U||(S=S.ownerDocument||S,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(o,U),(R=S.querySelector(Mh(o)))&&!R._p&&(U.instance=R,U.state.loading=5),Ws.has(o)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Ws.set(o,m),R||_U(S,o,m,U.state))),u&&y===null)throw Error(i(528,""));return U}if(u&&y!==null)throw Error(i(529,""));return null;case"script":return u=m.async,m=m.src,typeof m=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=id(m),m=ma(S).hoistableScripts,y=m.get(u),y||(y={type:"script",instance:null,count:0,state:null},m.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function nd(o){return'href="'+Xt(o)+'"'}function Mh(o){return'link[rel="stylesheet"]['+o+"]"}function d1(o){return h({},o,{"data-precedence":o.precedence,precedence:null})}function _U(o,u,m,y){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=o.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),tr(u,"link",m),vn(u),o.head.appendChild(u))}function id(o){return'[src="'+Xt(o)+'"]'}function kh(o){return"script[async]"+o}function h1(o,u,m){if(u.count++,u.instance===null)switch(u.type){case"style":var y=o.querySelector('style[data-href~="'+Xt(m.href)+'"]');if(y)return u.instance=y,vn(y),y;var S=h({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),vn(y),tr(y,"style",S),Gp(y,m.precedence,o),u.instance=y;case"stylesheet":S=nd(m.href);var R=o.querySelector(Mh(S));if(R)return u.state.loading|=4,u.instance=R,vn(R),R;y=d1(m),(S=Ws.get(S))&&Uy(y,S),R=(o.ownerDocument||o).createElement("link"),vn(R);var U=R;return U._p=new Promise(function(q,te){U.onload=q,U.onerror=te}),tr(R,"link",y),u.state.loading|=4,Gp(R,m.precedence,o),u.instance=R;case"script":return R=id(m.src),(S=o.querySelector(kh(R)))?(u.instance=S,vn(S),S):(y=m,(S=Ws.get(R))&&(y=h({},m),$y(y,S)),o=o.ownerDocument||o,S=o.createElement("script"),vn(S),tr(S,"link",y),o.head.appendChild(S),u.instance=S);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,Gp(y,m.precedence,o));return u.instance}function Gp(o,u,m){for(var y=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=y.length?y[y.length-1]:null,R=S,U=0;U<y.length;U++){var q=y[U];if(q.dataset.precedence===u)R=q;else if(R!==S)break}R?R.parentNode.insertBefore(o,R.nextSibling):(u=m.nodeType===9?m.head:m,u.insertBefore(o,u.firstChild))}function Uy(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function $y(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var Hp=null;function m1(o,u,m){if(Hp===null){var y=new Map,S=Hp=new Map;S.set(m,y)}else S=Hp,y=S.get(m),y||(y=new Map,S.set(m,y));if(y.has(o))return y;for(y.set(o,null),m=m.getElementsByTagName(o),S=0;S<m.length;S++){var R=m[S];if(!(R[yr]||R[In]||o==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var U=R.getAttribute(u)||"";U=o+U;var q=y.get(U);q?q.push(R):y.set(U,[R])}}return y}function p1(o,u,m){o=o.ownerDocument||o,o.head.insertBefore(m,u==="title"?o.querySelector("head > title"):null)}function SU(o,u,m){if(m===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function g1(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Nh=null;function EU(){}function TU(o,u,m){if(Nh===null)throw Error(i(475));var y=Nh;if(u.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var S=nd(m.href),R=o.querySelector(Mh(S));if(R){o=R._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(y.count++,y=Kp.bind(y),o.then(y,y)),u.state.loading|=4,u.instance=R,vn(R);return}R=o.ownerDocument||o,m=d1(m),(S=Ws.get(S))&&Uy(m,S),R=R.createElement("link"),vn(R);var U=R;U._p=new Promise(function(q,te){U.onload=q,U.onerror=te}),tr(R,"link",m),u.instance=R}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(y.count++,u=Kp.bind(y),o.addEventListener("load",u),o.addEventListener("error",u))}}function AU(){if(Nh===null)throw Error(i(475));var o=Nh;return o.stylesheets&&o.count===0&&zy(o,o.stylesheets),0<o.count?function(u){var m=setTimeout(function(){if(o.stylesheets&&zy(o,o.stylesheets),o.unsuspend){var y=o.unsuspend;o.unsuspend=null,y()}},6e4);return o.unsuspend=u,function(){o.unsuspend=null,clearTimeout(m)}}:null}function Kp(){if(this.count--,this.count===0){if(this.stylesheets)zy(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var qp=null;function zy(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,qp=new Map,u.forEach(wU,o),qp=null,Kp.call(o))}function wU(o,u){if(!(u.state.loading&4)){var m=qp.get(o);if(m)var y=m.get(null);else{m=new Map,qp.set(o,m);for(var S=o.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<S.length;R++){var U=S[R];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(m.set(U.dataset.precedence,U),y=U)}y&&m.set(null,y)}S=u.instance,U=S.getAttribute("data-precedence"),R=m.get(U)||y,R===y&&m.set(null,S),m.set(U,S),this.count++,y=Kp.bind(this),S.addEventListener("load",y),S.addEventListener("error",y),R?R.parentNode.insertBefore(S,R.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(S,o.firstChild)),u.state.loading|=4}}var jh={$$typeof:P,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function LU(o,u,m,y,S,R,U,q){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zl(0),this.hiddenUpdates=Zl(null),this.identifierPrefix=y,this.onUncaughtError=S,this.onCaughtError=R,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function v1(o,u,m,y,S,R,U,q,te,ge,Oe,ke){return o=new LU(o,u,m,U,q,te,ge,ke),u=1,R===!0&&(u|=24),R=Xi(3,null,null,u),o.current=R,R.stateNode=o,u=Mf(),u.refCount++,o.pooledCache=u,u.refCount++,R.memoizedState={element:y,isDehydrated:m,cache:u},ae(R),o}function y1(o){return o?(o=Na,o):Na}function b1(o,u,m,y,S,R){S=y1(S),y.context===null?y.context=S:y.pendingContext=S,y=Ee(u),y.payload={element:m},R=R===void 0?null:R,R!==null&&(y.callback=R),m=Me(o,y,u),m!==null&&(vs(m,o,u),Fe(m,o,u))}function x1(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<u?m:u}}function Gy(o,u){x1(o,u),(o=o.alternate)&&x1(o,u)}function _1(o){if(o.tag===13){var u=bo(o,67108864);u!==null&&vs(u,o,67108864),Gy(o,67108864)}}var Vp=!0;function CU(o,u,m,y){var S=X.T;X.T=null;var R=oe.p;try{oe.p=2,Hy(o,u,m,y)}finally{oe.p=R,X.T=S}}function OU(o,u,m,y){var S=X.T;X.T=null;var R=oe.p;try{oe.p=8,Hy(o,u,m,y)}finally{oe.p=R,X.T=S}}function Hy(o,u,m,y){if(Vp){var S=Ky(y);if(S===null)Py(o,u,y,Yp,m),E1(o,y);else if(PU(S,o,u,m,y))y.stopPropagation();else if(E1(o,y),u&4&&-1<RU.indexOf(o)){for(;S!==null;){var R=ts(S);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var U=Cr(R.pendingLanes);if(U!==0){var q=R;for(q.pendingLanes|=2,q.entangledLanes|=2;U;){var te=1<<31-En(U);q.entanglements[1]|=te,U&=~te}Lo(R),(on&6)===0&&(Pp=Be()+500,Rh(0))}}break;case 13:q=bo(R,2),q!==null&&vs(q,R,2),Ip(),Gy(R,2)}if(R=Ky(y),R===null&&Py(o,u,y,Yp,m),R===S)break;S=R}S!==null&&y.stopPropagation()}else Py(o,u,y,null,m)}}function Ky(o){return o=Vi(o),qy(o)}var Yp=null;function qy(o){if(Yp=null,o=Ms(o),o!==null){var u=s(o);if(u===null)o=null;else{var m=u.tag;if(m===13){if(o=a(u),o!==null)return o;o=null}else if(m===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return Yp=o,null}function S1(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Je()){case _t:return 2;case Ft:return 8;case kt:case Un:return 32;case Gi:return 268435456;default:return 32}default:return 32}}var Vy=!1,Pu=null,Du=null,Iu=null,Bh=new Map,Fh=new Map,Mu=[],RU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function E1(o,u){switch(o){case"focusin":case"focusout":Pu=null;break;case"dragenter":case"dragleave":Du=null;break;case"mouseover":case"mouseout":Iu=null;break;case"pointerover":case"pointerout":Bh.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fh.delete(u.pointerId)}}function Uh(o,u,m,y,S,R){return o===null||o.nativeEvent!==R?(o={blockedOn:u,domEventName:m,eventSystemFlags:y,nativeEvent:R,targetContainers:[S]},u!==null&&(u=ts(u),u!==null&&_1(u)),o):(o.eventSystemFlags|=y,u=o.targetContainers,S!==null&&u.indexOf(S)===-1&&u.push(S),o)}function PU(o,u,m,y,S){switch(u){case"focusin":return Pu=Uh(Pu,o,u,m,y,S),!0;case"dragenter":return Du=Uh(Du,o,u,m,y,S),!0;case"mouseover":return Iu=Uh(Iu,o,u,m,y,S),!0;case"pointerover":var R=S.pointerId;return Bh.set(R,Uh(Bh.get(R)||null,o,u,m,y,S)),!0;case"gotpointercapture":return R=S.pointerId,Fh.set(R,Uh(Fh.get(R)||null,o,u,m,y,S)),!0}return!1}function T1(o){var u=Ms(o.target);if(u!==null){var m=s(u);if(m!==null){if(u=m.tag,u===13){if(u=a(m),u!==null){o.blockedOn=u,lc(o.priority,function(){if(m.tag===13){var y=gs();y=ac(y);var S=bo(m,y);S!==null&&vs(S,m,y),Gy(m,y)}});return}}else if(u===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Wp(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var m=Ky(o.nativeEvent);if(m===null){m=o.nativeEvent;var y=new m.constructor(m.type,m);Ko=y,m.target.dispatchEvent(y),Ko=null}else return u=ts(m),u!==null&&_1(u),o.blockedOn=m,!1;u.shift()}return!0}function A1(o,u,m){Wp(o)&&m.delete(u)}function DU(){Vy=!1,Pu!==null&&Wp(Pu)&&(Pu=null),Du!==null&&Wp(Du)&&(Du=null),Iu!==null&&Wp(Iu)&&(Iu=null),Bh.forEach(A1),Fh.forEach(A1)}function Zp(o,u){o.blockedOn===u&&(o.blockedOn=null,Vy||(Vy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,DU)))}var Xp=null;function w1(o){Xp!==o&&(Xp=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Xp===o&&(Xp=null);for(var u=0;u<o.length;u+=3){var m=o[u],y=o[u+1],S=o[u+2];if(typeof y!="function"){if(qy(y||m)===null)continue;break}var R=ts(m);R!==null&&(o.splice(u,3),u-=3,q0(R,{pending:!0,data:S,method:m.method,action:y},y,S))}}))}function $h(o){function u(te){return Zp(te,o)}Pu!==null&&Zp(Pu,o),Du!==null&&Zp(Du,o),Iu!==null&&Zp(Iu,o),Bh.forEach(u),Fh.forEach(u);for(var m=0;m<Mu.length;m++){var y=Mu[m];y.blockedOn===o&&(y.blockedOn=null)}for(;0<Mu.length&&(m=Mu[0],m.blockedOn===null);)T1(m),m.blockedOn===null&&Mu.shift();if(m=(o.ownerDocument||o).$$reactFormReplay,m!=null)for(y=0;y<m.length;y+=3){var S=m[y],R=m[y+1],U=S[Si]||null;if(typeof R=="function")U||w1(m);else if(U){var q=null;if(R&&R.hasAttribute("formAction")){if(S=R,U=R[Si]||null)q=U.formAction;else if(qy(S)!==null)continue}else q=U.action;typeof q=="function"?m[y+1]=q:(m.splice(y,3),y-=3),w1(m)}}}function Yy(o){this._internalRoot=o}Qp.prototype.render=Yy.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(i(409));var m=u.current,y=gs();b1(m,y,o,u,null,null)},Qp.prototype.unmount=Yy.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;b1(o.current,2,null,o,null,null),Ip(),u[ro]=null}};function Qp(o){this._internalRoot=o}Qp.prototype.unstable_scheduleHydration=function(o){if(o){var u=df();o={blockedOn:null,target:o,priority:u};for(var m=0;m<Mu.length&&u!==0&&u<Mu[m].priority;m++);Mu.splice(m,0,o),m===0&&T1(o)}};var L1=e.version;if(L1!=="19.1.0")throw Error(i(527,L1,"19.1.0"));oe.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=f(u),o=o!==null?c(o):null,o=o===null?null:o.stateNode,o};var IU={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jp.isDisabled&&Jp.supportsFiber)try{rt=Jp.inject(IU),Kt=Jp}catch{}}return Gh.createRoot=function(o,u){if(!r(o))throw Error(i(299));var m=!1,y="",S=GA,R=HA,U=KA,q=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(S=u.onUncaughtError),u.onCaughtError!==void 0&&(R=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(q=u.unstable_transitionCallbacks)),u=v1(o,1,!1,null,null,m,y,S,R,U,q,null),o[ro]=u.current,Ry(o),new Yy(u)},Gh.hydrateRoot=function(o,u,m){if(!r(o))throw Error(i(299));var y=!1,S="",R=GA,U=HA,q=KA,te=null,ge=null;return m!=null&&(m.unstable_strictMode===!0&&(y=!0),m.identifierPrefix!==void 0&&(S=m.identifierPrefix),m.onUncaughtError!==void 0&&(R=m.onUncaughtError),m.onCaughtError!==void 0&&(U=m.onCaughtError),m.onRecoverableError!==void 0&&(q=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(te=m.unstable_transitionCallbacks),m.formState!==void 0&&(ge=m.formState)),u=v1(o,1,!0,u,m??null,y,S,R,U,q,te,ge),u.context=y1(null),m=u.current,y=gs(),y=ac(y),S=Ee(y),S.callback=null,Me(m,S,y),m=y,u.current.lanes=m,da(u,m),Lo(u),o[ro]=u.current,Ry(o),new Qp(u)},Gh.version="19.1.0",Gh}var j1;function zU(){if(j1)return Xy.exports;j1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xy.exports=$U(),Xy.exports}var GU=zU(),Hh={},B1;function HU(){if(B1)return Hh;B1=1,Object.defineProperty(Hh,"__esModule",{value:!0}),Hh.parse=a,Hh.serialize=c;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,s=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function a(g,x){const b=new s,T=g.length;if(T<2)return b;const E=x?.decode||h;let C=0;do{const I=g.indexOf("=",C);if(I===-1)break;const P=g.indexOf(";",C),M=P===-1?T:P;if(I>M){C=g.lastIndexOf(";",I-1)+1;continue}const k=l(g,C,I),z=f(g,I,k),F=g.slice(k,z);if(b[F]===void 0){let G=l(g,I+1,M),K=f(g,M,G);const V=E(g.slice(G,K));b[F]=V}C=M+1}while(C<T);return b}function l(g,x,b){do{const T=g.charCodeAt(x);if(T!==32&&T!==9)return x}while(++x<b);return b}function f(g,x,b){for(;x>b;){const T=g.charCodeAt(--x);if(T!==32&&T!==9)return x+1}return b}function c(g,x,b){const T=b?.encode||encodeURIComponent;if(!t.test(g))throw new TypeError(`argument name is invalid: ${g}`);const E=T(x);if(!e.test(E))throw new TypeError(`argument val is invalid: ${x}`);let C=g+"="+E;if(!b)return C;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);C+="; Max-Age="+b.maxAge}if(b.domain){if(!n.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);C+="; Domain="+b.domain}if(b.path){if(!i.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);C+="; Path="+b.path}if(b.expires){if(!p(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);C+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(C+="; HttpOnly"),b.secure&&(C+="; Secure"),b.partitioned&&(C+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return C}function h(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return r.call(g)==="[object Date]"}return Hh}HU();var F1="popstate";function KU(t={}){function e(i,r){let{pathname:s,search:a,hash:l}=i.location;return x_("",{pathname:s,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:xm(r)}return VU(e,n,null,t)}function Fn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ja(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qU(){return Math.random().toString(36).substring(2,10)}function U1(t,e){return{usr:t.state,key:t.key,idx:e}}function x_(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?zd(e):e,state:n,key:e&&e.key||i||qU()}}function xm({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function zd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function VU(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,l="POP",f=null,c=h();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function h(){return(a.state||{idx:null}).idx}function p(){l="POP";let E=h(),C=E==null?null:E-c;c=E,f&&f({action:l,location:T.location,delta:C})}function g(E,C){l="PUSH";let I=x_(T.location,E,C);c=h()+1;let P=U1(I,c),M=T.createHref(I);try{a.pushState(P,"",M)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(M)}s&&f&&f({action:l,location:T.location,delta:1})}function x(E,C){l="REPLACE";let I=x_(T.location,E,C);c=h();let P=U1(I,c),M=T.createHref(I);a.replaceState(P,"",M),s&&f&&f({action:l,location:T.location,delta:0})}function b(E){return YU(E)}let T={get action(){return l},get location(){return t(r,a)},listen(E){if(f)throw new Error("A history only accepts one active listener");return r.addEventListener(F1,p),f=E,()=>{r.removeEventListener(F1,p),f=null}},createHref(E){return e(r,E)},createURL:b,encodeLocation(E){let C=b(E);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:g,replace:x,go(E){return a.go(E)}};return T}function YU(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Fn(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:xm(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function XD(t,e,n="/"){return WU(t,e,n,!1)}function WU(t,e,n,i){let r=typeof e=="string"?zd(e):e,s=kl(r.pathname||"/",n);if(s==null)return null;let a=QD(t);ZU(a);let l=null;for(let f=0;l==null&&f<a.length;++f){let c=o$(s);l=s$(a[f],c,i)}return l}function QD(t,e=[],n=[],i=""){let r=(s,a,l)=>{let f={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};f.relativePath.startsWith("/")&&(Fn(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length));let c=Pl([i,f.relativePath]),h=n.concat(f);s.children&&s.children.length>0&&(Fn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),QD(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:i$(c,s.index),routesMeta:h})};return t.forEach((s,a)=>{if(s.path===""||!s.path?.includes("?"))r(s,a);else for(let l of JD(s.path))r(s,a,l)}),e}function JD(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=JD(i.join("/")),l=[];return l.push(...a.map(f=>f===""?s:[s,f].join("/"))),r&&l.push(...a),l.map(f=>t.startsWith("/")&&f===""?"/":f)}function ZU(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:r$(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var XU=/^:[\w-]+$/,QU=3,JU=2,e$=1,t$=10,n$=-2,$1=t=>t==="*";function i$(t,e){let n=t.split("/"),i=n.length;return n.some($1)&&(i+=n$),e&&(i+=JU),n.filter(r=>!$1(r)).reduce((r,s)=>r+(XU.test(s)?QU:s===""?e$:t$),i)}function r$(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function s$(t,e,n=!1){let{routesMeta:i}=t,r={},s="/",a=[];for(let l=0;l<i.length;++l){let f=i[l],c=l===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",p=Wg({path:f.relativePath,caseSensitive:f.caseSensitive,end:c},h),g=f.route;if(!p&&c&&n&&!i[i.length-1].route.index&&(p=Wg({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},h)),!p)return null;Object.assign(r,p.params),a.push({params:r,pathname:Pl([s,p.pathname]),pathnameBase:f$(Pl([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Pl([s,p.pathnameBase]))}return a}function Wg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=a$(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((c,{paramName:h,isOptional:p},g)=>{if(h==="*"){let b=l[g]||"";a=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const x=l[g];return p&&!x?c[h]=void 0:c[h]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function a$(t,e=!1,n=!0){Ja(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,f)=>(i.push({paramName:l,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function o$(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ja(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function kl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function l$(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?zd(t):t;return{pathname:n?n.startsWith("/")?n:u$(n,e):e,search:d$(i),hash:h$(r)}}function u$(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function tb(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function c$(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function HS(t){let e=c$(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function KS(t,e,n,i=!1){let r;typeof t=="string"?r=zd(t):(r={...t},Fn(!r.pathname||!r.pathname.includes("?"),tb("?","pathname","search",r)),Fn(!r.pathname||!r.pathname.includes("#"),tb("#","pathname","hash",r)),Fn(!r.search||!r.search.includes("#"),tb("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,l;if(a==null)l=n;else{let p=e.length-1;if(!i&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;r.pathname=g.join("/")}l=p>=0?e[p]:"/"}let f=l$(r,l),c=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(c||h)&&(f.pathname+="/"),f}var Pl=t=>t.join("/").replace(/\/\/+/g,"/"),f$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),d$=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,h$=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function m$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var eI=["POST","PUT","PATCH","DELETE"];new Set(eI);var p$=["GET",...eI];new Set(p$);var Gd=O.createContext(null);Gd.displayName="DataRouter";var Zv=O.createContext(null);Zv.displayName="DataRouterState";var tI=O.createContext({isTransitioning:!1});tI.displayName="ViewTransition";var g$=O.createContext(new Map);g$.displayName="Fetchers";var v$=O.createContext(null);v$.displayName="Await";var to=O.createContext(null);to.displayName="Navigation";var Gm=O.createContext(null);Gm.displayName="Location";var Fo=O.createContext({outlet:null,matches:[],isDataRoute:!1});Fo.displayName="Route";var qS=O.createContext(null);qS.displayName="RouteError";function y$(t,{relative:e}={}){Fn(Hd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=O.useContext(to),{hash:r,pathname:s,search:a}=Hm(t,{relative:e}),l=s;return n!=="/"&&(l=s==="/"?n:Pl([n,s])),i.createHref({pathname:l,search:a,hash:r})}function Hd(){return O.useContext(Gm)!=null}function $l(){return Fn(Hd(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(Gm).location}var nI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function iI(t){O.useContext(to).static||O.useLayoutEffect(t)}function rI(){let{isDataRoute:t}=O.useContext(Fo);return t?P$():b$()}function b$(){Fn(Hd(),"useNavigate() may be used only in the context of a <Router> component.");let t=O.useContext(Gd),{basename:e,navigator:n}=O.useContext(to),{matches:i}=O.useContext(Fo),{pathname:r}=$l(),s=JSON.stringify(HS(i)),a=O.useRef(!1);return iI(()=>{a.current=!0}),O.useCallback((f,c={})=>{if(Ja(a.current,nI),!a.current)return;if(typeof f=="number"){n.go(f);return}let h=KS(f,JSON.parse(s),r,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Pl([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,s,r,t])}O.createContext(null);function Hm(t,{relative:e}={}){let{matches:n}=O.useContext(Fo),{pathname:i}=$l(),r=JSON.stringify(HS(n));return O.useMemo(()=>KS(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function x$(t,e){return sI(t,e)}function sI(t,e,n,i){Fn(Hd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=O.useContext(to),{matches:s}=O.useContext(Fo),a=s[s.length-1],l=a?a.params:{},f=a?a.pathname:"/",c=a?a.pathnameBase:"/",h=a&&a.route;{let C=h&&h.path||"";aI(f,!h||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let p=$l(),g;if(e){let C=typeof e=="string"?zd(e):e;Fn(c==="/"||C.pathname?.startsWith(c),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${C.pathname}" was given in the \`location\` prop.`),g=C}else g=p;let x=g.pathname||"/",b=x;if(c!=="/"){let C=c.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(C.length).join("/")}let T=XD(t,{pathname:b});Ja(h||T!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Ja(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=A$(T&&T.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:Pl([c,r.encodeLocation?r.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:Pl([c,r.encodeLocation?r.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,i);return e&&E?O.createElement(Gm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},E):E}function _$(){let t=R$(),e=m$(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:s},"ErrorBoundary")," or"," ",O.createElement("code",{style:s},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:r},n):null,a)}var S$=O.createElement(_$,null),E$=class extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?O.createElement(Fo.Provider,{value:this.props.routeContext},O.createElement(qS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function T$({routeContext:t,match:e,children:n}){let i=O.useContext(Gd);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(Fo.Provider,{value:t},n)}function A$(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,s=n?.errors;if(s!=null){let f=r.findIndex(c=>c.route.id&&s?.[c.route.id]!==void 0);Fn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),r=r.slice(0,Math.min(r.length,f+1))}let a=!1,l=-1;if(n)for(let f=0;f<r.length;f++){let c=r[f];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=f),c.route.id){let{loaderData:h,errors:p}=n,g=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!p||p[c.route.id]===void 0);if(c.route.lazy||g){a=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((f,c,h)=>{let p,g=!1,x=null,b=null;n&&(p=s&&c.route.id?s[c.route.id]:void 0,x=c.route.errorElement||S$,a&&(l<0&&h===0?(aI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,b=null):l===h&&(g=!0,b=c.route.hydrateFallbackElement||null)));let T=e.concat(r.slice(0,h+1)),E=()=>{let C;return p?C=x:g?C=b:c.route.Component?C=O.createElement(c.route.Component,null):c.route.element?C=c.route.element:C=f,O.createElement(T$,{match:c,routeContext:{outlet:f,matches:T,isDataRoute:n!=null},children:C})};return n&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?O.createElement(E$,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:E(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):E()},null)}function VS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function w$(t){let e=O.useContext(Gd);return Fn(e,VS(t)),e}function L$(t){let e=O.useContext(Zv);return Fn(e,VS(t)),e}function C$(t){let e=O.useContext(Fo);return Fn(e,VS(t)),e}function YS(t){let e=C$(t),n=e.matches[e.matches.length-1];return Fn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function O$(){return YS("useRouteId")}function R$(){let t=O.useContext(qS),e=L$("useRouteError"),n=YS("useRouteError");return t!==void 0?t:e.errors?.[n]}function P$(){let{router:t}=w$("useNavigate"),e=YS("useNavigate"),n=O.useRef(!1);return iI(()=>{n.current=!0}),O.useCallback(async(r,s={})=>{Ja(n.current,nI),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var z1={};function aI(t,e,n){!e&&!z1[t]&&(z1[t]=!0,Ja(!1,n))}O.memo(D$);function D$({routes:t,future:e,state:n}){return sI(t,void 0,n,e)}function I$({to:t,replace:e,state:n,relative:i}){Fn(Hd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=O.useContext(to);Ja(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=O.useContext(Fo),{pathname:a}=$l(),l=rI(),f=KS(t,HS(s),a,i==="path"),c=JSON.stringify(f);return O.useEffect(()=>{l(JSON.parse(c),{replace:e,state:n,relative:i})},[l,c,i,e,n]),null}function Ic(t){Fn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function M$({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:s=!1}){Fn(!Hd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=O.useMemo(()=>({basename:a,navigator:r,static:s,future:{}}),[a,r,s]);typeof n=="string"&&(n=zd(n));let{pathname:f="/",search:c="",hash:h="",state:p=null,key:g="default"}=n,x=O.useMemo(()=>{let b=kl(f,a);return b==null?null:{location:{pathname:b,search:c,hash:h,state:p,key:g},navigationType:i}},[a,f,c,h,p,g,i]);return Ja(x!=null,`<Router basename="${a}"> is not able to match the URL "${f}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:O.createElement(to.Provider,{value:l},O.createElement(Gm.Provider,{children:e,value:x}))}function k$({children:t,location:e}){return x$(__(t),e)}function __(t,e=[]){let n=[];return O.Children.forEach(t,(i,r)=>{if(!O.isValidElement(i))return;let s=[...e,r];if(i.type===O.Fragment){n.push.apply(n,__(i.props.children,s));return}Fn(i.type===Ic,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=__(i.props.children,s)),n.push(a)}),n}var Ig="get",Mg="application/x-www-form-urlencoded";function Xv(t){return t!=null&&typeof t.tagName=="string"}function N$(t){return Xv(t)&&t.tagName.toLowerCase()==="button"}function j$(t){return Xv(t)&&t.tagName.toLowerCase()==="form"}function B$(t){return Xv(t)&&t.tagName.toLowerCase()==="input"}function F$(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function U$(t,e){return t.button===0&&(!e||e==="_self")&&!F$(t)}var eg=null;function $$(){if(eg===null)try{new FormData(document.createElement("form"),0),eg=!1}catch{eg=!0}return eg}var z$=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nb(t){return t!=null&&!z$.has(t)?(Ja(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mg}"`),null):t}function G$(t,e){let n,i,r,s,a;if(j$(t)){let l=t.getAttribute("action");i=l?kl(l,e):null,n=t.getAttribute("method")||Ig,r=nb(t.getAttribute("enctype"))||Mg,s=new FormData(t)}else if(N$(t)||B$(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||l.getAttribute("action");if(i=f?kl(f,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Ig,r=nb(t.getAttribute("formenctype"))||nb(l.getAttribute("enctype"))||Mg,s=new FormData(l,t),!$$()){let{name:c,type:h,value:p}=t;if(h==="image"){let g=c?`${c}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else c&&s.append(c,p)}}else{if(Xv(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ig,i=null,r=Mg,a=t}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}function WS(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function H$(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function K$(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function q$(t,e,n){let i=await Promise.all(t.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await H$(s,n);return a.links?a.links():[]}return[]}));return Z$(i.flat(1).filter(K$).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function G1(t,e,n,i,r,s){let a=(f,c)=>n[c]?f.route.id!==n[c].route.id:!0,l=(f,c)=>n[c].pathname!==f.pathname||n[c].route.path?.endsWith("*")&&n[c].params["*"]!==f.params["*"];return s==="assets"?e.filter((f,c)=>a(f,c)||l(f,c)):s==="data"?e.filter((f,c)=>{let h=i.routes[f.route.id];if(!h||!h.hasLoader)return!1;if(a(f,c)||l(f,c))return!0;if(f.route.shouldRevalidate){let p=f.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function V$(t,e,{includeHydrateFallback:n}={}){return Y$(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function Y$(t){return[...new Set(t)]}function W$(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function Z$(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let s=JSON.stringify(W$(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var X$=new Set([100,101,204,205]);function Q$(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&kl(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function oI(){let t=O.useContext(Gd);return WS(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function J$(){let t=O.useContext(Zv);return WS(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ZS=O.createContext(void 0);ZS.displayName="FrameworkContext";function lI(){let t=O.useContext(ZS);return WS(t,"You must render this element inside a <HydratedRouter> element"),t}function e3(t,e){let n=O.useContext(ZS),[i,r]=O.useState(!1),[s,a]=O.useState(!1),{onFocus:l,onBlur:f,onMouseEnter:c,onMouseLeave:h,onTouchStart:p}=e,g=O.useRef(null);O.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let T=C=>{C.forEach(I=>{a(I.isIntersecting)})},E=new IntersectionObserver(T,{threshold:.5});return g.current&&E.observe(g.current),()=>{E.disconnect()}}},[t]),O.useEffect(()=>{if(i){let T=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(T)}}},[i]);let x=()=>{r(!0)},b=()=>{r(!1),a(!1)};return n?t!=="intent"?[s,g,{}]:[s,g,{onFocus:Kh(l,x),onBlur:Kh(f,b),onMouseEnter:Kh(c,x),onMouseLeave:Kh(h,b),onTouchStart:Kh(p,x)}]:[!1,g,{}]}function Kh(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function t3({page:t,...e}){let{router:n}=oI(),i=O.useMemo(()=>XD(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?O.createElement(i3,{page:t,matches:i,...e}):null}function n3(t){let{manifest:e,routeModules:n}=lI(),[i,r]=O.useState([]);return O.useEffect(()=>{let s=!1;return q$(t,e,n).then(a=>{s||r(a)}),()=>{s=!0}},[t,e,n]),i}function i3({page:t,matches:e,...n}){let i=$l(),{manifest:r,routeModules:s}=lI(),{basename:a}=oI(),{loaderData:l,matches:f}=J$(),c=O.useMemo(()=>G1(t,e,f,r,i,"data"),[t,e,f,r,i]),h=O.useMemo(()=>G1(t,e,f,r,i,"assets"),[t,e,f,r,i]),p=O.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let b=new Set,T=!1;if(e.forEach(C=>{let I=r.routes[C.route.id];!I||!I.hasLoader||(!c.some(P=>P.route.id===C.route.id)&&C.route.id in l&&s[C.route.id]?.shouldRevalidate||I.hasClientLoader?T=!0:b.add(C.route.id))}),b.size===0)return[];let E=Q$(t,a);return T&&b.size>0&&E.searchParams.set("_routes",e.filter(C=>b.has(C.route.id)).map(C=>C.route.id).join(",")),[E.pathname+E.search]},[a,l,i,r,c,e,t,s]),g=O.useMemo(()=>V$(h,r),[h,r]),x=n3(h);return O.createElement(O.Fragment,null,p.map(b=>O.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),g.map(b=>O.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),x.map(({key:b,link:T})=>O.createElement("link",{key:b,...T})))}function r3(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var uI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{uI&&(window.__reactRouterVersion="7.6.3")}catch{}function s3({basename:t,children:e,window:n}){let i=O.useRef();i.current==null&&(i.current=KU({window:n,v5Compat:!0}));let r=i.current,[s,a]=O.useState({action:r.action,location:r.location}),l=O.useCallback(f=>{O.startTransition(()=>a(f))},[a]);return O.useLayoutEffect(()=>r.listen(l),[r,l]),O.createElement(M$,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:r})}var cI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dm=O.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:l,target:f,to:c,preventScrollReset:h,viewTransition:p,...g},x){let{basename:b}=O.useContext(to),T=typeof c=="string"&&cI.test(c),E,C=!1;if(typeof c=="string"&&T&&(E=c,uI))try{let K=new URL(window.location.href),V=c.startsWith("//")?new URL(K.protocol+c):new URL(c),Q=kl(V.pathname,b);V.origin===K.origin&&Q!=null?c=Q+V.search+V.hash:C=!0}catch{Ja(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=y$(c,{relative:r}),[P,M,k]=e3(i,g),z=u3(c,{replace:a,state:l,target:f,preventScrollReset:h,relative:r,viewTransition:p});function F(K){e&&e(K),K.defaultPrevented||z(K)}let G=O.createElement("a",{...g,...k,href:E||I,onClick:C||s?e:F,ref:r3(x,M),target:f,"data-discover":!T&&n==="render"?"true":void 0});return P&&!T?O.createElement(O.Fragment,null,G,O.createElement(t3,{page:I})):G});dm.displayName="Link";var a3=O.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:l,children:f,...c},h){let p=Hm(a,{relative:c.relative}),g=$l(),x=O.useContext(Zv),{navigator:b,basename:T}=O.useContext(to),E=x!=null&&m3(p)&&l===!0,C=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,I=g.pathname,P=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(I=I.toLowerCase(),P=P?P.toLowerCase():null,C=C.toLowerCase()),P&&T&&(P=kl(P,T)||P);const M=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let k=I===C||!r&&I.startsWith(C)&&I.charAt(M)==="/",z=P!=null&&(P===C||!r&&P.startsWith(C)&&P.charAt(C.length)==="/"),F={isActive:k,isPending:z,isTransitioning:E},G=k?e:void 0,K;typeof i=="function"?K=i(F):K=[i,k?"active":null,z?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let V=typeof s=="function"?s(F):s;return O.createElement(dm,{...c,"aria-current":G,className:K,ref:h,style:V,to:a,viewTransition:l},typeof f=="function"?f(F):f)});a3.displayName="NavLink";var o3=O.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:s,method:a=Ig,action:l,onSubmit:f,relative:c,preventScrollReset:h,viewTransition:p,...g},x)=>{let b=d3(),T=h3(l,{relative:c}),E=a.toLowerCase()==="get"?"get":"post",C=typeof l=="string"&&cI.test(l),I=P=>{if(f&&f(P),P.defaultPrevented)return;P.preventDefault();let M=P.nativeEvent.submitter,k=M?.getAttribute("formmethod")||a;b(M||P.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:r,state:s,relative:c,preventScrollReset:h,viewTransition:p})};return O.createElement("form",{ref:x,method:E,action:T,onSubmit:i?f:I,...g,"data-discover":!C&&t==="render"?"true":void 0})});o3.displayName="Form";function l3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fI(t){let e=O.useContext(Gd);return Fn(e,l3(t)),e}function u3(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:a}={}){let l=rI(),f=$l(),c=Hm(t,{relative:s});return O.useCallback(h=>{if(U$(h,e)){h.preventDefault();let p=n!==void 0?n:xm(f)===xm(c);l(t,{replace:p,state:i,preventScrollReset:r,relative:s,viewTransition:a})}},[f,l,c,n,i,e,t,r,s,a])}var c3=0,f3=()=>`__${String(++c3)}__`;function d3(){let{router:t}=fI("useSubmit"),{basename:e}=O.useContext(to),n=O$();return O.useCallback(async(i,r={})=>{let{action:s,method:a,encType:l,formData:f,body:c}=G$(i,e);if(r.navigate===!1){let h=r.fetcherKey||f3();await t.fetch(h,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:f,body:c,formMethod:r.method||a,formEncType:r.encType||l,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:f,body:c,formMethod:r.method||a,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function h3(t,{relative:e}={}){let{basename:n}=O.useContext(to),i=O.useContext(Fo);Fn(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...Hm(t||".",{relative:e})},a=$l();if(t==null){s.search=a.search;let l=new URLSearchParams(s.search),f=l.getAll("index");if(f.some(h=>h==="")){l.delete("index"),f.filter(p=>p).forEach(p=>l.append("index",p));let h=l.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Pl([n,s.pathname])),xm(s)}function m3(t,e={}){let n=O.useContext(tI);Fn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=fI("useViewTransitionState"),r=Hm(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=kl(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=kl(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Wg(r.pathname,a)!=null||Wg(r.pathname,s)!=null}[...X$];var dI=ZD();const pd=Qr(dI);function p3(){const{pathname:t}=$l(),[e,n]=O.useState(()=>{const l=Number(localStorage.getItem("notif.count"));return Number.isFinite(l)?l:0});O.useEffect(()=>{const l=c=>{if(c.key==="notif.count"){const h=Number(c.newValue);n(Number.isFinite(h)?h:0)}},f=c=>n(Number(c.detail)||0);return window.addEventListener("storage",l),window.addEventListener("notif-count",f),()=>{window.removeEventListener("storage",l),window.removeEventListener("notif-count",f)}},[]);const i=l=>t===l||t.startsWith(l+"/"),r=l=>{const f=i(l.to),c=l.to==="/settings"&&e>0;return A.jsxs(dm,{to:l.to,className:`menu-item${f?" active":""}${c?" has-badge":""}`,"aria-label":l.label,title:l.label,children:[l.imgSrc?A.jsx("img",{src:l.imgSrc,alt:l.label,className:"menu-icon-img",style:{width:42,height:42,objectFit:"contain"}}):A.jsx("i",{className:`bi ${l.iconClass}`}),c&&A.jsx("span",{className:"menu-badge",children:e})]},l.to)},s=[{to:"/",iconClass:"bi-house",label:"Acas / Dashboard"},{to:"/statistici",iconClass:"bi-sliders2-vertical",label:"Statistici / Automatizri"},{to:"/harta-serelor",iconClass:"bi-map",label:"Harta Serelor"},{to:"/agromi",imgSrc:"/assets/img/agromi-logo.png",label:"Agromi"}],a=[{to:"/settings",iconClass:"bi-gear",label:"Setri"}];return A.jsxs(A.Fragment,{children:[A.jsxs("aside",{className:"sidebar",children:[A.jsx("div",{className:"sidebar-header",children:A.jsx(dm,{to:"/","aria-label":"Acas",children:A.jsx("img",{src:"/assets/img/bytestorm.png",alt:"Bytestorm",className:"logo"})})}),A.jsx("nav",{className:"sidebar-nav",children:s.map(r)}),A.jsx("div",{className:"sidebar-footer",children:a.map(r)})]}),A.jsxs("header",{className:"mobile-header",children:[A.jsx(dm,{to:"/","aria-label":"Acas",children:A.jsx("img",{src:"/assets/img/bytestorm.png",alt:"Bytestorm",className:"logo"})}),A.jsx("div",{className:"mobile-header-actions",children:a.map(r)})]}),A.jsx("nav",{className:"mobile-bottom-nav",children:s.map(r)})]})}function g3(){return[{id:"g1",nume:"Sera Spanac",suprafata:120,lungime:20,latime:6,cultura:"spanac",boardId:"e663ac91d3824a2c",dataRecoltarii:"2025-09-10",straturi:[{nume:"Strat A",suprafata:40,zile:18},{nume:"Strat B",suprafata:30,zile:22},{nume:"Strat C",suprafata:90,zile:5}]},{id:"g2",nume:"Sera Roii",suprafata:240,lungime:30,latime:8,cultura:"roii",boardId:"b123456789abcdef",dataRecoltarii:"2025-08-15",straturi:[{nume:"Strat A",suprafata:100,zile:7},{nume:"Strat B",suprafata:80,zile:12},{nume:"Strat C",suprafata:90,zile:5}]},{id:"g3",nume:"Sera Ardei",suprafata:180,lungime:30,latime:6,cultura:"ardei",boardId:"c123456789abcdef",dataRecoltarii:"2025-08-20",straturi:[{nume:"Strat A",suprafata:70,zile:11},{nume:"Strat B",suprafata:50,zile:14},{nume:"Strat C",suprafata:90,zile:5}]}]}const v3=["Duminic","Luni","Mari","Miercuri","Joi","Vineri","Smbt"],ib=t=>t===0?"":[1,2].includes(t)?"":[3,45,48].includes(t)?"":[51,53,55,61,63,65,80,81,82].includes(t)?"":[71,73,75].includes(t)?"":"",y3=t=>{const e=new Date;return e.setDate(e.getDate()+t),v3[e.getDay()]};async function hI(t){const n=await(await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(t)}&count=1&language=ro&format=json`)).json();if(n?.results?.length){const i=n.results[0];return{lat:i.latitude,lon:i.longitude,oras:{nume:i.name,tara:i.country,judet:i.admin1,codPostal:i.postcodes?.[0]??""}}}throw new Error("Ora negsit")}async function b3(t,e){const n=`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${e}&daily=temperature_2m_max,temperature_2m_min,weathercode&hourly=temperature_2m,weathercode,relative_humidity_2m,wind_speed_10m,pressure_msl&current=temperature_2m,weathercode,relative_humidity_2m,wind_speed_10m,pressure_msl&timezone=auto&forecast_days=6`,r=await(await fetch(n)).json(),s=r.daily.time.map((c,h)=>({zi:y3(h),date:r.daily.time[h],tMax:Math.round(r.daily.temperature_2m_max[h]),tMin:Math.round(r.daily.temperature_2m_min[h]),icon:ib(r.daily.weathercode[h])})),a=Date.now(),l=r.hourly.time.map((c,h)=>({ts:new Date(c).getTime(),time:new Date(c).toLocaleTimeString("ro-RO",{hour:"2-digit",minute:"2-digit"}),icon:ib(r.hourly.weathercode[h]),temp:Math.round(r.hourly.temperature_2m[h]),hum:r.hourly.relative_humidity_2m[h],wind:r.hourly.wind_speed_10m[h],press:Math.round(r.hourly.pressure_msl[h])})).filter(c=>c.ts>=a).slice(0,24),f={temp:Math.round(r.current.temperature_2m),icon:ib(r.current.weathercode),hum:r.current.relative_humidity_2m,wind:r.current.wind_speed_10m,press:Math.round(r.current.pressure_msl)};return{daily:s,hourly:l,current:f}}function mI({options:t=[],value:e,onChange:n,fill:i=!1}){const[r,s]=O.useState(!1),a=O.useRef(null);O.useEffect(()=>{const f=h=>{r&&a.current&&!a.current.contains(h.target)&&s(!1)},c=h=>{r&&h.key==="Escape"&&s(!1)};return document.addEventListener("mousedown",f),document.addEventListener("keydown",c),()=>{document.removeEventListener("mousedown",f),document.removeEventListener("keydown",c)}},[r]);const l=t.find(f=>f.id===e);return A.jsxs("div",{className:`sera ${i?"sera--fill":""}`,ref:a,children:[A.jsxs("button",{type:"button",className:`sera__btn ${r?"is-open":""}`,"aria-haspopup":"listbox","aria-expanded":r,title:l?.name,onClick:()=>s(f=>!f),children:[A.jsx("span",{className:"sera__label",children:l?.name??"Alege ser"}),A.jsx("span",{className:"sera__chev","aria-hidden":"true",children:A.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:A.jsx("path",{d:"M7 10l5 5 5-5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),r&&A.jsx("div",{className:"sera__menu",role:"listbox",children:t.map(f=>A.jsx("button",{role:"option","aria-selected":f.id===e,className:`sera__item ${f.id===e?"is-active":""}`,onClick:()=>{n?.(f.id),s(!1)},children:f.name},f.id))})]})}const Km=[{id:"spanac",name:"Sera Spanac",boardId:"e663ac91d3824a2c"},{id:"rosii",name:"Sera Rosii",boardId:"mock:mirror"},{id:"ardei",name:"Sera Ardei",boardId:"mock:synthetic"}],rb=Km[0]?.id||null,x3=Object.fromEntries(Km.map(t=>[t.id,t])),S_=t=>x3[t]||null,pI=O.createContext(null),Zg=t=>(t??"").toString().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").toLowerCase().trim(),H1=t=>S_(t)||Km.find(e=>Zg(e.id)===Zg(t))||null,K1=t=>Km.find(e=>Zg(e.name)===Zg(t))||null;function _3({children:t,initialId:e}){const n="gh.selected",[i,r]=O.useState(()=>{try{return localStorage.getItem(n)||e||rb}catch{return e||rb}});O.useEffect(()=>{S_(i)||r(rb)},[i]),O.useEffect(()=>{try{i&&localStorage.setItem(n,i)}catch{}},[i]);const s=O.useMemo(()=>S_(i),[i]),a=h=>{const p=H1(h);p&&r(p.id)},l=h=>{const p=K1(h);p&&r(p.id)},f=h=>{if(!h)return;const p=H1(h);if(p)return r(p.id);const g=K1(h);if(g)return r(g.id)},c=O.useMemo(()=>({list:Km,selectedId:i,selected:s,boardId:s?.boardId||null,name:s?.name||"",setSelectedId:r,selectById:a,selectByName:l,selectSmart:f}),[i,s]);return A.jsx(pI.Provider,{value:c,children:t})}const Kd=()=>{const t=O.useContext(pI);if(!t)throw new Error("useGreenhouse trebuie folosit n <GreenhouseProvider>.");return t};function S3({fill:t}){const{list:e,selectedId:n,setSelectedId:i}=Kd();return A.jsx(mI,{options:e,value:n,onChange:i,fill:t})}function gI(t,e="gh.selected"){const[n,i]=O.useState(()=>{try{return localStorage.getItem(e)||t}catch{return t}});return O.useEffect(()=>{try{n!=null&&localStorage.setItem(e,n)}catch{}},[n,e]),[n,i]}function tg(t){return t==null?"":String(t).normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").toLowerCase().trim()}function E3({sereData:t,selectedSera:e,onUpdateSera:n,locatie:i,loadingVreme:r,daily:s,current:a,tempNow:l,iconNow:f,onShowModal:c}){const{selected:h,selectById:p,selectByName:g}=Kd(),x=O.useMemo(()=>(t||[]).map(P=>({id:P.id??P.nume,name:P.nume})),[t]),[b,T]=gI(x[0]?.id,"gh.selected");O.useEffect(()=>{const P=e?.id??e?.nume;P&&P!==b&&T(P)},[e,b,T]),O.useEffect(()=>{!b&&x[0]?.id&&T(x[0].id)},[x,b,T]);const E=P=>{T(P),p?.(P);const M=(t||[]).find(k=>(k.id??k.nume)===P)||null;!M&&g&&typeof P=="string"&&g(P),n?.(M?.id??P)},C=O.useMemo(()=>e||(h?(t||[]).find(P=>P.id===h.id)||(t||[]).find(P=>P.nume===(h.nume??h.name))||(t||[]).find(P=>tg(P.nume)===tg(h.nume??h.name))||null:b&&((t||[]).find(P=>P.id===b)||(t||[]).find(P=>P.nume===b)||(t||[]).find(P=>tg(P.nume)===tg(b)))||null),[e,h,b,t]),I=O.useMemo(()=>{const P=new Date,M={weekday:"long",day:"numeric",month:"long",year:"numeric"},k=P.toLocaleDateString("ro-RO",M);return k.charAt(0).toUpperCase()+k.slice(1)},[]);return A.jsx("div",{className:"weather-info",children:A.jsxs("div",{className:"top-toolbar",children:[A.jsxs("div",{className:"left-panel",children:[A.jsx(S3,{options:x,value:h?.id??b,onChange:E}),A.jsx("div",{className:"info-card strat-panel",children:C?.straturi?.length?A.jsx("ul",{className:"straturi-list",children:C.straturi.map(P=>A.jsx("li",{className:"strat-row",children:A.jsxs("div",{className:"chip-row",children:[A.jsxs("span",{className:"metric-chip",children:[A.jsxs("span",{className:"metric-title",children:["Recoltare ",P.nume]}),A.jsxs("span",{className:"metric-value",children:[A.jsx("b",{children:P.zile})," zile"]})]}),A.jsxs("span",{className:"metric-chip",children:[A.jsx("span",{className:"metric-title",children:"Suprafa"}),A.jsxs("span",{className:"metric-value",children:[A.jsx("b",{children:P.suprafata})," m"]})]})]})},P.nume))}):A.jsx("div",{className:"muted",style:{padding:8},children:"Alege o ser pentru detalii de recoltare."})})]}),A.jsxs("div",{className:"toolbar-right toolbar-right--mobile",children:[A.jsxs("button",{type:"button",className:"weather-cta",onClick:c,disabled:r,children:[A.jsx("span",{className:"weather-cta__icon",children:r?"":f}),A.jsx("span",{className:"weather-cta__label",children:r?"Se ncarc":`Vreme ${l??""}C`}),A.jsx("i",{className:"bi bi-arrow-right-short","aria-hidden":"true"})]}),A.jsx("div",{className:"city-inline",children:A.jsxs("span",{className:"city-label",children:[A.jsxs("strong",{children:[i.oras.nume," "]}),A.jsx("br",{}),A.jsx("span",{children:I})]})})]}),A.jsxs("div",{className:"right-panel",children:[A.jsx("div",{className:"rp-header",children:A.jsxs("div",{className:"rp-title",children:[i.oras.nume,"  ",I]})}),A.jsxs("div",{className:"rp-body",children:[A.jsxs("div",{className:"rp-left",children:[A.jsxs("button",{type:"button",className:"weather-cta rp-cta",onClick:c,disabled:r,children:[A.jsx("span",{className:"weather-cta__icon",children:r?"":f}),A.jsx("span",{className:"weather-cta__label",children:r?"Se ncarc":`Acum ${l??""}C`}),A.jsx("i",{className:"bi bi-arrow-right-short","aria-hidden":"true"})]}),A.jsx("div",{className:"rp-forecast",children:s.slice(0,2).map((P,M)=>A.jsxs("div",{className:"rp-forecast__item",children:[A.jsx("div",{className:"rp-forecast__day",children:P.zi}),A.jsx("div",{className:"rp-forecast__icon",children:P.icon}),A.jsxs("div",{className:"rp-forecast__temps",children:[A.jsxs("b",{children:[P.tMax,""]}),A.jsxs("span",{className:"muted",children:[P.tMin,""]})]})]},M))})]}),A.jsxs("div",{className:"rp-stats",children:[A.jsxs("div",{className:"rp-stat",children:[A.jsx("span",{children:"Umiditate"}),A.jsxs("b",{children:[a?.hum??"","%"]})]}),A.jsxs("div",{className:"rp-stat",children:[A.jsx("span",{children:"Vnt"}),A.jsxs("b",{children:[a?a.wind.toFixed(1):""," km/h"]})]}),A.jsxs("div",{className:"rp-stat",children:[A.jsx("span",{children:"Pres"}),A.jsxs("b",{children:[a?a.press.toFixed(1):""," hPa"]})]})]})]})]})]})})}const q1={rosii:["#ef4444","#f87171"],roii:["#ef4444","#f87171"],castraveti:["#10b981","#34d399"],castravei:["#10b981","#34d399"],ardei:["#f59e0b","#fbbf24"],spanac:["#22c55e","#86efac"]},qh=t=>(t??"").toString().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").toLowerCase().trim();function T3({sereData:t=[],selectedSeraId:e,onSelect:n}){const{selected:i,selectSmart:r}=Kd(),s=qh(i?.id??e??""),a=qh(i?.name??""),{maxL:l,maxW:f}=O.useMemo(()=>({maxL:Math.max(1,...t.map(h=>Number(h.lungime)||0)),maxW:Math.max(1,...t.map(h=>Number(h.latime)||0))}),[t]),c=h=>{r?.(h.id),r?.(h.nume),n?.(h.id)};return A.jsx("div",{className:"map-shell",children:A.jsxs("div",{className:"map-canvas",children:[A.jsx("div",{className:"gh-list",children:t.map(h=>{const p=Number(h.lungime)/l*100,g=28+Number(h.latime)/f*5,x=q1[h.cultura]||q1[qh(h.cultura)]||["#9ca3af","#d1d5db"],b=qh(h.id),T=qh(h.nume),E=!!s&&(b===s||T===s)||!!a&&(T===a||b===a);return A.jsxs("button",{type:"button",className:`gh-item ${E?"is-active":""}`,"data-selected":E?"true":"false","aria-pressed":!!E,"data-debug":`aid:${s}|an:${a}|sid:${b}|sn:${T}`,style:{width:`${p}%`,height:`${g}px`,"--gh-color":x[0],cursor:"pointer"},onClick:()=>c(h),title:`${h.nume}  ${h.cultura}  ${h.suprafata??Math.round((Number(h.lungime)||0)*(Number(h.latime)||0))} m`,children:[A.jsx("span",{className:"gh-dot"}),A.jsx("span",{className:"gh-name",children:h.nume}),A.jsxs("span",{className:"gh-meta",children:[h.cultura,"  ",h.suprafata??Math.round((Number(h.lungime)||0)*(Number(h.latime)||0))," m"]})]},h.id??T)})}),A.jsx("div",{className:"map-overlay-grid","aria-hidden":!0,style:{pointerEvents:"none"}})]})})}var sb={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var V1;function A3(){return V1||(V1=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",a=0;a<arguments.length;a++){var l=arguments[a];l&&(s=r(s,i(l)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var l in s)e.call(s,l)&&s[l]&&(a=r(a,l));return a}function r(s,a){return a?s?s+" "+a:s+a:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(sb)),sb.exports}var w3=A3();const xt=Qr(w3);function E_(){return E_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},E_.apply(null,arguments)}function vI(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Y1(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function L3(t){var e=C3(t,"string");return typeof e=="symbol"?e:String(e)}function C3(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function O3(t,e,n){var i=O.useRef(t!==void 0),r=O.useState(e),s=r[0],a=r[1],l=t!==void 0,f=i.current;return i.current=l,!l&&f&&s!==e&&a(e),[l?t:s,O.useCallback(function(c){for(var h=arguments.length,p=new Array(h>1?h-1:0),g=1;g<h;g++)p[g-1]=arguments[g];n&&n.apply(void 0,[c].concat(p)),a(c)},[n])]}function XS(t,e){return Object.keys(e).reduce(function(n,i){var r,s=n,a=s[Y1(i)],l=s[i],f=vI(s,[Y1(i),i].map(L3)),c=e[i],h=O3(l,a,t[c]),p=h[0],g=h[1];return E_({},f,(r={},r[i]=p,r[c]=g,r))},t)}function T_(t,e){return T_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},T_(t,e)}function R3(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,T_(t,e)}const P3=["xxl","xl","lg","md","sm","xs"],D3="xs",qm=O.createContext({prefixes:{},breakpoints:P3,minBreakpoint:D3}),{Consumer:soe,Provider:aoe}=qm;function Pt(t,e){const{prefixes:n}=O.useContext(qm);return t||n[e]||e}function yI(){const{breakpoints:t}=O.useContext(qm);return t}function bI(){const{minBreakpoint:t}=O.useContext(qm);return t}function I3(){const{dir:t}=O.useContext(qm);return t==="rtl"}function Qv(t){return t&&t.ownerDocument||document}function M3(t){var e=Qv(t);return e&&e.defaultView||window}function k3(t,e){return M3(t).getComputedStyle(t,e)}var N3=/([A-Z])/g;function j3(t){return t.replace(N3,"-$1").toLowerCase()}var B3=/^ms-/;function ng(t){return j3(t).replace(B3,"-ms-")}var F3=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function U3(t){return!!(t&&F3.test(t))}function Dl(t,e){var n="",i="";if(typeof e=="string")return t.style.getPropertyValue(ng(e))||k3(t).getPropertyValue(ng(e));Object.keys(e).forEach(function(r){var s=e[r];!s&&s!==0?t.style.removeProperty(ng(r)):U3(r)?i+=r+"("+s+") ":n+=ng(r)+": "+s+";"}),i&&(n+="transform: "+i+";"),t.style.cssText+=";"+n}var ab={exports:{}},ob,W1;function $3(){if(W1)return ob;W1=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ob=t,ob}var lb,Z1;function z3(){if(Z1)return lb;Z1=1;var t=$3();function e(){}function n(){}return n.resetWarningCache=e,lb=function(){function i(a,l,f,c,h,p){if(p!==t){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},lb}var X1;function G3(){return X1||(X1=1,ab.exports=z3()()),ab.exports}var H3=G3();const mr=Qr(H3),Q1={disabled:!1},xI=vi.createContext(null);var K3=function(e){return e.scrollTop},om="unmounted",$u="exited",Tl="entering",Ku="entered",Xg="exiting",zl=function(t){R3(e,t);function e(i,r){var s;s=t.call(this,i,r)||this;var a=r,l=a&&!a.isMounting?i.enter:i.appear,f;return s.appearStatus=null,i.in?l?(f=$u,s.appearStatus=Tl):f=Ku:i.unmountOnExit||i.mountOnEnter?f=om:f=$u,s.state={status:f},s.nextCallback=null,s}e.getDerivedStateFromProps=function(r,s){var a=r.in;return a&&s.status===om?{status:$u}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var s=null;if(r!==this.props){var a=this.state.status;this.props.in?a!==Tl&&a!==Ku&&(s=Tl):(a===Tl||a===Ku)&&(s=Xg)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,s,a,l;return s=a=l=r,r!=null&&typeof r!="number"&&(s=r.exit,a=r.enter,l=r.appear!==void 0?r.appear:a),{exit:s,enter:a,appear:l}},n.updateStatus=function(r,s){if(r===void 0&&(r=!1),s!==null)if(this.cancelNextCallback(),s===Tl){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:pd.findDOMNode(this);a&&K3(a)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===$u&&this.setState({status:om})},n.performEnter=function(r){var s=this,a=this.props.enter,l=this.context?this.context.isMounting:r,f=this.props.nodeRef?[l]:[pd.findDOMNode(this),l],c=f[0],h=f[1],p=this.getTimeouts(),g=l?p.appear:p.enter;if(!r&&!a||Q1.disabled){this.safeSetState({status:Ku},function(){s.props.onEntered(c)});return}this.props.onEnter(c,h),this.safeSetState({status:Tl},function(){s.props.onEntering(c,h),s.onTransitionEnd(g,function(){s.safeSetState({status:Ku},function(){s.props.onEntered(c,h)})})})},n.performExit=function(){var r=this,s=this.props.exit,a=this.getTimeouts(),l=this.props.nodeRef?void 0:pd.findDOMNode(this);if(!s||Q1.disabled){this.safeSetState({status:$u},function(){r.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:Xg},function(){r.props.onExiting(l),r.onTransitionEnd(a.exit,function(){r.safeSetState({status:$u},function(){r.props.onExited(l)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,s){s=this.setNextCallback(s),this.setState(r,s)},n.setNextCallback=function(r){var s=this,a=!0;return this.nextCallback=function(l){a&&(a=!1,s.nextCallback=null,r(l))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(r,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:pd.findDOMNode(this),l=r==null&&!this.props.addEndListener;if(!a||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],c=f[0],h=f[1];this.props.addEndListener(c,h)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===om)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var l=vI(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return vi.createElement(xI.Provider,{value:null},typeof a=="function"?a(r,l):vi.cloneElement(vi.Children.only(a),l))},e}(vi.Component);zl.contextType=xI;zl.propTypes={};function rd(){}zl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:rd,onEntering:rd,onEntered:rd,onExit:rd,onExiting:rd,onExited:rd};zl.UNMOUNTED=om;zl.EXITED=$u;zl.ENTERING=Tl;zl.ENTERED=Ku;zl.EXITING=Xg;function q3(t){return t.code==="Escape"||t.keyCode===27}function V3(){const t=O.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}function Vm(t){if(!t||typeof t=="function")return null;const{major:e}=V3();return e>=19?t.props.ref:t.ref}const qd=!!(typeof window<"u"&&window.document&&window.document.createElement);var A_=!1,w_=!1;try{var ub={get passive(){return A_=!0},get once(){return w_=A_=!0}};qd&&(window.addEventListener("test",ub,ub),window.removeEventListener("test",ub,!0))}catch{}function _I(t,e,n,i){if(i&&typeof i!="boolean"&&!w_){var r=i.once,s=i.capture,a=n;!w_&&r&&(a=n.__once||function l(f){this.removeEventListener(e,l,s),n.call(this,f)},n.__once=a),t.addEventListener(e,a,A_?i:s)}t.addEventListener(e,n,i)}function L_(t,e,n,i){var r=i&&typeof i!="boolean"?i.capture:i;t.removeEventListener(e,n,r),n.__once&&t.removeEventListener(e,n.__once,r)}function Qg(t,e,n,i){return _I(t,e,n,i),function(){L_(t,e,n,i)}}function Y3(t,e,n,i){if(i===void 0&&(i=!0),t){var r=document.createEvent("HTMLEvents");r.initEvent(e,n,i),t.dispatchEvent(r)}}function W3(t){var e=Dl(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function Z3(t,e,n){n===void 0&&(n=5);var i=!1,r=setTimeout(function(){i||Y3(t,"transitionend",!0)},e+n),s=Qg(t,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),s()}}function SI(t,e,n,i){n==null&&(n=W3(t)||0);var r=Z3(t,n,i),s=Qg(t,"transitionend",e);return function(){r(),s()}}function J1(t,e){const n=Dl(t,e)||"",i=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*i}function EI(t,e){const n=J1(t,"transitionDuration"),i=J1(t,"transitionDelay"),r=SI(t,s=>{s.target===t&&(r(),e(s))},n+i)}function Vh(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...r){e.apply(this,r),n.apply(this,r)}},null)}function TI(t){t.offsetHeight}const eL=t=>!t||typeof t=="function"?t:e=>{t.current=e};function X3(t,e){const n=eL(t),i=eL(e);return r=>{n&&n(r),i&&i(r)}}function AI(t,e){return O.useMemo(()=>X3(t,e),[t,e])}function Q3(t){return t&&"setState"in t?pd.findDOMNode(t):t??null}const QS=vi.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:i,onExiting:r,onExited:s,addEndListener:a,children:l,childRef:f,...c},h)=>{const p=O.useRef(null),g=AI(p,f),x=z=>{g(Q3(z))},b=z=>F=>{z&&p.current&&z(p.current,F)},T=O.useCallback(b(t),[t]),E=O.useCallback(b(e),[e]),C=O.useCallback(b(n),[n]),I=O.useCallback(b(i),[i]),P=O.useCallback(b(r),[r]),M=O.useCallback(b(s),[s]),k=O.useCallback(b(a),[a]);return A.jsx(zl,{ref:h,...c,onEnter:T,onEntered:C,onEntering:E,onExit:I,onExited:M,onExiting:P,addEndListener:k,nodeRef:p,children:typeof l=="function"?(z,F)=>l(z,{...F,ref:x}):vi.cloneElement(l,{ref:x})})});QS.displayName="TransitionWrapper";const J3={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function ez(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,i=e[n],r=J3[t];return i+parseInt(Dl(e,r[0]),10)+parseInt(Dl(e,r[1]),10)}const tz={[$u]:"collapse",[Xg]:"collapsing",[Tl]:"collapsing",[Ku]:"collapse show"},wI=vi.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:i,onExiting:r,className:s,children:a,dimension:l="height",in:f=!1,timeout:c=300,mountOnEnter:h=!1,unmountOnExit:p=!1,appear:g=!1,getDimensionValue:x=ez,...b},T)=>{const E=typeof l=="function"?l():l,C=O.useMemo(()=>Vh(z=>{z.style[E]="0"},t),[E,t]),I=O.useMemo(()=>Vh(z=>{const F=`scroll${E[0].toUpperCase()}${E.slice(1)}`;z.style[E]=`${z[F]}px`},e),[E,e]),P=O.useMemo(()=>Vh(z=>{z.style[E]=null},n),[E,n]),M=O.useMemo(()=>Vh(z=>{z.style[E]=`${x(E,z)}px`,TI(z)},i),[i,x,E]),k=O.useMemo(()=>Vh(z=>{z.style[E]=null},r),[E,r]);return A.jsx(QS,{ref:T,addEndListener:EI,...b,"aria-expanded":b.role?f:null,onEnter:C,onEntering:I,onEntered:P,onExit:M,onExiting:k,childRef:Vm(a),in:f,timeout:c,mountOnEnter:h,unmountOnExit:p,appear:g,children:(z,F)=>vi.cloneElement(a,{...F,className:xt(s,a.props.className,tz[z],E==="width"&&"collapse-horizontal")})})});wI.displayName="Collapse";function nz(t){const e=O.useRef(t);return O.useEffect(()=>{e.current=t},[t]),e}function Jg(t){const e=nz(t);return O.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const Jv=t=>O.forwardRef((e,n)=>A.jsx("div",{...e,ref:n,className:xt(e.className,t)})),LI=Jv("h4");LI.displayName="DivStyledAsH4";const CI=O.forwardRef(({className:t,bsPrefix:e,as:n=LI,...i},r)=>(e=Pt(e,"alert-heading"),A.jsx(n,{ref:r,className:xt(t,e),...i})));CI.displayName="AlertHeading";function iz(t){const e=O.useRef(t);return O.useEffect(()=>{e.current=t},[t]),e}function Al(t){const e=iz(t);return O.useCallback(function(...n){return e.current&&e.current(...n)},[e])}function rz(){const t=O.useRef(!0),e=O.useRef(()=>t.current);return O.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function sz(t){const e=O.useRef(null);return O.useEffect(()=>{e.current=t}),e.current}const az=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",oz=typeof document<"u",tL=oz||az?O.useLayoutEffect:O.useEffect,lz=["as","disabled"];function uz(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function cz(t){return!t||t.trim()==="#"}function JS({tagName:t,disabled:e,href:n,target:i,rel:r,role:s,onClick:a,tabIndex:l=0,type:f}){t||(n!=null||i!=null||r!=null?t="a":t="button");const c={tagName:t};if(t==="button")return[{type:f||"button",disabled:e},c];const h=g=>{if((e||t==="a"&&cz(n))&&g.preventDefault(),e){g.stopPropagation();return}a?.(g)},p=g=>{g.key===" "&&(g.preventDefault(),h(g))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:e?void 0:l,href:n,target:t==="a"?i:void 0,"aria-disabled":e||void 0,rel:t==="a"?r:void 0,onClick:h,onKeyDown:p},c]}const OI=O.forwardRef((t,e)=>{let{as:n,disabled:i}=t,r=uz(t,lz);const[s,{tagName:a}]=JS(Object.assign({tagName:n,disabled:i},r));return A.jsx(a,Object.assign({},r,s,{ref:e}))});OI.displayName="Button";const fz=["onKeyDown"];function dz(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function hz(t){return!t||t.trim()==="#"}const eE=O.forwardRef((t,e)=>{let{onKeyDown:n}=t,i=dz(t,fz);const[r]=JS(Object.assign({tagName:"a"},i)),s=Al(a=>{r.onKeyDown(a),n?.(a)});return hz(i.href)||i.role==="button"?A.jsx("a",Object.assign({ref:e},i,r,{onKeyDown:s})):A.jsx("a",Object.assign({ref:e},i,{onKeyDown:n}))});eE.displayName="Anchor";const RI=O.forwardRef(({className:t,bsPrefix:e,as:n=eE,...i},r)=>(e=Pt(e,"alert-link"),A.jsx(n,{ref:r,className:xt(t,e),...i})));RI.displayName="AlertLink";const mz={[Tl]:"show",[Ku]:"show"},Xc=O.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:i,...r},s)=>{const a={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},l=O.useCallback((f,c)=>{TI(f),i?.(f,c)},[i]);return A.jsx(QS,{ref:s,addEndListener:EI,...a,onEnter:l,childRef:Vm(e),children:(f,c)=>O.cloneElement(e,{...c,className:xt("fade",t,e.props.className,mz[f],n[f])})})});Xc.displayName="Fade";const pz={"aria-label":mr.string,onClick:mr.func,variant:mr.oneOf(["white"])},e0=O.forwardRef(({className:t,variant:e,"aria-label":n="Close",...i},r)=>A.jsx("button",{ref:r,type:"button",className:xt("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...i}));e0.displayName="CloseButton";e0.propTypes=pz;const PI=O.forwardRef((t,e)=>{const{bsPrefix:n,show:i=!0,closeLabel:r="Close alert",closeVariant:s,className:a,children:l,variant:f="primary",onClose:c,dismissible:h,transition:p=Xc,...g}=XS(t,{show:"onClose"}),x=Pt(n,"alert"),b=Jg(C=>{c&&c(!1,C)}),T=p===!0?Xc:p,E=A.jsxs("div",{role:"alert",...T?void 0:g,ref:e,className:xt(a,x,f&&`${x}-${f}`,h&&`${x}-dismissible`),children:[h&&A.jsx(e0,{onClick:b,"aria-label":r,variant:s}),l]});return T?A.jsx(T,{unmountOnExit:!0,...g,ref:void 0,in:i,children:E}):i?E:null});PI.displayName="Alert";const hm=Object.assign(PI,{Link:RI,Heading:CI}),sa=O.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:i,active:r=!1,disabled:s=!1,className:a,...l},f)=>{const c=Pt(e,"btn"),[h,{tagName:p}]=JS({tagName:t,disabled:s,...l}),g=p;return A.jsx(g,{...h,...l,ref:f,disabled:s,className:xt(a,c,r&&"active",n&&`${c}-${n}`,i&&`${c}-${i}`,l.href&&s&&"disabled")})});sa.displayName="Button";const DI=O.forwardRef(({bsPrefix:t,size:e,vertical:n=!1,className:i,role:r="group",as:s="div",...a},l)=>{const f=Pt(t,"btn-group");let c=f;return n&&(c=`${f}-vertical`),A.jsx(s,{...a,ref:l,role:r,className:xt(i,c,e&&`${f}-${e}`)})});DI.displayName="ButtonGroup";const tE=O.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Pt(e,"card-body"),A.jsx(n,{ref:r,className:xt(t,e),...i})));tE.displayName="CardBody";const II=O.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Pt(e,"card-footer"),A.jsx(n,{ref:r,className:xt(t,e),...i})));II.displayName="CardFooter";const nE=O.createContext(null);nE.displayName="CardHeaderContext";const MI=O.forwardRef(({bsPrefix:t,className:e,as:n="div",...i},r)=>{const s=Pt(t,"card-header"),a=O.useMemo(()=>({cardHeaderBsPrefix:s}),[s]);return A.jsx(nE.Provider,{value:a,children:A.jsx(n,{ref:r,...i,className:xt(e,s)})})});MI.displayName="CardHeader";const kI=O.forwardRef(({bsPrefix:t,className:e,variant:n,as:i="img",...r},s)=>{const a=Pt(t,"card-img");return A.jsx(i,{ref:s,className:xt(n?`${a}-${n}`:a,e),...r})});kI.displayName="CardImg";const NI=O.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Pt(e,"card-img-overlay"),A.jsx(n,{ref:r,className:xt(t,e),...i})));NI.displayName="CardImgOverlay";const jI=O.forwardRef(({className:t,bsPrefix:e,as:n="a",...i},r)=>(e=Pt(e,"card-link"),A.jsx(n,{ref:r,className:xt(t,e),...i})));jI.displayName="CardLink";const gz=Jv("h6"),BI=O.forwardRef(({className:t,bsPrefix:e,as:n=gz,...i},r)=>(e=Pt(e,"card-subtitle"),A.jsx(n,{ref:r,className:xt(t,e),...i})));BI.displayName="CardSubtitle";const FI=O.forwardRef(({className:t,bsPrefix:e,as:n="p",...i},r)=>(e=Pt(e,"card-text"),A.jsx(n,{ref:r,className:xt(t,e),...i})));FI.displayName="CardText";const vz=Jv("h5"),UI=O.forwardRef(({className:t,bsPrefix:e,as:n=vz,...i},r)=>(e=Pt(e,"card-title"),A.jsx(n,{ref:r,className:xt(t,e),...i})));UI.displayName="CardTitle";const $I=O.forwardRef(({bsPrefix:t,className:e,bg:n,text:i,border:r,body:s=!1,children:a,as:l="div",...f},c)=>{const h=Pt(t,"card");return A.jsx(l,{ref:c,...f,className:xt(e,h,n&&`bg-${n}`,i&&`text-${i}`,r&&`border-${r}`),children:s?A.jsx(tE,{children:a}):a})});$I.displayName="Card";const Es=Object.assign($I,{Img:kI,Title:UI,Subtitle:BI,Body:tE,Link:jI,Text:FI,Header:MI,Footer:II,ImgOverlay:NI});function yz(t){const e=O.useRef(t);return e.current=t,e}function bz(t){const e=yz(t);O.useEffect(()=>()=>e.current(),[])}function nL(t,e){let n=0;return O.Children.map(t,i=>O.isValidElement(i)?e(i,n++):i)}function xz(t,e){let n=0;O.Children.forEach(t,i=>{O.isValidElement(i)&&e(i,n++)})}function _z(t,e){return O.Children.toArray(t).some(n=>O.isValidElement(n)&&n.type===e)}function Sz({as:t,bsPrefix:e,className:n,...i}){e=Pt(e,"col");const r=yI(),s=bI(),a=[],l=[];return r.forEach(f=>{const c=i[f];delete i[f];let h,p,g;typeof c=="object"&&c!=null?{span:h,offset:p,order:g}=c:h=c;const x=f!==s?`-${f}`:"";h&&a.push(h===!0?`${e}${x}`:`${e}${x}-${h}`),g!=null&&l.push(`order${x}-${g}`),p!=null&&l.push(`offset${x}-${p}`)}),[{...i,className:xt(n,...a,...l)},{as:t,bsPrefix:e,spans:a}]}const jn=O.forwardRef((t,e)=>{const[{className:n,...i},{as:r="div",bsPrefix:s,spans:a}]=Sz(t);return A.jsx(r,{...i,ref:e,className:xt(n,!a.length&&s)})});jn.displayName="Col";var Ez=Function.prototype.bind.call(Function.prototype.call,[].slice);function Mc(t,e){return Ez(t.querySelectorAll(e))}function Tz(t,e,n){const i=O.useRef(t!==void 0),[r,s]=O.useState(e),a=t!==void 0,l=i.current;return i.current=a,!a&&l&&r!==e&&s(e),[a?t:r,O.useCallback((...f)=>{const[c,...h]=f;let p=n?.(c,...h);return s(c),p},[n])]}function Az(){const[,t]=O.useReducer(e=>e+1,0);return t}function iL(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}const zI={prefix:String(Math.round(Math.random()*1e10)),current:0},GI=vi.createContext(zI),wz=vi.createContext(!1);let cb=new WeakMap;function Lz(t=!1){let e=O.useContext(GI),n=O.useRef(null);if(n.current===null&&!t){var i,r;let s=(r=vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(i=r.ReactCurrentOwner)===null||i===void 0?void 0:i.current;if(s){let a=cb.get(s);a==null?cb.set(s,{id:e.current,state:s.memoizedState}):s.memoizedState!==a.state&&(e.current=a.id,cb.delete(s))}n.current=++e.current}return n.current}function Cz(t){let e=O.useContext(GI),n=Lz(!!t),i=`react-aria${e.prefix}`;return t||`${i}-${n}`}function Oz(t){let e=vi.useId(),[n]=O.useState(Mz()),i=n?"react-aria":`react-aria${zI.prefix}`;return t||`${i}-${e}`}const Rz=typeof vi.useId=="function"?Oz:Cz;function Pz(){return!1}function Dz(){return!0}function Iz(t){return()=>{}}function Mz(){return typeof vi.useSyncExternalStore=="function"?vi.useSyncExternalStore(Iz,Pz,Dz):O.useContext(wz)}const Cd=O.createContext(null),_m=(t,e=null)=>t!=null?String(t):e||null,iE=O.createContext(null);iE.displayName="NavContext";const kz="data-rr-ui-",Nz="rrUi";function t0(t){return`${kz}${t}`}function jz(t){return`${Nz}${t}`}const HI=O.createContext(qd?window:void 0);HI.Provider;function rE(){return O.useContext(HI)}const KI=O.createContext(null);KI.displayName="NavbarContext";const Bz={type:mr.string,tooltip:mr.bool,as:mr.elementType},n0=O.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:i=!1,...r},s)=>A.jsx(t,{...r,ref:s,className:xt(e,`${n}-${i?"tooltip":"feedback"}`)}));n0.displayName="Feedback";n0.propTypes=Bz;const Nl=O.createContext({}),sE=O.forwardRef(({id:t,bsPrefix:e,className:n,type:i="checkbox",isValid:r=!1,isInvalid:s=!1,as:a="input",...l},f)=>{const{controlId:c}=O.useContext(Nl);return e=Pt(e,"form-check-input"),A.jsx(a,{...l,ref:f,type:i,id:t||c,className:xt(n,e,r&&"is-valid",s&&"is-invalid")})});sE.displayName="FormCheckInput";const ev=O.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...i},r)=>{const{controlId:s}=O.useContext(Nl);return t=Pt(t,"form-check-label"),A.jsx("label",{...i,ref:r,htmlFor:n||s,className:xt(e,t)})});ev.displayName="FormCheckLabel";const qI=O.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:i=!1,reverse:r=!1,disabled:s=!1,isValid:a=!1,isInvalid:l=!1,feedbackTooltip:f=!1,feedback:c,feedbackType:h,className:p,style:g,title:x="",type:b="checkbox",label:T,children:E,as:C="input",...I},P)=>{e=Pt(e,"form-check"),n=Pt(n,"form-switch");const{controlId:M}=O.useContext(Nl),k=O.useMemo(()=>({controlId:t||M}),[M,t]),z=!E&&T!=null&&T!==!1||_z(E,ev),F=A.jsx(sE,{...I,type:b==="switch"?"checkbox":b,ref:P,isValid:a,isInvalid:l,disabled:s,as:C});return A.jsx(Nl.Provider,{value:k,children:A.jsx("div",{style:g,className:xt(p,z&&e,i&&`${e}-inline`,r&&`${e}-reverse`,b==="switch"&&n),children:E||A.jsxs(A.Fragment,{children:[F,z&&A.jsx(ev,{title:x,children:T}),c&&A.jsx(n0,{type:h,tooltip:f,children:c})]})})})});qI.displayName="FormCheck";const tv=Object.assign(qI,{Input:sE,Label:ev}),VI=O.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:i,id:r,className:s,isValid:a=!1,isInvalid:l=!1,plaintext:f,readOnly:c,as:h="input",...p},g)=>{const{controlId:x}=O.useContext(Nl);return t=Pt(t,"form-control"),A.jsx(h,{...p,type:e,size:i,ref:g,readOnly:c,id:r||x,className:xt(s,f?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,a&&"is-valid",l&&"is-invalid")})});VI.displayName="FormControl";const Fz=Object.assign(VI,{Feedback:n0}),YI=O.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Pt(e,"form-floating"),A.jsx(n,{ref:r,className:xt(t,e),...i})));YI.displayName="FormFloating";const aE=O.forwardRef(({controlId:t,as:e="div",...n},i)=>{const r=O.useMemo(()=>({controlId:t}),[t]);return A.jsx(Nl.Provider,{value:r,children:A.jsx(e,{...n,ref:i})})});aE.displayName="FormGroup";const WI=O.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:i=!1,className:r,htmlFor:s,...a},l)=>{const{controlId:f}=O.useContext(Nl);e=Pt(e,"form-label");let c="col-form-label";typeof n=="string"&&(c=`${c} ${c}-${n}`);const h=xt(r,e,i&&"visually-hidden",n&&c);return s=s||f,n?A.jsx(jn,{ref:l,as:"label",className:h,htmlFor:s,...a}):A.jsx(t,{ref:l,className:h,htmlFor:s,...a})});WI.displayName="FormLabel";const ZI=O.forwardRef(({bsPrefix:t,className:e,id:n,...i},r)=>{const{controlId:s}=O.useContext(Nl);return t=Pt(t,"form-range"),A.jsx("input",{...i,type:"range",ref:r,className:xt(e,t),id:n||s})});ZI.displayName="FormRange";const XI=O.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:i,isValid:r=!1,isInvalid:s=!1,id:a,...l},f)=>{const{controlId:c}=O.useContext(Nl);return t=Pt(t,"form-select"),A.jsx("select",{...l,size:n,ref:f,className:xt(i,t,e&&`${t}-${e}`,r&&"is-valid",s&&"is-invalid"),id:a||c})});XI.displayName="FormSelect";const QI=O.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:i,...r},s)=>(t=Pt(t,"form-text"),A.jsx(n,{...r,ref:s,className:xt(e,t,i&&"text-muted")})));QI.displayName="FormText";const JI=O.forwardRef((t,e)=>A.jsx(tv,{...t,ref:e,type:"switch"}));JI.displayName="Switch";const Uz=Object.assign(JI,{Input:tv.Input,Label:tv.Label}),eM=O.forwardRef(({bsPrefix:t,className:e,children:n,controlId:i,label:r,...s},a)=>(t=Pt(t,"form-floating"),A.jsxs(aE,{ref:a,className:xt(e,t),controlId:i,...s,children:[n,A.jsx("label",{htmlFor:i,children:r})]})));eM.displayName="FloatingLabel";const $z={_ref:mr.any,validated:mr.bool,as:mr.elementType},oE=O.forwardRef(({className:t,validated:e,as:n="form",...i},r)=>A.jsx(n,{...i,ref:r,className:xt(t,e&&"was-validated")}));oE.displayName="Form";oE.propTypes=$z;const Ke=Object.assign(oE,{Group:aE,Control:Fz,Floating:YI,Check:tv,Switch:Uz,Label:WI,Text:QI,Range:ZI,Select:XI,FloatingLabel:eM}),rL=t=>!t||typeof t=="function"?t:e=>{t.current=e};function zz(t,e){const n=rL(t),i=rL(e);return r=>{n&&n(r),i&&i(r)}}function i0(t,e){return O.useMemo(()=>zz(t,e),[t,e])}const Vd=O.createContext(null),Gz=["as","active","eventKey"];function Hz(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function tM({key:t,onClick:e,active:n,id:i,role:r,disabled:s}){const a=O.useContext(Cd),l=O.useContext(iE),f=O.useContext(Vd);let c=n;const h={role:r};if(l){!r&&l.role==="tablist"&&(h.role="tab");const p=l.getControllerId(t??null),g=l.getControlledId(t??null);h[t0("event-key")]=t,h.id=p||i,c=n==null&&t!=null?l.activeKey===t:n,(c||!(f!=null&&f.unmountOnExit)&&!(f!=null&&f.mountOnEnter))&&(h["aria-controls"]=g)}return h.role==="tab"&&(h["aria-selected"]=c,c||(h.tabIndex=-1),s&&(h.tabIndex=-1,h["aria-disabled"]=!0)),h.onClick=Al(p=>{s||(e?.(p),t!=null&&a&&!p.isPropagationStopped()&&a(t,p))}),[h,{isActive:c}]}const nM=O.forwardRef((t,e)=>{let{as:n=OI,active:i,eventKey:r}=t,s=Hz(t,Gz);const[a,l]=tM(Object.assign({key:_m(r,s.href),active:i},s));return a[t0("active")]=l.isActive,A.jsx(n,Object.assign({},s,a,{ref:e}))});nM.displayName="NavItem";const Kz=["as","onSelect","activeKey","role","onKeyDown"];function qz(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const sL=()=>{},aL=t0("event-key"),iM=O.forwardRef((t,e)=>{let{as:n="div",onSelect:i,activeKey:r,role:s,onKeyDown:a}=t,l=qz(t,Kz);const f=Az(),c=O.useRef(!1),h=O.useContext(Cd),p=O.useContext(Vd);let g,x;p&&(s=s||"tablist",r=p.activeKey,g=p.getControlledId,x=p.getControllerId);const b=O.useRef(null),T=P=>{const M=b.current;if(!M)return null;const k=Mc(M,`[${aL}]:not([aria-disabled=true])`),z=M.querySelector("[aria-selected=true]");if(!z||z!==document.activeElement)return null;const F=k.indexOf(z);if(F===-1)return null;let G=F+P;return G>=k.length&&(G=0),G<0&&(G=k.length-1),k[G]},E=(P,M)=>{P!=null&&(i?.(P,M),h?.(P,M))},C=P=>{if(a?.(P),!p)return;let M;switch(P.key){case"ArrowLeft":case"ArrowUp":M=T(-1);break;case"ArrowRight":case"ArrowDown":M=T(1);break;default:return}M&&(P.preventDefault(),E(M.dataset[jz("EventKey")]||null,P),c.current=!0,f())};O.useEffect(()=>{if(b.current&&c.current){const P=b.current.querySelector(`[${aL}][aria-selected=true]`);P?.focus()}c.current=!1});const I=i0(e,b);return A.jsx(Cd.Provider,{value:E,children:A.jsx(iE.Provider,{value:{role:s,activeKey:_m(r),getControlledId:g||sL,getControllerId:x||sL},children:A.jsx(n,Object.assign({},l,{onKeyDown:C,ref:I,role:s}))})})});iM.displayName="Nav";const Vz=Object.assign(iM,{Item:nM});var ig;function oL(t){if((!ig&&ig!==0||t)&&qd){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),ig=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return ig}function Yz(){return O.useState(null)}function fb(t){t===void 0&&(t=Qv());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function Wz(t){const e=O.useRef(t);return e.current=t,e}function Zz(t){const e=Wz(t);O.useEffect(()=>()=>e.current(),[])}function Xz(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const lL=t0("modal-open");class lE{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:i=!1}={}){this.handleContainerOverflow=n,this.isRTL=i,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return Xz(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[i]:r.style[i]},e.scrollBarWidth&&(n[i]=`${parseInt(Dl(r,i)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(lL,""),Dl(r,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(lL),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const db=(t,e)=>qd?t==null?(e||Qv()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function Qz(t,e){const n=rE(),[i,r]=O.useState(()=>db(t,n?.document));if(!i){const s=db(t);s&&r(s)}return O.useEffect(()=>{},[e,i]),O.useEffect(()=>{const s=db(t);s!==i&&r(s)},[t,i]),i}function uE({children:t,in:e,onExited:n,mountOnEnter:i,unmountOnExit:r}){const s=O.useRef(null),a=O.useRef(e),l=Al(n);O.useEffect(()=>{e?a.current=!0:l(s.current)},[e,l]);const f=i0(s,Vm(t)),c=O.cloneElement(t,{ref:f});return e?c:r||!a.current&&i?null:c}const Jz=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function e4(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function t4(t){let{onEnter:e,onEntering:n,onEntered:i,onExit:r,onExiting:s,onExited:a,addEndListener:l,children:f}=t,c=e4(t,Jz);const h=O.useRef(null),p=i0(h,Vm(f)),g=M=>k=>{M&&h.current&&M(h.current,k)},x=O.useCallback(g(e),[e]),b=O.useCallback(g(n),[n]),T=O.useCallback(g(i),[i]),E=O.useCallback(g(r),[r]),C=O.useCallback(g(s),[s]),I=O.useCallback(g(a),[a]),P=O.useCallback(g(l),[l]);return Object.assign({},c,{nodeRef:h},e&&{onEnter:x},n&&{onEntering:b},i&&{onEntered:T},r&&{onExit:E},s&&{onExiting:C},a&&{onExited:I},l&&{addEndListener:P},{children:typeof f=="function"?(M,k)=>f(M,Object.assign({},k,{ref:p})):O.cloneElement(f,{ref:p})})}const n4=["component"];function i4(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const r4=O.forwardRef((t,e)=>{let{component:n}=t,i=i4(t,n4);const r=t4(i);return A.jsx(n,Object.assign({ref:e},r))});function s4({in:t,onTransition:e}){const n=O.useRef(null),i=O.useRef(!0),r=Al(e);return tL(()=>{if(!n.current)return;let s=!1;return r({in:t,element:n.current,initial:i.current,isStale:()=>s}),()=>{s=!0}},[t,r]),tL(()=>(i.current=!1,()=>{i.current=!0}),[]),n}function a4({children:t,in:e,onExited:n,onEntered:i,transition:r}){const[s,a]=O.useState(!e);e&&s&&a(!1);const l=s4({in:!!e,onTransition:c=>{const h=()=>{c.isStale()||(c.in?i?.(c.element,c.initial):(a(!0),n?.(c.element)))};Promise.resolve(r(c)).then(h,p=>{throw c.in||a(!0),p})}}),f=i0(l,Vm(t));return s&&!e?null:O.cloneElement(t,{ref:f})}function uL(t,e,n){return t?A.jsx(r4,Object.assign({},n,{component:t})):e?A.jsx(a4,Object.assign({},n,{transition:e})):A.jsx(uE,Object.assign({},n))}const o4=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function l4(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}let hb;function u4(t){return hb||(hb=new lE({ownerDocument:t?.document})),hb}function c4(t){const e=rE(),n=t||u4(e),i=O.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:O.useCallback(r=>{i.current.dialog=r},[]),setBackdropRef:O.useCallback(r=>{i.current.backdrop=r},[])})}const rM=O.forwardRef((t,e)=>{let{show:n=!1,role:i="dialog",className:r,style:s,children:a,backdrop:l=!0,keyboard:f=!0,onBackdropClick:c,onEscapeKeyDown:h,transition:p,runTransition:g,backdropTransition:x,runBackdropTransition:b,autoFocus:T=!0,enforceFocus:E=!0,restoreFocus:C=!0,restoreFocusOptions:I,renderDialog:P,renderBackdrop:M=xe=>A.jsx("div",Object.assign({},xe)),manager:k,container:z,onShow:F,onHide:G=()=>{},onExit:K,onExited:V,onExiting:Q,onEnter:J,onEntering:ve,onEntered:se}=t,ye=l4(t,o4);const X=rE(),oe=Qz(z),ie=c4(k),Ie=rz(),Z=sz(n),[Y,ne]=O.useState(!n),me=O.useRef(null);O.useImperativeHandle(e,()=>ie,[ie]),qd&&!Z&&n&&(me.current=fb(X?.document)),n&&Y&&ne(!1);const Te=Al(()=>{if(ie.add(),je.current=Qg(document,"keydown",Ue),fe.current=Qg(document,"focus",()=>setTimeout(Ae),!0),F&&F(),T){var xe,we;const Be=fb((xe=(we=ie.dialog)==null?void 0:we.ownerDocument)!=null?xe:X?.document);ie.dialog&&Be&&!iL(ie.dialog,Be)&&(me.current=Be,ie.dialog.focus())}}),Le=Al(()=>{if(ie.remove(),je.current==null||je.current(),fe.current==null||fe.current(),C){var xe;(xe=me.current)==null||xe.focus==null||xe.focus(I),me.current=null}});O.useEffect(()=>{!n||!oe||Te()},[n,oe,Te]),O.useEffect(()=>{Y&&Le()},[Y,Le]),Zz(()=>{Le()});const Ae=Al(()=>{if(!E||!Ie()||!ie.isTopModal())return;const xe=fb(X?.document);ie.dialog&&xe&&!iL(ie.dialog,xe)&&ie.dialog.focus()}),Ve=Al(xe=>{xe.target===xe.currentTarget&&(c?.(xe),l===!0&&G())}),Ue=Al(xe=>{f&&q3(xe)&&ie.isTopModal()&&(h?.(xe),xe.defaultPrevented||G())}),fe=O.useRef(),je=O.useRef(),Ge=(...xe)=>{ne(!0),V?.(...xe)};if(!oe)return null;const Pe=Object.assign({role:i,ref:ie.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},ye,{style:s,className:r,tabIndex:-1});let ot=P?P(Pe):A.jsx("div",Object.assign({},Pe,{children:O.cloneElement(a,{role:"document"})}));ot=uL(p,g,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:K,onExiting:Q,onExited:Ge,onEnter:J,onEntering:ve,onEntered:se,children:ot});let ct=null;return l&&(ct=M({ref:ie.setBackdropRef,onClick:Ve}),ct=uL(x,b,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ct})),A.jsx(A.Fragment,{children:pd.createPortal(A.jsxs(A.Fragment,{children:[ct,ot]}),oe)})});rM.displayName="Modal";const f4=Object.assign(rM,{Manager:lE});function d4(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function h4(t,e){t.classList?t.classList.add(e):d4(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function cL(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function m4(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=cL(t.className,e):t.setAttribute("class",cL(t.className&&t.className.baseVal||"",e))}const sd={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class p4 extends lE{adjustAndStore(e,n,i){const r=n.style[e];n.dataset[e]=r,Dl(n,{[e]:`${parseFloat(Dl(n,e))+i}px`})}restore(e,n){const i=n.dataset[e];i!==void 0&&(delete n.dataset[e],Dl(n,{[e]:i}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(h4(n,"modal-open"),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";Mc(n,sd.FIXED_CONTENT).forEach(s=>this.adjustAndStore(i,s,e.scrollBarWidth)),Mc(n,sd.STICKY_CONTENT).forEach(s=>this.adjustAndStore(r,s,-e.scrollBarWidth)),Mc(n,sd.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();m4(n,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";Mc(n,sd.FIXED_CONTENT).forEach(s=>this.restore(i,s)),Mc(n,sd.STICKY_CONTENT).forEach(s=>this.restore(r,s)),Mc(n,sd.NAVBAR_TOGGLER).forEach(s=>this.restore(r,s))}}let mb;function g4(t){return mb||(mb=new p4(t)),mb}const sM=O.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Pt(e,"modal-body"),A.jsx(n,{ref:r,className:xt(t,e),...i})));sM.displayName="ModalBody";const aM=O.createContext({onHide(){}}),cE=O.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:i,size:r,fullscreen:s,children:a,scrollable:l,...f},c)=>{t=Pt(t,"modal");const h=`${t}-dialog`,p=typeof s=="string"?`${t}-fullscreen-${s}`:`${t}-fullscreen`;return A.jsx("div",{...f,ref:c,className:xt(h,e,r&&`${t}-${r}`,i&&`${h}-centered`,l&&`${h}-scrollable`,s&&p),children:A.jsx("div",{className:xt(`${t}-content`,n),children:a})})});cE.displayName="ModalDialog";const oM=O.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Pt(e,"modal-footer"),A.jsx(n,{ref:r,className:xt(t,e),...i})));oM.displayName="ModalFooter";const lM=O.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:i,children:r,...s},a)=>{const l=O.useContext(aM),f=Jg(()=>{l?.onHide(),i?.()});return A.jsxs("div",{ref:a,...s,children:[r,n&&A.jsx(e0,{"aria-label":t,variant:e,onClick:f})]})});lM.displayName="AbstractModalHeader";const uM=O.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:i=!1,...r},s)=>(t=Pt(t,"modal-header"),A.jsx(lM,{ref:s,...r,className:xt(e,t),closeLabel:n,closeButton:i})));uM.displayName="ModalHeader";const v4=Jv("h4"),cM=O.forwardRef(({className:t,bsPrefix:e,as:n=v4,...i},r)=>(e=Pt(e,"modal-title"),A.jsx(n,{ref:r,className:xt(t,e),...i})));cM.displayName="ModalTitle";function y4(t){return A.jsx(Xc,{...t,timeout:null})}function b4(t){return A.jsx(Xc,{...t,timeout:null})}const fM=O.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:i,contentClassName:r,children:s,dialogAs:a=cE,"data-bs-theme":l,"aria-labelledby":f,"aria-describedby":c,"aria-label":h,show:p=!1,animation:g=!0,backdrop:x=!0,keyboard:b=!0,onEscapeKeyDown:T,onShow:E,onHide:C,container:I,autoFocus:P=!0,enforceFocus:M=!0,restoreFocus:k=!0,restoreFocusOptions:z,onEntered:F,onExit:G,onExiting:K,onEnter:V,onEntering:Q,onExited:J,backdropClassName:ve,manager:se,...ye},X)=>{const[oe,ie]=O.useState({}),[Ie,Z]=O.useState(!1),Y=O.useRef(!1),ne=O.useRef(!1),me=O.useRef(null),[Te,Le]=Yz(),Ae=AI(X,Le),Ve=Jg(C),Ue=I3();t=Pt(t,"modal");const fe=O.useMemo(()=>({onHide:Ve}),[Ve]);function je(){return se||g4({isRTL:Ue})}function Ge(rt){if(!qd)return;const Kt=je().getScrollbarWidth()>0,qn=rt.scrollHeight>Qv(rt).documentElement.clientHeight;ie({paddingRight:Kt&&!qn?oL():void 0,paddingLeft:!Kt&&qn?oL():void 0})}const Pe=Jg(()=>{Te&&Ge(Te.dialog)});bz(()=>{L_(window,"resize",Pe),me.current==null||me.current()});const ot=()=>{Y.current=!0},ct=rt=>{Y.current&&Te&&rt.target===Te.dialog&&(ne.current=!0),Y.current=!1},xe=()=>{Z(!0),me.current=SI(Te.dialog,()=>{Z(!1)})},we=rt=>{rt.target===rt.currentTarget&&xe()},Be=rt=>{if(x==="static"){we(rt);return}if(ne.current||rt.target!==rt.currentTarget){ne.current=!1;return}C?.()},Je=rt=>{b?T?.(rt):(rt.preventDefault(),x==="static"&&xe())},_t=(rt,Kt)=>{rt&&Ge(rt),V?.(rt,Kt)},Ft=rt=>{me.current==null||me.current(),G?.(rt)},kt=(rt,Kt)=>{Q?.(rt,Kt),_I(window,"resize",Pe)},Un=rt=>{rt&&(rt.style.display=""),J?.(rt),L_(window,"resize",Pe)},Gi=O.useCallback(rt=>A.jsx("div",{...rt,className:xt(`${t}-backdrop`,ve,!g&&"show")}),[g,ve,t]),xi={...n,...oe};xi.display="block";const _i=rt=>A.jsx("div",{role:"dialog",...rt,style:xi,className:xt(e,t,Ie&&`${t}-static`,!g&&"show"),onClick:x?Be:void 0,onMouseUp:ct,"data-bs-theme":l,"aria-label":h,"aria-labelledby":f,"aria-describedby":c,children:A.jsx(a,{...ye,onMouseDown:ot,className:i,contentClassName:r,children:s})});return A.jsx(aM.Provider,{value:fe,children:A.jsx(f4,{show:p,ref:Ae,backdrop:x,container:I,keyboard:!0,autoFocus:P,enforceFocus:M,restoreFocus:k,restoreFocusOptions:z,onEscapeKeyDown:Je,onShow:E,onHide:C,onEnter:_t,onEntering:kt,onEntered:F,onExit:Ft,onExiting:K,onExited:Un,manager:je(),transition:g?y4:void 0,backdropTransition:g?b4:void 0,renderBackdrop:Gi,renderDialog:_i})})});fM.displayName="Modal";const gi=Object.assign(fM,{Body:sM,Header:uM,Title:cM,Footer:oM,Dialog:cE,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),fE=O.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Pt(e,"nav-item"),A.jsx(n,{ref:r,className:xt(t,e),...i})));fE.displayName="NavItem";const dE=O.forwardRef(({bsPrefix:t,className:e,as:n=eE,active:i,eventKey:r,disabled:s=!1,...a},l)=>{t=Pt(t,"nav-link");const[f,c]=tM({key:_m(r,a.href),active:i,disabled:s,...a});return A.jsx(n,{...a,...f,ref:l,disabled:s,className:xt(e,t,s&&"disabled",c.isActive&&"active")})});dE.displayName="NavLink";const dM=O.forwardRef((t,e)=>{const{as:n="div",bsPrefix:i,variant:r,fill:s=!1,justify:a=!1,navbar:l,navbarScroll:f,className:c,activeKey:h,...p}=XS(t,{activeKey:"onSelect"}),g=Pt(i,"nav");let x,b,T=!1;const E=O.useContext(KI),C=O.useContext(nE);return E?(x=E.bsPrefix,T=l??!0):C&&({cardHeaderBsPrefix:b}=C),A.jsx(Vz,{as:n,ref:e,activeKey:h,className:xt(c,{[g]:!T,[`${x}-nav`]:T,[`${x}-nav-scroll`]:T&&f,[`${b}-${r}`]:!!b,[`${g}-${r}`]:!!r,[`${g}-fill`]:s,[`${g}-justified`]:a}),...p})});dM.displayName="Nav";const x4=Object.assign(dM,{Item:fE,Link:dE}),aa=O.forwardRef(({bsPrefix:t,className:e,as:n="div",...i},r)=>{const s=Pt(t,"row"),a=yI(),l=bI(),f=`${s}-cols`,c=[];return a.forEach(h=>{const p=i[h];delete i[h];let g;p!=null&&typeof p=="object"?{cols:g}=p:g=p;const x=h!==l?`-${h}`:"";g!=null&&c.push(`${f}${x}-${g}`)}),A.jsx(n,{ref:r,...i,className:xt(e,s,...c)})});aa.displayName="Row";const Od=O.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:i,as:r="div",className:s,...a},l)=>{t=Pt(t,"spinner");const f=`${t}-${n}`;return A.jsx(r,{ref:l,...a,className:xt(s,f,i&&`${f}-${i}`,e&&`text-${e}`)})});Od.displayName="Spinner";const _4=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],S4=["activeKey","getControlledId","getControllerId"],E4=["as"];function C_(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function hM(t){let{active:e,eventKey:n,mountOnEnter:i,transition:r,unmountOnExit:s,role:a="tabpanel",onEnter:l,onEntering:f,onEntered:c,onExit:h,onExiting:p,onExited:g}=t,x=C_(t,_4);const b=O.useContext(Vd);if(!b)return[Object.assign({},x,{role:a}),{eventKey:n,isActive:e,mountOnEnter:i,transition:r,unmountOnExit:s,onEnter:l,onEntering:f,onEntered:c,onExit:h,onExiting:p,onExited:g}];const{activeKey:T,getControlledId:E,getControllerId:C}=b,I=C_(b,S4),P=_m(n);return[Object.assign({},x,{role:a,id:E(n),"aria-labelledby":C(n)}),{eventKey:n,isActive:e==null&&P!=null?_m(T)===P:e,transition:r||I.transition,mountOnEnter:i??I.mountOnEnter,unmountOnExit:s??I.unmountOnExit,onEnter:l,onEntering:f,onEntered:c,onExit:h,onExiting:p,onExited:g}]}const mM=O.forwardRef((t,e)=>{let{as:n="div"}=t,i=C_(t,E4);const[r,{isActive:s,onEnter:a,onEntering:l,onEntered:f,onExit:c,onExiting:h,onExited:p,mountOnEnter:g,unmountOnExit:x,transition:b=uE}]=hM(i);return A.jsx(Vd.Provider,{value:null,children:A.jsx(Cd.Provider,{value:null,children:A.jsx(b,{in:s,onEnter:a,onEntering:l,onEntered:f,onExit:c,onExiting:h,onExited:p,mountOnEnter:g,unmountOnExit:x,children:A.jsx(n,Object.assign({},r,{ref:e,hidden:!s,"aria-hidden":!s}))})})})});mM.displayName="TabPanel";const hE=t=>{const{id:e,generateChildId:n,onSelect:i,activeKey:r,defaultActiveKey:s,transition:a,mountOnEnter:l,unmountOnExit:f,children:c}=t,[h,p]=Tz(r,s,i),g=Rz(e),x=O.useMemo(()=>n||((T,E)=>g?`${g}-${E}-${T}`:null),[g,n]),b=O.useMemo(()=>({onSelect:p,activeKey:h,transition:a,mountOnEnter:l||!1,unmountOnExit:f||!1,getControlledId:T=>x(T,"tabpane"),getControllerId:T=>x(T,"tab")}),[p,h,a,l,f,x]);return A.jsx(Vd.Provider,{value:b,children:A.jsx(Cd.Provider,{value:p||null,children:c})})};hE.Panel=mM;function mE(t){return typeof t=="boolean"?t?Xc:uE:t}const pM=({transition:t,...e})=>A.jsx(hE,{...e,transition:mE(t)});pM.displayName="TabContainer";const pE=O.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=Pt(e,"tab-content"),A.jsx(n,{ref:r,className:xt(t,e),...i})));pE.displayName="TabContent";const gE=O.forwardRef(({bsPrefix:t,transition:e,...n},i)=>{const[{className:r,as:s="div",...a},{isActive:l,onEnter:f,onEntering:c,onEntered:h,onExit:p,onExiting:g,onExited:x,mountOnEnter:b,unmountOnExit:T,transition:E=Xc}]=hM({...n,transition:mE(e)}),C=Pt(t,"tab-pane");return A.jsx(Vd.Provider,{value:null,children:A.jsx(Cd.Provider,{value:null,children:A.jsx(E,{in:l,onEnter:f,onEntering:c,onEntered:h,onExit:p,onExiting:g,onExited:x,mountOnEnter:b,unmountOnExit:T,children:A.jsx(s,{...a,ref:i,className:xt(r,C,l&&"active")})})})})});gE.displayName="TabPane";const T4={eventKey:mr.oneOfType([mr.string,mr.number]),title:mr.node.isRequired,disabled:mr.bool,tabClassName:mr.string,tabAttrs:mr.object},gM=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};gM.propTypes=T4;const fL=Object.assign(gM,{Container:pM,Content:pE,Pane:gE});function A4(t){let e;return xz(t,n=>{e==null&&(e=n.props.eventKey)}),e}function w4(t){const{title:e,eventKey:n,disabled:i,tabClassName:r,tabAttrs:s,id:a}=t.props;return e==null?null:A.jsx(fE,{as:"li",role:"presentation",children:A.jsx(dE,{as:"button",type:"button",eventKey:n,disabled:i,id:a,className:r,...s,children:e})})}const vM=t=>{const{id:e,onSelect:n,transition:i,mountOnEnter:r=!1,unmountOnExit:s=!1,variant:a="tabs",children:l,activeKey:f=A4(l),...c}=XS(t,{activeKey:"onSelect"});return A.jsxs(hE,{id:e,activeKey:f,onSelect:n,transition:mE(i),mountOnEnter:r,unmountOnExit:s,children:[A.jsx(x4,{id:e,...c,role:"tablist",as:"ul",variant:a,children:nL(l,w4)}),A.jsx(pE,{children:nL(l,h=>{const p={...h.props};return delete p.title,delete p.disabled,delete p.tabClassName,delete p.tabAttrs,A.jsx(gE,{...p})})})]})};vM.displayName="Tabs";function yM(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=yM(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function gn(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=yM(t))&&(i&&(i+=" "),i+=e);return i}var pb={},gb={},dL;function L4(){return dL||(dL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e}(gb)),gb}var vb={},hL;function bM(){return hL||(hL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e}(vb)),vb}var yb={},mL;function xM(){return mL||(mL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e}(yb)),yb}var bb={},pL;function vE(){return pL||(pL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){const i=[],r=n.length;if(r===0)return i;let s=0,a="",l="",f=!1;for(n.charCodeAt(0)===46&&(i.push(""),s++);s<r;){const c=n[s];l?c==="\\"&&s+1<r?(s++,a+=n[s]):c===l?l="":a+=c:f?c==='"'||c==="'"?l=c:c==="]"?(f=!1,i.push(a),a=""):a+=c:c==="["?(f=!0,a&&(i.push(a),a="")):c==="."?a&&(i.push(a),a=""):a+=c,s++}return a&&i.push(a),i}t.toPath=e}(bb)),bb}var gL;function yE(){return gL||(gL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=L4(),n=bM(),i=xM(),r=vE();function s(l,f,c){if(l==null)return c;switch(typeof f){case"string":{if(e.isUnsafeProperty(f))return c;const h=l[f];return h===void 0?n.isDeepKey(f)?s(l,r.toPath(f),c):c:h}case"number":case"symbol":{typeof f=="number"&&(f=i.toKey(f));const h=l[f];return h===void 0?c:h}default:{if(Array.isArray(f))return a(l,f,c);if(Object.is(f?.valueOf(),-0)?f="-0":f=String(f),e.isUnsafeProperty(f))return c;const h=l[f];return h===void 0?c:h}}}function a(l,f,c){if(f.length===0)return c;let h=l;for(let p=0;p<f.length;p++){if(h==null||e.isUnsafeProperty(f[p]))return c;h=h[f[p]]}return h===void 0?c:h}t.get=s}(pb)),pb}var xb,vL;function C4(){return vL||(vL=1,xb=yE().get),xb}var O4=C4();const Qc=Qr(O4);var _b={exports:{}},tn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yL;function R4(){if(yL)return tn;yL=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,r=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,a=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,f=t?Symbol.for("react.async_mode"):60111,c=t?Symbol.for("react.concurrent_mode"):60111,h=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,g=t?Symbol.for("react.suspense_list"):60120,x=t?Symbol.for("react.memo"):60115,b=t?Symbol.for("react.lazy"):60116,T=t?Symbol.for("react.block"):60121,E=t?Symbol.for("react.fundamental"):60117,C=t?Symbol.for("react.responder"):60118,I=t?Symbol.for("react.scope"):60119;function P(k){if(typeof k=="object"&&k!==null){var z=k.$$typeof;switch(z){case e:switch(k=k.type,k){case f:case c:case i:case s:case r:case p:return k;default:switch(k=k&&k.$$typeof,k){case l:case h:case b:case x:case a:return k;default:return z}}case n:return z}}}function M(k){return P(k)===c}return tn.AsyncMode=f,tn.ConcurrentMode=c,tn.ContextConsumer=l,tn.ContextProvider=a,tn.Element=e,tn.ForwardRef=h,tn.Fragment=i,tn.Lazy=b,tn.Memo=x,tn.Portal=n,tn.Profiler=s,tn.StrictMode=r,tn.Suspense=p,tn.isAsyncMode=function(k){return M(k)||P(k)===f},tn.isConcurrentMode=M,tn.isContextConsumer=function(k){return P(k)===l},tn.isContextProvider=function(k){return P(k)===a},tn.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},tn.isForwardRef=function(k){return P(k)===h},tn.isFragment=function(k){return P(k)===i},tn.isLazy=function(k){return P(k)===b},tn.isMemo=function(k){return P(k)===x},tn.isPortal=function(k){return P(k)===n},tn.isProfiler=function(k){return P(k)===s},tn.isStrictMode=function(k){return P(k)===r},tn.isSuspense=function(k){return P(k)===p},tn.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===i||k===c||k===s||k===r||k===p||k===g||typeof k=="object"&&k!==null&&(k.$$typeof===b||k.$$typeof===x||k.$$typeof===a||k.$$typeof===l||k.$$typeof===h||k.$$typeof===E||k.$$typeof===C||k.$$typeof===I||k.$$typeof===T)},tn.typeOf=P,tn}var bL;function P4(){return bL||(bL=1,_b.exports=R4()),_b.exports}var D4=P4(),Zr=t=>t===0?0:t>0?1:-1,Ls=t=>typeof t=="number"&&t!=+t,Uc=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,it=t=>(typeof t=="number"||t instanceof Number)&&!Ls(t),ko=t=>it(t)||typeof t=="string",I4=0,Rd=t=>{var e=++I4;return"".concat(t||"").concat(e)},eo=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!it(e)&&typeof e!="string")return i;var s;if(Uc(e)){if(n==null)return i;var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return Ls(s)&&(s=i),r&&n!=null&&s>n&&(s=n),s},_M=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},i=0;i<e;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1},Va=(t,e)=>it(t)&&it(e)?n=>t+n*(e-t):()=>e;function SM(t,e,n){if(!(!t||!t.length))return t.find(i=>i&&(typeof e=="function"?e(i):Qc(i,e))===n)}var Sn=t=>t===null||typeof t>"u",Ym=t=>Sn(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),M4=["viewBox","children"],k4=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],xL=["points","pathLength"],Sb={svg:M4,polygon:xL,polyline:xL},bE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],xE=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(O.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(r=>{bE.includes(r)&&(i[r]=s=>n[r](n,s))}),i},N4=(t,e,n)=>i=>(t(e,n,i),null),_E=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var i=null;return Object.keys(t).forEach(r=>{var s=t[r];bE.includes(r)&&typeof s=="function"&&(i||(i={}),i[r]=N4(s,e,n))}),i},_L=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",SL=null,Eb=null,EM=t=>{if(t===SL&&Array.isArray(Eb))return Eb;var e=[];return O.Children.forEach(t,n=>{Sn(n)||(D4.isFragment(n)?e=e.concat(EM(n.props.children)):e.push(n))}),Eb=e,SL=t,e};function SE(t,e){var n=[],i=[];return Array.isArray(e)?i=e.map(r=>_L(r)):i=[_L(e)],EM(t).forEach(r=>{var s=Qc(r,"type.displayName")||Qc(r,"type.name");i.indexOf(s)!==-1&&n.push(r)}),n}var TM=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,j4=(t,e,n,i)=>{var r,s=(r=i&&Sb?.[i])!==null&&r!==void 0?r:[];return e.startsWith("data-")||typeof t!="function"&&(i&&s.includes(e)||k4.includes(e))||n&&bE.includes(e)},nn=(t,e,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(O.isValidElement(t)&&(i=t.props),typeof i!="object"&&typeof i!="function")return null;var r={};return Object.keys(i).forEach(s=>{var a;j4((a=i)===null||a===void 0?void 0:a[s],s,e,n)&&(r[s]=i[s])}),r},B4=["children","width","height","viewBox","className","style","title","desc"];function O_(){return O_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},O_.apply(null,arguments)}function F4(t,e){if(t==null)return{};var n,i,r=U4(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function U4(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var AM=O.forwardRef((t,e)=>{var{children:n,width:i,height:r,viewBox:s,className:a,style:l,title:f,desc:c}=t,h=F4(t,B4),p=s||{width:i,height:r,x:0,y:0},g=gn("recharts-surface",a);return O.createElement("svg",O_({},nn(h,!0,"svg"),{className:g,width:i,height:r,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),O.createElement("title",null,f),O.createElement("desc",null,c),n)}),$4=["children","className"];function R_(){return R_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},R_.apply(null,arguments)}function z4(t,e){if(t==null)return{};var n,i,r=G4(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function G4(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Cs=O.forwardRef((t,e)=>{var{children:n,className:i}=t,r=z4(t,$4),s=gn("recharts-layer",i);return O.createElement("g",R_({className:s},nn(r,!0),{ref:e}),n)}),H4=O.createContext(null);function Cn(t){return function(){return t}}const wM=Math.cos,nv=Math.sin,no=Math.sqrt,iv=Math.PI,r0=2*iv,P_=Math.PI,D_=2*P_,kc=1e-6,K4=D_-kc;function LM(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function q4(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return LM;const n=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class V4{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?LM:q4(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,s,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,i,r,s){if(e=+e,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,f=i-e,c=r-n,h=a-e,p=l-n,g=h*h+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>kc)if(!(Math.abs(p*f-c*h)>kc)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let x=i-a,b=r-l,T=f*f+c*c,E=x*x+b*b,C=Math.sqrt(T),I=Math.sqrt(g),P=s*Math.tan((P_-Math.acos((T+g-E)/(2*C*I)))/2),M=P/I,k=P/C;Math.abs(M-1)>kc&&this._append`L${e+M*h},${n+M*p}`,this._append`A${s},${s},0,0,${+(p*x>h*b)},${this._x1=e+k*f},${this._y1=n+k*c}`}}arc(e,n,i,r,s,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),f=i*Math.sin(r),c=e+l,h=n+f,p=1^a,g=a?r-s:s-r;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>kc||Math.abs(this._y1-h)>kc)&&this._append`L${c},${h}`,i&&(g<0&&(g=g%D_+D_),g>K4?this._append`A${i},${i},0,1,${p},${e-l},${n-f}A${i},${i},0,1,${p},${this._x1=c},${this._y1=h}`:g>kc&&this._append`A${i},${i},0,${+(g>=P_)},${p},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function EE(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new V4(e)}function TE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function CM(t){this._context=t}CM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function s0(t){return new CM(t)}function OM(t){return t[0]}function RM(t){return t[1]}function PM(t,e){var n=Cn(!0),i=null,r=s0,s=null,a=EE(l);t=typeof t=="function"?t:t===void 0?OM:Cn(t),e=typeof e=="function"?e:e===void 0?RM:Cn(e);function l(f){var c,h=(f=TE(f)).length,p,g=!1,x;for(i==null&&(s=r(x=a())),c=0;c<=h;++c)!(c<h&&n(p=f[c],c,f))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+t(p,c,f),+e(p,c,f));if(x)return s=null,x+""||null}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:Cn(+f),l):t},l.y=function(f){return arguments.length?(e=typeof f=="function"?f:Cn(+f),l):e},l.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Cn(!!f),l):n},l.curve=function(f){return arguments.length?(r=f,i!=null&&(s=r(i)),l):r},l.context=function(f){return arguments.length?(f==null?i=s=null:s=r(i=f),l):i},l}function rg(t,e,n){var i=null,r=Cn(!0),s=null,a=s0,l=null,f=EE(c);t=typeof t=="function"?t:t===void 0?OM:Cn(+t),e=typeof e=="function"?e:Cn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?RM:Cn(+n);function c(p){var g,x,b,T=(p=TE(p)).length,E,C=!1,I,P=new Array(T),M=new Array(T);for(s==null&&(l=a(I=f())),g=0;g<=T;++g){if(!(g<T&&r(E=p[g],g,p))===C)if(C=!C)x=g,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=g-1;b>=x;--b)l.point(P[b],M[b]);l.lineEnd(),l.areaEnd()}C&&(P[g]=+t(E,g,p),M[g]=+e(E,g,p),l.point(i?+i(E,g,p):P[g],n?+n(E,g,p):M[g]))}if(I)return l=null,I+""||null}function h(){return PM().defined(r).curve(a).context(s)}return c.x=function(p){return arguments.length?(t=typeof p=="function"?p:Cn(+p),i=null,c):t},c.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Cn(+p),c):t},c.x1=function(p){return arguments.length?(i=p==null?null:typeof p=="function"?p:Cn(+p),c):i},c.y=function(p){return arguments.length?(e=typeof p=="function"?p:Cn(+p),n=null,c):e},c.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Cn(+p),c):e},c.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Cn(+p),c):n},c.lineX0=c.lineY0=function(){return h().x(t).y(e)},c.lineY1=function(){return h().x(t).y(n)},c.lineX1=function(){return h().x(i).y(e)},c.defined=function(p){return arguments.length?(r=typeof p=="function"?p:Cn(!!p),c):r},c.curve=function(p){return arguments.length?(a=p,s!=null&&(l=a(s)),c):a},c.context=function(p){return arguments.length?(p==null?s=l=null:l=a(s=p),c):s},c}class DM{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Y4(t){return new DM(t,!0)}function W4(t){return new DM(t,!1)}const AE={draw(t,e){const n=no(e/iv);t.moveTo(n,0),t.arc(0,0,n,0,r0)}},Z4={draw(t,e){const n=no(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},IM=no(1/3),X4=IM*2,Q4={draw(t,e){const n=no(e/X4),i=n*IM;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},J4={draw(t,e){const n=no(e),i=-n/2;t.rect(i,i,n,n)}},e8=.8908130915292852,MM=nv(iv/10)/nv(7*iv/10),t8=nv(r0/10)*MM,n8=-wM(r0/10)*MM,i8={draw(t,e){const n=no(e*e8),i=t8*n,r=n8*n;t.moveTo(0,-n),t.lineTo(i,r);for(let s=1;s<5;++s){const a=r0*s/5,l=wM(a),f=nv(a);t.lineTo(f*n,-l*n),t.lineTo(l*i-f*r,f*i+l*r)}t.closePath()}},Tb=no(3),r8={draw(t,e){const n=-no(e/(Tb*3));t.moveTo(0,n*2),t.lineTo(-Tb*n,-n),t.lineTo(Tb*n,-n),t.closePath()}},Zs=-.5,Xs=no(3)/2,I_=1/no(12),s8=(I_/2+1)*3,a8={draw(t,e){const n=no(e/s8),i=n/2,r=n*I_,s=i,a=n*I_+n,l=-s,f=a;t.moveTo(i,r),t.lineTo(s,a),t.lineTo(l,f),t.lineTo(Zs*i-Xs*r,Xs*i+Zs*r),t.lineTo(Zs*s-Xs*a,Xs*s+Zs*a),t.lineTo(Zs*l-Xs*f,Xs*l+Zs*f),t.lineTo(Zs*i+Xs*r,Zs*r-Xs*i),t.lineTo(Zs*s+Xs*a,Zs*a-Xs*s),t.lineTo(Zs*l+Xs*f,Zs*f-Xs*l),t.closePath()}};function o8(t,e){let n=null,i=EE(r);t=typeof t=="function"?t:Cn(t||AE),e=typeof e=="function"?e:Cn(e===void 0?64:+e);function r(){let s;if(n||(n=s=i()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return r.type=function(s){return arguments.length?(t=typeof s=="function"?s:Cn(s),r):t},r.size=function(s){return arguments.length?(e=typeof s=="function"?s:Cn(+s),r):e},r.context=function(s){return arguments.length?(n=s??null,r):n},r}function rv(){}function sv(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function kM(t){this._context=t}kM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function l8(t){return new kM(t)}function NM(t){this._context=t}NM.prototype={areaStart:rv,areaEnd:rv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:sv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function u8(t){return new NM(t)}function jM(t){this._context=t}jM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:sv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function c8(t){return new jM(t)}function BM(t){this._context=t}BM.prototype={areaStart:rv,areaEnd:rv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function f8(t){return new BM(t)}function EL(t){return t<0?-1:1}function TL(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),l=(s*r+a*i)/(i+r);return(EL(s)+EL(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function AL(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ab(t,e,n){var i=t._x0,r=t._y0,s=t._x1,a=t._y1,l=(s-i)/3;t._context.bezierCurveTo(i+l,r+l*e,s-l,a-l*n,s,a)}function av(t){this._context=t}av.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ab(this,this._t0,AL(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ab(this,AL(this,n=TL(this,t,e)),n);break;default:Ab(this,this._t0,n=TL(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function FM(t){this._context=new UM(t)}(FM.prototype=Object.create(av.prototype)).point=function(t,e){av.prototype.point.call(this,e,t)};function UM(t){this._context=t}UM.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}};function d8(t){return new av(t)}function h8(t){return new FM(t)}function $M(t){this._context=t}$M.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=wL(t),r=wL(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function wL(t){var e,n=t.length-1,i,r=new Array(n),s=new Array(n),a=new Array(n);for(r[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/s[e-1],s[e]-=i,a[e]-=i*a[e-1];for(r[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)r[e]=(a[e]-r[e+1])/s[e];for(s[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function m8(t){return new $M(t)}function a0(t,e){this._context=t,this._t=e}a0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function p8(t){return new a0(t,.5)}function g8(t){return new a0(t,0)}function v8(t){return new a0(t,1)}function Pd(t,e){if((a=t.length)>1)for(var n=1,i,r,s=t[e[0]],a,l=s.length;n<a;++n)for(r=s,s=t[e[n]],i=0;i<l;++i)s[i][1]+=s[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}function M_(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function y8(t,e){return t[e]}function b8(t){const e=[];return e.key=t,e}function x8(){var t=Cn([]),e=M_,n=Pd,i=y8;function r(s){var a=Array.from(t.apply(this,arguments),b8),l,f=a.length,c=-1,h;for(const p of s)for(l=0,++c;l<f;++l)(a[l][c]=[0,+i(p,a[l].key,c,s)]).data=p;for(l=0,h=TE(e(a));l<f;++l)a[h[l]].index=l;return n(a,h),a}return r.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Cn(Array.from(s)),r):t},r.value=function(s){return arguments.length?(i=typeof s=="function"?s:Cn(+s),r):i},r.order=function(s){return arguments.length?(e=s==null?M_:typeof s=="function"?s:Cn(Array.from(s)),r):e},r.offset=function(s){return arguments.length?(n=s??Pd,r):n},r}function _8(t,e){if((i=t.length)>0){for(var n,i,r=0,s=t[0].length,a;r<s;++r){for(a=n=0;n<i;++n)a+=t[n][r][1]||0;if(a)for(n=0;n<i;++n)t[n][r][1]/=a}Pd(t,e)}}function S8(t,e){if((r=t.length)>0){for(var n=0,i=t[e[0]],r,s=i.length;n<s;++n){for(var a=0,l=0;a<r;++a)l+=t[a][n][1]||0;i[n][1]+=i[n][0]=-l/2}Pd(t,e)}}function E8(t,e){if(!(!((a=t.length)>0)||!((s=(r=t[e[0]]).length)>0))){for(var n=0,i=1,r,s,a;i<s;++i){for(var l=0,f=0,c=0;l<a;++l){for(var h=t[e[l]],p=h[i][1]||0,g=h[i-1][1]||0,x=(p-g)/2,b=0;b<l;++b){var T=t[e[b]],E=T[i][1]||0,C=T[i-1][1]||0;x+=E-C}f+=p,c+=x*p}r[i-1][1]+=r[i-1][0]=n,f&&(n-=c/f)}r[i-1][1]+=r[i-1][0]=n,Pd(t,e)}}var T8=["type","size","sizeType"];function k_(){return k_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},k_.apply(null,arguments)}function LL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function CL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LL(Object(n),!0).forEach(function(i){A8(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LL(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function A8(t,e,n){return(e=w8(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w8(t){var e=L8(t,"string");return typeof e=="symbol"?e:e+""}function L8(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function C8(t,e){if(t==null)return{};var n,i,r=O8(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function O8(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var zM={symbolCircle:AE,symbolCross:Z4,symbolDiamond:Q4,symbolSquare:J4,symbolStar:i8,symbolTriangle:r8,symbolWye:a8},R8=Math.PI/180,P8=t=>{var e="symbol".concat(Ym(t));return zM[e]||AE},D8=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*R8;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.tan(i)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},I8=(t,e)=>{zM["symbol".concat(Ym(t))]=e},GM=t=>{var{type:e="circle",size:n=64,sizeType:i="area"}=t,r=C8(t,T8),s=CL(CL({},r),{},{type:e,size:n,sizeType:i}),a=()=>{var p=P8(e),g=o8().type(p).size(D8(n,i,e));return g()},{className:l,cx:f,cy:c}=s,h=nn(s,!0);return f===+f&&c===+c&&n===+n?O.createElement("path",k_({},h,{className:gn("recharts-symbols",l),transform:"translate(".concat(f,", ").concat(c,")"),d:a()})):null};GM.registerSymbol=I8;var wb={},Lb={},OL;function M8(){return OL||(OL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){const r=new Map;for(let s=0;s<n.length;s++){const a=n[s],l=i(a);r.has(l)||r.set(l,a)}return Array.from(r.values())}t.uniqBy=e}(Lb)),Lb}var Cb={},RL;function HM(){return RL||(RL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e}(Cb)),Cb}var Ob={},Rb={},Pb={},PL;function k8(){return PL||(PL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e}(Pb)),Pb}var DL;function wE(){return DL||(DL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=k8();function n(i){return i!=null&&typeof i!="function"&&e.isLength(i.length)}t.isArrayLike=n}(Rb)),Rb}var Db={},IL;function N8(){return IL||(IL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e}(Db)),Db}var ML;function j8(){return ML||(ML=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wE(),n=N8();function i(r){return n.isObjectLike(r)&&e.isArrayLike(r)}t.isArrayLikeObject=i}(Ob)),Ob}var Ib={},Mb={},kL;function B8(){return kL||(kL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yE();function n(i){return function(r){return e.get(r,i)}}t.property=n}(Mb)),Mb}var kb={},Nb={},jb={},Bb={},NL;function KM(){return NL||(NL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e}(Bb)),Bb}var Fb={},jL;function qM(){return jL||(jL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e}(Fb)),Fb}var Ub={},BL;function LE(){return BL||(BL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){return n===i||Number.isNaN(n)&&Number.isNaN(i)}t.eq=e}(Ub)),Ub}var FL;function F8(){return FL||(FL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CE(),n=KM(),i=qM(),r=LE();function s(p,g,x){return typeof x!="function"?e.isMatch(p,g):a(p,g,function b(T,E,C,I,P,M){const k=x(T,E,C,I,P,M);return k!==void 0?!!k:a(T,E,b,M)},new Map)}function a(p,g,x,b){if(g===p)return!0;switch(typeof g){case"object":return l(p,g,x,b);case"function":return Object.keys(g).length>0?a(p,{...g},x,b):r.eq(p,g);default:return n.isObject(p)?typeof g=="string"?g==="":!0:r.eq(p,g)}}function l(p,g,x,b){if(g==null)return!0;if(Array.isArray(g))return c(p,g,x,b);if(g instanceof Map)return f(p,g,x,b);if(g instanceof Set)return h(p,g,x,b);const T=Object.keys(g);if(p==null)return T.length===0;if(T.length===0)return!0;if(b&&b.has(g))return b.get(g)===p;b&&b.set(g,p);try{for(let E=0;E<T.length;E++){const C=T[E];if(!i.isPrimitive(p)&&!(C in p)||g[C]===void 0&&p[C]!==void 0||g[C]===null&&p[C]!==null||!x(p[C],g[C],C,p,g,b))return!1}return!0}finally{b&&b.delete(g)}}function f(p,g,x,b){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[T,E]of g.entries()){const C=p.get(T);if(x(C,E,T,p,g,b)===!1)return!1}return!0}function c(p,g,x,b){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const T=new Set;for(let E=0;E<g.length;E++){const C=g[E];let I=!1;for(let P=0;P<p.length;P++){if(T.has(P))continue;const M=p[P];let k=!1;if(x(M,C,E,p,g,b)&&(k=!0),k){T.add(P),I=!0;break}}if(!I)return!1}return!0}function h(p,g,x,b){return g.size===0?!0:p instanceof Set?c([...p],[...g],x,b):!1}t.isMatchWith=s,t.isSetMatch=h}(jb)),jb}var UL;function CE(){return UL||(UL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=F8();function n(i,r){return e.isMatchWith(i,r,()=>{})}t.isMatch=n}(Nb)),Nb}var $b={},zb={},Gb={},$L;function VM(){return $L||($L=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(i=>Object.prototype.propertyIsEnumerable.call(n,i))}t.getSymbols=e}(Gb)),Gb}var Hb={},zL;function OE(){return zL||(zL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e}(Hb)),Hb}var Kb={},GL;function RE(){return GL||(GL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",i="[object Number]",r="[object Boolean]",s="[object Arguments]",a="[object Symbol]",l="[object Date]",f="[object Map]",c="[object Set]",h="[object Array]",p="[object Function]",g="[object ArrayBuffer]",x="[object Object]",b="[object Error]",T="[object DataView]",E="[object Uint8Array]",C="[object Uint8ClampedArray]",I="[object Uint16Array]",P="[object Uint32Array]",M="[object BigUint64Array]",k="[object Int8Array]",z="[object Int16Array]",F="[object Int32Array]",G="[object BigInt64Array]",K="[object Float32Array]",V="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=g,t.arrayTag=h,t.bigInt64ArrayTag=G,t.bigUint64ArrayTag=M,t.booleanTag=r,t.dataViewTag=T,t.dateTag=l,t.errorTag=b,t.float32ArrayTag=K,t.float64ArrayTag=V,t.functionTag=p,t.int16ArrayTag=z,t.int32ArrayTag=F,t.int8ArrayTag=k,t.mapTag=f,t.numberTag=i,t.objectTag=x,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=a,t.uint16ArrayTag=I,t.uint32ArrayTag=P,t.uint8ArrayTag=E,t.uint8ClampedArrayTag=C}(Kb)),Kb}var qb={},HL;function U8(){return HL||(HL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e}(qb)),qb}var KL;function YM(){return KL||(KL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VM(),n=OE(),i=RE(),r=qM(),s=U8();function a(h,p){return l(h,void 0,h,new Map,p)}function l(h,p,g,x=new Map,b=void 0){const T=b?.(h,p,g,x);if(T!=null)return T;if(r.isPrimitive(h))return h;if(x.has(h))return x.get(h);if(Array.isArray(h)){const E=new Array(h.length);x.set(h,E);for(let C=0;C<h.length;C++)E[C]=l(h[C],C,g,x,b);return Object.hasOwn(h,"index")&&(E.index=h.index),Object.hasOwn(h,"input")&&(E.input=h.input),E}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const E=new RegExp(h.source,h.flags);return E.lastIndex=h.lastIndex,E}if(h instanceof Map){const E=new Map;x.set(h,E);for(const[C,I]of h)E.set(C,l(I,C,g,x,b));return E}if(h instanceof Set){const E=new Set;x.set(h,E);for(const C of h)E.add(l(C,void 0,g,x,b));return E}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(s.isTypedArray(h)){const E=new(Object.getPrototypeOf(h)).constructor(h.length);x.set(h,E);for(let C=0;C<h.length;C++)E[C]=l(h[C],C,g,x,b);return E}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const E=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return x.set(h,E),f(E,h,g,x,b),E}if(typeof File<"u"&&h instanceof File){const E=new File([h],h.name,{type:h.type});return x.set(h,E),f(E,h,g,x,b),E}if(h instanceof Blob){const E=new Blob([h],{type:h.type});return x.set(h,E),f(E,h,g,x,b),E}if(h instanceof Error){const E=new h.constructor;return x.set(h,E),E.message=h.message,E.name=h.name,E.stack=h.stack,E.cause=h.cause,f(E,h,g,x,b),E}if(typeof h=="object"&&c(h)){const E=Object.create(Object.getPrototypeOf(h));return x.set(h,E),f(E,h,g,x,b),E}return h}function f(h,p,g=h,x,b){const T=[...Object.keys(p),...e.getSymbols(p)];for(let E=0;E<T.length;E++){const C=T[E],I=Object.getOwnPropertyDescriptor(h,C);(I==null||I.writable)&&(h[C]=l(p[C],C,g,x,b))}}function c(h){switch(n.getTag(h)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=a,t.cloneDeepWithImpl=l,t.copyProperties=f}(zb)),zb}var qL;function $8(){return qL||(qL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YM();function n(i){return e.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}t.cloneDeep=n}($b)),$b}var VL;function z8(){return VL||(VL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CE(),n=$8();function i(r){return r=n.cloneDeep(r),s=>e.isMatch(s,r)}t.matches=i}(kb)),kb}var Vb={},Yb={},Wb={},YL;function G8(){return YL||(YL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YM(),n=RE();function i(r,s){return e.cloneDeepWith(r,(a,l,f,c)=>{const h=s?.(a,l,f,c);if(h!=null)return h;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new r.constructor(r?.valueOf());return e.copyProperties(p,r),p}case n.argumentsTag:{const p={};return e.copyProperties(p,r),p.length=r.length,p[Symbol.iterator]=r[Symbol.iterator],p}default:return}})}t.cloneDeepWith=i}(Wb)),Wb}var WL;function H8(){return WL||(WL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=G8();function n(i){return e.cloneDeepWith(i)}t.cloneDeep=n}(Yb)),Yb}var Zb={},Xb={},ZL;function WM(){return ZL||(ZL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(i,r=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<r;case"symbol":return!1;case"string":return e.test(i)}}t.isIndex=n}(Xb)),Xb}var Qb={},XL;function K8(){return XL||(XL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OE();function n(i){return i!==null&&typeof i=="object"&&e.getTag(i)==="[object Arguments]"}t.isArguments=n}(Qb)),Qb}var QL;function q8(){return QL||(QL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bM(),n=WM(),i=K8(),r=vE();function s(a,l){let f;if(Array.isArray(l)?f=l:typeof l=="string"&&e.isDeepKey(l)&&a?.[l]==null?f=r.toPath(l):f=[l],f.length===0)return!1;let c=a;for(let h=0;h<f.length;h++){const p=f[h];if((c==null||!Object.hasOwn(c,p))&&!((Array.isArray(c)||i.isArguments(c))&&n.isIndex(p)&&p<c.length))return!1;c=c[p]}return!0}t.has=s}(Zb)),Zb}var JL;function V8(){return JL||(JL=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CE(),n=xM(),i=H8(),r=yE(),s=q8();function a(l,f){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return f=i.cloneDeep(f),function(c){const h=r.get(c,l);return h===void 0?s.has(c,l):f===void 0?h===void 0:e.isMatch(h,f)}}t.matchesProperty=a}(Vb)),Vb}var eC;function Y8(){return eC||(eC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HM(),n=B8(),i=z8(),r=V8();function s(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?r.matchesProperty(a[0],a[1]):i.matches(a);case"string":case"symbol":case"number":return n.property(a)}}t.iteratee=s}(Ib)),Ib}var tC;function W8(){return tC||(tC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=M8(),n=HM(),i=j8(),r=Y8();function s(a,l=n.identity){return i.isArrayLikeObject(a)?e.uniqBy(Array.from(a),r.iteratee(l)):[]}t.uniqBy=s}(wb)),wb}var Jb,nC;function Z8(){return nC||(nC=1,Jb=W8().uniqBy),Jb}var X8=Z8();const iC=Qr(X8);function Q8(t,e,n){return e===!0?iC(t,n):typeof e=="function"?iC(t,e):t}var ex={exports:{}},tx={},nx={exports:{}},ix={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rC;function J8(){if(rC)return ix;rC=1;var t=$d();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function l(p,g){var x=g(),b=i({inst:{value:x,getSnapshot:g}}),T=b[0].inst,E=b[1];return s(function(){T.value=x,T.getSnapshot=g,f(T)&&E({inst:T})},[p,x,g]),r(function(){return f(T)&&E({inst:T}),p(function(){f(T)&&E({inst:T})})},[p]),a(x),x}function f(p){var g=p.getSnapshot;p=p.value;try{var x=g();return!n(p,x)}catch{return!0}}function c(p,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:l;return ix.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,ix}var sC;function e6(){return sC||(sC=1,nx.exports=J8()),nx.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aC;function t6(){if(aC)return tx;aC=1;var t=$d(),e=e6();function n(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var i=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,s=t.useRef,a=t.useEffect,l=t.useMemo,f=t.useDebugValue;return tx.useSyncExternalStoreWithSelector=function(c,h,p,g,x){var b=s(null);if(b.current===null){var T={hasValue:!1,value:null};b.current=T}else T=b.current;b=l(function(){function C(z){if(!I){if(I=!0,P=z,z=g(z),x!==void 0&&T.hasValue){var F=T.value;if(x(F,z))return M=F}return M=z}if(F=M,i(P,z))return F;var G=g(z);return x!==void 0&&x(F,G)?(P=z,F):(P=z,M=G)}var I=!1,P,M,k=p===void 0?null:p;return[function(){return C(h())},k===null?void 0:function(){return C(k())}]},[h,p,g,x]);var E=r(c,b[0],b[1]);return a(function(){T.hasValue=!0,T.value=E},[E]),f(E),E},tx}var oC;function n6(){return oC||(oC=1,ex.exports=t6()),ex.exports}var i6=n6(),PE=O.createContext(null),r6=t=>t,yi=()=>{var t=O.useContext(PE);return t?t.store.dispatch:r6},kg=()=>{},s6=()=>kg,a6=(t,e)=>t===e;function ut(t){var e=O.useContext(PE);return i6.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:s6,e?e.store.getState:kg,e?e.store.getState:kg,e?t:kg,a6)}function o6(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function l6(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function u6(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${n}]`)}}var lC=t=>Array.isArray(t)?t:[t];function c6(t){const e=Array.isArray(t[0])?t[0]:t;return u6(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function f6(t,e){const n=[],{length:i}=t;for(let r=0;r<i;r++)n.push(t[r].apply(null,e));return n}var d6=class{constructor(t){this.value=t}deref(){return this.value}},h6=typeof WeakRef<"u"?WeakRef:d6,m6=0,uC=1;function sg(){return{s:m6,v:void 0,o:null,p:null}}function ZM(t,e={}){let n=sg();const{resultEqualityCheck:i}=e;let r,s=0;function a(){let l=n;const{length:f}=arguments;for(let p=0,g=f;p<g;p++){const x=arguments[p];if(typeof x=="function"||typeof x=="object"&&x!==null){let b=l.o;b===null&&(l.o=b=new WeakMap);const T=b.get(x);T===void 0?(l=sg(),b.set(x,l)):l=T}else{let b=l.p;b===null&&(l.p=b=new Map);const T=b.get(x);T===void 0?(l=sg(),b.set(x,l)):l=T}}const c=l;let h;if(l.s===uC)h=l.v;else if(h=t.apply(null,arguments),s++,i){const p=r?.deref?.()??r;p!=null&&i(p,h)&&(h=p,s!==0&&s--),r=typeof h=="object"&&h!==null||typeof h=="function"?new h6(h):h}return c.s=uC,c.v=h,h}return a.clearCache=()=>{n=sg(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function p6(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,i=(...r)=>{let s=0,a=0,l,f={},c=r.pop();typeof c=="object"&&(f=c,c=r.pop()),o6(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const h={...n,...f},{memoize:p,memoizeOptions:g=[],argsMemoize:x=ZM,argsMemoizeOptions:b=[]}=h,T=lC(g),E=lC(b),C=c6(r),I=p(function(){return s++,c.apply(null,arguments)},...T),P=x(function(){a++;const k=f6(C,arguments);return l=I.apply(null,k),l},...E);return Object.assign(P,{resultFunc:c,memoizedResultFunc:I,dependencies:C,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:p,argsMemoize:x})};return Object.assign(i,{withTypes:()=>i}),i}var Ce=p6(ZM),g6=Object.assign((t,e=Ce)=>{l6(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),i=n.map(s=>t[s]);return e(i,(...s)=>s.reduce((a,l,f)=>(a[n[f]]=l,a),{}))},{withTypes:()=>g6}),rx={},sx={},ax={},cC;function v6(){return cC||(cC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const n=(i,r,s)=>{if(i!==r){const a=e(i),l=e(r);if(a===l&&a===0){if(i<r)return s==="desc"?1:-1;if(i>r)return s==="desc"?-1:1}return s==="desc"?l-a:a-l}return 0};t.compareValues=n}(ax)),ax}var ox={},lx={},fC;function XM(){return fC||(fC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e}(lx)),lx}var dC;function y6(){return dC||(dC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XM(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(i.test(s)||!n.test(s))||a!=null&&Object.hasOwn(a,s)}t.isKey=r}(ox)),ox}var hC;function b6(){return hC||(hC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=v6(),n=y6(),i=vE();function r(s,a,l,f){if(s==null)return[];l=f?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(x=>String(x));const c=(x,b)=>{let T=x;for(let E=0;E<b.length&&T!=null;++E)T=T[b[E]];return T},h=(x,b)=>b==null||x==null?b:typeof x=="object"&&"key"in x?Object.hasOwn(b,x.key)?b[x.key]:c(b,x.path):typeof x=="function"?x(b):Array.isArray(x)?c(b,x):typeof b=="object"?b[x]:b,p=a.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:i.toPath(x)}));return s.map(x=>({original:x,criteria:p.map(b=>h(b,x))})).slice().sort((x,b)=>{for(let T=0;T<p.length;T++){const E=e.compareValues(x.criteria[T],b.criteria[T],l[T]);if(E!==0)return E}return 0}).map(x=>x.original)}t.orderBy=r}(sx)),sx}var ux={},mC;function x6(){return mC||(mC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i=1){const r=[],s=Math.floor(i),a=(l,f)=>{for(let c=0;c<l.length;c++){const h=l[c];Array.isArray(h)&&f<s?a(h,f+1):r.push(h)}};return a(n,0),r}t.flatten=e}(ux)),ux}var cx={},pC;function QM(){return pC||(pC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WM(),n=wE(),i=KM(),r=LE();function s(a,l,f){return i.isObject(f)&&(typeof l=="number"&&n.isArrayLike(f)&&e.isIndex(l)&&l<f.length||typeof l=="string"&&l in f)?r.eq(f[l],a):!1}t.isIterateeCall=s}(cx)),cx}var gC;function _6(){return gC||(gC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=b6(),n=x6(),i=QM();function r(s,...a){const l=a.length;return l>1&&i.isIterateeCall(s,a[0],a[1])?a=[]:l>2&&i.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(s,n.flatten(a),["asc"])}t.sortBy=r}(rx)),rx}var fx,vC;function S6(){return vC||(vC=1,fx=_6().sortBy),fx}var E6=S6();const o0=Qr(E6);var JM=t=>t.legend.settings,T6=t=>t.legend.size,A6=t=>t.legend.payload;Ce([A6,JM],(t,e)=>{var{itemSorter:n}=e,i=t.flat(1);return n?o0(i,n):i});var ag=1;function w6(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=O.useState({height:0,left:0,top:0,width:0}),i=O.useCallback(r=>{if(r!=null){var s=r.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-e.height)>ag||Math.abs(a.left-e.left)>ag||Math.abs(a.top-e.top)>ag||Math.abs(a.width-e.width)>ag)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,i]}function nr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var L6=typeof Symbol=="function"&&Symbol.observable||"@@observable",yC=L6,dx=()=>Math.random().toString(36).substring(7).split("").join("."),C6={INIT:`@@redux/INIT${dx()}`,REPLACE:`@@redux/REPLACE${dx()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${dx()}`},ov=C6;function DE(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function ek(t,e,n){if(typeof t!="function")throw new Error(nr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(nr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(nr(1));return n(ek)(t,e)}let i=t,r=e,s=new Map,a=s,l=0,f=!1;function c(){a===s&&(a=new Map,s.forEach((E,C)=>{a.set(C,E)}))}function h(){if(f)throw new Error(nr(3));return r}function p(E){if(typeof E!="function")throw new Error(nr(4));if(f)throw new Error(nr(5));let C=!0;c();const I=l++;return a.set(I,E),function(){if(C){if(f)throw new Error(nr(6));C=!1,c(),a.delete(I),s=null}}}function g(E){if(!DE(E))throw new Error(nr(7));if(typeof E.type>"u")throw new Error(nr(8));if(typeof E.type!="string")throw new Error(nr(17));if(f)throw new Error(nr(9));try{f=!0,r=i(r,E)}finally{f=!1}return(s=a).forEach(I=>{I()}),E}function x(E){if(typeof E!="function")throw new Error(nr(10));i=E,g({type:ov.REPLACE})}function b(){const E=p;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(nr(11));function I(){const M=C;M.next&&M.next(h())}return I(),{unsubscribe:E(I)}},[yC](){return this}}}return g({type:ov.INIT}),{dispatch:g,subscribe:p,getState:h,replaceReducer:x,[yC]:b}}function O6(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:ov.INIT})>"u")throw new Error(nr(12));if(typeof n(void 0,{type:ov.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(nr(13))})}function tk(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const a=e[s];typeof t[a]=="function"&&(n[a]=t[a])}const i=Object.keys(n);let r;try{O6(n)}catch(s){r=s}return function(a={},l){if(r)throw r;let f=!1;const c={};for(let h=0;h<i.length;h++){const p=i[h],g=n[p],x=a[p],b=g(x,l);if(typeof b>"u")throw l&&l.type,new Error(nr(14));c[p]=b,f=f||b!==x}return f=f||i.length!==Object.keys(a).length,f?c:a}}function lv(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...i)=>e(n(...i)))}function R6(...t){return e=>(n,i)=>{const r=e(n,i);let s=()=>{throw new Error(nr(15))};const a={getState:r.getState,dispatch:(f,...c)=>s(f,...c)},l=t.map(f=>f(a));return s=lv(...l)(r.dispatch),{...r,dispatch:s}}}function nk(t){return DE(t)&&"type"in t&&typeof t.type=="string"}var ik=Symbol.for("immer-nothing"),bC=Symbol.for("immer-draftable"),Os=Symbol.for("immer-state");function Wa(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Dd=Object.getPrototypeOf;function Jc(t){return!!t&&!!t[Os]}function jl(t){return t?rk(t)||Array.isArray(t)||!!t[bC]||!!t.constructor?.[bC]||u0(t)||c0(t):!1}var P6=Object.prototype.constructor.toString();function rk(t){if(!t||typeof t!="object")return!1;const e=Dd(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===P6}function uv(t,e){l0(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,i)=>e(i,n,t))}function l0(t){const e=t[Os];return e?e.type_:Array.isArray(t)?1:u0(t)?2:c0(t)?3:0}function N_(t,e){return l0(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function sk(t,e,n){const i=l0(t);i===2?t.set(e,n):i===3?t.add(n):t[e]=n}function D6(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function u0(t){return t instanceof Map}function c0(t){return t instanceof Set}function Nc(t){return t.copy_||t.base_}function j_(t,e){if(u0(t))return new Map(t);if(c0(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=rk(t);if(e===!0||e==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(t);delete i[Os];let r=Reflect.ownKeys(i);for(let s=0;s<r.length;s++){const a=r[s],l=i[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(i[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[a]})}return Object.create(Dd(t),i)}else{const i=Dd(t);if(i!==null&&n)return{...t};const r=Object.create(i);return Object.assign(r,t)}}function IE(t,e=!1){return f0(t)||Jc(t)||!jl(t)||(l0(t)>1&&(t.set=t.add=t.clear=t.delete=I6),Object.freeze(t),e&&Object.entries(t).forEach(([n,i])=>IE(i,!0))),t}function I6(){Wa(2)}function f0(t){return Object.isFrozen(t)}var M6={};function ef(t){const e=M6[t];return e||Wa(0,t),e}var Sm;function ak(){return Sm}function k6(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xC(t,e){e&&(ef("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function B_(t){F_(t),t.drafts_.forEach(N6),t.drafts_=null}function F_(t){t===Sm&&(Sm=t.parent_)}function _C(t){return Sm=k6(Sm,t)}function N6(t){const e=t[Os];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function SC(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Os].modified_&&(B_(e),Wa(4)),jl(t)&&(t=cv(e,t),e.parent_||fv(e,t)),e.patches_&&ef("Patches").generateReplacementPatches_(n[Os].base_,t,e.patches_,e.inversePatches_)):t=cv(e,n,[]),B_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==ik?t:void 0}function cv(t,e,n){if(f0(e))return e;const i=e[Os];if(!i)return uv(e,(r,s)=>EC(t,i,e,r,s,n)),e;if(i.scope_!==t)return e;if(!i.modified_)return fv(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const r=i.copy_;let s=r,a=!1;i.type_===3&&(s=new Set(r),r.clear(),a=!0),uv(s,(l,f)=>EC(t,i,r,l,f,n,a)),fv(t,r,!1),n&&t.patches_&&ef("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function EC(t,e,n,i,r,s,a){if(Jc(r)){const l=s&&e&&e.type_!==3&&!N_(e.assigned_,i)?s.concat(i):void 0,f=cv(t,r,l);if(sk(n,i,f),Jc(f))t.canAutoFreeze_=!1;else return}else a&&n.add(r);if(jl(r)&&!f0(r)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;cv(t,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,i)&&fv(t,r)}}function fv(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&IE(e,n)}function j6(t,e){const n=Array.isArray(t),i={type_:n?1:0,scope_:e?e.scope_:ak(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,s=ME;n&&(r=[i],s=Em);const{revoke:a,proxy:l}=Proxy.revocable(r,s);return i.draft_=l,i.revoke_=a,l}var ME={get(t,e){if(e===Os)return t;const n=Nc(t);if(!N_(n,e))return B6(t,n,e);const i=n[e];return t.finalized_||!jl(i)?i:i===hx(t.base_,e)?(mx(t),t.copy_[e]=$_(i,t)):i},has(t,e){return e in Nc(t)},ownKeys(t){return Reflect.ownKeys(Nc(t))},set(t,e,n){const i=ok(Nc(t),e);if(i?.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const r=hx(Nc(t),e),s=r?.[Os];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(D6(n,r)&&(n!==void 0||N_(t.base_,e)))return!0;mx(t),U_(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return hx(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,mx(t),U_(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Nc(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:i.enumerable,value:n[e]}},defineProperty(){Wa(11)},getPrototypeOf(t){return Dd(t.base_)},setPrototypeOf(){Wa(12)}},Em={};uv(ME,(t,e)=>{Em[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Em.deleteProperty=function(t,e){return Em.set.call(this,t,e,void 0)};Em.set=function(t,e,n){return ME.set.call(this,t[0],e,n,t[0])};function hx(t,e){const n=t[Os];return(n?Nc(n):t)[e]}function B6(t,e,n){const i=ok(e,n);return i?"value"in i?i.value:i.get?.call(t.draft_):void 0}function ok(t,e){if(!(e in t))return;let n=Dd(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=Dd(n)}}function U_(t){t.modified_||(t.modified_=!0,t.parent_&&U_(t.parent_))}function mx(t){t.copy_||(t.copy_=j_(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var F6=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,i)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const a=this;return function(f=s,...c){return a.produce(f,h=>n.call(this,h,...c))}}typeof n!="function"&&Wa(6),i!==void 0&&typeof i!="function"&&Wa(7);let r;if(jl(e)){const s=_C(this),a=$_(e,void 0);let l=!0;try{r=n(a),l=!1}finally{l?B_(s):F_(s)}return xC(s,i),SC(r,s)}else if(!e||typeof e!="object"){if(r=n(e),r===void 0&&(r=e),r===ik&&(r=void 0),this.autoFreeze_&&IE(r,!0),i){const s=[],a=[];ef("Patches").generateReplacementPatches_(e,r,s,a),i(s,a)}return r}else Wa(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,f=>e(f,...l));let i,r;return[this.produce(e,n,(a,l)=>{i=a,r=l}),i,r]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){jl(t)||Wa(8),Jc(t)&&(t=Il(t));const e=_C(this),n=$_(t,void 0);return n[Os].isManual_=!0,F_(e),n}finishDraft(t,e){const n=t&&t[Os];(!n||!n.isManual_)&&Wa(9);const{scope_:i}=n;return xC(i,e),SC(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const r=e[n];if(r.path.length===0&&r.op==="replace"){t=r.value;break}}n>-1&&(e=e.slice(n+1));const i=ef("Patches").applyPatches_;return Jc(t)?i(t,e):this.produce(t,r=>i(r,e))}};function $_(t,e){const n=u0(t)?ef("MapSet").proxyMap_(t,e):c0(t)?ef("MapSet").proxySet_(t,e):j6(t,e);return(e?e.scope_:ak()).drafts_.push(n),n}function Il(t){return Jc(t)||Wa(10,t),lk(t)}function lk(t){if(!jl(t)||f0(t))return t;const e=t[Os];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=j_(t,e.scope_.immer_.useStrictShallowCopy_)}else n=j_(t,!0);return uv(n,(i,r)=>{sk(n,i,lk(r))}),e&&(e.finalized_=!1),n}var Rs=new F6,uk=Rs.produce;Rs.produceWithPatches.bind(Rs);Rs.setAutoFreeze.bind(Rs);Rs.setUseStrictShallowCopy.bind(Rs);Rs.applyPatches.bind(Rs);Rs.createDraft.bind(Rs);Rs.finishDraft.bind(Rs);function ck(t){return({dispatch:n,getState:i})=>r=>s=>typeof s=="function"?s(n,i,t):r(s)}var U6=ck(),$6=ck,z6=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?lv:lv.apply(null,arguments)};function oa(t,e){function n(...i){if(e){let r=e(...i);if(!r)throw new Error(As(0));return{type:t,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:t,payload:i[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=i=>nk(i)&&i.type===t,n}var fk=class lm extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,lm.prototype)}static get[Symbol.species](){return lm}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new lm(...e[0].concat(this)):new lm(...e.concat(this))}};function TC(t){return jl(t)?uk(t,()=>{}):t}function og(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function G6(t){return typeof t=="boolean"}var H6=()=>function(e){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:s=!0}=e??{};let a=new fk;return n&&(G6(n)?a.push(U6):a.push($6(n.extraArgument))),a},K6="RTK_autoBatch",AC=t=>e=>{setTimeout(e,t)},q6=(t={type:"raf"})=>e=>(...n)=>{const i=e(...n);let r=!0,s=!1,a=!1;const l=new Set,f=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:AC(10):t.type==="callback"?t.queueNotification:AC(t.timeout),c=()=>{a=!1,s&&(s=!1,l.forEach(h=>h()))};return Object.assign({},i,{subscribe(h){const p=()=>r&&h(),g=i.subscribe(p);return l.add(h),()=>{g(),l.delete(h)}},dispatch(h){try{return r=!h?.meta?.[K6],s=!r,s&&(a||(a=!0,f(c))),i.dispatch(h)}finally{r=!0}}})},V6=t=>function(n){const{autoBatch:i=!0}=n??{};let r=new fk(t);return i&&r.push(q6(typeof i=="object"?i:void 0)),r};function Y6(t){const e=H6(),{reducer:n=void 0,middleware:i,devTools:r=!0,preloadedState:s=void 0,enhancers:a=void 0}=t||{};let l;if(typeof n=="function")l=n;else if(DE(n))l=tk(n);else throw new Error(As(1));let f;typeof i=="function"?f=i(e):f=e();let c=lv;r&&(c=z6({trace:!1,...typeof r=="object"&&r}));const h=R6(...f),p=V6(h);let g=typeof a=="function"?a(p):p();const x=c(...g);return ek(l,s,x)}function dk(t){const e={},n=[];let i;const r={addCase(s,a){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(As(28));if(l in e)throw new Error(As(29));return e[l]=a,r},addMatcher(s,a){return n.push({matcher:s,reducer:a}),r},addDefaultCase(s){return i=s,r}};return t(r),[e,n,i]}function W6(t){return typeof t=="function"}function Z6(t,e){let[n,i,r]=dk(e),s;if(W6(t))s=()=>TC(t());else{const l=TC(t);s=()=>l}function a(l=s(),f){let c=[n[f.type],...i.filter(({matcher:h})=>h(f)).map(({reducer:h})=>h)];return c.filter(h=>!!h).length===0&&(c=[r]),c.reduce((h,p)=>{if(p)if(Jc(h)){const x=p(h,f);return x===void 0?h:x}else{if(jl(h))return uk(h,g=>p(g,f));{const g=p(h,f);if(g===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return h},l)}return a.getInitialState=s,a}var X6="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Q6=(t=21)=>{let e="",n=t;for(;n--;)e+=X6[Math.random()*64|0];return e},J6=Symbol.for("rtk-slice-createasyncthunk");function eG(t,e){return`${t}/${e}`}function tG({creators:t}={}){const e=t?.asyncThunk?.[J6];return function(i){const{name:r,reducerPath:s=r}=i;if(!r)throw new Error(As(11));const a=(typeof i.reducers=="function"?i.reducers(iG()):i.reducers)||{},l=Object.keys(a),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(P,M){const k=typeof P=="string"?P:P.type;if(!k)throw new Error(As(12));if(k in f.sliceCaseReducersByType)throw new Error(As(13));return f.sliceCaseReducersByType[k]=M,c},addMatcher(P,M){return f.sliceMatchers.push({matcher:P,reducer:M}),c},exposeAction(P,M){return f.actionCreators[P]=M,c},exposeCaseReducer(P,M){return f.sliceCaseReducersByName[P]=M,c}};l.forEach(P=>{const M=a[P],k={reducerName:P,type:eG(r,P),createNotation:typeof i.reducers=="function"};sG(M)?oG(k,M,c,e):rG(k,M,c)});function h(){const[P={},M=[],k=void 0]=typeof i.extraReducers=="function"?dk(i.extraReducers):[i.extraReducers],z={...P,...f.sliceCaseReducersByType};return Z6(i.initialState,F=>{for(let G in z)F.addCase(G,z[G]);for(let G of f.sliceMatchers)F.addMatcher(G.matcher,G.reducer);for(let G of M)F.addMatcher(G.matcher,G.reducer);k&&F.addDefaultCase(k)})}const p=P=>P,g=new Map,x=new WeakMap;let b;function T(P,M){return b||(b=h()),b(P,M)}function E(){return b||(b=h()),b.getInitialState()}function C(P,M=!1){function k(F){let G=F[P];return typeof G>"u"&&M&&(G=og(x,k,E)),G}function z(F=p){const G=og(g,M,()=>new WeakMap);return og(G,F,()=>{const K={};for(const[V,Q]of Object.entries(i.selectors??{}))K[V]=nG(Q,F,()=>og(x,F,E),M);return K})}return{reducerPath:P,getSelectors:z,get selectors(){return z(k)},selectSlice:k}}const I={name:r,reducer:T,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:E,...C(s),injectInto(P,{reducerPath:M,...k}={}){const z=M??s;return P.inject({reducerPath:z,reducer:T},k),{...I,...C(z,!0)}}};return I}}function nG(t,e,n,i){function r(s,...a){let l=e(s);return typeof l>"u"&&i&&(l=n()),t(l,...a)}return r.unwrapped=t,r}var ca=tG();function iG(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function rG({type:t,reducerName:e,createNotation:n},i,r){let s,a;if("reducer"in i){if(n&&!aG(i))throw new Error(As(17));s=i.reducer,a=i.prepare}else s=i;r.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,a?oa(t,a):oa(t))}function sG(t){return t._reducerDefinitionType==="asyncThunk"}function aG(t){return t._reducerDefinitionType==="reducerWithPrepare"}function oG({type:t,reducerName:e},n,i,r){if(!r)throw new Error(As(18));const{payloadCreator:s,fulfilled:a,pending:l,rejected:f,settled:c,options:h}=n,p=r(t,s,h);i.exposeAction(e,p),a&&i.addCase(p.fulfilled,a),l&&i.addCase(p.pending,l),f&&i.addCase(p.rejected,f),c&&i.addMatcher(p.settled,c),i.exposeCaseReducer(e,{fulfilled:a||lg,pending:l||lg,rejected:f||lg,settled:c||lg})}function lg(){}var lG="task",hk="listener",mk="completed",kE="cancelled",uG=`task-${kE}`,cG=`task-${mk}`,z_=`${hk}-${kE}`,fG=`${hk}-${mk}`,d0=class{constructor(t){this.code=t,this.message=`${lG} ${kE} (reason: ${t})`}name="TaskAbortError";message},NE=(t,e)=>{if(typeof t!="function")throw new TypeError(As(32))},dv=()=>{},pk=(t,e=dv)=>(t.catch(e),t),gk=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Kc=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},qc=t=>{if(t.aborted){const{reason:e}=t;throw new d0(e)}};function vk(t,e){let n=dv;return new Promise((i,r)=>{const s=()=>r(new d0(t.reason));if(t.aborted){s();return}n=gk(t,s),e.finally(()=>n()).then(i,r)}).finally(()=>{n=dv})}var dG=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof d0?"cancelled":"rejected",error:n}}finally{e?.()}},hv=t=>e=>pk(vk(t,e).then(n=>(qc(t),n))),yk=t=>{const e=hv(t);return n=>e(new Promise(i=>setTimeout(i,n)))},{assign:bd}=Object,wC={},h0="listenerMiddleware",hG=(t,e)=>{const n=i=>gk(t,()=>Kc(i,t.reason));return(i,r)=>{NE(i);const s=new AbortController;n(s);const a=dG(async()=>{qc(t),qc(s.signal);const l=await i({pause:hv(s.signal),delay:yk(s.signal),signal:s.signal});return qc(s.signal),l},()=>Kc(s,cG));return r?.autoJoin&&e.push(a.catch(dv)),{result:hv(t)(a),cancel(){Kc(s,uG)}}}},mG=(t,e)=>{const n=async(i,r)=>{qc(e);let s=()=>{};const l=[new Promise((f,c)=>{let h=t({predicate:i,effect:(p,g)=>{g.unsubscribe(),f([p,g.getState(),g.getOriginalState()])}});s=()=>{h(),c()}})];r!=null&&l.push(new Promise(f=>setTimeout(f,r,null)));try{const f=await vk(e,Promise.race(l));return qc(e),f}finally{s()}};return(i,r)=>pk(n(i,r))},bk=t=>{let{type:e,actionCreator:n,matcher:i,predicate:r,effect:s}=t;if(e)r=oa(e).match;else if(n)e=n.type,r=n.match;else if(i)r=i;else if(!r)throw new Error(As(21));return NE(s),{predicate:r,type:e,effect:s}},xk=bd(t=>{const{type:e,predicate:n,effect:i}=bk(t);return{id:Q6(),effect:i,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(As(22))}}},{withTypes:()=>xk}),LC=(t,e)=>{const{type:n,effect:i,predicate:r}=bk(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===r)&&s.effect===i)},G_=t=>{t.pending.forEach(e=>{Kc(e,z_)})},pG=t=>()=>{t.forEach(G_),t.clear()},CC=(t,e,n)=>{try{t(e,n)}catch(i){setTimeout(()=>{throw i},0)}},_k=bd(oa(`${h0}/add`),{withTypes:()=>_k}),gG=oa(`${h0}/removeAll`),Sk=bd(oa(`${h0}/remove`),{withTypes:()=>Sk}),vG=(...t)=>{console.error(`${h0}/error`,...t)},Wm=(t={})=>{const e=new Map,{extra:n,onError:i=vG}=t;NE(i);const r=h=>(h.unsubscribe=()=>e.delete(h.id),e.set(h.id,h),p=>{h.unsubscribe(),p?.cancelActive&&G_(h)}),s=h=>{const p=LC(e,h)??xk(h);return r(p)};bd(s,{withTypes:()=>s});const a=h=>{const p=LC(e,h);return p&&(p.unsubscribe(),h.cancelActive&&G_(p)),!!p};bd(a,{withTypes:()=>a});const l=async(h,p,g,x)=>{const b=new AbortController,T=mG(s,b.signal),E=[];try{h.pending.add(b),await Promise.resolve(h.effect(p,bd({},g,{getOriginalState:x,condition:(C,I)=>T(C,I).then(Boolean),take:T,delay:yk(b.signal),pause:hv(b.signal),extra:n,signal:b.signal,fork:hG(b.signal,E),unsubscribe:h.unsubscribe,subscribe:()=>{e.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((C,I,P)=>{C!==b&&(Kc(C,z_),P.delete(C))})},cancel:()=>{Kc(b,z_),h.pending.delete(b)},throwIfCancelled:()=>{qc(b.signal)}})))}catch(C){C instanceof d0||CC(i,C,{raisedBy:"effect"})}finally{await Promise.all(E),Kc(b,fG),h.pending.delete(b)}},f=pG(e);return{middleware:h=>p=>g=>{if(!nk(g))return p(g);if(_k.match(g))return s(g.payload);if(gG.match(g)){f();return}if(Sk.match(g))return a(g.payload);let x=h.getState();const b=()=>{if(x===wC)throw new Error(As(23));return x};let T;try{if(T=p(g),e.size>0){const E=h.getState(),C=Array.from(e.values());for(const I of C){let P=!1;try{P=I.predicate(g,E,x)}catch(M){P=!1,CC(i,M,{raisedBy:"predicate"})}P&&l(I,g,h,b)}}}finally{x=wC}return T},startListening:s,stopListening:a,clearListeners:f}};function As(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var yG={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Ek=ca({name:"chartLayout",initialState:yG,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){t.margin.top=e.payload.top,t.margin.right=e.payload.right,t.margin.bottom=e.payload.bottom,t.margin.left=e.payload.left},setScale(t,e){t.scale=e.payload}}}),{setMargin:bG,setLayout:xG,setChartSize:_G,setScale:SG}=Ek.actions,EG=Ek.reducer;function OC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function RC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OC(Object(n),!0).forEach(function(i){TG(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function TG(t,e,n){return(e=AG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AG(t){var e=wG(t,"string");return typeof e=="symbol"?e:e+""}function wG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mv=Math.PI/180,LG=t=>t*180/Math.PI,rr=(t,e,n,i)=>({x:t+Math.cos(-mv*i)*n,y:e+Math.sin(-mv*i)*n}),CG=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(n-(i.top||0)-(i.bottom||0)))/2},OG=(t,e)=>{var{x:n,y:i}=t,{x:r,y:s}=e;return Math.sqrt((n-r)**2+(i-s)**2)},RG=(t,e)=>{var{x:n,y:i}=t,{cx:r,cy:s}=e,a=OG({x:n,y:i},{x:r,y:s});if(a<=0)return{radius:a,angle:0};var l=(n-r)/a,f=Math.acos(l);return i>s&&(f=2*Math.PI-f),{radius:a,angle:LG(f),angleInRadian:f}},PG=t=>{var{startAngle:e,endAngle:n}=t,i=Math.floor(e/360),r=Math.floor(n/360),s=Math.min(i,r);return{startAngle:e-s*360,endAngle:n-s*360}},DG=(t,e)=>{var{startAngle:n,endAngle:i}=e,r=Math.floor(n/360),s=Math.floor(i/360),a=Math.min(r,s);return t+a*360},IG=(t,e)=>{var{x:n,y:i}=t,{radius:r,angle:s}=RG({x:n,y:i},e),{innerRadius:a,outerRadius:l}=e;if(r<a||r>l||r===0)return null;var{startAngle:f,endAngle:c}=PG(e),h=s,p;if(f<=c){for(;h>c;)h-=360;for(;h<f;)h+=360;p=h>=f&&h<=c}else{for(;h>f;)h-=360;for(;h<c;)h+=360;p=h>=c&&h<=f}return p?RC(RC({},e),{},{radius:r,angle:DG(h,e)}):null};function PC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function na(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PC(Object(n),!0).forEach(function(i){MG(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function MG(t,e,n){return(e=kG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kG(t){var e=NG(t,"string");return typeof e=="symbol"?e:e+""}function NG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vr(t,e,n){return Sn(t)||Sn(e)?n:ko(e)?Qc(t,e,n):typeof e=="function"?e(t):n}var jG=(t,e,n,i,r)=>{var s,a=-1,l=(s=e?.length)!==null&&s!==void 0?s:0;if(l<=1||t==null)return 0;if(i==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var f=0;f<l;f++){var c=f>0?n[f-1].coordinate:n[l-1].coordinate,h=n[f].coordinate,p=f>=l-1?n[0].coordinate:n[f+1].coordinate,g=void 0;if(Zr(h-c)!==Zr(p-h)){var x=[];if(Zr(p-h)===Zr(r[1]-r[0])){g=p;var b=h+r[1]-r[0];x[0]=Math.min(b,(b+c)/2),x[1]=Math.max(b,(b+c)/2)}else{g=c;var T=p+r[1]-r[0];x[0]=Math.min(h,(T+h)/2),x[1]=Math.max(h,(T+h)/2)}var E=[Math.min(h,(g+h)/2),Math.max(h,(g+h)/2)];if(t>E[0]&&t<=E[1]||t>=x[0]&&t<=x[1]){({index:a}=n[f]);break}}else{var C=Math.min(c,p),I=Math.max(c,p);if(t>(C+h)/2&&t<=(I+h)/2){({index:a}=n[f]);break}}}else if(e){for(var P=0;P<l;P++)if(P===0&&t<=(e[P].coordinate+e[P+1].coordinate)/2||P>0&&P<l-1&&t>(e[P].coordinate+e[P-1].coordinate)/2&&t<=(e[P].coordinate+e[P+1].coordinate)/2||P===l-1&&t>(e[P].coordinate+e[P-1].coordinate)/2){({index:a}=e[P]);break}}return a},BG=(t,e,n)=>{if(e&&n){var{width:i,height:r}=n,{align:s,verticalAlign:a,layout:l}=e;if((l==="vertical"||l==="horizontal"&&a==="middle")&&s!=="center"&&it(t[s]))return na(na({},t),{},{[s]:t[s]+(i||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&a!=="middle"&&it(t[a]))return na(na({},t),{},{[a]:t[a]+(r||0)})}return t},Qu=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",Tk=(t,e,n,i)=>{if(i)return t.map(l=>l.coordinate);var r,s,a=t.map(l=>(l.coordinate===e&&(r=!0),l.coordinate===n&&(s=!0),l.coordinate));return r||a.push(e),s||a.push(n),a},Ak=(t,e,n)=>{if(!t)return null;var{duplicateDomain:i,type:r,range:s,scale:a,realScaleType:l,isCategorical:f,categoricalDomain:c,tickCount:h,ticks:p,niceTicks:g,axisType:x}=t;if(!a)return null;var b=l==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,T=r==="category"&&a.bandwidth?a.bandwidth()/b:0;if(T=x==="angleAxis"&&s&&s.length>=2?Zr(s[0]-s[1])*2*T:T,p||g){var E=(p||g||[]).map((C,I)=>{var P=i?i.indexOf(C):C;return{coordinate:a(P)+T,value:C,offset:T,index:I}});return E.filter(C=>!Ls(C.coordinate))}return f&&c?c.map((C,I)=>({coordinate:a(C)+T,value:C,index:I,offset:T})):a.ticks&&h!=null?a.ticks(h).map((C,I)=>({coordinate:a(C)+T,value:C,offset:T,index:I})):a.domain().map((C,I)=>({coordinate:a(C)+T,value:i?i[C]:C,index:I,offset:T}))},DC=1e-4,FG=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,i=t.range(),r=Math.min(i[0],i[1])-DC,s=Math.max(i[0],i[1])+DC,a=t(e[0]),l=t(e[n-1]);(a<r||a>s||l<r||l>s)&&t.domain([e[0],e[n-1]])}},UG=(t,e)=>{if(!e||e.length!==2||!it(e[0])||!it(e[1]))return t;var n=Math.min(e[0],e[1]),i=Math.max(e[0],e[1]),r=[t[0],t[1]];return(!it(t[0])||t[0]<n)&&(r[0]=n),(!it(t[1])||t[1]>i)&&(r[1]=i),r[0]>i&&(r[0]=i),r[1]<n&&(r[1]=n),r},$G=t=>{var e=t.length;if(!(e<=0))for(var n=0,i=t[0].length;n<i;++n)for(var r=0,s=0,a=0;a<e;++a){var l=Ls(t[a][n][1])?t[a][n][0]:t[a][n][1];l>=0?(t[a][n][0]=r,t[a][n][1]=r+l,r=t[a][n][1]):(t[a][n][0]=s,t[a][n][1]=s+l,s=t[a][n][1])}},zG=t=>{var e=t.length;if(!(e<=0))for(var n=0,i=t[0].length;n<i;++n)for(var r=0,s=0;s<e;++s){var a=Ls(t[s][n][1])?t[s][n][0]:t[s][n][1];a>=0?(t[s][n][0]=r,t[s][n][1]=r+a,r=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},GG={sign:$G,expand:_8,none:Pd,silhouette:S8,wiggle:E8,positive:zG},HG=(t,e,n)=>{var i=GG[n],r=x8().keys(e).value((s,a)=>+vr(s,a,0)).order(M_).offset(i);return r(t)};function wk(t){return t==null?void 0:String(t)}function IC(t){var{axis:e,ticks:n,bandSize:i,entry:r,index:s,dataKey:a}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Sn(r[e.dataKey])){var l=SM(n,"value",r[e.dataKey]);if(l)return l.coordinate+i/2}return n[s]?n[s].coordinate+i/2:null}var f=vr(r,Sn(a)?e.dataKey:a);return Sn(f)?null:e.scale(f)}var MC=t=>{var{axis:e,ticks:n,offset:i,bandSize:r,entry:s,index:a}=t;if(e.type==="category")return n[a]?n[a].coordinate+i:null;var l=vr(s,e.dataKey,e.scale.domain()[a]);return Sn(l)?null:e.scale(l)-r/2+i},KG=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var i=Math.min(n[0],n[1]),r=Math.max(n[0],n[1]);return i<=0&&r>=0?0:r<0?r:i}return n[0]},qG=t=>{var e=t.flat(2).filter(it);return[Math.min(...e),Math.max(...e)]},VG=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],YG=(t,e,n)=>{if(t!=null)return VG(Object.keys(t).reduce((i,r)=>{var s=t[r],{stackedData:a}=s,l=a.reduce((f,c)=>{var h=qG(c.slice(e,n+1));return[Math.min(f[0],h[0]),Math.max(f[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]))},kC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,NC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Tm=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&e&&e.length>=2){for(var r=o0(e,h=>h.coordinate),s=1/0,a=1,l=r.length;a<l;a++){var f=r[a],c=r[a-1];s=Math.min((f.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function jC(t){var{tooltipEntrySettings:e,dataKey:n,payload:i,value:r,name:s}=t;return na(na({},e),{},{dataKey:n,payload:i,value:r,name:s})}function m0(t,e){if(t)return String(t);if(typeof e=="string")return e}function WG(t,e,n,i,r){if(n==="horizontal"||n==="vertical"){var s=t>=r.left&&t<=r.left+r.width&&e>=r.top&&e<=r.top+r.height;return s?{x:t,y:e}:null}return i?IG({x:t,y:e},i):null}var ZG=(t,e,n,i)=>{var r=e.find(c=>c&&c.index===n);if(r){if(t==="horizontal")return{x:r.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:r.coordinate};if(t==="centric"){var s=r.coordinate,{radius:a}=i;return na(na(na({},i),rr(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var l=r.coordinate,{angle:f}=i;return na(na(na({},i),rr(i.cx,i.cy,l,f)),{},{angle:f,radius:l})}return{x:0,y:0}},XG=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,Gl=t=>t.layout.width,Hl=t=>t.layout.height,QG=t=>t.layout.scale,Lk=t=>t.layout.margin,jE=Ce(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),BE=Ce(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),JG="data-recharts-item-index",e5="data-recharts-item-data-key",p0=60;function BC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Nu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BC(Object(n),!0).forEach(function(i){t5(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function t5(t,e,n){return(e=n5(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n5(t){var e=i5(t,"string");return typeof e=="symbol"?e:e+""}function i5(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var r5=t=>t.brush.height,Fi=Ce([Gl,Hl,Lk,r5,jE,BE,JM,T6],(t,e,n,i,r,s,a,l)=>{var f=s.reduce((b,T)=>{var{orientation:E}=T;if(!T.mirror&&!T.hide){var C=typeof T.width=="number"?T.width:p0;return Nu(Nu({},b),{},{[E]:b[E]+C})}return b},{left:n.left||0,right:n.right||0}),c=r.reduce((b,T)=>{var{orientation:E}=T;return!T.mirror&&!T.hide?Nu(Nu({},b),{},{[E]:Qc(b,"".concat(E))+T.height}):b},{top:n.top||0,bottom:n.bottom||0}),h=Nu(Nu({},c),f),p=h.bottom;h.bottom+=i,h=BG(h,a,l);var g=t-h.left-h.right,x=e-h.top-h.bottom;return Nu(Nu({brushBottom:p},h),{},{width:Math.max(g,0),height:Math.max(x,0)})}),s5=Ce(Fi,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),Ck=Ce(Gl,Hl,(t,e)=>({x:0,y:0,width:t,height:e})),a5=O.createContext(null),wr=()=>O.useContext(a5)!=null,g0=t=>t.brush,v0=Ce([g0,Fi,Lk],(t,e,n)=>({height:t.height,x:it(t.x)?t.x:e.left,y:it(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:it(t.width)?t.width:e.width})),FE=()=>{var t,e=wr(),n=ut(s5),i=ut(v0),r=(t=ut(g0))===null||t===void 0?void 0:t.padding;return!e||!i||!r?n:{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom,x:r.left,y:r.top}},o5={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Ok=()=>{var t;return(t=ut(Fi))!==null&&t!==void 0?t:o5},Rk=()=>ut(Gl),Pk=()=>ut(Hl),fn=t=>t.layout.layoutType,y0=()=>ut(fn),l5={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Dk=ca({name:"legend",initialState:l5,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var n=Il(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)}}}),{setLegendSize:ooe,setLegendSettings:loe,addLegendPayload:u5,removeLegendPayload:c5}=Dk.actions,f5=Dk.reducer;function H_(){return H_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},H_.apply(null,arguments)}function FC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function px(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FC(Object(n),!0).forEach(function(i){d5(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function d5(t,e,n){return(e=h5(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h5(t){var e=m5(t,"string");return typeof e=="symbol"?e:e+""}function m5(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function p5(t){return Array.isArray(t)&&ko(t[0])&&ko(t[1])?t.join(" ~ "):t}var g5=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:i={},labelStyle:r={},payload:s,formatter:a,itemSorter:l,wrapperClassName:f,labelClassName:c,label:h,labelFormatter:p,accessibilityLayer:g=!1}=t,x=()=>{if(s&&s.length){var k={padding:0,margin:0},z=(l?o0(s,l):s).map((F,G)=>{if(F.type==="none")return null;var K=F.formatter||a||p5,{value:V,name:Q}=F,J=V,ve=Q;if(K){var se=K(V,Q,F,G,s);if(Array.isArray(se))[J,ve]=se;else if(se!=null)J=se;else return null}var ye=px({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},i);return O.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(G),style:ye},ko(ve)?O.createElement("span",{className:"recharts-tooltip-item-name"},ve):null,ko(ve)?O.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,O.createElement("span",{className:"recharts-tooltip-item-value"},J),O.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return O.createElement("ul",{className:"recharts-tooltip-item-list",style:k},z)}return null},b=px({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),T=px({margin:0},r),E=!Sn(h),C=E?h:"",I=gn("recharts-default-tooltip",f),P=gn("recharts-tooltip-label",c);E&&p&&s!==void 0&&s!==null&&(C=p(h,s));var M=g?{role:"status","aria-live":"assertive"}:{};return O.createElement("div",H_({className:I,style:b},M),O.createElement("p",{className:P,style:T},O.isValidElement(C)?C:"".concat(C)),x())},Yh="recharts-tooltip-wrapper",v5={visibility:"hidden"};function y5(t){var{coordinate:e,translateX:n,translateY:i}=t;return gn(Yh,{["".concat(Yh,"-right")]:it(n)&&e&&it(e.x)&&n>=e.x,["".concat(Yh,"-left")]:it(n)&&e&&it(e.x)&&n<e.x,["".concat(Yh,"-bottom")]:it(i)&&e&&it(e.y)&&i>=e.y,["".concat(Yh,"-top")]:it(i)&&e&&it(e.y)&&i<e.y})}function UC(t){var{allowEscapeViewBox:e,coordinate:n,key:i,offsetTopLeft:r,position:s,reverseDirection:a,tooltipDimension:l,viewBox:f,viewBoxDimension:c}=t;if(s&&it(s[i]))return s[i];var h=n[i]-l-(r>0?r:0),p=n[i]+r;if(e[i])return a[i]?h:p;var g=f[i];if(g==null)return 0;if(a[i]){var x=h,b=g;return x<b?Math.max(p,g):Math.max(h,g)}if(c==null)return 0;var T=p+l,E=g+c;return T>E?Math.max(h,g):Math.max(p,g)}function b5(t){var{translateX:e,translateY:n,useTranslate3d:i}=t;return{transform:i?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function x5(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:i,position:r,reverseDirection:s,tooltipBox:a,useTranslate3d:l,viewBox:f}=t,c,h,p;return a.height>0&&a.width>0&&n?(h=UC({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:i,position:r,reverseDirection:s,tooltipDimension:a.width,viewBox:f,viewBoxDimension:f.width}),p=UC({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:i,position:r,reverseDirection:s,tooltipDimension:a.height,viewBox:f,viewBoxDimension:f.height}),c=b5({translateX:h,translateY:p,useTranslate3d:l})):c=v5,{cssProperties:c,cssClasses:y5({translateX:h,translateY:p,coordinate:n})}}function $C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ug(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$C(Object(n),!0).forEach(function(i){K_(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$C(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function K_(t,e,n){return(e=_5(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _5(t){var e=S5(t,"string");return typeof e=="symbol"?e:e+""}function S5(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class E5 extends O.PureComponent{constructor(){super(...arguments),K_(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),K_(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,i,r,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0,y:(r=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:i,animationEasing:r,children:s,coordinate:a,hasPayload:l,isAnimationActive:f,offset:c,position:h,reverseDirection:p,useTranslate3d:g,viewBox:x,wrapperStyle:b,lastBoundingBox:T,innerRef:E,hasPortalFromProps:C}=this.props,{cssClasses:I,cssProperties:P}=x5({allowEscapeViewBox:n,coordinate:a,offsetTopLeft:c,position:h,reverseDirection:p,tooltipBox:{height:T.height,width:T.width},useTranslate3d:g,viewBox:x}),M=C?{}:ug(ug({transition:f&&e?"transform ".concat(i,"ms ").concat(r):void 0},P),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),k=ug(ug({},M),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},b);return O.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:I,style:k,ref:E},s)}}var T5=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Yd={isSsr:T5()},Ik=()=>ut(t=>t.rootProps.accessibilityLayer);function Ps(t){return Number.isFinite(t)}function pv(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function q_(){return q_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},q_.apply(null,arguments)}function zC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function GC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zC(Object(n),!0).forEach(function(i){A5(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function A5(t,e,n){return(e=w5(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w5(t){var e=L5(t,"string");return typeof e=="symbol"?e:e+""}function L5(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HC={curveBasisClosed:u8,curveBasisOpen:c8,curveBasis:l8,curveBumpX:Y4,curveBumpY:W4,curveLinearClosed:f8,curveLinear:s0,curveMonotoneX:d8,curveMonotoneY:h8,curveNatural:m8,curveStep:p8,curveStepAfter:v8,curveStepBefore:g8},cg=t=>Ps(t.x)&&Ps(t.y),Wh=t=>t.x,Zh=t=>t.y,C5=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(Ym(t));return(n==="curveMonotone"||n==="curveBump")&&e?HC["".concat(n).concat(e==="vertical"?"Y":"X")]:HC[n]||s0},O5=t=>{var{type:e="linear",points:n=[],baseLine:i,layout:r,connectNulls:s=!1}=t,a=C5(e,r),l=s?n.filter(cg):n,f;if(Array.isArray(i)){var c=s?i.filter(p=>cg(p)):i,h=l.map((p,g)=>GC(GC({},p),{},{base:c[g]}));return r==="vertical"?f=rg().y(Zh).x1(Wh).x0(p=>p.base.x):f=rg().x(Wh).y1(Zh).y0(p=>p.base.y),f.defined(cg).curve(a),f(h)}return r==="vertical"&&it(i)?f=rg().y(Zh).x1(Wh).x0(i):it(i)?f=rg().x(Wh).y1(Zh).y0(i):f=PM().x(Wh).y(Zh),f.defined(cg).curve(a),f(l)},Mk=t=>{var{className:e,points:n,path:i,pathRef:r}=t;if((!n||!n.length)&&!i)return null;var s=n&&n.length?O5(t):i;return O.createElement("path",q_({},nn(t,!1),xE(t),{className:gn("recharts-curve",e),d:s===null?void 0:s,ref:r}))},R5=["x","y","top","left","width","height","className"];function V_(){return V_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},V_.apply(null,arguments)}function KC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function P5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KC(Object(n),!0).forEach(function(i){D5(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function D5(t,e,n){return(e=I5(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I5(t){var e=M5(t,"string");return typeof e=="symbol"?e:e+""}function M5(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function k5(t,e){if(t==null)return{};var n,i,r=N5(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function N5(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var j5=(t,e,n,i,r,s)=>"M".concat(t,",").concat(r,"v").concat(i,"M").concat(s,",").concat(e,"h").concat(n),B5=t=>{var{x:e=0,y:n=0,top:i=0,left:r=0,width:s=0,height:a=0,className:l}=t,f=k5(t,R5),c=P5({x:e,y:n,top:i,left:r,width:s,height:a},f);return!it(e)||!it(n)||!it(s)||!it(a)||!it(i)||!it(r)?null:O.createElement("path",V_({},nn(c,!0),{className:gn("recharts-cross",l),d:j5(e,n,s,a,i,r)}))};function F5(t,e,n,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-r:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-r,width:t==="horizontal"?i:n.width-1,height:t==="horizontal"?n.height-1:i}}function qC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function U5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qC(Object(n),!0).forEach(function(i){$5(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $5(t,e,n){return(e=z5(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z5(t){var e=G5(t,"string");return typeof e=="symbol"?e:e+""}function G5(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kl(t,e){var n=U5({},t),i=e,r=Object.keys(e),s=r.reduce((a,l)=>(a[l]===void 0&&i[l]!==void 0&&(a[l]=i[l]),a),n);return s}var gx={},vx={},yx={},VC;function H5(){return VC||(VC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(!n||typeof n!="object")return!1;const i=Object.getPrototypeOf(n);return i===null||i===Object.prototype||Object.getPrototypeOf(i)===null?Object.prototype.toString.call(n)==="[object Object]":!1}t.isPlainObject=e}(yx)),yx}var YC;function K5(){return YC||(YC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=H5(),n=VM(),i=OE(),r=RE(),s=LE();function a(c,h,p){return l(c,h,void 0,void 0,void 0,void 0,p)}function l(c,h,p,g,x,b,T){const E=T(c,h,p,g,x,b);if(E!==void 0)return E;if(typeof c==typeof h)switch(typeof c){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return c===h;case"number":return c===h||Object.is(c,h);case"function":return c===h;case"object":return f(c,h,b,T)}return f(c,h,b,T)}function f(c,h,p,g){if(Object.is(c,h))return!0;let x=i.getTag(c),b=i.getTag(h);if(x===r.argumentsTag&&(x=r.objectTag),b===r.argumentsTag&&(b=r.objectTag),x!==b)return!1;switch(x){case r.stringTag:return c.toString()===h.toString();case r.numberTag:{const C=c.valueOf(),I=h.valueOf();return s.eq(C,I)}case r.booleanTag:case r.dateTag:case r.symbolTag:return Object.is(c.valueOf(),h.valueOf());case r.regexpTag:return c.source===h.source&&c.flags===h.flags;case r.functionTag:return c===h}p=p??new Map;const T=p.get(c),E=p.get(h);if(T!=null&&E!=null)return T===h;p.set(c,h),p.set(h,c);try{switch(x){case r.mapTag:{if(c.size!==h.size)return!1;for(const[C,I]of c.entries())if(!h.has(C)||!l(I,h.get(C),C,c,h,p,g))return!1;return!0}case r.setTag:{if(c.size!==h.size)return!1;const C=Array.from(c.values()),I=Array.from(h.values());for(let P=0;P<C.length;P++){const M=C[P],k=I.findIndex(z=>l(M,z,void 0,c,h,p,g));if(k===-1)return!1;I.splice(k,1)}return!0}case r.arrayTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:case r.bigUint64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.bigInt64ArrayTag:case r.float32ArrayTag:case r.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(c)!==Buffer.isBuffer(h)||c.length!==h.length)return!1;for(let C=0;C<c.length;C++)if(!l(c[C],h[C],C,c,h,p,g))return!1;return!0}case r.arrayBufferTag:return c.byteLength!==h.byteLength?!1:f(new Uint8Array(c),new Uint8Array(h),p,g);case r.dataViewTag:return c.byteLength!==h.byteLength||c.byteOffset!==h.byteOffset?!1:f(new Uint8Array(c),new Uint8Array(h),p,g);case r.errorTag:return c.name===h.name&&c.message===h.message;case r.objectTag:{if(!(f(c.constructor,h.constructor,p,g)||e.isPlainObject(c)&&e.isPlainObject(h)))return!1;const I=[...Object.keys(c),...n.getSymbols(c)],P=[...Object.keys(h),...n.getSymbols(h)];if(I.length!==P.length)return!1;for(let M=0;M<I.length;M++){const k=I[M],z=c[k];if(!Object.hasOwn(h,k))return!1;const F=h[k];if(!l(z,F,k,c,h,p,g))return!1}return!0}default:return!1}}finally{p.delete(c),p.delete(h)}}t.isEqualWith=a}(vx)),vx}var bx={},WC;function q5(){return WC||(WC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(){}t.noop=e}(bx)),bx}var ZC;function V5(){return ZC||(ZC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=K5(),n=q5();function i(r,s){return e.isEqualWith(r,s,n.noop)}t.isEqual=i}(gx)),gx}var xx,XC;function Y5(){return XC||(XC=1,xx=V5().isEqual),xx}var W5=Y5();const Z5=Qr(W5);function X5(t){var e={},n=()=>null,i=!1,r=null,s=a=>{if(!i){if(Array.isArray(a)){if(!a.length)return;var l=a,[f,...c]=l;if(typeof f=="number"){r=t.setTimeout(s.bind(null,c),f);return}s(f),r=t.setTimeout(s.bind(null,c));return}typeof a=="object"&&(e=a,n(e)),typeof a=="function"&&a()}};return{stop:()=>{i=!0},start:a=>{i=!1,r&&(r(),r=null),s(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>t}}var gv=1e-4,kk=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Nk=(t,e)=>t.map((n,i)=>n*e**i).reduce((n,i)=>n+i),QC=(t,e)=>n=>{var i=kk(t,e);return Nk(i,n)},Q5=(t,e)=>n=>{var i=kk(t,e),r=[...i.map((s,a)=>s*a).slice(1),0];return Nk(r,n)},JC=function(){for(var e,n,i,r,s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];if(a.length===1)switch(a[0]){case"linear":[e,i,n,r]=[0,0,1,1];break;case"ease":[e,i,n,r]=[.25,.1,.25,1];break;case"ease-in":[e,i,n,r]=[.42,0,1,1];break;case"ease-out":[e,i,n,r]=[.42,0,.58,1];break;case"ease-in-out":[e,i,n,r]=[0,0,.58,1];break;default:{var f=a[0].split("(");f[0]==="cubic-bezier"&&f[1].split(")")[0].split(",").length===4&&([e,i,n,r]=f[1].split(")")[0].split(",").map(b=>parseFloat(b)))}}else a.length===4&&([e,i,n,r]=a);var c=QC(e,n),h=QC(i,r),p=Q5(e,n),g=b=>b>1?1:b<0?0:b,x=b=>{for(var T=b>1?1:b,E=T,C=0;C<8;++C){var I=c(E)-T,P=p(E);if(Math.abs(I-T)<gv||P<gv)return h(E);E=g(E-I/P)}return h(E)};return x.isStepper=!1,x},J5=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:i=8,dt:r=17}=e,s=(a,l,f)=>{var c=-(a-l)*n,h=f*i,p=f+(c-h)*r/1e3,g=f*r/1e3+a;return Math.abs(g-l)<gv&&Math.abs(p)<gv?[l,0]:[g,p]};return s.isStepper=!0,s.dt=r,s},eH=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return JC(t);case"spring":return J5();default:if(t.split("(")[0]==="cubic-bezier")return JC(t)}return typeof t=="function"?t:null};function eO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function tO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eO(Object(n),!0).forEach(function(i){tH(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function tH(t,e,n){return(e=nH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nH(t){var e=iH(t,"string");return typeof e=="symbol"?e:e+""}function iH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rH=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),sH=(t,e,n)=>t.map(i=>"".concat(rH(i)," ").concat(e,"ms ").concat(n)).join(","),aH=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,i)=>n.filter(r=>i.includes(r))),Am=(t,e)=>Object.keys(e).reduce((n,i)=>tO(tO({},n),{},{[i]:t(i,e[i])}),{});function nO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ir(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nO(Object(n),!0).forEach(function(i){oH(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function oH(t,e,n){return(e=lH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lH(t){var e=uH(t,"string");return typeof e=="symbol"?e:e+""}function uH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vv=(t,e,n)=>t+(e-t)*n,Y_=t=>{var{from:e,to:n}=t;return e!==n},jk=(t,e,n)=>{var i=Am((r,s)=>{if(Y_(s)){var[a,l]=t(s.from,s.to,s.velocity);return ir(ir({},s),{},{from:a,velocity:l})}return s},e);return n<1?Am((r,s)=>Y_(s)?ir(ir({},s),{},{velocity:vv(s.velocity,i[r].velocity,n),from:vv(s.from,i[r].from,n)}):s,e):jk(t,i,n-1)};function cH(t,e,n,i,r,s){var a,l=i.reduce((g,x)=>ir(ir({},g),{},{[x]:{from:t[x],velocity:0,to:e[x]}}),{}),f=()=>Am((g,x)=>x.from,l),c=()=>!Object.values(l).filter(Y_).length,h=null,p=g=>{a||(a=g);var x=g-a,b=x/n.dt;l=jk(n,l,b),r(ir(ir(ir({},t),e),f())),a=g,c()||(h=s.setTimeout(p))};return()=>(h=s.setTimeout(p),()=>{h()})}function fH(t,e,n,i,r,s,a){var l=null,f=r.reduce((p,g)=>ir(ir({},p),{},{[g]:[t[g],e[g]]}),{}),c,h=p=>{c||(c=p);var g=(p-c)/i,x=Am((T,E)=>vv(...E,n(g)),f);if(s(ir(ir(ir({},t),e),x)),g<1)l=a.setTimeout(h);else{var b=Am((T,E)=>vv(...E,n(1)),f);s(ir(ir(ir({},t),e),b))}};return()=>(l=a.setTimeout(h),()=>{l()})}const dH=(t,e,n,i,r,s)=>{var a=aH(t,e);return n.isStepper===!0?cH(t,e,n,a,r,s):fH(t,e,n,i,a,r,s)};class hH{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),r=null,s=a=>{a-i>=n?e(a):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(s))};return r=requestAnimationFrame(s),()=>{cancelAnimationFrame(r)}}}var mH=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function W_(){return W_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},W_.apply(null,arguments)}function pH(t,e){if(t==null)return{};var n,i,r=gH(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gH(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function iO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ju(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iO(Object(n),!0).forEach(function(i){$c(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $c(t,e,n){return(e=vH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vH(t){var e=yH(t,"string");return typeof e=="symbol"?e:e+""}function yH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bH(){return X5(new hH)}class UE extends O.PureComponent{constructor(e,n){super(e,n),$c(this,"mounted",!1),$c(this,"manager",null),$c(this,"stopJSAnimation",null),$c(this,"unSubscribe",null);var{isActive:i,attributeName:r,from:s,to:a,children:l,duration:f,animationManager:c}=this.props;if(this.manager=c,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!i||f<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:a});return}if(s){if(typeof l=="function"){this.state={style:s};return}this.state={style:r?{[r]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:e,canBegin:n}=this.props;this.mounted=!0,!(!e||!n)&&this.runAnimation(this.props)}componentDidUpdate(e){var{isActive:n,canBegin:i,attributeName:r,shouldReAnimate:s,to:a,from:l}=this.props,{style:f}=this.state;if(i){if(!n){var c={style:r?{[r]:a}:a};this.state&&f&&(r&&f[r]!==a||!r&&f!==a)&&this.setState(c);return}if(!(Z5(e.to,a)&&e.canBegin&&e.isActive)){var h=!e.canBegin||!e.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=h||s?l:e.to;if(this.state&&f){var g={style:r?{[r]:p}:p};(r&&f[r]!==p||!r&&f!==p)&&this.setState(g)}this.runAnimation(ju(ju({},this.props),{},{from:p,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:e}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}handleStyleChange(e){this.changeStyle(e)}changeStyle(e){this.mounted&&this.setState({style:e})}runJSAnimation(e){var{from:n,to:i,duration:r,easing:s,begin:a,onAnimationEnd:l,onAnimationStart:f}=e,c=dH(n,i,eH(s),r,this.changeStyle,this.manager.getTimeoutController()),h=()=>{this.stopJSAnimation=c()};this.manager.start([f,a,h,r,l])}runAnimation(e){var{begin:n,duration:i,attributeName:r,to:s,easing:a,onAnimationStart:l,onAnimationEnd:f,children:c}=e;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof a=="function"||typeof c=="function"||a==="spring"){this.runJSAnimation(e);return}var h=r?{[r]:s}:s,p=sH(Object.keys(h),i,a);this.manager.start([l,n,ju(ju({},h),{},{transition:p}),i,f])}render(){var e=this.props,{children:n,begin:i,duration:r,attributeName:s,easing:a,isActive:l,from:f,to:c,canBegin:h,onAnimationEnd:p,shouldReAnimate:g,onAnimationReStart:x,animationManager:b}=e,T=pH(e,mH),E=O.Children.count(n),C=this.state.style;if(typeof n=="function")return n(C);if(!l||E===0||r<=0)return n;var I=P=>{var{style:M={},className:k}=P.props,z=O.cloneElement(P,ju(ju({},T),{},{style:ju(ju({},M),C),className:k}));return z};return E===1?I(O.Children.only(n)):O.createElement("div",null,O.Children.map(n,P=>I(P)))}}$c(UE,"displayName","Animate");$c(UE,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var xH=O.createContext(null);function tf(t){var e,n,i=O.useContext(xH);return O.createElement(UE,W_({},t,{animationManager:(e=(n=t.animationManager)!==null&&n!==void 0?n:i)!==null&&e!==void 0?e:bH()}))}function yv(){return yv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yv.apply(null,arguments)}var rO=(t,e,n,i,r)=>{var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),a=i>=0?1:-1,l=n>=0?1:-1,f=i>=0&&n>=0||i<0&&n<0?1:0,c;if(s>0&&r instanceof Array){for(var h=[0,0,0,0],p=0,g=4;p<g;p++)h[p]=r[p]>s?s:r[p];c="M".concat(t,",").concat(e+a*h[0]),h[0]>0&&(c+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(f,",").concat(t+l*h[0],",").concat(e)),c+="L ".concat(t+n-l*h[1],",").concat(e),h[1]>0&&(c+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(f,`,
        `).concat(t+n,",").concat(e+a*h[1])),c+="L ".concat(t+n,",").concat(e+i-a*h[2]),h[2]>0&&(c+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(f,`,
        `).concat(t+n-l*h[2],",").concat(e+i)),c+="L ".concat(t+l*h[3],",").concat(e+i),h[3]>0&&(c+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(f,`,
        `).concat(t,",").concat(e+i-a*h[3])),c+="Z"}else if(s>0&&r===+r&&r>0){var x=Math.min(s,r);c="M ".concat(t,",").concat(e+a*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(t+l*x,",").concat(e,`
            L `).concat(t+n-l*x,",").concat(e,`
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(t+n,",").concat(e+a*x,`
            L `).concat(t+n,",").concat(e+i-a*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(t+n-l*x,",").concat(e+i,`
            L `).concat(t+l*x,",").concat(e+i,`
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(t,",").concat(e+i-a*x," Z")}else c="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return c},_H={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Bk=t=>{var e=Kl(t,_H),n=O.useRef(null),[i,r]=O.useState(-1);O.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&r(C)}catch{}},[]);var{x:s,y:a,width:l,height:f,radius:c,className:h}=e,{animationEasing:p,animationDuration:g,animationBegin:x,isAnimationActive:b,isUpdateAnimationActive:T}=e;if(s!==+s||a!==+a||l!==+l||f!==+f||l===0||f===0)return null;var E=gn("recharts-rectangle",h);return T?O.createElement(tf,{canBegin:i>0,from:{width:l,height:f,x:s,y:a},to:{width:l,height:f,x:s,y:a},duration:g,animationEasing:p,isActive:T},C=>{var{width:I,height:P,x:M,y:k}=C;return O.createElement(tf,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,isActive:b,easing:p},O.createElement("path",yv({},nn(e,!0),{className:E,d:rO(M,k,I,P,c),ref:n})))}):O.createElement("path",yv({},nn(e,!0),{className:E,d:rO(s,a,l,f,c)}))};function Fk(t){var{cx:e,cy:n,radius:i,startAngle:r,endAngle:s}=t,a=rr(e,n,i,r),l=rr(e,n,i,s);return{points:[a,l],cx:e,cy:n,radius:i,startAngle:r,endAngle:s}}function Z_(){return Z_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Z_.apply(null,arguments)}var SH=(t,e)=>{var n=Zr(e-t),i=Math.min(Math.abs(e-t),359.999);return n*i},fg=t=>{var{cx:e,cy:n,radius:i,angle:r,sign:s,isExternal:a,cornerRadius:l,cornerIsExternal:f}=t,c=l*(a?1:-1)+i,h=Math.asin(l/c)/mv,p=f?r:r+s*h,g=rr(e,n,c,p),x=rr(e,n,i,p),b=f?r-s*h:r,T=rr(e,n,c*Math.cos(h*mv),b);return{center:g,circleTangency:x,lineTangency:T,theta:h}},Uk=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:s,endAngle:a}=t,l=SH(s,a),f=s+l,c=rr(e,n,r,s),h=rr(e,n,r,f),p="M ".concat(c.x,",").concat(c.y,`
    A `).concat(r,",").concat(r,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>f),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var g=rr(e,n,i,s),x=rr(e,n,i,f);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=f),`,
            `).concat(g.x,",").concat(g.y," Z")}else p+="L ".concat(e,",").concat(n," Z");return p},EH=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:l,startAngle:f,endAngle:c}=t,h=Zr(c-f),{circleTangency:p,lineTangency:g,theta:x}=fg({cx:e,cy:n,radius:r,angle:f,sign:h,cornerRadius:s,cornerIsExternal:l}),{circleTangency:b,lineTangency:T,theta:E}=fg({cx:e,cy:n,radius:r,angle:c,sign:-h,cornerRadius:s,cornerIsExternal:l}),C=l?Math.abs(f-c):Math.abs(f-c)-x-E;if(C<0)return a?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Uk({cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:f,endAngle:c});var I="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(r,",").concat(r,",0,").concat(+(C>180),",").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(T.x,",").concat(T.y,`
  `);if(i>0){var{circleTangency:P,lineTangency:M,theta:k}=fg({cx:e,cy:n,radius:i,angle:f,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:z,lineTangency:F,theta:G}=fg({cx:e,cy:n,radius:i,angle:c,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),K=l?Math.abs(f-c):Math.abs(f-c)-k-G;if(K<0&&s===0)return"".concat(I,"L").concat(e,",").concat(n,"Z");I+="L".concat(F.x,",").concat(F.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(z.x,",").concat(z.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(K>180),",").concat(+(h>0),",").concat(P.x,",").concat(P.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(M.x,",").concat(M.y,"Z")}else I+="L".concat(e,",").concat(n,"Z");return I},TH={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},$k=t=>{var e=Kl(t,TH),{cx:n,cy:i,innerRadius:r,outerRadius:s,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:f,startAngle:c,endAngle:h,className:p}=e;if(s<r||c===h)return null;var g=gn("recharts-sector",p),x=s-r,b=eo(a,x,0,!0),T;return b>0&&Math.abs(c-h)<360?T=EH({cx:n,cy:i,innerRadius:r,outerRadius:s,cornerRadius:Math.min(b,x/2),forceCornerRadius:l,cornerIsExternal:f,startAngle:c,endAngle:h}):T=Uk({cx:n,cy:i,innerRadius:r,outerRadius:s,startAngle:c,endAngle:h}),O.createElement("path",Z_({},nn(e,!0),{className:g,d:T}))};function AH(t,e,n){var i,r,s,a;if(t==="horizontal")i=e.x,s=i,r=n.top,a=n.top+n.height;else if(t==="vertical")r=e.y,a=r,i=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:l,cy:f,innerRadius:c,outerRadius:h,angle:p}=e,g=rr(l,f,c,p),x=rr(l,f,h,p);i=g.x,r=g.y,s=x.x,a=x.y}else return Fk(e);return[{x:i,y:r},{x:s,y:a}]}var _x={},Sx={},Ex={},sO;function wH(){return sO||(sO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XM();function n(i){return e.isSymbol(i)?NaN:Number(i)}t.toNumber=n}(Ex)),Ex}var aO;function LH(){return aO||(aO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wH();function n(i){return i?(i=e.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}t.toFinite=n}(Sx)),Sx}var oO;function CH(){return oO||(oO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QM(),n=LH();function i(r,s,a){a&&typeof a!="number"&&e.isIterateeCall(r,s,a)&&(s=a=void 0),r=n.toFinite(r),s===void 0?(s=r,r=0):s=n.toFinite(s),a=a===void 0?r<s?1:-1:n.toFinite(a);const l=Math.max(Math.ceil((s-r)/(a||1)),0),f=new Array(l);for(let c=0;c<l;c++)f[c]=r,r+=a;return f}t.range=i}(_x)),_x}var Tx,lO;function OH(){return lO||(lO=1,Tx=CH().range),Tx}var RH=OH();const zk=Qr(RH);function Vu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function PH(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $E(t){let e,n,i;t.length!==2?(e=Vu,n=(l,f)=>Vu(t(l),f),i=(l,f)=>t(l)-f):(e=t===Vu||t===PH?t:DH,n=t,i=t);function r(l,f,c=0,h=l.length){if(c<h){if(e(f,f)!==0)return h;do{const p=c+h>>>1;n(l[p],f)<0?c=p+1:h=p}while(c<h)}return c}function s(l,f,c=0,h=l.length){if(c<h){if(e(f,f)!==0)return h;do{const p=c+h>>>1;n(l[p],f)<=0?c=p+1:h=p}while(c<h)}return c}function a(l,f,c=0,h=l.length){const p=r(l,f,c,h-1);return p>c&&i(l[p-1],f)>-i(l[p],f)?p-1:p}return{left:r,center:a,right:s}}function DH(){return 0}function Gk(t){return t===null?NaN:+t}function*IH(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const MH=$E(Vu),Zm=MH.right;$E(Gk).center;class uO extends Map{constructor(e,n=jH){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(cO(this,e))}has(e){return super.has(cO(this,e))}set(e,n){return super.set(kH(this,e),n)}delete(e){return super.delete(NH(this,e))}}function cO({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function kH({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function NH({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function jH(t){return t!==null&&typeof t=="object"?t.valueOf():t}function BH(t=Vu){if(t===Vu)return Hk;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function Hk(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const FH=Math.sqrt(50),UH=Math.sqrt(10),$H=Math.sqrt(2);function bv(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),a=s>=FH?10:s>=UH?5:s>=$H?2:1;let l,f,c;return r<0?(c=Math.pow(10,-r)/a,l=Math.round(t*c),f=Math.round(e*c),l/c<t&&++l,f/c>e&&--f,c=-c):(c=Math.pow(10,r)*a,l=Math.round(t/c),f=Math.round(e/c),l*c<t&&++l,f*c>e&&--f),f<l&&.5<=n&&n<2?bv(t,e,n*2):[l,f,c]}function X_(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,s,a]=i?bv(e,t,n):bv(t,e,n);if(!(s>=r))return[];const l=s-r+1,f=new Array(l);if(i)if(a<0)for(let c=0;c<l;++c)f[c]=(s-c)/-a;else for(let c=0;c<l;++c)f[c]=(s-c)*a;else if(a<0)for(let c=0;c<l;++c)f[c]=(r+c)/-a;else for(let c=0;c<l;++c)f[c]=(r+c)*a;return f}function Q_(t,e,n){return e=+e,t=+t,n=+n,bv(t,e,n)[2]}function J_(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?Q_(e,t,n):Q_(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function fO(t,e){let n;for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function dO(t,e){let n;for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function Kk(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?Hk:BH(r);i>n;){if(i-n>600){const f=i-n+1,c=e-n+1,h=Math.log(f),p=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*p*(f-p)/f)*(c-f/2<0?-1:1),x=Math.max(n,Math.floor(e-c*p/f+g)),b=Math.min(i,Math.floor(e+(f-c)*p/f+g));Kk(t,e,x,b,r)}const s=t[e];let a=n,l=i;for(Xh(t,n,e),r(t[i],s)>0&&Xh(t,n,i);a<l;){for(Xh(t,a,l),++a,--l;r(t[a],s)<0;)++a;for(;r(t[l],s)>0;)--l}r(t[n],s)===0?Xh(t,n,l):(++l,Xh(t,l,i)),l<=e&&(n=l+1),e<=l&&(i=l-1)}return t}function Xh(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function zH(t,e,n){if(t=Float64Array.from(IH(t)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return dO(t);if(e>=1)return fO(t);var i,r=(i-1)*e,s=Math.floor(r),a=fO(Kk(t,s).subarray(0,s+1)),l=dO(t.subarray(s+1));return a+(l-a)*(r-s)}}function GH(t,e,n=Gk){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,s=Math.floor(r),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(r-s)}}function HH(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}function fa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ql(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const eS=Symbol("implicit");function zE(){var t=new uO,e=[],n=[],i=eS;function r(s){let a=t.get(s);if(a===void 0){if(i!==eS)return i;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new uO;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return zE(e,n).unknown(i)},fa.apply(r,arguments),r}function GE(){var t=zE().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,s,a,l=!1,f=0,c=0,h=.5;delete t.unknown;function p(){var g=e().length,x=r<i,b=x?r:i,T=x?i:r;s=(T-b)/Math.max(1,g-f+c*2),l&&(s=Math.floor(s)),b+=(T-b-s*(g-f))*h,a=s*(1-f),l&&(b=Math.round(b),a=Math.round(a));var E=HH(g).map(function(C){return b+s*C});return n(x?E.reverse():E)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([i,r]=g,i=+i,r=+r,p()):[i,r]},t.rangeRound=function(g){return[i,r]=g,i=+i,r=+r,l=!0,p()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(g){return arguments.length?(l=!!g,p()):l},t.padding=function(g){return arguments.length?(f=Math.min(1,c=+g),p()):f},t.paddingInner=function(g){return arguments.length?(f=Math.min(1,g),p()):f},t.paddingOuter=function(g){return arguments.length?(c=+g,p()):c},t.align=function(g){return arguments.length?(h=Math.max(0,Math.min(1,g)),p()):h},t.copy=function(){return GE(e(),[i,r]).round(l).paddingInner(f).paddingOuter(c).align(h)},fa.apply(p(),arguments)}function qk(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return qk(e())},t}function KH(){return qk(GE.apply(null,arguments).paddingInner(1))}function HE(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Vk(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Xm(){}var wm=.7,xv=1/wm,xd="\\s*([+-]?\\d+)\\s*",Lm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qH=/^#([0-9a-f]{3,8})$/,VH=new RegExp(`^rgb\\(${xd},${xd},${xd}\\)$`),YH=new RegExp(`^rgb\\(${Mo},${Mo},${Mo}\\)$`),WH=new RegExp(`^rgba\\(${xd},${xd},${xd},${Lm}\\)$`),ZH=new RegExp(`^rgba\\(${Mo},${Mo},${Mo},${Lm}\\)$`),XH=new RegExp(`^hsl\\(${Lm},${Mo},${Mo}\\)$`),QH=new RegExp(`^hsla\\(${Lm},${Mo},${Mo},${Lm}\\)$`),hO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};HE(Xm,Cm,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:mO,formatHex:mO,formatHex8:JH,formatHsl:eK,formatRgb:pO,toString:pO});function mO(){return this.rgb().formatHex()}function JH(){return this.rgb().formatHex8()}function eK(){return Yk(this).formatHsl()}function pO(){return this.rgb().formatRgb()}function Cm(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=qH.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?gO(e):n===3?new Xr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?dg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?dg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=VH.exec(t))?new Xr(e[1],e[2],e[3],1):(e=YH.exec(t))?new Xr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=WH.exec(t))?dg(e[1],e[2],e[3],e[4]):(e=ZH.exec(t))?dg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=XH.exec(t))?bO(e[1],e[2]/100,e[3]/100,1):(e=QH.exec(t))?bO(e[1],e[2]/100,e[3]/100,e[4]):hO.hasOwnProperty(t)?gO(hO[t]):t==="transparent"?new Xr(NaN,NaN,NaN,0):null}function gO(t){return new Xr(t>>16&255,t>>8&255,t&255,1)}function dg(t,e,n,i){return i<=0&&(t=e=n=NaN),new Xr(t,e,n,i)}function tK(t){return t instanceof Xm||(t=Cm(t)),t?(t=t.rgb(),new Xr(t.r,t.g,t.b,t.opacity)):new Xr}function tS(t,e,n,i){return arguments.length===1?tK(t):new Xr(t,e,n,i??1)}function Xr(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}HE(Xr,tS,Vk(Xm,{brighter(t){return t=t==null?xv:Math.pow(xv,t),new Xr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?wm:Math.pow(wm,t),new Xr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Xr(Vc(this.r),Vc(this.g),Vc(this.b),_v(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vO,formatHex:vO,formatHex8:nK,formatRgb:yO,toString:yO}));function vO(){return`#${zc(this.r)}${zc(this.g)}${zc(this.b)}`}function nK(){return`#${zc(this.r)}${zc(this.g)}${zc(this.b)}${zc((isNaN(this.opacity)?1:this.opacity)*255)}`}function yO(){const t=_v(this.opacity);return`${t===1?"rgb(":"rgba("}${Vc(this.r)}, ${Vc(this.g)}, ${Vc(this.b)}${t===1?")":`, ${t})`}`}function _v(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Vc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function zc(t){return t=Vc(t),(t<16?"0":"")+t.toString(16)}function bO(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Za(t,e,n,i)}function Yk(t){if(t instanceof Za)return new Za(t.h,t.s,t.l,t.opacity);if(t instanceof Xm||(t=Cm(t)),!t)return new Za;if(t instanceof Za)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,l=s-r,f=(s+r)/2;return l?(e===s?a=(n-i)/l+(n<i)*6:n===s?a=(i-e)/l+2:a=(e-n)/l+4,l/=f<.5?s+r:2-s-r,a*=60):l=f>0&&f<1?0:a,new Za(a,l,f,t.opacity)}function iK(t,e,n,i){return arguments.length===1?Yk(t):new Za(t,e,n,i??1)}function Za(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}HE(Za,iK,Vk(Xm,{brighter(t){return t=t==null?xv:Math.pow(xv,t),new Za(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?wm:Math.pow(wm,t),new Za(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Xr(Ax(t>=240?t-240:t+120,r,i),Ax(t,r,i),Ax(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Za(xO(this.h),hg(this.s),hg(this.l),_v(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=_v(this.opacity);return`${t===1?"hsl(":"hsla("}${xO(this.h)}, ${hg(this.s)*100}%, ${hg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function xO(t){return t=(t||0)%360,t<0?t+360:t}function hg(t){return Math.max(0,Math.min(1,t||0))}function Ax(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const KE=t=>()=>t;function rK(t,e){return function(n){return t+n*e}}function sK(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function aK(t){return(t=+t)==1?Wk:function(e,n){return n-e?sK(e,n,t):KE(isNaN(e)?n:e)}}function Wk(t,e){var n=e-t;return n?rK(t,n):KE(isNaN(t)?e:t)}const _O=function t(e){var n=aK(e);function i(r,s){var a=n((r=tS(r)).r,(s=tS(s)).r),l=n(r.g,s.g),f=n(r.b,s.b),c=Wk(r.opacity,s.opacity);return function(h){return r.r=a(h),r.g=l(h),r.b=f(h),r.opacity=c(h),r+""}}return i.gamma=t,i}(1);function oK(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function lK(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function uK(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),a;for(a=0;a<i;++a)r[a]=Wd(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(l){for(a=0;a<i;++a)s[a]=r[a](l);return s}}function cK(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Sv(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function fK(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Wd(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var nS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wx=new RegExp(nS.source,"g");function dK(t){return function(){return t}}function hK(t){return function(e){return t(e)+""}}function mK(t,e){var n=nS.lastIndex=wx.lastIndex=0,i,r,s,a=-1,l=[],f=[];for(t=t+"",e=e+"";(i=nS.exec(t))&&(r=wx.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(i=i[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,f.push({i:a,x:Sv(i,r)})),n=wx.lastIndex;return n<e.length&&(s=e.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?f[0]?hK(f[0].x):dK(e):(e=f.length,function(c){for(var h=0,p;h<e;++h)l[(p=f[h]).i]=p.x(c);return l.join("")})}function Wd(t,e){var n=typeof e,i;return e==null||n==="boolean"?KE(e):(n==="number"?Sv:n==="string"?(i=Cm(e))?(e=i,_O):mK:e instanceof Cm?_O:e instanceof Date?cK:lK(e)?oK:Array.isArray(e)?uK:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?fK:Sv)(t,e)}function qE(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function pK(t,e){e===void 0&&(e=t,t=Wd);for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return function(a){var l=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return s[l](a-l)}}function gK(t){return function(){return t}}function Ev(t){return+t}var SO=[0,1];function Ar(t){return t}function iS(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:gK(isNaN(e)?NaN:.5)}function vK(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function yK(t,e,n){var i=t[0],r=t[1],s=e[0],a=e[1];return r<i?(i=iS(r,i),s=n(a,s)):(i=iS(i,r),s=n(s,a)),function(l){return s(i(l))}}function bK(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=iS(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(l){var f=Zm(t,l,1,i)-1;return s[f](r[f](l))}}function Qm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function b0(){var t=SO,e=SO,n=Wd,i,r,s,a=Ar,l,f,c;function h(){var g=Math.min(t.length,e.length);return a!==Ar&&(a=vK(t[0],t[g-1])),l=g>2?bK:yK,f=c=null,p}function p(g){return g==null||isNaN(g=+g)?s:(f||(f=l(t.map(i),e,n)))(i(a(g)))}return p.invert=function(g){return a(r((c||(c=l(e,t.map(i),Sv)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,Ev),h()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),h()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),n=qE,h()},p.clamp=function(g){return arguments.length?(a=g?!0:Ar,h()):a!==Ar},p.interpolate=function(g){return arguments.length?(n=g,h()):n},p.unknown=function(g){return arguments.length?(s=g,p):s},function(g,x){return i=g,r=x,h()}}function VE(){return b0()(Ar,Ar)}function xK(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Tv(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Id(t){return t=Tv(Math.abs(t)),t?t[1]:NaN}function _K(t,e){return function(n,i){for(var r=n.length,s=[],a=0,l=t[0],f=0;r>0&&l>0&&(f+l+1>i&&(l=Math.max(1,i-f)),s.push(n.substring(r-=l,r+l)),!((f+=l+1)>i));)l=t[a=(a+1)%t.length];return s.reverse().join(e)}}function SK(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var EK=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Om(t){if(!(e=EK.exec(t)))throw new Error("invalid format: "+t);var e;return new YE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Om.prototype=YE.prototype;function YE(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}YE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function TK(t){e:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var Zk;function AK(t,e){var n=Tv(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(Zk=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Tv(t,Math.max(0,e+s-1))[0]}function EO(t,e){var n=Tv(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const TO={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:xK,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>EO(t*100,e),r:EO,s:AK,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function AO(t){return t}var wO=Array.prototype.map,LO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function wK(t){var e=t.grouping===void 0||t.thousands===void 0?AO:_K(wO.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?AO:SK(wO.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function c(p){p=Om(p);var g=p.fill,x=p.align,b=p.sign,T=p.symbol,E=p.zero,C=p.width,I=p.comma,P=p.precision,M=p.trim,k=p.type;k==="n"?(I=!0,k="g"):TO[k]||(P===void 0&&(P=12),M=!0,k="g"),(E||g==="0"&&x==="=")&&(E=!0,g="0",x="=");var z=T==="$"?n:T==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",F=T==="$"?i:/[%p]/.test(k)?a:"",G=TO[k],K=/[defgprs%]/.test(k);P=P===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function V(Q){var J=z,ve=F,se,ye,X;if(k==="c")ve=G(Q)+ve,Q="";else{Q=+Q;var oe=Q<0||1/Q<0;if(Q=isNaN(Q)?f:G(Math.abs(Q),P),M&&(Q=TK(Q)),oe&&+Q==0&&b!=="+"&&(oe=!1),J=(oe?b==="("?b:l:b==="-"||b==="("?"":b)+J,ve=(k==="s"?LO[8+Zk/3]:"")+ve+(oe&&b==="("?")":""),K){for(se=-1,ye=Q.length;++se<ye;)if(X=Q.charCodeAt(se),48>X||X>57){ve=(X===46?r+Q.slice(se+1):Q.slice(se))+ve,Q=Q.slice(0,se);break}}}I&&!E&&(Q=e(Q,1/0));var ie=J.length+Q.length+ve.length,Ie=ie<C?new Array(C-ie+1).join(g):"";switch(I&&E&&(Q=e(Ie+Q,Ie.length?C-ve.length:1/0),Ie=""),x){case"<":Q=J+Q+ve+Ie;break;case"=":Q=J+Ie+Q+ve;break;case"^":Q=Ie.slice(0,ie=Ie.length>>1)+J+Q+ve+Ie.slice(ie);break;default:Q=Ie+J+Q+ve;break}return s(Q)}return V.toString=function(){return p+""},V}function h(p,g){var x=c((p=Om(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(Id(g)/3)))*3,T=Math.pow(10,-b),E=LO[8+b/3];return function(C){return x(T*C)+E}}return{format:c,formatPrefix:h}}var mg,WE,Xk;LK({thousands:",",grouping:[3],currency:["$",""]});function LK(t){return mg=wK(t),WE=mg.format,Xk=mg.formatPrefix,mg}function CK(t){return Math.max(0,-Id(Math.abs(t)))}function OK(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Id(e)/3)))*3-Id(Math.abs(t)))}function RK(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Id(e)-Id(t))+1}function Qk(t,e,n,i){var r=J_(t,e,n),s;switch(i=Om(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=OK(r,a))&&(i.precision=s),Xk(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=RK(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=CK(r))&&(i.precision=s-(i.type==="%")*2);break}}return WE(i)}function Ju(t){var e=t.domain;return t.ticks=function(n){var i=e();return X_(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return Qk(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,s=i.length-1,a=i[r],l=i[s],f,c,h=10;for(l<a&&(c=a,a=l,l=c,c=r,r=s,s=c);h-- >0;){if(c=Q_(a,l,n),c===f)return i[r]=a,i[s]=l,e(i);if(c>0)a=Math.floor(a/c)*c,l=Math.ceil(l/c)*c;else if(c<0)a=Math.ceil(a*c)/c,l=Math.floor(l*c)/c;else break;f=c}return t},t}function Jk(){var t=VE();return t.copy=function(){return Qm(t,Jk())},fa.apply(t,arguments),Ju(t)}function eN(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,Ev),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return eN(t).unknown(e)},t=arguments.length?Array.from(t,Ev):[0,1],Ju(n)}function tN(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],s=t[i],a;return s<r&&(a=n,n=i,i=a,a=r,r=s,s=a),t[n]=e.floor(r),t[i]=e.ceil(s),t}function CO(t){return Math.log(t)}function OO(t){return Math.exp(t)}function PK(t){return-Math.log(-t)}function DK(t){return-Math.exp(-t)}function IK(t){return isFinite(t)?+("1e"+t):t<0?0:t}function MK(t){return t===10?IK:t===Math.E?Math.exp:e=>Math.pow(t,e)}function kK(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function RO(t){return(e,n)=>-t(-e,n)}function ZE(t){const e=t(CO,OO),n=e.domain;let i=10,r,s;function a(){return r=kK(i),s=MK(i),n()[0]<0?(r=RO(r),s=RO(s),t(PK,DK)):t(CO,OO),e}return e.base=function(l){return arguments.length?(i=+l,a()):i},e.domain=function(l){return arguments.length?(n(l),a()):n()},e.ticks=l=>{const f=n();let c=f[0],h=f[f.length-1];const p=h<c;p&&([c,h]=[h,c]);let g=r(c),x=r(h),b,T;const E=l==null?10:+l;let C=[];if(!(i%1)&&x-g<E){if(g=Math.floor(g),x=Math.ceil(x),c>0){for(;g<=x;++g)for(b=1;b<i;++b)if(T=g<0?b/s(-g):b*s(g),!(T<c)){if(T>h)break;C.push(T)}}else for(;g<=x;++g)for(b=i-1;b>=1;--b)if(T=g>0?b/s(-g):b*s(g),!(T<c)){if(T>h)break;C.push(T)}C.length*2<E&&(C=X_(c,h,E))}else C=X_(g,x,Math.min(x-g,E)).map(s);return p?C.reverse():C},e.tickFormat=(l,f)=>{if(l==null&&(l=10),f==null&&(f=i===10?"s":","),typeof f!="function"&&(!(i%1)&&(f=Om(f)).precision==null&&(f.trim=!0),f=WE(f)),l===1/0)return f;const c=Math.max(1,i*l/e.ticks().length);return h=>{let p=h/s(Math.round(r(h)));return p*i<i-.5&&(p*=i),p<=c?f(h):""}},e.nice=()=>n(tN(n(),{floor:l=>s(Math.floor(r(l))),ceil:l=>s(Math.ceil(r(l)))})),e}function nN(){const t=ZE(b0()).domain([1,10]);return t.copy=()=>Qm(t,nN()).base(t.base()),fa.apply(t,arguments),t}function PO(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function DO(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function XE(t){var e=1,n=t(PO(e),DO(e));return n.constant=function(i){return arguments.length?t(PO(e=+i),DO(e)):e},Ju(n)}function iN(){var t=XE(b0());return t.copy=function(){return Qm(t,iN()).constant(t.constant())},fa.apply(t,arguments)}function IO(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function NK(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function jK(t){return t<0?-t*t:t*t}function QE(t){var e=t(Ar,Ar),n=1;function i(){return n===1?t(Ar,Ar):n===.5?t(NK,jK):t(IO(n),IO(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},Ju(e)}function JE(){var t=QE(b0());return t.copy=function(){return Qm(t,JE()).exponent(t.exponent())},fa.apply(t,arguments),t}function BK(){return JE.apply(null,arguments).exponent(.5)}function MO(t){return Math.sign(t)*t*t}function FK(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function rN(){var t=VE(),e=[0,1],n=!1,i;function r(s){var a=FK(t(s));return isNaN(a)?i:n?Math.round(a):a}return r.invert=function(s){return t.invert(MO(s))},r.domain=function(s){return arguments.length?(t.domain(s),r):t.domain()},r.range=function(s){return arguments.length?(t.range((e=Array.from(s,Ev)).map(MO)),r):e.slice()},r.rangeRound=function(s){return r.range(s).round(!0)},r.round=function(s){return arguments.length?(n=!!s,r):n},r.clamp=function(s){return arguments.length?(t.clamp(s),r):t.clamp()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return rN(t.domain(),e).round(n).clamp(t.clamp()).unknown(i)},fa.apply(r,arguments),Ju(r)}function sN(){var t=[],e=[],n=[],i;function r(){var a=0,l=Math.max(1,e.length);for(n=new Array(l-1);++a<l;)n[a-1]=GH(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?i:e[Zm(n,a)]}return s.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Vu),r()},s.range=function(a){return arguments.length?(e=Array.from(a),r()):e.slice()},s.unknown=function(a){return arguments.length?(i=a,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return sN().domain(t).range(e).unknown(i)},fa.apply(s,arguments)}function aN(){var t=0,e=1,n=1,i=[.5],r=[0,1],s;function a(f){return f!=null&&f<=f?r[Zm(i,f,0,n)]:s}function l(){var f=-1;for(i=new Array(n);++f<n;)i[f]=((f+1)*e-(f-n)*t)/(n+1);return a}return a.domain=function(f){return arguments.length?([t,e]=f,t=+t,e=+e,l()):[t,e]},a.range=function(f){return arguments.length?(n=(r=Array.from(f)).length-1,l()):r.slice()},a.invertExtent=function(f){var c=r.indexOf(f);return c<0?[NaN,NaN]:c<1?[t,i[0]]:c>=n?[i[n-1],e]:[i[c-1],i[c]]},a.unknown=function(f){return arguments.length&&(s=f),a},a.thresholds=function(){return i.slice()},a.copy=function(){return aN().domain([t,e]).range(r).unknown(s)},fa.apply(Ju(a),arguments)}function oN(){var t=[.5],e=[0,1],n,i=1;function r(s){return s!=null&&s<=s?e[Zm(t,s,0,i)]:n}return r.domain=function(s){return arguments.length?(t=Array.from(s),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return oN().domain(t).range(e).unknown(n)},fa.apply(r,arguments)}const Lx=new Date,Cx=new Date;function bi(t,e,n,i){function r(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(t(s=new Date(+s)),s),r.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),r.round=s=>{const a=r(s),l=r.ceil(s);return s-a<l-s?a:l},r.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),r.range=(s,a,l)=>{const f=[];if(s=r.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return f;let c;do f.push(c=new Date(+s)),e(s,l),t(s);while(c<s&&s<a);return f},r.filter=s=>bi(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!s(a););else for(;--l>=0;)for(;e(a,1),!s(a););}),n&&(r.count=(s,a)=>(Lx.setTime(+s),Cx.setTime(+a),t(Lx),t(Cx),Math.floor(n(Lx,Cx))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?a=>i(a)%s===0:a=>r.count(0,a)%s===0):r)),r}const Av=bi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Av.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?bi(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Av);Av.range;const Ol=1e3,ia=Ol*60,Rl=ia*60,Bl=Rl*24,eT=Bl*7,kO=Bl*30,Ox=Bl*365,Gc=bi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ol)},(t,e)=>(e-t)/Ol,t=>t.getUTCSeconds());Gc.range;const tT=bi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ol)},(t,e)=>{t.setTime(+t+e*ia)},(t,e)=>(e-t)/ia,t=>t.getMinutes());tT.range;const nT=bi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ia)},(t,e)=>(e-t)/ia,t=>t.getUTCMinutes());nT.range;const iT=bi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ol-t.getMinutes()*ia)},(t,e)=>{t.setTime(+t+e*Rl)},(t,e)=>(e-t)/Rl,t=>t.getHours());iT.range;const rT=bi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Rl)},(t,e)=>(e-t)/Rl,t=>t.getUTCHours());rT.range;const Jm=bi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ia)/Bl,t=>t.getDate()-1);Jm.range;const x0=bi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bl,t=>t.getUTCDate()-1);x0.range;const lN=bi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bl,t=>Math.floor(t/Bl));lN.range;function af(t){return bi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ia)/eT)}const _0=af(0),wv=af(1),UK=af(2),$K=af(3),Md=af(4),zK=af(5),GK=af(6);_0.range;wv.range;UK.range;$K.range;Md.range;zK.range;GK.range;function of(t){return bi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/eT)}const S0=of(0),Lv=of(1),HK=of(2),KK=of(3),kd=of(4),qK=of(5),VK=of(6);S0.range;Lv.range;HK.range;KK.range;kd.range;qK.range;VK.range;const sT=bi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());sT.range;const aT=bi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());aT.range;const Fl=bi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Fl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:bi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Fl.range;const Ul=bi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ul.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:bi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ul.range;function uN(t,e,n,i,r,s){const a=[[Gc,1,Ol],[Gc,5,5*Ol],[Gc,15,15*Ol],[Gc,30,30*Ol],[s,1,ia],[s,5,5*ia],[s,15,15*ia],[s,30,30*ia],[r,1,Rl],[r,3,3*Rl],[r,6,6*Rl],[r,12,12*Rl],[i,1,Bl],[i,2,2*Bl],[n,1,eT],[e,1,kO],[e,3,3*kO],[t,1,Ox]];function l(c,h,p){const g=h<c;g&&([c,h]=[h,c]);const x=p&&typeof p.range=="function"?p:f(c,h,p),b=x?x.range(c,+h+1):[];return g?b.reverse():b}function f(c,h,p){const g=Math.abs(h-c)/p,x=$E(([,,E])=>E).right(a,g);if(x===a.length)return t.every(J_(c/Ox,h/Ox,p));if(x===0)return Av.every(Math.max(J_(c,h,p),1));const[b,T]=a[g/a[x-1][2]<a[x][2]/g?x-1:x];return b.every(T)}return[l,f]}const[YK,WK]=uN(Ul,aT,S0,lN,rT,nT),[ZK,XK]=uN(Fl,sT,_0,Jm,iT,tT);function Rx(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Px(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qh(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function QK(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,a=t.shortDays,l=t.months,f=t.shortMonths,c=Jh(r),h=em(r),p=Jh(s),g=em(s),x=Jh(a),b=em(a),T=Jh(l),E=em(l),C=Jh(f),I=em(f),P={a:oe,A:ie,b:Ie,B:Z,c:null,d:$O,e:$O,f:_q,g:Pq,G:Iq,H:yq,I:bq,j:xq,L:cN,m:Sq,M:Eq,p:Y,q:ne,Q:HO,s:KO,S:Tq,u:Aq,U:wq,V:Lq,w:Cq,W:Oq,x:null,X:null,y:Rq,Y:Dq,Z:Mq,"%":GO},M={a:me,A:Te,b:Le,B:Ae,c:null,d:zO,e:zO,f:Bq,g:Yq,G:Zq,H:kq,I:Nq,j:jq,L:dN,m:Fq,M:Uq,p:Ve,q:Ue,Q:HO,s:KO,S:$q,u:zq,U:Gq,V:Hq,w:Kq,W:qq,x:null,X:null,y:Vq,Y:Wq,Z:Xq,"%":GO},k={a:V,A:Q,b:J,B:ve,c:se,d:FO,e:FO,f:mq,g:BO,G:jO,H:UO,I:UO,j:cq,L:hq,m:uq,M:fq,p:K,q:lq,Q:gq,s:vq,S:dq,u:iq,U:rq,V:sq,w:nq,W:aq,x:ye,X,y:BO,Y:jO,Z:oq,"%":pq};P.x=z(n,P),P.X=z(i,P),P.c=z(e,P),M.x=z(n,M),M.X=z(i,M),M.c=z(e,M);function z(fe,je){return function(Ge){var Pe=[],ot=-1,ct=0,xe=fe.length,we,Be,Je;for(Ge instanceof Date||(Ge=new Date(+Ge));++ot<xe;)fe.charCodeAt(ot)===37&&(Pe.push(fe.slice(ct,ot)),(Be=NO[we=fe.charAt(++ot)])!=null?we=fe.charAt(++ot):Be=we==="e"?" ":"0",(Je=je[we])&&(we=Je(Ge,Be)),Pe.push(we),ct=ot+1);return Pe.push(fe.slice(ct,ot)),Pe.join("")}}function F(fe,je){return function(Ge){var Pe=Qh(1900,void 0,1),ot=G(Pe,fe,Ge+="",0),ct,xe;if(ot!=Ge.length)return null;if("Q"in Pe)return new Date(Pe.Q);if("s"in Pe)return new Date(Pe.s*1e3+("L"in Pe?Pe.L:0));if(je&&!("Z"in Pe)&&(Pe.Z=0),"p"in Pe&&(Pe.H=Pe.H%12+Pe.p*12),Pe.m===void 0&&(Pe.m="q"in Pe?Pe.q:0),"V"in Pe){if(Pe.V<1||Pe.V>53)return null;"w"in Pe||(Pe.w=1),"Z"in Pe?(ct=Px(Qh(Pe.y,0,1)),xe=ct.getUTCDay(),ct=xe>4||xe===0?Lv.ceil(ct):Lv(ct),ct=x0.offset(ct,(Pe.V-1)*7),Pe.y=ct.getUTCFullYear(),Pe.m=ct.getUTCMonth(),Pe.d=ct.getUTCDate()+(Pe.w+6)%7):(ct=Rx(Qh(Pe.y,0,1)),xe=ct.getDay(),ct=xe>4||xe===0?wv.ceil(ct):wv(ct),ct=Jm.offset(ct,(Pe.V-1)*7),Pe.y=ct.getFullYear(),Pe.m=ct.getMonth(),Pe.d=ct.getDate()+(Pe.w+6)%7)}else("W"in Pe||"U"in Pe)&&("w"in Pe||(Pe.w="u"in Pe?Pe.u%7:"W"in Pe?1:0),xe="Z"in Pe?Px(Qh(Pe.y,0,1)).getUTCDay():Rx(Qh(Pe.y,0,1)).getDay(),Pe.m=0,Pe.d="W"in Pe?(Pe.w+6)%7+Pe.W*7-(xe+5)%7:Pe.w+Pe.U*7-(xe+6)%7);return"Z"in Pe?(Pe.H+=Pe.Z/100|0,Pe.M+=Pe.Z%100,Px(Pe)):Rx(Pe)}}function G(fe,je,Ge,Pe){for(var ot=0,ct=je.length,xe=Ge.length,we,Be;ot<ct;){if(Pe>=xe)return-1;if(we=je.charCodeAt(ot++),we===37){if(we=je.charAt(ot++),Be=k[we in NO?je.charAt(ot++):we],!Be||(Pe=Be(fe,Ge,Pe))<0)return-1}else if(we!=Ge.charCodeAt(Pe++))return-1}return Pe}function K(fe,je,Ge){var Pe=c.exec(je.slice(Ge));return Pe?(fe.p=h.get(Pe[0].toLowerCase()),Ge+Pe[0].length):-1}function V(fe,je,Ge){var Pe=x.exec(je.slice(Ge));return Pe?(fe.w=b.get(Pe[0].toLowerCase()),Ge+Pe[0].length):-1}function Q(fe,je,Ge){var Pe=p.exec(je.slice(Ge));return Pe?(fe.w=g.get(Pe[0].toLowerCase()),Ge+Pe[0].length):-1}function J(fe,je,Ge){var Pe=C.exec(je.slice(Ge));return Pe?(fe.m=I.get(Pe[0].toLowerCase()),Ge+Pe[0].length):-1}function ve(fe,je,Ge){var Pe=T.exec(je.slice(Ge));return Pe?(fe.m=E.get(Pe[0].toLowerCase()),Ge+Pe[0].length):-1}function se(fe,je,Ge){return G(fe,e,je,Ge)}function ye(fe,je,Ge){return G(fe,n,je,Ge)}function X(fe,je,Ge){return G(fe,i,je,Ge)}function oe(fe){return a[fe.getDay()]}function ie(fe){return s[fe.getDay()]}function Ie(fe){return f[fe.getMonth()]}function Z(fe){return l[fe.getMonth()]}function Y(fe){return r[+(fe.getHours()>=12)]}function ne(fe){return 1+~~(fe.getMonth()/3)}function me(fe){return a[fe.getUTCDay()]}function Te(fe){return s[fe.getUTCDay()]}function Le(fe){return f[fe.getUTCMonth()]}function Ae(fe){return l[fe.getUTCMonth()]}function Ve(fe){return r[+(fe.getUTCHours()>=12)]}function Ue(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var je=z(fe+="",P);return je.toString=function(){return fe},je},parse:function(fe){var je=F(fe+="",!1);return je.toString=function(){return fe},je},utcFormat:function(fe){var je=z(fe+="",M);return je.toString=function(){return fe},je},utcParse:function(fe){var je=F(fe+="",!0);return je.toString=function(){return fe},je}}}var NO={"-":"",_:" ",0:"0"},Ui=/^\s*\d+/,JK=/^%/,eq=/[\\^$*+?|[\]().{}]/g;function Zt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function tq(t){return t.replace(eq,"\\$&")}function Jh(t){return new RegExp("^(?:"+t.map(tq).join("|")+")","i")}function em(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function nq(t,e,n){var i=Ui.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function iq(t,e,n){var i=Ui.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function rq(t,e,n){var i=Ui.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function sq(t,e,n){var i=Ui.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function aq(t,e,n){var i=Ui.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function jO(t,e,n){var i=Ui.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function BO(t,e,n){var i=Ui.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function oq(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function lq(t,e,n){var i=Ui.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function uq(t,e,n){var i=Ui.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function FO(t,e,n){var i=Ui.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function cq(t,e,n){var i=Ui.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function UO(t,e,n){var i=Ui.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function fq(t,e,n){var i=Ui.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function dq(t,e,n){var i=Ui.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function hq(t,e,n){var i=Ui.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function mq(t,e,n){var i=Ui.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function pq(t,e,n){var i=JK.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function gq(t,e,n){var i=Ui.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function vq(t,e,n){var i=Ui.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function $O(t,e){return Zt(t.getDate(),e,2)}function yq(t,e){return Zt(t.getHours(),e,2)}function bq(t,e){return Zt(t.getHours()%12||12,e,2)}function xq(t,e){return Zt(1+Jm.count(Fl(t),t),e,3)}function cN(t,e){return Zt(t.getMilliseconds(),e,3)}function _q(t,e){return cN(t,e)+"000"}function Sq(t,e){return Zt(t.getMonth()+1,e,2)}function Eq(t,e){return Zt(t.getMinutes(),e,2)}function Tq(t,e){return Zt(t.getSeconds(),e,2)}function Aq(t){var e=t.getDay();return e===0?7:e}function wq(t,e){return Zt(_0.count(Fl(t)-1,t),e,2)}function fN(t){var e=t.getDay();return e>=4||e===0?Md(t):Md.ceil(t)}function Lq(t,e){return t=fN(t),Zt(Md.count(Fl(t),t)+(Fl(t).getDay()===4),e,2)}function Cq(t){return t.getDay()}function Oq(t,e){return Zt(wv.count(Fl(t)-1,t),e,2)}function Rq(t,e){return Zt(t.getFullYear()%100,e,2)}function Pq(t,e){return t=fN(t),Zt(t.getFullYear()%100,e,2)}function Dq(t,e){return Zt(t.getFullYear()%1e4,e,4)}function Iq(t,e){var n=t.getDay();return t=n>=4||n===0?Md(t):Md.ceil(t),Zt(t.getFullYear()%1e4,e,4)}function Mq(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Zt(e/60|0,"0",2)+Zt(e%60,"0",2)}function zO(t,e){return Zt(t.getUTCDate(),e,2)}function kq(t,e){return Zt(t.getUTCHours(),e,2)}function Nq(t,e){return Zt(t.getUTCHours()%12||12,e,2)}function jq(t,e){return Zt(1+x0.count(Ul(t),t),e,3)}function dN(t,e){return Zt(t.getUTCMilliseconds(),e,3)}function Bq(t,e){return dN(t,e)+"000"}function Fq(t,e){return Zt(t.getUTCMonth()+1,e,2)}function Uq(t,e){return Zt(t.getUTCMinutes(),e,2)}function $q(t,e){return Zt(t.getUTCSeconds(),e,2)}function zq(t){var e=t.getUTCDay();return e===0?7:e}function Gq(t,e){return Zt(S0.count(Ul(t)-1,t),e,2)}function hN(t){var e=t.getUTCDay();return e>=4||e===0?kd(t):kd.ceil(t)}function Hq(t,e){return t=hN(t),Zt(kd.count(Ul(t),t)+(Ul(t).getUTCDay()===4),e,2)}function Kq(t){return t.getUTCDay()}function qq(t,e){return Zt(Lv.count(Ul(t)-1,t),e,2)}function Vq(t,e){return Zt(t.getUTCFullYear()%100,e,2)}function Yq(t,e){return t=hN(t),Zt(t.getUTCFullYear()%100,e,2)}function Wq(t,e){return Zt(t.getUTCFullYear()%1e4,e,4)}function Zq(t,e){var n=t.getUTCDay();return t=n>=4||n===0?kd(t):kd.ceil(t),Zt(t.getUTCFullYear()%1e4,e,4)}function Xq(){return"+0000"}function GO(){return"%"}function HO(t){return+t}function KO(t){return Math.floor(+t/1e3)}var ad,mN,pN;Qq({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Qq(t){return ad=QK(t),mN=ad.format,ad.parse,pN=ad.utcFormat,ad.utcParse,ad}function Jq(t){return new Date(t)}function eV(t){return t instanceof Date?+t:+new Date(+t)}function oT(t,e,n,i,r,s,a,l,f,c){var h=VE(),p=h.invert,g=h.domain,x=c(".%L"),b=c(":%S"),T=c("%I:%M"),E=c("%I %p"),C=c("%a %d"),I=c("%b %d"),P=c("%B"),M=c("%Y");function k(z){return(f(z)<z?x:l(z)<z?b:a(z)<z?T:s(z)<z?E:i(z)<z?r(z)<z?C:I:n(z)<z?P:M)(z)}return h.invert=function(z){return new Date(p(z))},h.domain=function(z){return arguments.length?g(Array.from(z,eV)):g().map(Jq)},h.ticks=function(z){var F=g();return t(F[0],F[F.length-1],z??10)},h.tickFormat=function(z,F){return F==null?k:c(F)},h.nice=function(z){var F=g();return(!z||typeof z.range!="function")&&(z=e(F[0],F[F.length-1],z??10)),z?g(tN(F,z)):h},h.copy=function(){return Qm(h,oT(t,e,n,i,r,s,a,l,f,c))},h}function tV(){return fa.apply(oT(ZK,XK,Fl,sT,_0,Jm,iT,tT,Gc,mN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function nV(){return fa.apply(oT(YK,WK,Ul,aT,S0,x0,rT,nT,Gc,pN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function E0(){var t=0,e=1,n,i,r,s,a=Ar,l=!1,f;function c(p){return p==null||isNaN(p=+p)?f:a(r===0?.5:(p=(s(p)-n)*r,l?Math.max(0,Math.min(1,p)):p))}c.domain=function(p){return arguments.length?([t,e]=p,n=s(t=+t),i=s(e=+e),r=n===i?0:1/(i-n),c):[t,e]},c.clamp=function(p){return arguments.length?(l=!!p,c):l},c.interpolator=function(p){return arguments.length?(a=p,c):a};function h(p){return function(g){var x,b;return arguments.length?([x,b]=g,a=p(x,b),c):[a(0),a(1)]}}return c.range=h(Wd),c.rangeRound=h(qE),c.unknown=function(p){return arguments.length?(f=p,c):f},function(p){return s=p,n=p(t),i=p(e),r=n===i?0:1/(i-n),c}}function ec(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function gN(){var t=Ju(E0()(Ar));return t.copy=function(){return ec(t,gN())},ql.apply(t,arguments)}function vN(){var t=ZE(E0()).domain([1,10]);return t.copy=function(){return ec(t,vN()).base(t.base())},ql.apply(t,arguments)}function yN(){var t=XE(E0());return t.copy=function(){return ec(t,yN()).constant(t.constant())},ql.apply(t,arguments)}function lT(){var t=QE(E0());return t.copy=function(){return ec(t,lT()).exponent(t.exponent())},ql.apply(t,arguments)}function iV(){return lT.apply(null,arguments).exponent(.5)}function bN(){var t=[],e=Ar;function n(i){if(i!=null&&!isNaN(i=+i))return e((Zm(t,i,1)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let r of i)r!=null&&!isNaN(r=+r)&&t.push(r);return t.sort(Vu),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.range=function(){return t.map((i,r)=>e(r/(t.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(r,s)=>zH(t,s/i))},n.copy=function(){return bN(e).domain(t)},ql.apply(n,arguments)}function T0(){var t=0,e=.5,n=1,i=1,r,s,a,l,f,c=Ar,h,p=!1,g;function x(T){return isNaN(T=+T)?g:(T=.5+((T=+h(T))-s)*(i*T<i*s?l:f),c(p?Math.max(0,Math.min(1,T)):T))}x.domain=function(T){return arguments.length?([t,e,n]=T,r=h(t=+t),s=h(e=+e),a=h(n=+n),l=r===s?0:.5/(s-r),f=s===a?0:.5/(a-s),i=s<r?-1:1,x):[t,e,n]},x.clamp=function(T){return arguments.length?(p=!!T,x):p},x.interpolator=function(T){return arguments.length?(c=T,x):c};function b(T){return function(E){var C,I,P;return arguments.length?([C,I,P]=E,c=pK(T,[C,I,P]),x):[c(0),c(.5),c(1)]}}return x.range=b(Wd),x.rangeRound=b(qE),x.unknown=function(T){return arguments.length?(g=T,x):g},function(T){return h=T,r=T(t),s=T(e),a=T(n),l=r===s?0:.5/(s-r),f=s===a?0:.5/(a-s),i=s<r?-1:1,x}}function xN(){var t=Ju(T0()(Ar));return t.copy=function(){return ec(t,xN())},ql.apply(t,arguments)}function _N(){var t=ZE(T0()).domain([.1,1,10]);return t.copy=function(){return ec(t,_N()).base(t.base())},ql.apply(t,arguments)}function SN(){var t=XE(T0());return t.copy=function(){return ec(t,SN()).constant(t.constant())},ql.apply(t,arguments)}function uT(){var t=QE(T0());return t.copy=function(){return ec(t,uT()).exponent(t.exponent())},ql.apply(t,arguments)}function rV(){return uT.apply(null,arguments).exponent(.5)}const um=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:GE,scaleDiverging:xN,scaleDivergingLog:_N,scaleDivergingPow:uT,scaleDivergingSqrt:rV,scaleDivergingSymlog:SN,scaleIdentity:eN,scaleImplicit:eS,scaleLinear:Jk,scaleLog:nN,scaleOrdinal:zE,scalePoint:KH,scalePow:JE,scaleQuantile:sN,scaleQuantize:aN,scaleRadial:rN,scaleSequential:gN,scaleSequentialLog:vN,scaleSequentialPow:lT,scaleSequentialQuantile:bN,scaleSequentialSqrt:iV,scaleSequentialSymlog:yN,scaleSqrt:BK,scaleSymlog:iN,scaleThreshold:oN,scaleTime:tV,scaleUtc:nV,tickFormat:Qk},Symbol.toStringTag,{value:"Module"}));var lf=t=>t.chartData,sV=Ce([lf],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),cT=(t,e,n,i)=>i?sV(t):lf(t);function Nd(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Ps(e)&&Ps(n))return!0}return!1}function qO(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function aV(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,i]=t,r,s;if(Ps(n))r=n;else if(typeof n=="function")return;if(Ps(i))s=i;else if(typeof i=="function")return;var a=[r,s];if(Nd(a))return a}}function oV(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var i=t(e,n);if(Nd(i))return qO(i,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[r,s]=t,a,l;if(r==="auto")e!=null&&(a=Math.min(...e));else if(it(r))a=r;else if(typeof r=="function")try{e!=null&&(a=r(e?.[0]))}catch{}else if(typeof r=="string"&&kC.test(r)){var f=kC.exec(r);if(f==null||e==null)a=void 0;else{var c=+f[1];a=e[0]-c}}else a=e?.[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(it(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e?.[1]))}catch{}else if(typeof s=="string"&&NC.test(s)){var h=NC.exec(s);if(h==null||e==null)l=void 0;else{var p=+h[1];l=e[1]+p}}else l=e?.[1];var g=[a,l];if(Nd(g))return e==null?g:qO(g,e,n)}}}var Zd=1e9,lV={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},dT,Bn=!0,la="[DecimalError] ",Yc=la+"Invalid argument: ",fT=la+"Exponent out of range: ",Xd=Math.floor,jc=Math.pow,uV=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ts,Bi=1e7,Pn=7,EN=9007199254740991,Cv=Xd(EN/Pn),Qe={};Qe.absoluteValue=Qe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Qe.comparedTo=Qe.cmp=function(t){var e,n,i,r,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(i=s.d.length,r=t.d.length,e=0,n=i<r?i:r;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return i===r?0:i>r^s.s<0?1:-1};Qe.decimalPlaces=Qe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Pn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Qe.dividedBy=Qe.div=function(t){return Ml(this,new this.constructor(t))};Qe.dividedToIntegerBy=Qe.idiv=function(t){var e=this,n=e.constructor;return _n(Ml(e,new n(t),0,1),n.precision)};Qe.equals=Qe.eq=function(t){return!this.cmp(t)};Qe.exponent=function(){return li(this)};Qe.greaterThan=Qe.gt=function(t){return this.cmp(t)>0};Qe.greaterThanOrEqualTo=Qe.gte=function(t){return this.cmp(t)>=0};Qe.isInteger=Qe.isint=function(){return this.e>this.d.length-2};Qe.isNegative=Qe.isneg=function(){return this.s<0};Qe.isPositive=Qe.ispos=function(){return this.s>0};Qe.isZero=function(){return this.s===0};Qe.lessThan=Qe.lt=function(t){return this.cmp(t)<0};Qe.lessThanOrEqualTo=Qe.lte=function(t){return this.cmp(t)<1};Qe.logarithm=Qe.log=function(t){var e,n=this,i=n.constructor,r=i.precision,s=r+5;if(t===void 0)t=new i(10);else if(t=new i(t),t.s<1||t.eq(Ts))throw Error(la+"NaN");if(n.s<1)throw Error(la+(n.s?"NaN":"-Infinity"));return n.eq(Ts)?new i(0):(Bn=!1,e=Ml(Rm(n,s),Rm(t,s),s),Bn=!0,_n(e,r))};Qe.minus=Qe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?wN(e,t):TN(e,(t.s=-t.s,t))};Qe.modulo=Qe.mod=function(t){var e,n=this,i=n.constructor,r=i.precision;if(t=new i(t),!t.s)throw Error(la+"NaN");return n.s?(Bn=!1,e=Ml(n,t,0,1).times(t),Bn=!0,n.minus(e)):_n(new i(n),r)};Qe.naturalExponential=Qe.exp=function(){return AN(this)};Qe.naturalLogarithm=Qe.ln=function(){return Rm(this)};Qe.negated=Qe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Qe.plus=Qe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?TN(e,t):wN(e,(t.s=-t.s,t))};Qe.precision=Qe.sd=function(t){var e,n,i,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Yc+t);if(e=li(r)+1,i=r.d.length-1,n=i*Pn+1,i=r.d[i],i){for(;i%10==0;i/=10)n--;for(i=r.d[0];i>=10;i/=10)n++}return t&&e>n?e:n};Qe.squareRoot=Qe.sqrt=function(){var t,e,n,i,r,s,a,l=this,f=l.constructor;if(l.s<1){if(!l.s)return new f(0);throw Error(la+"NaN")}for(t=li(l),Bn=!1,r=Math.sqrt(+l),r==0||r==1/0?(e=Po(l.d),(e.length+t)%2==0&&(e+="0"),r=Math.sqrt(e),t=Xd((t+1)/2)-(t<0||t%2),r==1/0?e="5e"+t:(e=r.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),i=new f(e)):i=new f(r.toString()),n=f.precision,r=a=n+3;;)if(s=i,i=s.plus(Ml(l,s,a+2)).times(.5),Po(s.d).slice(0,a)===(e=Po(i.d)).slice(0,a)){if(e=e.slice(a-3,a+1),r==a&&e=="4999"){if(_n(s,n+1,0),s.times(s).eq(l)){i=s;break}}else if(e!="9999")break;a+=4}return Bn=!0,_n(i,n)};Qe.times=Qe.mul=function(t){var e,n,i,r,s,a,l,f,c,h=this,p=h.constructor,g=h.d,x=(t=new p(t)).d;if(!h.s||!t.s)return new p(0);for(t.s*=h.s,n=h.e+t.e,f=g.length,c=x.length,f<c&&(s=g,g=x,x=s,a=f,f=c,c=a),s=[],a=f+c,i=a;i--;)s.push(0);for(i=c;--i>=0;){for(e=0,r=f+i;r>i;)l=s[r]+x[i]*g[r-i-1]+e,s[r--]=l%Bi|0,e=l/Bi|0;s[r]=(s[r]+e)%Bi|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Bn?_n(t,p.precision):t};Qe.toDecimalPlaces=Qe.todp=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(No(t,0,Zd),e===void 0?e=i.rounding:No(e,0,8),_n(n,t+li(n)+1,e))};Qe.toExponential=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=nf(i,!0):(No(t,0,Zd),e===void 0?e=r.rounding:No(e,0,8),i=_n(new r(i),t+1,e),n=nf(i,!0,t+1)),n};Qe.toFixed=function(t,e){var n,i,r=this,s=r.constructor;return t===void 0?nf(r):(No(t,0,Zd),e===void 0?e=s.rounding:No(e,0,8),i=_n(new s(r),t+li(r)+1,e),n=nf(i.abs(),!1,t+li(i)+1),r.isneg()&&!r.isZero()?"-"+n:n)};Qe.toInteger=Qe.toint=function(){var t=this,e=t.constructor;return _n(new e(t),li(t)+1,e.rounding)};Qe.toNumber=function(){return+this};Qe.toPower=Qe.pow=function(t){var e,n,i,r,s,a,l=this,f=l.constructor,c=12,h=+(t=new f(t));if(!t.s)return new f(Ts);if(l=new f(l),!l.s){if(t.s<1)throw Error(la+"Infinity");return l}if(l.eq(Ts))return l;if(i=f.precision,t.eq(Ts))return _n(l,i);if(e=t.e,n=t.d.length-1,a=e>=n,s=l.s,a){if((n=h<0?-h:h)<=EN){for(r=new f(Ts),e=Math.ceil(i/Pn+4),Bn=!1;n%2&&(r=r.times(l),YO(r.d,e)),n=Xd(n/2),n!==0;)l=l.times(l),YO(l.d,e);return Bn=!0,t.s<0?new f(Ts).div(r):_n(r,i)}}else if(s<0)throw Error(la+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Bn=!1,r=t.times(Rm(l,i+c)),Bn=!0,r=AN(r),r.s=s,r};Qe.toPrecision=function(t,e){var n,i,r=this,s=r.constructor;return t===void 0?(n=li(r),i=nf(r,n<=s.toExpNeg||n>=s.toExpPos)):(No(t,1,Zd),e===void 0?e=s.rounding:No(e,0,8),r=_n(new s(r),t,e),n=li(r),i=nf(r,t<=n||n<=s.toExpNeg,t)),i};Qe.toSignificantDigits=Qe.tosd=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(No(t,1,Zd),e===void 0?e=i.rounding:No(e,0,8)),_n(new i(n),t,e)};Qe.toString=Qe.valueOf=Qe.val=Qe.toJSON=Qe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=li(t),n=t.constructor;return nf(t,e<=n.toExpNeg||e>=n.toExpPos)};function TN(t,e){var n,i,r,s,a,l,f,c,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),Bn?_n(e,p):e;if(f=t.d,c=e.d,a=t.e,r=e.e,f=f.slice(),s=a-r,s){for(s<0?(i=f,s=-s,l=c.length):(i=c,r=a,l=f.length),a=Math.ceil(p/Pn),l=a>l?a+1:l+1,s>l&&(s=l,i.length=1),i.reverse();s--;)i.push(0);i.reverse()}for(l=f.length,s=c.length,l-s<0&&(s=l,i=c,c=f,f=i),n=0;s;)n=(f[--s]=f[s]+c[s]+n)/Bi|0,f[s]%=Bi;for(n&&(f.unshift(n),++r),l=f.length;f[--l]==0;)f.pop();return e.d=f,e.e=r,Bn?_n(e,p):e}function No(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Yc+t)}function Po(t){var e,n,i,r=t.length-1,s="",a=t[0];if(r>0){for(s+=a,e=1;e<r;e++)i=t[e]+"",n=Pn-i.length,n&&(s+=zu(n)),s+=i;a=t[e],i=a+"",n=Pn-i.length,n&&(s+=zu(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var Ml=function(){function t(i,r){var s,a=0,l=i.length;for(i=i.slice();l--;)s=i[l]*r+a,i[l]=s%Bi|0,a=s/Bi|0;return a&&i.unshift(a),i}function e(i,r,s,a){var l,f;if(s!=a)f=s>a?1:-1;else for(l=f=0;l<s;l++)if(i[l]!=r[l]){f=i[l]>r[l]?1:-1;break}return f}function n(i,r,s){for(var a=0;s--;)i[s]-=a,a=i[s]<r[s]?1:0,i[s]=a*Bi+i[s]-r[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,s,a){var l,f,c,h,p,g,x,b,T,E,C,I,P,M,k,z,F,G,K=i.constructor,V=i.s==r.s?1:-1,Q=i.d,J=r.d;if(!i.s)return new K(i);if(!r.s)throw Error(la+"Division by zero");for(f=i.e-r.e,F=J.length,k=Q.length,x=new K(V),b=x.d=[],c=0;J[c]==(Q[c]||0);)++c;if(J[c]>(Q[c]||0)&&--f,s==null?I=s=K.precision:a?I=s+(li(i)-li(r))+1:I=s,I<0)return new K(0);if(I=I/Pn+2|0,c=0,F==1)for(h=0,J=J[0],I++;(c<k||h)&&I--;c++)P=h*Bi+(Q[c]||0),b[c]=P/J|0,h=P%J|0;else{for(h=Bi/(J[0]+1)|0,h>1&&(J=t(J,h),Q=t(Q,h),F=J.length,k=Q.length),M=F,T=Q.slice(0,F),E=T.length;E<F;)T[E++]=0;G=J.slice(),G.unshift(0),z=J[0],J[1]>=Bi/2&&++z;do h=0,l=e(J,T,F,E),l<0?(C=T[0],F!=E&&(C=C*Bi+(T[1]||0)),h=C/z|0,h>1?(h>=Bi&&(h=Bi-1),p=t(J,h),g=p.length,E=T.length,l=e(p,T,g,E),l==1&&(h--,n(p,F<g?G:J,g))):(h==0&&(l=h=1),p=J.slice()),g=p.length,g<E&&p.unshift(0),n(T,p,E),l==-1&&(E=T.length,l=e(J,T,F,E),l<1&&(h++,n(T,F<E?G:J,E))),E=T.length):l===0&&(h++,T=[0]),b[c++]=h,l&&T[0]?T[E++]=Q[M]||0:(T=[Q[M]],E=1);while((M++<k||T[0]!==void 0)&&I--)}return b[0]||b.shift(),x.e=f,_n(x,a?s+li(x)+1:s)}}();function AN(t,e){var n,i,r,s,a,l,f=0,c=0,h=t.constructor,p=h.precision;if(li(t)>16)throw Error(fT+li(t));if(!t.s)return new h(Ts);for(Bn=!1,l=p,a=new h(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(i=Math.log(jc(2,c))/Math.LN10*2+5|0,l+=i,n=r=s=new h(Ts),h.precision=l;;){if(r=_n(r.times(t),l),n=n.times(++f),a=s.plus(Ml(r,n,l)),Po(a.d).slice(0,l)===Po(s.d).slice(0,l)){for(;c--;)s=_n(s.times(s),l);return h.precision=p,e==null?(Bn=!0,_n(s,p)):s}s=a}}function li(t){for(var e=t.e*Pn,n=t.d[0];n>=10;n/=10)e++;return e}function Dx(t,e,n){if(e>t.LN10.sd())throw Bn=!0,n&&(t.precision=n),Error(la+"LN10 precision limit exceeded");return _n(new t(t.LN10),e)}function zu(t){for(var e="";t--;)e+="0";return e}function Rm(t,e){var n,i,r,s,a,l,f,c,h,p=1,g=10,x=t,b=x.d,T=x.constructor,E=T.precision;if(x.s<1)throw Error(la+(x.s?"NaN":"-Infinity"));if(x.eq(Ts))return new T(0);if(e==null?(Bn=!1,c=E):c=e,x.eq(10))return e==null&&(Bn=!0),Dx(T,c);if(c+=g,T.precision=c,n=Po(b),i=n.charAt(0),s=li(x),Math.abs(s)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)x=x.times(t),n=Po(x.d),i=n.charAt(0),p++;s=li(x),i>1?(x=new T("0."+n),s++):x=new T(i+"."+n.slice(1))}else return f=Dx(T,c+2,E).times(s+""),x=Rm(new T(i+"."+n.slice(1)),c-g).plus(f),T.precision=E,e==null?(Bn=!0,_n(x,E)):x;for(l=a=x=Ml(x.minus(Ts),x.plus(Ts),c),h=_n(x.times(x),c),r=3;;){if(a=_n(a.times(h),c),f=l.plus(Ml(a,new T(r),c)),Po(f.d).slice(0,c)===Po(l.d).slice(0,c))return l=l.times(2),s!==0&&(l=l.plus(Dx(T,c+2,E).times(s+""))),l=Ml(l,new T(p),c),T.precision=E,e==null?(Bn=!0,_n(l,E)):l;l=f,r+=2}}function VO(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;)++i;for(r=e.length;e.charCodeAt(r-1)===48;)--r;if(e=e.slice(i,r),e){if(r-=i,n=n-i-1,t.e=Xd(n/Pn),t.d=[],i=(n+1)%Pn,n<0&&(i+=Pn),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=Pn;i<r;)t.d.push(+e.slice(i,i+=Pn));e=e.slice(i),i=Pn-e.length}else i-=r;for(;i--;)e+="0";if(t.d.push(+e),Bn&&(t.e>Cv||t.e<-Cv))throw Error(fT+n)}else t.s=0,t.e=0,t.d=[0];return t}function _n(t,e,n){var i,r,s,a,l,f,c,h,p=t.d;for(a=1,s=p[0];s>=10;s/=10)a++;if(i=e-a,i<0)i+=Pn,r=e,c=p[h=0];else{if(h=Math.ceil((i+1)/Pn),s=p.length,h>=s)return t;for(c=s=p[h],a=1;s>=10;s/=10)a++;i%=Pn,r=i-Pn+a}if(n!==void 0&&(s=jc(10,a-r-1),l=c/s%10|0,f=e<0||p[h+1]!==void 0||c%s,f=n<4?(l||f)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||f||n==6&&(i>0?r>0?c/jc(10,a-r):0:p[h-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return f?(s=li(t),p.length=1,e=e-s-1,p[0]=jc(10,(Pn-e%Pn)%Pn),t.e=Xd(-e/Pn)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(i==0?(p.length=h,s=1,h--):(p.length=h+1,s=jc(10,Pn-i),p[h]=r>0?(c/jc(10,a-r)%jc(10,r)|0)*s:0),f)for(;;)if(h==0){(p[0]+=s)==Bi&&(p[0]=1,++t.e);break}else{if(p[h]+=s,p[h]!=Bi)break;p[h--]=0,s=1}for(i=p.length;p[--i]===0;)p.pop();if(Bn&&(t.e>Cv||t.e<-Cv))throw Error(fT+li(t));return t}function wN(t,e){var n,i,r,s,a,l,f,c,h,p,g=t.constructor,x=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),Bn?_n(e,x):e;if(f=t.d,p=e.d,i=e.e,c=t.e,f=f.slice(),a=c-i,a){for(h=a<0,h?(n=f,a=-a,l=p.length):(n=p,i=c,l=f.length),r=Math.max(Math.ceil(x/Pn),l)+2,a>r&&(a=r,n.length=1),n.reverse(),r=a;r--;)n.push(0);n.reverse()}else{for(r=f.length,l=p.length,h=r<l,h&&(l=r),r=0;r<l;r++)if(f[r]!=p[r]){h=f[r]<p[r];break}a=0}for(h&&(n=f,f=p,p=n,e.s=-e.s),l=f.length,r=p.length-l;r>0;--r)f[l++]=0;for(r=p.length;r>a;){if(f[--r]<p[r]){for(s=r;s&&f[--s]===0;)f[s]=Bi-1;--f[s],f[r]+=Bi}f[r]-=p[r]}for(;f[--l]===0;)f.pop();for(;f[0]===0;f.shift())--i;return f[0]?(e.d=f,e.e=i,Bn?_n(e,x):e):new g(0)}function nf(t,e,n){var i,r=li(t),s=Po(t.d),a=s.length;return e?(n&&(i=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+zu(i):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r<0?"e":"e+")+r):r<0?(s="0."+zu(-r-1)+s,n&&(i=n-a)>0&&(s+=zu(i))):r>=a?(s+=zu(r+1-a),n&&(i=n-r-1)>0&&(s=s+"."+zu(i))):((i=r+1)<a&&(s=s.slice(0,i)+"."+s.slice(i)),n&&(i=n-a)>0&&(r+1===a&&(s+="."),s+=zu(i))),t.s<0?"-"+s:s}function YO(t,e){if(t.length>e)return t.length=e,!0}function LN(t){var e,n,i;function r(s){var a=this;if(!(a instanceof r))return new r(s);if(a.constructor=r,s instanceof r){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Yc+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return VO(a,s.toString())}else if(typeof s!="string")throw Error(Yc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,uV.test(s))VO(a,s);else throw Error(Yc+s)}if(r.prototype=Qe,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=LN,r.config=r.set=cV,t===void 0&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return r.config(t),r}function cV(t){if(!t||typeof t!="object")throw Error(la+"Object expected");var e,n,i,r=["precision",1,Zd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<r.length;e+=3)if((i=t[n=r[e]])!==void 0)if(Xd(i)===i&&i>=r[e+1]&&i<=r[e+2])this[n]=i;else throw Error(Yc+n+": "+i);if((i=t[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(Yc+n+": "+i);return this}var dT=LN(lV);Ts=new dT(1);const un=dT;var fV=t=>t,CN={},ON=t=>t===CN,WO=t=>function e(){return arguments.length===0||arguments.length===1&&ON(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},RN=(t,e)=>t===1?e:WO(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var s=i.filter(a=>a!==CN).length;return s>=t?e(...i):RN(t-s,WO(function(){for(var a=arguments.length,l=new Array(a),f=0;f<a;f++)l[f]=arguments[f];var c=i.map(h=>ON(h)?l.shift():h);return e(...c,...l)}))}),A0=t=>RN(t.length,t),rS=(t,e)=>{for(var n=[],i=t;i<e;++i)n[i-t]=i;return n},dV=A0((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),hV=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!n.length)return fV;var r=n.reverse(),s=r[0],a=r.slice(1);return function(){return a.reduce((l,f)=>f(l),s(...arguments))}},sS=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),PN=t=>{var e=null,n=null;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e&&r.every((a,l)=>{var f;return a===((f=e)===null||f===void 0?void 0:f[l])})||(e=r,n=t(...r)),n}};function DN(t){var e;return t===0?e=1:e=Math.floor(new un(t).abs().log(10).toNumber())+1,e}function IN(t,e,n){for(var i=new un(t),r=0,s=[];i.lt(e)&&r<1e5;)s.push(i.toNumber()),i=i.add(n),r++;return s}A0((t,e,n)=>{var i=+t,r=+e;return i+n*(r-i)});A0((t,e,n)=>{var i=e-+t;return i=i||1/0,(n-t)/i});A0((t,e,n)=>{var i=e-+t;return i=i||1/0,Math.max(0,Math.min(1,(n-t)/i))});var MN=t=>{var[e,n]=t,[i,r]=[e,n];return e>n&&([i,r]=[n,e]),[i,r]},kN=(t,e,n)=>{if(t.lte(0))return new un(0);var i=DN(t.toNumber()),r=new un(10).pow(i),s=t.div(r),a=i!==1?.05:.1,l=new un(Math.ceil(s.div(a).toNumber())).add(n).mul(a),f=l.mul(r);return e?new un(f.toNumber()):new un(Math.ceil(f.toNumber()))},mV=(t,e,n)=>{var i=new un(1),r=new un(t);if(!r.isint()&&n){var s=Math.abs(t);s<1?(i=new un(10).pow(DN(t)-1),r=new un(Math.floor(r.div(i).toNumber())).mul(i)):s>1&&(r=new un(Math.floor(t)))}else t===0?r=new un(Math.floor((e-1)/2)):n||(r=new un(Math.floor(t)));var a=Math.floor((e-1)/2),l=hV(dV(f=>r.add(new un(f-a).mul(i)).toNumber()),rS);return l(0,e)},NN=function(e,n,i,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(i-1)))return{step:new un(0),tickMin:new un(0),tickMax:new un(0)};var a=kN(new un(n).sub(e).div(i-1),r,s),l;e<=0&&n>=0?l=new un(0):(l=new un(e).add(n).div(2),l=l.sub(new un(l).mod(a)));var f=Math.ceil(l.sub(e).div(a).toNumber()),c=Math.ceil(new un(n).sub(l).div(a).toNumber()),h=f+c+1;return h>i?NN(e,n,i,r,s+1):(h<i&&(c=n>0?c+(i-h):c,f=n>0?f:f+(i-h)),{step:a,tickMin:l.sub(new un(f).mul(a)),tickMax:l.add(new un(c).mul(a))})};function pV(t){var[e,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[a,l]=MN([e,n]);if(a===-1/0||l===1/0){var f=l===1/0?[a,...rS(0,i-1).map(()=>1/0)]:[...rS(0,i-1).map(()=>-1/0),l];return e>n?sS(f):f}if(a===l)return mV(a,i,r);var{step:c,tickMin:h,tickMax:p}=NN(a,l,s,r,0),g=IN(h,p.add(new un(.1).mul(c)),c);return e>n?sS(g):g}function gV(t,e){var[n,i]=t,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,a]=MN([n,i]);if(s===-1/0||a===1/0)return[n,i];if(s===a)return[s];var l=Math.max(e,2),f=kN(new un(a).sub(s).div(l-1),r,0),c=[...IN(new un(s),new un(a),f),a];return r===!1&&(c=c.map(h=>Math.round(h))),n>i?sS(c):c}var vV=PN(pV),yV=PN(gV),jN=t=>t.rootProps.maxBarSize,bV=t=>t.rootProps.barGap,BN=t=>t.rootProps.barCategoryGap,xV=t=>t.rootProps.barSize,w0=t=>t.rootProps.stackOffset,hT=t=>t.options.chartName,mT=t=>t.rootProps.syncId,FN=t=>t.rootProps.syncMethod,pT=t=>t.options.eventEmitter,wl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},xs={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},L0=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},_V={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:wl.angleAxisId,includeHidden:!1,name:void 0,reversed:wl.reversed,scale:wl.scale,tick:wl.tick,tickCount:void 0,ticks:void 0,type:wl.type,unit:void 0},SV={allowDataOverflow:xs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:xs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:xs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:xs.scale,tick:xs.tick,tickCount:xs.tickCount,ticks:void 0,type:xs.type,unit:void 0},EV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:wl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:wl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:wl.scale,tick:wl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},TV={allowDataOverflow:xs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:xs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:xs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:xs.scale,tick:xs.tick,tickCount:xs.tickCount,ticks:void 0,type:"category",unit:void 0},gT=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?EV:_V,vT=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?TV:SV,C0=t=>t.polarOptions,yT=Ce([Gl,Hl,Fi],CG),UN=Ce([C0,yT],(t,e)=>{if(t!=null)return eo(t.innerRadius,e,0)}),$N=Ce([C0,yT],(t,e)=>{if(t!=null)return eo(t.outerRadius,e,e*.8)}),AV=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},zN=Ce([C0],AV);Ce([gT,zN],L0);var GN=Ce([yT,UN,$N],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Ce([vT,GN],L0);var wV=Ce([fn,C0,UN,$N,Gl,Hl],(t,e,n,i,r,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||i==null)){var{cx:a,cy:l,startAngle:f,endAngle:c}=e;return{cx:eo(a,r,r/2),cy:eo(l,s,s/2),innerRadius:n,outerRadius:i,startAngle:f,endAngle:c,clockWise:!1}}}),$i=(t,e)=>e,O0=(t,e,n)=>n;function ZO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ov(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZO(Object(n),!0).forEach(function(i){LV(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function LV(t,e,n){return(e=CV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CV(t){var e=OV(t,"string");return typeof e=="symbol"?e:e+""}function OV(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aS=[0,"auto"],ys={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Vl=(t,e)=>{var n=t.cartesianAxis.xAxis[e];return n??ys},bs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:aS,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:p0},tc=(t,e)=>{var n=t.cartesianAxis.yAxis[e];return n??bs},RV={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},bT=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??RV},Jr=(t,e,n)=>{switch(e){case"xAxis":return Vl(t,n);case"yAxis":return tc(t,n);case"zAxis":return bT(t,n);case"angleAxis":return gT(t,n);case"radiusAxis":return vT(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},PV=(t,e,n)=>{switch(e){case"xAxis":return Vl(t,n);case"yAxis":return tc(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},ep=(t,e,n)=>{switch(e){case"xAxis":return Vl(t,n);case"yAxis":return tc(t,n);case"angleAxis":return gT(t,n);case"radiusAxis":return vT(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},HN=t=>t.graphicalItems.countOfBars>0;function KN(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var R0=t=>t.graphicalItems.cartesianItems,DV=Ce([$i,O0],KN),qN=(t,e,n)=>t.filter(n).filter(i=>e?.includeHidden===!0?!0:!i.hide),tp=Ce([R0,Jr,DV],qN),VN=t=>t.filter(e=>e.stackId===void 0),IV=Ce([tp],VN),YN=t=>t.map(e=>e.data).filter(Boolean).flat(1),MV=Ce([tp],YN),WN=(t,e)=>{var{chartData:n=[],dataStartIndex:i,dataEndIndex:r}=e;return t.length>0?t:n.slice(i,r+1)},P0=Ce([MV,cT],WN),ZN=(t,e,n)=>e?.dataKey!=null?t.map(i=>({value:vr(i,e.dataKey)})):n.length>0?n.map(i=>i.dataKey).flatMap(i=>t.map(r=>({value:vr(r,i)}))):t.map(i=>({value:i})),D0=Ce([P0,Jr,tp],ZN);function XN(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function uf(t){return t.filter(e=>ko(e)||e instanceof Date).map(Number).filter(e=>Ls(e)===!1)}function kV(t,e,n){return!n||typeof e!="number"||Ls(e)?[]:n.length?uf(n.flatMap(i=>{var r=vr(t,i.dataKey),s,a;if(Array.isArray(r)?[s,a]=r:s=a=r,!(!Ps(s)||!Ps(a)))return[e-s,e+a]})):[]}var QN=(t,e,n)=>{var i={},r=e.reduce((s,a)=>(a.stackId==null||(s[a.stackId]==null&&(s[a.stackId]=[]),s[a.stackId].push(a)),s),i);return Object.fromEntries(Object.entries(r).map(s=>{var[a,l]=s,f=l.map(c=>c.dataKey);return[a,{stackedData:HG(t,f,n),graphicalItems:l}]}))},oS=Ce([P0,tp,w0],QN),JN=(t,e,n)=>{var{dataStartIndex:i,dataEndIndex:r}=e;if(n!=="zAxis"){var s=YG(t,i,r);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},NV=Ce([oS,lf,$i],JN),e2=(t,e,n,i)=>n.length>0?t.flatMap(r=>n.flatMap(s=>{var a,l,f=(a=s.errorBars)===null||a===void 0?void 0:a.filter(h=>XN(i,h)),c=vr(r,(l=e.dataKey)!==null&&l!==void 0?l:s.dataKey);return{value:c,errorDomain:kV(r,c,f)}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:vr(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})),jV=Ce(P0,Jr,IV,$i,e2);function BV(t){var{value:e}=t;if(ko(e)||e instanceof Date)return e}var FV=t=>{var e=t.flatMap(i=>[i.value,i.errorDomain]).flat(1),n=uf(e);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},UV=(t,e,n)=>{var i=t.map(BV).filter(r=>r!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&_M(i))?zk(0,t.length):e.allowDuplicatedCategory?i:Array.from(new Set(i))},xT=t=>{var e;if(t==null||!("domain"in t))return aS;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=uf(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:aS},_T=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n.filter(Boolean);if(r.length!==0){var s=r.flat(),a=Math.min(...s),l=Math.max(...s);return[a,l]}},t2=t=>t.referenceElements.dots,Qd=(t,e,n)=>t.filter(i=>i.ifOverflow==="extendDomain").filter(i=>e==="xAxis"?i.xAxisId===n:i.yAxisId===n),$V=Ce([t2,$i,O0],Qd),n2=t=>t.referenceElements.areas,zV=Ce([n2,$i,O0],Qd),i2=t=>t.referenceElements.lines,GV=Ce([i2,$i,O0],Qd),r2=(t,e)=>{var n=uf(t.map(i=>e==="xAxis"?i.x:i.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},HV=Ce($V,$i,r2),s2=(t,e)=>{var n=uf(t.flatMap(i=>[e==="xAxis"?i.x1:i.y1,e==="xAxis"?i.x2:i.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},KV=Ce([zV,$i],s2),a2=(t,e)=>{var n=uf(t.map(i=>e==="xAxis"?i.x:i.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},qV=Ce(GV,$i,a2),VV=Ce(HV,qV,KV,(t,e,n)=>_T(t,n,e)),YV=Ce([Jr],xT),o2=(t,e,n,i,r)=>{var s=aV(e,t.allowDataOverflow);return s??oV(e,_T(n,r,FV(i)),t.allowDataOverflow)},WV=Ce([Jr,YV,NV,jV,VV],o2),ZV=[0,1],l2=(t,e,n,i,r,s,a)=>{if(!(t==null||n==null||n.length===0)){var{dataKey:l,type:f}=t,c=Qu(e,s);return c&&l==null?zk(0,n.length):f==="category"?UV(i,t,c):r==="expand"?ZV:a}},ST=Ce([Jr,fn,P0,D0,w0,$i,WV],l2),u2=(t,e,n,i,r)=>{if(t!=null){var{scale:s,type:a}=t;if(s==="auto")return e==="radial"&&r==="radiusAxis"?"band":e==="radial"&&r==="angleAxis"?"linear":a==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!n)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(Ym(s));return l in um?l:"point"}}},np=Ce([Jr,fn,HN,hT,$i],u2);function XV(t){if(t!=null){if(t in um)return um[t]();var e="scale".concat(Ym(t));if(e in um)return um[e]()}}function ET(t,e,n,i){if(!(n==null||i==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(i);var r=XV(e);if(r!=null){var s=r.domain(n).range(i);return FG(s),s}}}var c2=(t,e,n)=>{var i=xT(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&Nd(t))return vV(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Nd(t))return yV(t,e.tickCount,e.allowDecimals)}},TT=Ce([ST,ep,np],c2),f2=(t,e,n,i)=>{if(i!=="angleAxis"&&t?.type==="number"&&Nd(e)&&Array.isArray(n)&&n.length>0){var r=e[0],s=n[0],a=e[1],l=n[n.length-1];return[Math.min(r,s),Math.max(a,l)]}return e},QV=Ce([Jr,ST,TT,$i],f2),JV=Ce(D0,Jr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,i=Array.from(uf(t.map(l=>l.value))).sort((l,f)=>l-f);if(i.length<2)return 1/0;var r=i[i.length-1]-i[0];if(r===0)return 1/0;for(var s=0;s<i.length-1;s++){var a=i[s+1]-i[s];n=Math.min(n,a)}return n/r}}),d2=Ce(JV,fn,BN,Fi,(t,e,n,i)=>i,(t,e,n,i,r)=>{if(!Ps(t))return 0;var s=e==="vertical"?i.height:i.width;if(r==="gap")return t*s/2;if(r==="no-gap"){var a=eo(n,t*s),l=t*s/2;return l-a-(l-a)/s*a}return 0}),e9=(t,e)=>{var n=Vl(t,e);return n==null||typeof n.padding!="string"?0:d2(t,"xAxis",e,n.padding)},t9=(t,e)=>{var n=tc(t,e);return n==null||typeof n.padding!="string"?0:d2(t,"yAxis",e,n.padding)},n9=Ce(Vl,e9,(t,e)=>{var n,i;if(t==null)return{left:0,right:0};var{padding:r}=t;return typeof r=="string"?{left:e,right:e}:{left:((n=r.left)!==null&&n!==void 0?n:0)+e,right:((i=r.right)!==null&&i!==void 0?i:0)+e}}),i9=Ce(tc,t9,(t,e)=>{var n,i;if(t==null)return{top:0,bottom:0};var{padding:r}=t;return typeof r=="string"?{top:e,bottom:e}:{top:((n=r.top)!==null&&n!==void 0?n:0)+e,bottom:((i=r.bottom)!==null&&i!==void 0?i:0)+e}}),r9=Ce([Fi,n9,v0,g0,(t,e,n)=>n],(t,e,n,i,r)=>{var{padding:s}=i;return r?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),s9=Ce([Fi,fn,i9,v0,g0,(t,e,n)=>n],(t,e,n,i,r,s)=>{var{padding:a}=r;return s?[i.height-a.bottom,a.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),ip=(t,e,n,i)=>{var r;switch(e){case"xAxis":return r9(t,n,i);case"yAxis":return s9(t,n,i);case"zAxis":return(r=bT(t,n))===null||r===void 0?void 0:r.range;case"angleAxis":return zN(t);case"radiusAxis":return GN(t,n);default:return}},h2=Ce([Jr,ip],L0),Jd=Ce([Jr,np,QV,h2],ET);Ce(tp,$i,(t,e)=>t.flatMap(n=>{var i;return(i=n.errorBars)!==null&&i!==void 0?i:[]}).filter(n=>XN(e,n)));function m2(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var I0=(t,e)=>e,M0=(t,e,n)=>n,a9=Ce(jE,I0,M0,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(m2)),o9=Ce(BE,I0,M0,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(m2)),p2=(t,e)=>({width:t.width,height:e.height}),l9=(t,e)=>{var n=typeof e.width=="number"?e.width:p0;return{width:n,height:t.height}},g2=Ce(Fi,Vl,p2),u9=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},c9=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},f9=Ce(Hl,Fi,a9,I0,M0,(t,e,n,i,r)=>{var s={},a;return n.forEach(l=>{var f=p2(e,l);a==null&&(a=u9(e,i,t));var c=i==="top"&&!r||i==="bottom"&&r;s[l.id]=a-Number(c)*f.height,a+=(c?-1:1)*f.height}),s}),d9=Ce(Gl,Fi,o9,I0,M0,(t,e,n,i,r)=>{var s={},a;return n.forEach(l=>{var f=l9(e,l);a==null&&(a=c9(e,i,t));var c=i==="left"&&!r||i==="right"&&r;s[l.id]=a-Number(c)*f.width,a+=(c?-1:1)*f.width}),s}),h9=(t,e)=>{var n=Fi(t),i=Vl(t,e);if(i!=null){var r=f9(t,i.orientation,i.mirror),s=r[e];return s==null?{x:n.left,y:0}:{x:n.left,y:s}}},m9=(t,e)=>{var n=Fi(t),i=tc(t,e);if(i!=null){var r=d9(t,i.orientation,i.mirror),s=r[e];return s==null?{x:0,y:n.top}:{x:s,y:n.top}}},v2=Ce(Fi,tc,(t,e)=>{var n=typeof e.width=="number"?e.width:p0;return{width:n,height:t.height}}),XO=(t,e,n)=>{switch(e){case"xAxis":return g2(t,n).width;case"yAxis":return v2(t,n).height;default:return}},y2=(t,e,n,i)=>{if(n!=null){var{allowDuplicatedCategory:r,type:s,dataKey:a}=n,l=Qu(t,i),f=e.map(c=>c.value);if(a&&l&&s==="category"&&r&&_M(f))return f}},AT=Ce([fn,D0,Jr,$i],y2),b2=(t,e,n,i)=>{if(!(n==null||n.dataKey==null)){var{type:r,scale:s}=n,a=Qu(t,i);if(a&&(r==="number"||s!=="auto"))return e.map(l=>l.value)}},wT=Ce([fn,D0,ep,$i],b2),QO=Ce([fn,PV,np,Jd,AT,wT,ip,TT,$i],(t,e,n,i,r,s,a,l,f)=>{if(e==null)return null;var c=Qu(t,f);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:f,categoricalDomain:s,duplicateDomain:r,isCategorical:c,niceTicks:l,range:a,realScaleType:n,scale:i}}),p9=(t,e,n,i,r,s,a,l,f)=>{if(!(e==null||i==null)){var c=Qu(t,f),{type:h,ticks:p,tickCount:g}=e,x=n==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,b=h==="category"&&i.bandwidth?i.bandwidth()/x:0;b=f==="angleAxis"&&s!=null&&s.length>=2?Zr(s[0]-s[1])*2*b:b;var T=p||r;if(T){var E=T.map((C,I)=>{var P=a?a.indexOf(C):C;return{index:I,coordinate:i(P)+b,value:C,offset:b}});return E.filter(C=>!Ls(C.coordinate))}return c&&l?l.map((C,I)=>({coordinate:i(C)+b,value:C,index:I,offset:b})):i.ticks?i.ticks(g).map(C=>({coordinate:i(C)+b,value:C,offset:b})):i.domain().map((C,I)=>({coordinate:i(C)+b,value:a?a[C]:C,index:I,offset:b}))}},x2=Ce([fn,ep,np,Jd,TT,ip,AT,wT,$i],p9),g9=(t,e,n,i,r,s,a)=>{if(!(e==null||n==null||i==null||i[0]===i[1])){var l=Qu(t,a),{tickCount:f}=e,c=0;return c=a==="angleAxis"&&i?.length>=2?Zr(i[0]-i[1])*2*c:c,l&&s?s.map((h,p)=>({coordinate:n(h)+c,value:h,index:p,offset:c})):n.ticks?n.ticks(f).map(h=>({coordinate:n(h)+c,value:h,offset:c})):n.domain().map((h,p)=>({coordinate:n(h)+c,value:r?r[h]:h,index:p,offset:c}))}},Wu=Ce([fn,ep,Jd,ip,AT,wT,$i],g9),jo=Ce(Jr,Jd,(t,e)=>{if(!(t==null||e==null))return Ov(Ov({},t),{},{scale:e})}),v9=Ce([Jr,np,ST,h2],ET);Ce((t,e,n)=>bT(t,n),v9,(t,e)=>{if(!(t==null||e==null))return Ov(Ov({},t),{},{scale:e})});var y9=Ce([fn,jE,BE],(t,e,n)=>{switch(t){case"horizontal":return e.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),_2=t=>t.options.defaultTooltipEventType,S2=t=>t.options.validateTooltipEventTypes;function E2(t,e,n){if(t==null)return e;var i=t?"axis":"item";return n==null?e:n.includes(i)?i:e}function LT(t,e){var n=_2(t),i=S2(t);return E2(e,n,i)}function b9(t){return ut(e=>LT(e,t))}var T2=(t,e)=>{var n,i=Number(e);if(!(Ls(i)||e==null))return i>=0?t==null||(n=t[i])===null||n===void 0?void 0:n.value:void 0},x9=t=>t.tooltip.settings,qu={active:!1,index:null,dataKey:void 0,coordinate:void 0},_9={itemInteraction:{click:qu,hover:qu},axisInteraction:{click:qu,hover:qu},keyboardInteraction:qu,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},A2=ca({name:"tooltip",initialState:_9,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var n=Il(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:S9,removeTooltipEntrySettings:E9,setTooltipSettingsState:T9,setActiveMouseOverItemIndex:w2,mouseLeaveItem:A9,mouseLeaveChart:L2,setActiveClickItemIndex:w9,setMouseOverAxisIndex:C2,setMouseClickAxisIndex:L9,setSyncInteraction:lS,setKeyboardInteraction:uS}=A2.actions,C9=A2.reducer;function JO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function pg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JO(Object(n),!0).forEach(function(i){O9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function O9(t,e,n){return(e=R9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R9(t){var e=P9(t,"string");return typeof e=="symbol"?e:e+""}function P9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D9(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function I9(t){return t.index!=null}var O2=(t,e,n,i)=>{if(e==null)return qu;var r=D9(t,e,n);if(r==null)return qu;if(r.active)return r;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(I9(r)){if(s)return pg(pg({},r),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i};return pg(pg({},qu),{},{coordinate:r.coordinate})},CT=(t,e)=>{var n=t?.index;if(n==null)return null;var i=Number(n);if(!Ps(i))return n;var r=0,s=1/0;return e.length>0&&(s=e.length-1),String(Math.max(r,Math.min(i,s)))},R2=(t,e,n,i,r,s,a,l)=>{if(!(s==null||l==null)){var f=a[0],c=f==null?void 0:l(f.positions,s);if(c!=null)return c;var h=r?.[Number(s)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(i.top+e)/2};default:return{x:(i.left+t)/2,y:h.coordinate}}}},P2=(t,e,n,i)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var r;return n==="hover"?r=t.itemInteraction.hover.dataKey:r=t.itemInteraction.click.dataKey,r==null&&i!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(s=>{var a;return((a=s.settings)===null||a===void 0?void 0:a.dataKey)===r})},rp=t=>t.options.tooltipPayloadSearcher,eh=t=>t.tooltip;function eR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function tR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eR(Object(n),!0).forEach(function(i){M9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function M9(t,e,n){return(e=k9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k9(t){var e=N9(t,"string");return typeof e=="symbol"?e:e+""}function N9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function j9(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function B9(t,e){return t??e}var D2=(t,e,n,i,r,s,a)=>{if(!(e==null||s==null)){var{chartData:l,computedData:f,dataStartIndex:c,dataEndIndex:h}=n,p=[];return t.reduce((g,x)=>{var b,{dataDefinedOnItem:T,settings:E}=x,C=B9(T,l),I=j9(C,c,h),P=(b=E?.dataKey)!==null&&b!==void 0?b:i?.dataKey,M=E?.nameKey,k;if(i!=null&&i.dataKey&&Array.isArray(I)&&!Array.isArray(I[0])&&a==="axis"?k=SM(I,i.dataKey,r):k=s(I,e,f,M),Array.isArray(k))k.forEach(F=>{var G=tR(tR({},E),{},{name:F.name,unit:F.unit,color:void 0,fill:void 0});g.push(jC({tooltipEntrySettings:G,dataKey:F.dataKey,payload:F.payload,value:vr(F.payload,F.dataKey),name:F.name}))});else{var z;g.push(jC({tooltipEntrySettings:E,dataKey:P,payload:k,value:vr(k,P),name:(z=vr(k,M))!==null&&z!==void 0?z:E?.name}))}return g},p)}},zi=t=>{var e=fn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},th=t=>t.tooltip.settings.axisId,sr=t=>{var e=zi(t),n=th(t);return ep(t,e,n)},OT=Ce([sr,fn,HN,hT,zi],u2),F9=Ce([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),U9=Ce([zi,th],KN),k0=Ce([F9,sr,U9],qN),$9=Ce([k0],YN),cf=Ce([$9,lf],WN),RT=Ce([cf,sr,k0],ZN),z9=Ce([sr],xT),G9=Ce([cf,k0,w0],QN),H9=Ce([G9,lf,zi],JN),K9=Ce([k0],VN),q9=Ce([cf,sr,K9,zi],e2),V9=Ce([t2,zi,th],Qd),Y9=Ce([V9,zi],r2),W9=Ce([n2,zi,th],Qd),Z9=Ce([W9,zi],s2),X9=Ce([i2,zi,th],Qd),Q9=Ce([X9,zi],a2),J9=Ce([Y9,Q9,Z9],_T),e7=Ce([sr,z9,H9,q9,J9],o2),I2=Ce([sr,fn,cf,RT,w0,zi,e7],l2),t7=Ce([I2,sr,OT],c2),n7=Ce([sr,I2,t7,zi],f2),M2=t=>{var e=zi(t),n=th(t),i=!1;return ip(t,e,n,i)},k2=Ce([sr,M2],L0),N2=Ce([sr,OT,n7,k2],ET),i7=Ce([fn,RT,sr,zi],y2),r7=Ce([fn,RT,sr,zi],b2),s7=(t,e,n,i,r,s,a,l)=>{if(e){var{type:f}=e,c=Qu(t,l);if(i){var h=n==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,p=f==="category"&&i.bandwidth?i.bandwidth()/h:0;return p=l==="angleAxis"&&r!=null&&r?.length>=2?Zr(r[0]-r[1])*2*p:p,c&&a?a.map((g,x)=>({coordinate:i(g)+p,value:g,index:x,offset:p})):i.domain().map((g,x)=>({coordinate:i(g)+p,value:s?s[g]:g,index:x,offset:p}))}}},Yl=Ce([fn,sr,OT,N2,M2,i7,r7,zi],s7),PT=Ce([_2,S2,x9],(t,e,n)=>E2(n.shared,t,e)),j2=t=>t.tooltip.settings.trigger,DT=t=>t.tooltip.settings.defaultIndex,N0=Ce([eh,PT,j2,DT],O2),rf=Ce([N0,cf],CT),B2=Ce([Yl,rf],T2),F2=Ce([N0],t=>{if(t)return t.dataKey}),U2=Ce([eh,PT,j2,DT],P2),a7=Ce([Gl,Hl,fn,Fi,Yl,DT,U2,rp],R2),o7=Ce([N0,a7],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),l7=Ce([N0],t=>t.active),u7=Ce([U2,rf,lf,sr,B2,rp,PT],D2),c7=Ce([u7],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function nR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function iR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nR(Object(n),!0).forEach(function(i){f7(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function f7(t,e,n){return(e=d7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d7(t){var e=h7(t,"string");return typeof e=="symbol"?e:e+""}function h7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var m7=()=>ut(sr),p7=()=>{var t=m7(),e=ut(Yl),n=ut(N2);return Tm(iR(iR({},t),{},{scale:n}),e)},g7=()=>ut(hT),IT=(t,e)=>e,$2=(t,e,n)=>n,MT=(t,e,n,i)=>i,v7=Ce(Yl,t=>o0(t,e=>e.coordinate)),kT=Ce([eh,IT,$2,MT],O2),z2=Ce([kT,cf],CT),y7=(t,e,n)=>{if(e!=null){var i=eh(t);return e==="axis"?n==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:n==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},G2=Ce([eh,IT,$2,MT],P2),Rv=Ce([Gl,Hl,fn,Fi,Yl,MT,G2,rp],R2),b7=Ce([kT,Rv],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),H2=Ce(Yl,z2,T2),x7=Ce([G2,z2,lf,sr,H2,rp,IT],D2),_7=Ce([kT],t=>({isActive:t.active,activeIndex:t.index})),S7=(t,e,n,i,r,s,a,l)=>{if(!(!t||!e||!i||!r||!s)){var f=WG(t.chartX,t.chartY,e,n,l);if(f){var c=XG(f,e),h=jG(c,a,s,i,r),p=ZG(e,s,h,f);return{activeIndex:String(h),activeCoordinate:p}}}};function cS(){return cS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cS.apply(null,arguments)}function rR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function gg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rR(Object(n),!0).forEach(function(i){E7(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function E7(t,e,n){return(e=T7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T7(t){var e=A7(t,"string");return typeof e=="symbol"?e:e+""}function A7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function w7(t){var{coordinate:e,payload:n,index:i,offset:r,tooltipAxisBandSize:s,layout:a,cursor:l,tooltipEventType:f,chartName:c}=t,h=e,p=n,g=i;if(!l||!h||c!=="ScatterChart"&&f!=="axis")return null;var x,b;if(c==="ScatterChart")x=h,b=B5;else if(c==="BarChart")x=F5(a,h,r,s),b=Bk;else if(a==="radial"){var{cx:T,cy:E,radius:C,startAngle:I,endAngle:P}=Fk(h);x={cx:T,cy:E,startAngle:I,endAngle:P,innerRadius:C,outerRadius:C},b=$k}else x={points:AH(a,h,r)},b=Mk;var M=typeof l=="object"&&"className"in l?l.className:void 0,k=gg(gg(gg(gg({stroke:"#ccc",pointerEvents:"none"},r),x),nn(l,!1)),{},{payload:p,payloadIndex:g,className:gn("recharts-tooltip-cursor",M)});return O.isValidElement(l)?O.cloneElement(l,k):O.createElement(b,k)}function L7(t){var e=p7(),n=Ok(),i=y0(),r=g7();return O.createElement(w7,cS({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:i,tooltipAxisBandSize:e,chartName:r}))}var K2=O.createContext(null),C7=()=>O.useContext(K2),Ix={exports:{}},sR;function O7(){return sR||(sR=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(f,c,h){this.fn=f,this.context=c,this.once=h||!1}function s(f,c,h,p,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new r(h,p||f,g),b=n?n+c:c;return f._events[b]?f._events[b].fn?f._events[b]=[f._events[b],x]:f._events[b].push(x):(f._events[b]=x,f._eventsCount++),f}function a(f,c){--f._eventsCount===0?f._events=new i:delete f._events[c]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],h,p;if(this._eventsCount===0)return c;for(p in h=this._events)e.call(h,p)&&c.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},l.prototype.listeners=function(c){var h=n?n+c:c,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,b=new Array(x);g<x;g++)b[g]=p[g].fn;return b},l.prototype.listenerCount=function(c){var h=n?n+c:c,p=this._events[h];return p?p.fn?1:p.length:0},l.prototype.emit=function(c,h,p,g,x,b){var T=n?n+c:c;if(!this._events[T])return!1;var E=this._events[T],C=arguments.length,I,P;if(E.fn){switch(E.once&&this.removeListener(c,E.fn,void 0,!0),C){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,h),!0;case 3:return E.fn.call(E.context,h,p),!0;case 4:return E.fn.call(E.context,h,p,g),!0;case 5:return E.fn.call(E.context,h,p,g,x),!0;case 6:return E.fn.call(E.context,h,p,g,x,b),!0}for(P=1,I=new Array(C-1);P<C;P++)I[P-1]=arguments[P];E.fn.apply(E.context,I)}else{var M=E.length,k;for(P=0;P<M;P++)switch(E[P].once&&this.removeListener(c,E[P].fn,void 0,!0),C){case 1:E[P].fn.call(E[P].context);break;case 2:E[P].fn.call(E[P].context,h);break;case 3:E[P].fn.call(E[P].context,h,p);break;case 4:E[P].fn.call(E[P].context,h,p,g);break;default:if(!I)for(k=1,I=new Array(C-1);k<C;k++)I[k-1]=arguments[k];E[P].fn.apply(E[P].context,I)}}return!0},l.prototype.on=function(c,h,p){return s(this,c,h,p,!1)},l.prototype.once=function(c,h,p){return s(this,c,h,p,!0)},l.prototype.removeListener=function(c,h,p,g){var x=n?n+c:c;if(!this._events[x])return this;if(!h)return a(this,x),this;var b=this._events[x];if(b.fn)b.fn===h&&(!g||b.once)&&(!p||b.context===p)&&a(this,x);else{for(var T=0,E=[],C=b.length;T<C;T++)(b[T].fn!==h||g&&!b[T].once||p&&b[T].context!==p)&&E.push(b[T]);E.length?this._events[x]=E.length===1?E[0]:E:a(this,x)}return this},l.prototype.removeAllListeners=function(c){var h;return c?(h=n?n+c:c,this._events[h]&&a(this,h)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(Ix)),Ix.exports}var R7=O7();const P7=Qr(R7);var Pm=new P7,fS="recharts.syncEvent.tooltip",aR="recharts.syncEvent.brush";function q2(t,e){if(e){var n=Number.parseInt(e,10);if(!Ls(n))return t?.[n]}}var D7={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},V2=ca({name:"options",initialState:D7,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),I7=V2.reducer,{createEventEmitter:M7}=V2.actions;function k7(t){return t.tooltip.syncInteraction}var N7={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Y2=ca({name:"chartData",initialState:N7,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:i}=e.payload;n!=null&&(t.dataStartIndex=n),i!=null&&(t.dataEndIndex=i)}}}),{setChartData:oR,setDataStartEndIndexes:j7,setComputedData:uoe}=Y2.actions,B7=Y2.reducer,W2=()=>{};function F7(){var t=ut(mT),e=ut(pT),n=yi(),i=ut(FN),r=ut(Yl),s=y0(),a=FE(),l=ut(f=>f.rootProps.className);O.useEffect(()=>{if(t==null)return W2;var f=(c,h,p)=>{if(e!==p&&t===c){if(i==="index"){n(h);return}if(r!=null){var g;if(typeof i=="function"){var x={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},b=i(r,x);g=r[b]}else i==="value"&&(g=r.find(z=>String(z.value)===h.payload.label));var{coordinate:T}=h.payload;if(g==null||h.payload.active===!1||T==null||a==null){n(lS({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:E,y:C}=T,I=Math.min(E,a.x+a.width),P=Math.min(C,a.y+a.height),M={x:s==="horizontal"?g.coordinate:I,y:s==="horizontal"?P:g.coordinate},k=lS({active:h.payload.active,coordinate:M,dataKey:h.payload.dataKey,index:String(g.index),label:h.payload.label});n(k)}}};return Pm.on(fS,f),()=>{Pm.off(fS,f)}},[l,n,e,t,i,r,s,a])}function U7(){var t=ut(mT),e=ut(pT),n=yi();O.useEffect(()=>{if(t==null)return W2;var i=(r,s,a)=>{e!==a&&t===r&&n(j7(s))};return Pm.on(aR,i),()=>{Pm.off(aR,i)}},[n,e,t])}function $7(){var t=yi();O.useEffect(()=>{t(M7())},[t]),F7(),U7()}function z7(t,e,n,i,r,s){var a=ut(g=>y7(g,t,e)),l=ut(pT),f=ut(mT),c=ut(FN),h=ut(k7),p=h?.active;O.useEffect(()=>{if(!p&&f!=null&&l!=null){var g=lS({active:s,coordinate:n,dataKey:a,index:r,label:typeof i=="number"?String(i):i});Pm.emit(fS,f,g,l)}},[p,n,a,r,i,l,f,c,s])}function lR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function uR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lR(Object(n),!0).forEach(function(i){G7(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function G7(t,e,n){return(e=H7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H7(t){var e=K7(t,"string");return typeof e=="symbol"?e:e+""}function K7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function q7(t){return t.dataKey}function V7(t,e){return O.isValidElement(t)?O.cloneElement(t,e):typeof t=="function"?O.createElement(t,e):O.createElement(g5,e)}var cR=[],Y7={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Yd.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function dS(t){var e=Kl(t,Y7),{active:n,allowEscapeViewBox:i,animationDuration:r,animationEasing:s,content:a,filterNull:l,isAnimationActive:f,offset:c,payloadUniqBy:h,position:p,reverseDirection:g,useTranslate3d:x,wrapperStyle:b,cursor:T,shared:E,trigger:C,defaultIndex:I,portal:P,axisId:M}=e,k=yi(),z=typeof I=="number"?String(I):I;O.useEffect(()=>{k(T9({shared:E,trigger:C,axisId:M,active:n,defaultIndex:z}))},[k,E,C,M,n,z]);var F=FE(),G=Ik(),K=b9(E),{activeIndex:V,isActive:Q}=ut(Le=>_7(Le,K,C,z)),J=ut(Le=>x7(Le,K,C,z)),ve=ut(Le=>H2(Le,K,C,z)),se=ut(Le=>b7(Le,K,C,z)),ye=J,X=C7(),oe=n??Q,[ie,Ie]=w6([ye,oe]),Z=K==="axis"?ve:void 0;z7(K,C,se,Z,V,oe);var Y=P??X;if(Y==null)return null;var ne=ye??cR;oe||(ne=cR),l&&ne.length&&(ne=Q8(ye.filter(Le=>Le.value!=null&&(Le.hide!==!0||e.includeHidden)),h,q7));var me=ne.length>0,Te=O.createElement(E5,{allowEscapeViewBox:i,animationDuration:r,animationEasing:s,isAnimationActive:f,active:oe,coordinate:se,hasPayload:me,offset:c,position:p,reverseDirection:g,useTranslate3d:x,viewBox:F,wrapperStyle:b,lastBoundingBox:ie,innerRef:Ie,hasPortalFromProps:!!P},V7(a,uR(uR({},e),{},{payload:ne,label:Z,active:oe,coordinate:se,accessibilityLayer:G})));return O.createElement(O.Fragment,null,dI.createPortal(Te,Y),oe&&O.createElement(L7,{cursor:T,tooltipEventType:K,coordinate:se,payload:ye,index:V}))}var Mx={},kx={},fR;function W7(){return fR||(fR=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i=0,r={}){typeof r!="object"&&(r={});let s=null,a=null,l=null,f=0,c=null,h;const{leading:p=!1,trailing:g=!0,maxWait:x}=r,b="maxWait"in r,T=b?Math.max(Number(x)||0,i):0,E=F=>(s!==null&&(h=n.apply(a,s)),s=a=null,f=F,h),C=F=>(f=F,c=setTimeout(k,i),p&&s!==null?E(F):h),I=F=>(c=null,g&&s!==null?E(F):h),P=F=>{if(l===null)return!0;const G=F-l,K=G>=i||G<0,V=b&&F-f>=T;return K||V},M=F=>{const G=l===null?0:F-l,K=i-G,V=T-(F-f);return b?Math.min(K,V):K},k=()=>{const F=Date.now();if(P(F))return I(F);c=setTimeout(k,M(F))},z=function(...F){const G=Date.now(),K=P(G);if(s=F,a=this,l=G,K){if(c===null)return C(G);if(b)return clearTimeout(c),c=setTimeout(k,i),E(G)}return c===null&&(c=setTimeout(k,i)),h};return z.cancel=()=>{c!==null&&clearTimeout(c),f=0,l=s=a=c=null},z.flush=()=>c===null?h:I(Date.now()),z}t.debounce=e}(kx)),kx}var dR;function Z7(){return dR||(dR=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=W7();function n(i,r=0,s={}){const{leading:a=!0,trailing:l=!0}=s;return e.debounce(i,r,{leading:a,maxWait:r,trailing:l})}t.throttle=n}(Mx)),Mx}var Nx,hR;function X7(){return hR||(hR=1,Nx=Z7().throttle),Nx}var Q7=X7();const J7=Qr(Q7);var mm=function(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s]};function mR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function jx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mR(Object(n),!0).forEach(function(i){eY(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function eY(t,e,n){return(e=tY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tY(t){var e=nY(t,"string");return typeof e=="symbol"?e:e+""}function nY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hS=O.forwardRef((t,e)=>{var{aspect:n,initialDimension:i={width:-1,height:-1},width:r="100%",height:s="100%",minWidth:a=0,minHeight:l,maxHeight:f,children:c,debounce:h=0,id:p,className:g,onResize:x,style:b={}}=t,T=O.useRef(null),E=O.useRef();E.current=x,O.useImperativeHandle(e,()=>T.current);var[C,I]=O.useState({containerWidth:i.width,containerHeight:i.height}),P=O.useCallback((k,z)=>{I(F=>{var G=Math.round(k),K=Math.round(z);return F.containerWidth===G&&F.containerHeight===K?F:{containerWidth:G,containerHeight:K}})},[]);O.useEffect(()=>{var k=K=>{var V,{width:Q,height:J}=K[0].contentRect;P(Q,J),(V=E.current)===null||V===void 0||V.call(E,Q,J)};h>0&&(k=J7(k,h,{trailing:!0,leading:!1}));var z=new ResizeObserver(k),{width:F,height:G}=T.current.getBoundingClientRect();return P(F,G),z.observe(T.current),()=>{z.disconnect()}},[P,h]);var M=O.useMemo(()=>{var{containerWidth:k,containerHeight:z}=C;if(k<0||z<0)return null;mm(Uc(r)||Uc(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,r,s),mm(!n||n>0,"The aspect(%s) must be greater than zero.",n);var F=Uc(r)?k:r,G=Uc(s)?z:s;return n&&n>0&&(F?G=F/n:G&&(F=G*n),f&&G>f&&(G=f)),mm(F>0||G>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,F,G,r,s,a,l,n),O.Children.map(c,K=>O.cloneElement(K,{width:F,height:G,style:jx({width:F,height:G},K.props.style)}))},[n,c,s,f,l,a,C,r]);return O.createElement("div",{id:p?"".concat(p):void 0,className:gn("recharts-responsive-container",g),style:jx(jx({},b),{},{width:r,height:s,minWidth:a,minHeight:l,maxHeight:f}),ref:T},O.createElement("div",{style:{width:0,height:0,overflow:"visible"}},M))}),Z2=t=>null;Z2.displayName="Cell";function pR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function mS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pR(Object(n),!0).forEach(function(i){iY(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function iY(t,e,n){return(e=rY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rY(t){var e=sY(t,"string");return typeof e=="symbol"?e:e+""}function sY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var od={widthCache:{},cacheCount:0},aY=2e3,oY={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},gR="recharts_measurement_span";function lY(t){var e=mS({},t);return Object.keys(e).forEach(n=>{e[n]||delete e[n]}),e}var pm=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Yd.isSsr)return{width:0,height:0};var i=lY(n),r=JSON.stringify({text:e,copyStyle:i});if(od.widthCache[r])return od.widthCache[r];try{var s=document.getElementById(gR);s||(s=document.createElement("span"),s.setAttribute("id",gR),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var a=mS(mS({},oY),i);Object.assign(s.style,a),s.textContent="".concat(e);var l=s.getBoundingClientRect(),f={width:l.width,height:l.height};return od.widthCache[r]=f,++od.cacheCount>aY&&(od.cacheCount=0,od.widthCache={}),f}catch{return{width:0,height:0}}},vR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,yR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uY=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,cY=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,X2={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},fY=Object.keys(X2),gd="NaN";function dY(t,e){return t*X2[e]}class Yr{static parse(e){var n,[,i,r]=(n=cY.exec(e))!==null&&n!==void 0?n:[];return new Yr(parseFloat(i),r??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Ls(e)&&(this.unit=""),n!==""&&!uY.test(n)&&(this.num=NaN,this.unit=""),fY.includes(n)&&(this.num=dY(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Yr(NaN,""):new Yr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Yr(NaN,""):new Yr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Yr(NaN,""):new Yr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Yr(NaN,""):new Yr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ls(this.num)}}function Q2(t){if(t.includes(gd))return gd;for(var e=t;e.includes("*")||e.includes("/");){var n,[,i,r,s]=(n=vR.exec(e))!==null&&n!==void 0?n:[],a=Yr.parse(i??""),l=Yr.parse(s??""),f=r==="*"?a.multiply(l):a.divide(l);if(f.isNaN())return gd;e=e.replace(vR,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,h,p,g]=(c=yR.exec(e))!==null&&c!==void 0?c:[],x=Yr.parse(h??""),b=Yr.parse(g??""),T=p==="+"?x.add(b):x.subtract(b);if(T.isNaN())return gd;e=e.replace(yR,T.toString())}return e}var bR=/\(([^()]*)\)/;function hY(t){for(var e=t,n;(n=bR.exec(e))!=null;){var[,i]=n;e=e.replace(bR,Q2(i))}return e}function mY(t){var e=t.replace(/\s+/g,"");return e=hY(e),e=Q2(e),e}function pY(t){try{return mY(t)}catch{return gd}}function Bx(t){var e=pY(t.slice(5,-1));return e===gd?"":e}var gY=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],vY=["dx","dy","angle","className","breakAll"];function pS(){return pS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pS.apply(null,arguments)}function xR(t,e){if(t==null)return{};var n,i,r=yY(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function yY(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var J2=/[ \f\n\r\t\v\u2028\u2029]+/,ej=t=>{var{children:e,breakAll:n,style:i}=t;try{var r=[];Sn(e)||(n?r=e.toString().split(""):r=e.toString().split(J2));var s=r.map(l=>({word:l,width:pm(l,i).width})),a=n?0:pm("",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},bY=(t,e,n,i,r)=>{var{maxLines:s,children:a,style:l,breakAll:f}=t,c=it(s),h=a,p=function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Q.reduce((J,ve)=>{var{word:se,width:ye}=ve,X=J[J.length-1];if(X&&(i==null||r||X.width+ye+n<Number(i)))X.words.push(se),X.width+=ye+n;else{var oe={words:[se],width:ye};J.push(oe)}return J},[])},g=p(e),x=V=>V.reduce((Q,J)=>Q.width>J.width?Q:J);if(!c||r)return g;var b=g.length>s||x(g).width>Number(i);if(!b)return g;for(var T="",E=V=>{var Q=h.slice(0,V),J=ej({breakAll:f,style:l,children:Q+T}).wordsWithComputedWidth,ve=p(J),se=ve.length>s||x(ve).width>Number(i);return[se,ve]},C=0,I=h.length-1,P=0,M;C<=I&&P<=h.length-1;){var k=Math.floor((C+I)/2),z=k-1,[F,G]=E(z),[K]=E(k);if(!F&&!K&&(C=k+1),F&&K&&(I=k-1),!F&&K){M=G;break}P++}return M||g},_R=t=>{var e=Sn(t)?[]:t.toString().split(J2);return[{words:e}]},xY=t=>{var{width:e,scaleToFit:n,children:i,style:r,breakAll:s,maxLines:a}=t;if((e||n)&&!Yd.isSsr){var l,f,c=ej({breakAll:s,children:i,style:r});if(c){var{wordsWithComputedWidth:h,spaceWidth:p}=c;l=h,f=p}else return _R(i);return bY({breakAll:s,children:i,maxLines:a,style:r},l,f,e,n)}return _R(i)},SR="#808080",NT=O.forwardRef((t,e)=>{var{x:n=0,y:i=0,lineHeight:r="1em",capHeight:s="0.71em",scaleToFit:a=!1,textAnchor:l="start",verticalAnchor:f="end",fill:c=SR}=t,h=xR(t,gY),p=O.useMemo(()=>xY({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:a,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,a,h.style,h.width]),{dx:g,dy:x,angle:b,className:T,breakAll:E}=h,C=xR(h,vY);if(!ko(n)||!ko(i))return null;var I=n+(it(g)?g:0),P=i+(it(x)?x:0),M;switch(f){case"start":M=Bx("calc(".concat(s,")"));break;case"middle":M=Bx("calc(".concat((p.length-1)/2," * -").concat(r," + (").concat(s," / 2))"));break;default:M=Bx("calc(".concat(p.length-1," * -").concat(r,")"));break}var k=[];if(a){var z=p[0].width,{width:F}=h;k.push("scale(".concat(it(F)?F/z:1,")"))}return b&&k.push("rotate(".concat(b,", ").concat(I,", ").concat(P,")")),k.length&&(C.transform=k.join(" ")),O.createElement("text",pS({},nn(C,!0),{ref:e,x:I,y:P,className:gn("recharts-text",T),textAnchor:l,fill:c.includes("url")?SR:c}),p.map((G,K)=>{var V=G.words.join(E?"":" ");return O.createElement("tspan",{x:I,dy:K===0?M:r,key:"".concat(V,"-").concat(K)},V)}))});NT.displayName="Text";var _Y=["offset"],SY=["labelRef"];function ER(t,e){if(t==null)return{};var n,i,r=EY(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function EY(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function TR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ai(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TR(Object(n),!0).forEach(function(i){TY(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function TY(t,e,n){return(e=AY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AY(t){var e=wY(t,"string");return typeof e=="symbol"?e:e+""}function wY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ll(){return Ll=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ll.apply(null,arguments)}var LY=t=>{var{value:e,formatter:n}=t,i=Sn(t.children)?e:t.children;return typeof n=="function"?n(i):i},jT=t=>t!=null&&typeof t=="function",CY=(t,e)=>{var n=Zr(e-t),i=Math.min(Math.abs(e-t),360);return n*i},OY=(t,e,n)=>{var{position:i,viewBox:r,offset:s,className:a}=t,{cx:l,cy:f,innerRadius:c,outerRadius:h,startAngle:p,endAngle:g,clockWise:x}=r,b=(c+h)/2,T=CY(p,g),E=T>=0?1:-1,C,I;i==="insideStart"?(C=p+E*s,I=x):i==="insideEnd"?(C=g-E*s,I=!x):i==="end"&&(C=g+E*s,I=x),I=T<=0?I:!I;var P=rr(l,f,b,C),M=rr(l,f,b,C+(I?1:-1)*359),k="M".concat(P.x,",").concat(P.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(I?0:1,`,
    `).concat(M.x,",").concat(M.y),z=Sn(t.id)?Rd("recharts-radial-line-"):t.id;return O.createElement("text",Ll({},n,{dominantBaseline:"central",className:gn("recharts-radial-bar-label",a)}),O.createElement("defs",null,O.createElement("path",{id:z,d:k})),O.createElement("textPath",{xlinkHref:"#".concat(z)},e))},RY=t=>{var{viewBox:e,offset:n,position:i}=t,{cx:r,cy:s,innerRadius:a,outerRadius:l,startAngle:f,endAngle:c}=e,h=(f+c)/2;if(i==="outside"){var{x:p,y:g}=rr(r,s,l+n,h);return{x:p,y:g,textAnchor:p>=r?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"end"};var x=(a+l)/2,{x:b,y:T}=rr(r,s,x,h);return{x:b,y:T,textAnchor:"middle",verticalAnchor:"middle"}},PY=(t,e)=>{var{parentViewBox:n,offset:i,position:r}=t,{x:s,y:a,width:l,height:f}=e,c=f>=0?1:-1,h=c*i,p=c>0?"end":"start",g=c>0?"start":"end",x=l>=0?1:-1,b=x*i,T=x>0?"end":"start",E=x>0?"start":"end";if(r==="top"){var C={x:s+l/2,y:a-c*i,textAnchor:"middle",verticalAnchor:p};return ai(ai({},C),n?{height:Math.max(a-n.y,0),width:l}:{})}if(r==="bottom"){var I={x:s+l/2,y:a+f+h,textAnchor:"middle",verticalAnchor:g};return ai(ai({},I),n?{height:Math.max(n.y+n.height-(a+f),0),width:l}:{})}if(r==="left"){var P={x:s-b,y:a+f/2,textAnchor:T,verticalAnchor:"middle"};return ai(ai({},P),n?{width:Math.max(P.x-n.x,0),height:f}:{})}if(r==="right"){var M={x:s+l+b,y:a+f/2,textAnchor:E,verticalAnchor:"middle"};return ai(ai({},M),n?{width:Math.max(n.x+n.width-M.x,0),height:f}:{})}var k=n?{width:l,height:f}:{};return r==="insideLeft"?ai({x:s+b,y:a+f/2,textAnchor:E,verticalAnchor:"middle"},k):r==="insideRight"?ai({x:s+l-b,y:a+f/2,textAnchor:T,verticalAnchor:"middle"},k):r==="insideTop"?ai({x:s+l/2,y:a+h,textAnchor:"middle",verticalAnchor:g},k):r==="insideBottom"?ai({x:s+l/2,y:a+f-h,textAnchor:"middle",verticalAnchor:p},k):r==="insideTopLeft"?ai({x:s+b,y:a+h,textAnchor:E,verticalAnchor:g},k):r==="insideTopRight"?ai({x:s+l-b,y:a+h,textAnchor:T,verticalAnchor:g},k):r==="insideBottomLeft"?ai({x:s+b,y:a+f-h,textAnchor:E,verticalAnchor:p},k):r==="insideBottomRight"?ai({x:s+l-b,y:a+f-h,textAnchor:T,verticalAnchor:p},k):r&&typeof r=="object"&&(it(r.x)||Uc(r.x))&&(it(r.y)||Uc(r.y))?ai({x:s+eo(r.x,l),y:a+eo(r.y,f),textAnchor:"end",verticalAnchor:"end"},k):ai({x:s+l/2,y:a+f/2,textAnchor:"middle",verticalAnchor:"middle"},k)},DY=t=>"cx"in t&&it(t.cx);function _s(t){var{offset:e=5}=t,n=ER(t,_Y),i=ai({offset:e},n),{viewBox:r,position:s,value:a,children:l,content:f,className:c="",textBreakAll:h,labelRef:p}=i,g=FE(),x=r||g;if(!x||Sn(a)&&Sn(l)&&!O.isValidElement(f)&&typeof f!="function")return null;if(O.isValidElement(f)){var{labelRef:b}=i,T=ER(i,SY);return O.cloneElement(f,T)}var E;if(typeof f=="function"){if(E=O.createElement(f,i),O.isValidElement(E))return E}else E=LY(i);var C=DY(x),I=nn(i,!0);if(C&&(s==="insideStart"||s==="insideEnd"||s==="end"))return OY(i,E,I);var P=C?RY(i):PY(i,x);return O.createElement(NT,Ll({ref:p,className:gn("recharts-label",c)},I,P,{breakAll:h}),E)}_s.displayName="Label";var tj=t=>{var{cx:e,cy:n,angle:i,startAngle:r,endAngle:s,r:a,radius:l,innerRadius:f,outerRadius:c,x:h,y:p,top:g,left:x,width:b,height:T,clockWise:E,labelViewBox:C}=t;if(C)return C;if(it(b)&&it(T)){if(it(h)&&it(p))return{x:h,y:p,width:b,height:T};if(it(g)&&it(x))return{x:g,y:x,width:b,height:T}}if(it(h)&&it(p))return{x:h,y:p,width:0,height:0};if(it(e)&&it(n))return{cx:e,cy:n,startAngle:r||i||0,endAngle:s||i||0,innerRadius:f||0,outerRadius:c||l||a||0,clockWise:E};if(t.viewBox)return t.viewBox},IY=(t,e,n)=>{if(!t)return null;var i={viewBox:e,labelRef:n};return t===!0?O.createElement(_s,Ll({key:"label-implicit"},i)):ko(t)?O.createElement(_s,Ll({key:"label-implicit",value:t},i)):O.isValidElement(t)?t.type===_s?O.cloneElement(t,ai({key:"label-implicit"},i)):O.createElement(_s,Ll({key:"label-implicit",content:t},i)):jT(t)?O.createElement(_s,Ll({key:"label-implicit",content:t},i)):t&&typeof t=="object"?O.createElement(_s,Ll({},t,{key:"label-implicit"},i)):null},MY=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&i&&!e.label)return null;var{children:r,labelRef:s}=e,a=tj(e),l=SE(r,_s).map((c,h)=>O.cloneElement(c,{viewBox:n||a,key:"label-".concat(h)}));if(!i)return l;var f=IY(e.label,n||a,s);return[f,...l]};_s.parseViewBox=tj;_s.renderCallByParent=MY;var Fx={},Ux={},AR;function kY(){return AR||(AR=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e}(Ux)),Ux}var $x={},wR;function NY(){return wR||(wR=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e}($x)),$x}var LR;function jY(){return LR||(LR=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kY(),n=NY(),i=wE();function r(s){if(i.isArrayLike(s))return e.last(n.toArray(s))}t.last=r}(Fx)),Fx}var zx,CR;function BY(){return CR||(CR=1,zx=jY().last),zx}var FY=BY();const UY=Qr(FY);var $Y=["valueAccessor"],zY=["data","dataKey","clockWise","id","textBreakAll"];function Pv(){return Pv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Pv.apply(null,arguments)}function OR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function RR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OR(Object(n),!0).forEach(function(i){GY(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function GY(t,e,n){return(e=HY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HY(t){var e=KY(t,"string");return typeof e=="symbol"?e:e+""}function KY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PR(t,e){if(t==null)return{};var n,i,r=qY(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qY(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var VY=t=>Array.isArray(t.value)?UY(t.value):t.value;function Yu(t){var{valueAccessor:e=VY}=t,n=PR(t,$Y),{data:i,dataKey:r,clockWise:s,id:a,textBreakAll:l}=n,f=PR(n,zY);return!i||!i.length?null:O.createElement(Cs,{className:"recharts-label-list"},i.map((c,h)=>{var p=Sn(r)?e(c,h):vr(c&&c.payload,r),g=Sn(a)?{}:{id:"".concat(a,"-").concat(h)};return O.createElement(_s,Pv({},nn(c,!0),f,g,{parentViewBox:c.parentViewBox,value:p,textBreakAll:l,viewBox:_s.parseViewBox(Sn(s)?c:RR(RR({},c),{},{clockWise:s})),key:"label-".concat(h),index:h}))}))}Yu.displayName="LabelList";function YY(t,e){return t?t===!0?O.createElement(Yu,{key:"labelList-implicit",data:e}):O.isValidElement(t)||jT(t)?O.createElement(Yu,{key:"labelList-implicit",data:e,content:t}):typeof t=="object"?O.createElement(Yu,Pv({data:e},t,{key:"labelList-implicit"})):null:null}function WY(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:i}=t,r=SE(i,Yu).map((a,l)=>O.cloneElement(a,{data:e,key:"labelList-".concat(l)}));if(!n)return r;var s=YY(t.label,e);return[s,...r]}Yu.renderCallByParent=WY;function gS(){return gS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},gS.apply(null,arguments)}var nj=t=>{var{cx:e,cy:n,r:i,className:r}=t,s=gn("recharts-dot",r);return e===+e&&n===+n&&i===+i?O.createElement("circle",gS({},nn(t,!1),xE(t),{className:s,cx:e,cy:n,r:i})):null},ZY={radiusAxis:{},angleAxis:{}},ij=ca({name:"polarAxis",initialState:ZY,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:coe,removeRadiusAxis:foe,addAngleAxis:doe,removeAngleAxis:hoe}=ij.actions,XY=ij.reducer,QY={countOfBars:0,cartesianItems:[],polarItems:[]},rj=ca({name:"graphicalItems",initialState:QY,reducers:{addBar(t){t.countOfBars+=1},removeBar(t){t.countOfBars-=1},addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:n,next:i}=e.payload,r=Il(t).cartesianItems.indexOf(n);r>-1&&(t.cartesianItems[r]=i)},removeCartesianGraphicalItem(t,e){var n=Il(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var n=Il(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)}}}),{addBar:JY,removeBar:eW,addCartesianGraphicalItem:tW,replaceCartesianGraphicalItem:nW,removeCartesianGraphicalItem:iW,addPolarGraphicalItem:moe,removePolarGraphicalItem:poe}=rj.actions,rW=rj.reducer;function DR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function IR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DR(Object(n),!0).forEach(function(i){sW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function sW(t,e,n){return(e=aW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aW(t){var e=oW(t,"string");return typeof e=="symbol"?e:e+""}function oW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lW(t){var e=yi(),n=O.useRef(null);return O.useEffect(()=>{var i=IR(IR({},t),{},{stackId:wk(t.stackId)});n.current===null?e(tW(i)):n.current!==i&&e(nW({prev:n.current,next:i})),n.current=i},[e,t]),O.useEffect(()=>()=>{n.current&&(e(iW(n.current)),n.current=null)},[e]),null}var Gx={},MR;function uW(){return MR||(MR=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const r=n[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${r}]`}let i=n;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(n)===i}t.isPlainObject=e}(Gx)),Gx}var Hx,kR;function cW(){return kR||(kR=1,Hx=uW().isPlainObject),Hx}var fW=cW();const dW=Qr(fW);function Dv(){return Dv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Dv.apply(null,arguments)}var NR=(t,e,n,i,r)=>{var s=n-i,a;return a="M ".concat(t,",").concat(e),a+="L ".concat(t+n,",").concat(e),a+="L ".concat(t+n-s/2,",").concat(e+r),a+="L ".concat(t+n-s/2-i,",").concat(e+r),a+="L ".concat(t,",").concat(e," Z"),a},hW={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},mW=t=>{var e=Kl(t,hW),n=O.useRef(),[i,r]=O.useState(-1);O.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var E=n.current.getTotalLength();E&&r(E)}catch{}},[]);var{x:s,y:a,upperWidth:l,lowerWidth:f,height:c,className:h}=e,{animationEasing:p,animationDuration:g,animationBegin:x,isUpdateAnimationActive:b}=e;if(s!==+s||a!==+a||l!==+l||f!==+f||c!==+c||l===0&&f===0||c===0)return null;var T=gn("recharts-trapezoid",h);return b?O.createElement(tf,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:c,x:s,y:a},to:{upperWidth:l,lowerWidth:f,height:c,x:s,y:a},duration:g,animationEasing:p,isActive:b},E=>{var{upperWidth:C,lowerWidth:I,height:P,x:M,y:k}=E;return O.createElement(tf,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,easing:p},O.createElement("path",Dv({},nn(e,!0),{className:T,d:NR(M,k,C,I,P),ref:n})))}):O.createElement("g",null,O.createElement("path",Dv({},nn(e,!0),{className:T,d:NR(s,a,l,f,c)})))},pW=["option","shapeType","propTransformer","activeClassName","isActive"];function gW(t,e){if(t==null)return{};var n,i,r=vW(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vW(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function jR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Iv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jR(Object(n),!0).forEach(function(i){yW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function yW(t,e,n){return(e=bW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bW(t){var e=xW(t,"string");return typeof e=="symbol"?e:e+""}function xW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _W(t,e){return Iv(Iv({},e),t)}function SW(t,e){return t==="symbols"}function BR(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return O.createElement(Bk,n);case"trapezoid":return O.createElement(mW,n);case"sector":return O.createElement($k,n);case"symbols":if(SW(e))return O.createElement(GM,n);break;default:return null}}function EW(t){return O.isValidElement(t)?t.props:t}function TW(t){var{option:e,shapeType:n,propTransformer:i=_W,activeClassName:r="recharts-active-shape",isActive:s}=t,a=gW(t,pW),l;if(O.isValidElement(e))l=O.cloneElement(e,Iv(Iv({},a),EW(e)));else if(typeof e=="function")l=e(a);else if(dW(e)&&typeof e!="boolean"){var f=i(e,a);l=O.createElement(BR,{shapeType:n,elementProps:f})}else{var c=a;l=O.createElement(BR,{shapeType:n,elementProps:c})}return s?O.createElement(Cs,{className:r},l):l}var sj=(t,e)=>{var n=yi();return(i,r)=>s=>{t?.(i,r,s),n(w2({activeIndex:String(r),activeDataKey:e,activeCoordinate:i.tooltipPosition}))}},aj=t=>{var e=yi();return(n,i)=>r=>{t?.(n,i,r),e(A9())}},oj=(t,e)=>{var n=yi();return(i,r)=>s=>{t?.(i,r,s),n(w9({activeIndex:String(r),activeDataKey:e,activeCoordinate:i.tooltipPosition}))}};function lj(t){var{fn:e,args:n}=t,i=yi(),r=wr();return O.useEffect(()=>{if(!r){var s=e(n);return i(S9(s)),()=>{i(E9(s))}}},[e,n,i,r]),null}var AW=()=>{};function uj(t){var{legendPayload:e}=t,n=yi(),i=wr();return O.useEffect(()=>i?AW:(n(u5(e)),()=>{n(c5(e))}),[n,i,e]),null}function cj(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=O.useRef(Rd(e)),i=O.useRef(t);return i.current!==t&&(n.current=Rd(e),i.current=t),n.current}var wW=Ce([Fi],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),LW=Ce([wW,Gl,Hl],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),CW=t=>{var e=wr();return ut(n=>jo(n,"xAxis",t,e))},OW=t=>{var e=wr();return ut(n=>jo(n,"yAxis",t,e))},BT=()=>ut(LW),RW=()=>ut(c7);function FR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function UR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FR(Object(n),!0).forEach(function(i){PW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function PW(t,e,n){return(e=DW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DW(t){var e=IW(t,"string");return typeof e=="symbol"?e:e+""}function IW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MW=t=>{var{point:e,childIndex:n,mainColor:i,activeDot:r,dataKey:s}=t;if(r===!1||e.x==null||e.y==null)return null;var a=UR(UR({index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:i??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},nn(r,!1)),xE(r)),l;return O.isValidElement(r)?l=O.cloneElement(r,a):typeof r=="function"?l=r(a):l=O.createElement(nj,a),O.createElement(Cs,{className:"recharts-active-dot"},l)};function kW(t){var{points:e,mainColor:n,activeDot:i,itemDataKey:r}=t,s=ut(rf),a=RW();if(e==null||a==null)return null;var l=e.find(f=>a.includes(f.payload));return Sn(l)?null:MW({point:l,childIndex:Number(s),mainColor:n,dataKey:r,activeDot:i})}var NW=()=>{var t=yi();return O.useEffect(()=>(t(JY()),()=>{t(eW())})),null},jW=["children"];function BW(t,e){if(t==null)return{};var n,i,r=FW(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function FW(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var $R=()=>{},fj=O.createContext({addErrorBar:$R,removeErrorBar:$R}),UW={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},dj=O.createContext(UW);function hj(t){var{children:e}=t,n=BW(t,jW);return O.createElement(dj.Provider,{value:n},e)}var $W=()=>O.useContext(dj),mj=t=>{var{children:e,xAxisId:n,yAxisId:i,zAxisId:r,dataKey:s,data:a,stackId:l,hide:f,type:c,barSize:h}=t,[p,g]=O.useState([]),x=O.useCallback(E=>{g(C=>[...C,E])},[g]),b=O.useCallback(E=>{g(C=>C.filter(I=>I!==E))},[g]),T=wr();return O.createElement(fj.Provider,{value:{addErrorBar:x,removeErrorBar:b}},O.createElement(lW,{type:c,data:a,xAxisId:n,yAxisId:i,zAxisId:r,dataKey:s,errorBars:p,stackId:l,hide:f,barSize:h,isPanorama:T}),e)};function zW(t){var{addErrorBar:e,removeErrorBar:n}=O.useContext(fj);return O.useEffect(()=>(e(t),()=>{n(t)}),[e,n,t]),null}var GW=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function pj(t,e,n){return(e=HW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HW(t){var e=KW(t,"string");return typeof e=="symbol"?e:e+""}function KW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dm(){return Dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Dm.apply(null,arguments)}function qW(t,e){if(t==null)return{};var n,i,r=VW(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function VW(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function YW(t){var{direction:e,width:n,dataKey:i,isAnimationActive:r,animationBegin:s,animationDuration:a,animationEasing:l}=t,f=qW(t,GW),c=nn(f,!1),{data:h,dataPointFormatter:p,xAxisId:g,yAxisId:x,errorBarOffset:b}=$W(),T=CW(g),E=OW(x);if(T?.scale==null||E?.scale==null||h==null||e==="x"&&T.type!=="number")return null;var C=h.map(I=>{var{x:P,y:M,value:k,errorVal:z}=p(I,i,e);if(!z)return null;var F=[],G,K;if(Array.isArray(z)?[G,K]=z:G=K=z,e==="x"){var{scale:V}=T,Q=M+b,J=Q+n,ve=Q-n,se=V(k-G),ye=V(k+K);F.push({x1:ye,y1:J,x2:ye,y2:ve}),F.push({x1:se,y1:Q,x2:ye,y2:Q}),F.push({x1:se,y1:J,x2:se,y2:ve})}else if(e==="y"){var{scale:X}=E,oe=P+b,ie=oe-n,Ie=oe+n,Z=X(k-G),Y=X(k+K);F.push({x1:ie,y1:Y,x2:Ie,y2:Y}),F.push({x1:oe,y1:Z,x2:oe,y2:Y}),F.push({x1:ie,y1:Z,x2:Ie,y2:Z})}var ne="".concat(P+b,"px ").concat(M+b,"px");return O.createElement(Cs,Dm({className:"recharts-errorBar",key:"bar-".concat(F.map(me=>"".concat(me.x1,"-").concat(me.x2,"-").concat(me.y1,"-").concat(me.y2)))},c),F.map(me=>{var Te=r?{transformOrigin:"".concat(me.x1-5,"px")}:void 0;return O.createElement(tf,{from:{transform:"scaleY(0)",transformOrigin:ne},to:{transform:"scaleY(1)",transformOrigin:ne},begin:s,easing:l,isActive:r,duration:a,key:"line-".concat(me.x1,"-").concat(me.x2,"-").concat(me.y1,"-").concat(me.y2),style:{transformOrigin:ne}},O.createElement("line",Dm({},me,{style:Te})))}))});return O.createElement(Cs,{className:"recharts-errorBars"},C)}var gj=O.createContext(void 0);function WW(t){var e=O.useContext(gj);return t??e??"x"}function vj(t){var{direction:e,children:n}=t;return O.createElement(gj.Provider,{value:e},n)}var yj={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function ZW(t){var e=WW(t.direction),{width:n,isAnimationActive:i,animationBegin:r,animationDuration:s,animationEasing:a}=Kl(t,yj);return O.createElement(O.Fragment,null,O.createElement(zW,{dataKey:t.dataKey,direction:e}),O.createElement(YW,Dm({},t,{direction:e,width:n,isAnimationActive:i,animationBegin:r,animationDuration:s,animationEasing:a})))}class bj extends O.Component{render(){return O.createElement(ZW,this.props)}}pj(bj,"defaultProps",yj);pj(bj,"displayName","ErrorBar");var XW="Invariant failed";function QW(t,e){throw new Error(XW)}var JW=["x","y"];function vS(){return vS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vS.apply(null,arguments)}function zR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function tm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zR(Object(n),!0).forEach(function(i){eZ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function eZ(t,e,n){return(e=tZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tZ(t){var e=nZ(t,"string");return typeof e=="symbol"?e:e+""}function nZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iZ(t,e){if(t==null)return{};var n,i,r=rZ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function rZ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function sZ(t,e){var{x:n,y:i}=t,r=iZ(t,JW),s="".concat(n),a=parseInt(s,10),l="".concat(i),f=parseInt(l,10),c="".concat(e.height||r.height),h=parseInt(c,10),p="".concat(e.width||r.width),g=parseInt(p,10);return tm(tm(tm(tm(tm({},e),r),a?{x:a}:{}),f?{y:f}:{}),{},{height:h,width:g,name:e.name,radius:e.radius})}function xj(t){return O.createElement(TW,vS({shapeType:"rectangle",propTransformer:sZ,activeClassName:"recharts-active-bar"},t))}var aZ=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(i,r)=>{if(it(e))return e;var s=it(i)||Sn(i);return s?e(i,r):(s||QW(),n)}};function FT(t,e){var n,i,r=ut(c=>Vl(c,t)),s=ut(c=>tc(c,e)),a=(n=r?.allowDataOverflow)!==null&&n!==void 0?n:ys.allowDataOverflow,l=(i=s?.allowDataOverflow)!==null&&i!==void 0?i:bs.allowDataOverflow,f=a||l;return{needClip:f,needClipX:a,needClipY:l}}function _j(t){var{xAxisId:e,yAxisId:n,clipPathId:i}=t,r=BT(),{needClipX:s,needClipY:a,needClip:l}=FT(e,n);if(!l)return null;var{x:f,y:c,width:h,height:p}=r;return O.createElement("clipPath",{id:"clipPath-".concat(i)},O.createElement("rect",{x:s?f:f-h/2,y:a?c:c-p/2,width:s?h:h*2,height:a?p:p*2}))}var oZ=["onMouseEnter","onMouseLeave","onClick"],lZ=["value","background","tooltipPosition"],uZ=["onMouseEnter","onClick","onMouseLeave"];function Im(){return Im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Im.apply(null,arguments)}function GR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function pr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GR(Object(n),!0).forEach(function(i){j0(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function j0(t,e,n){return(e=cZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cZ(t){var e=fZ(t,"string");return typeof e=="symbol"?e:e+""}function fZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yS(t,e){if(t==null)return{};var n,i,r=dZ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dZ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var hZ=t=>{var{dataKey:e,name:n,fill:i,legendType:r,hide:s}=t;return[{inactive:s,dataKey:e,type:r,color:i,value:m0(n,e),payload:t}]};function mZ(t){var{dataKey:e,stroke:n,strokeWidth:i,fill:r,name:s,hide:a,unit:l}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:r,dataKey:e,nameKey:void 0,name:m0(s,e),hide:a,type:t.tooltipType,color:t.fill,unit:l}}}function pZ(t){var e=ut(rf),{data:n,dataKey:i,background:r,allOtherBarProps:s}=t,{onMouseEnter:a,onMouseLeave:l,onClick:f}=s,c=yS(s,oZ),h=sj(a,i),p=aj(l),g=oj(f,i);if(!r||n==null)return null;var x=nn(r,!1);return O.createElement(O.Fragment,null,n.map((b,T)=>{var{value:E,background:C,tooltipPosition:I}=b,P=yS(b,lZ);if(!C)return null;var M=h(b,T),k=p(b,T),z=g(b,T),F=pr(pr(pr(pr(pr({option:r,isActive:String(T)===e},P),{},{fill:"#eee"},C),x),_E(c,b,T)),{},{onMouseEnter:M,onMouseLeave:k,onClick:z,dataKey:i,index:T,className:"recharts-bar-background-rectangle"});return O.createElement(xj,Im({key:"background-bar-".concat(T)},F))}))}function Sj(t){var{data:e,props:n,showLabels:i}=t,r=nn(n,!1),{shape:s,dataKey:a,activeBar:l}=n,f=ut(rf),c=ut(F2),{onMouseEnter:h,onClick:p,onMouseLeave:g}=n,x=yS(n,uZ),b=sj(h,a),T=aj(g),E=oj(p,a);return e?O.createElement(O.Fragment,null,e.map((C,I)=>{var P=l&&String(I)===f&&(c==null||a===c),M=P?l:s,k=pr(pr(pr({},r),C),{},{isActive:P,option:M,index:I,dataKey:a});return O.createElement(Cs,Im({className:"recharts-bar-rectangle"},_E(x,C,I),{onMouseEnter:b(C,I),onMouseLeave:T(C,I),onClick:E(C,I),key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(I)}),O.createElement(xj,k))}),i&&Yu.renderCallByParent(n,e)):null}function gZ(t){var{props:e,previousRectanglesRef:n}=t,{data:i,layout:r,isAnimationActive:s,animationBegin:a,animationDuration:l,animationEasing:f,onAnimationEnd:c,onAnimationStart:h}=e,p=n.current,g=cj(e,"recharts-bar-"),[x,b]=O.useState(!1),T=O.useCallback(()=>{typeof c=="function"&&c(),b(!1)},[c]),E=O.useCallback(()=>{typeof h=="function"&&h(),b(!0)},[h]);return O.createElement(tf,{begin:a,duration:l,isActive:s,easing:f,from:{t:0},to:{t:1},onAnimationEnd:T,onAnimationStart:E,key:g},C=>{var{t:I}=C,P=I===1?i:i.map((M,k)=>{var z=p&&p[k];if(z){var F=Va(z.x,M.x),G=Va(z.y,M.y),K=Va(z.width,M.width),V=Va(z.height,M.height);return pr(pr({},M),{},{x:F(I),y:G(I),width:K(I),height:V(I)})}if(r==="horizontal"){var Q=Va(0,M.height),J=Q(I);return pr(pr({},M),{},{y:M.y+M.height-J,height:J})}var ve=Va(0,M.width),se=ve(I);return pr(pr({},M),{},{width:se})});return I>0&&(n.current=P),O.createElement(Cs,null,O.createElement(Sj,{props:e,data:P,showLabels:!x}))})}function vZ(t){var{data:e,isAnimationActive:n}=t,i=O.useRef(null);return n&&e&&e.length&&(i.current==null||i.current!==e)?O.createElement(gZ,{previousRectanglesRef:i,props:t}):O.createElement(Sj,{props:t,data:e,showLabels:!0})}var Ej=0,yZ=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:vr(t,e)}};class bZ extends O.PureComponent{constructor(){super(...arguments),j0(this,"id",Rd("recharts-bar-"))}render(){var{hide:e,data:n,dataKey:i,className:r,xAxisId:s,yAxisId:a,needClip:l,background:f,id:c,layout:h}=this.props;if(e)return null;var p=gn("recharts-bar",r),g=Sn(c)?this.id:c;return O.createElement(Cs,{className:p},l&&O.createElement("defs",null,O.createElement(_j,{clipPathId:g,xAxisId:s,yAxisId:a})),O.createElement(Cs,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(g,")"):null},O.createElement(pZ,{data:n,dataKey:i,background:f,allOtherBarProps:this.props}),O.createElement(vZ,this.props)),O.createElement(vj,{direction:h==="horizontal"?"y":"x"},this.props.children))}}var Tj={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Yd.isSsr,legendType:"rect",minPointSize:Ej,xAxisId:0,yAxisId:0};function xZ(t){var{xAxisId:e,yAxisId:n,hide:i,legendType:r,minPointSize:s,activeBar:a,animationBegin:l,animationDuration:f,animationEasing:c,isAnimationActive:h}=Kl(t,Tj),{needClip:p}=FT(e,n),g=y0(),x=wr(),b=O.useMemo(()=>({barSize:t.barSize,data:void 0,dataKey:t.dataKey,maxBarSize:t.maxBarSize,minPointSize:s,stackId:wk(t.stackId)}),[t.barSize,t.dataKey,t.maxBarSize,s,t.stackId]),T=SE(t.children,Z2),E=ut(P=>YZ(P,e,n,x,b,T));if(g!=="vertical"&&g!=="horizontal")return null;var C,I=E?.[0];return I==null||I.height==null||I.width==null?C=0:C=g==="vertical"?I.height/2:I.width/2,O.createElement(hj,{xAxisId:e,yAxisId:n,data:E,dataPointFormatter:yZ,errorBarOffset:C},O.createElement(bZ,Im({},t,{layout:g,needClip:p,data:E,xAxisId:e,yAxisId:n,hide:i,legendType:r,minPointSize:s,activeBar:a,animationBegin:l,animationDuration:f,animationEasing:c,isAnimationActive:h})))}function _Z(t){var{layout:e,barSettings:{dataKey:n,minPointSize:i},pos:r,bandSize:s,xAxis:a,yAxis:l,xAxisTicks:f,yAxisTicks:c,stackedData:h,displayedData:p,offset:g,cells:x}=t,b=e==="horizontal"?l:a,T=h?b.scale.domain():null,E=KG({numericAxis:b});return p.map((C,I)=>{var P,M,k,z,F,G;h?P=UG(h[I],T):(P=vr(C,n),Array.isArray(P)||(P=[E,P]));var K=aZ(i,Ej)(P[1],I);if(e==="horizontal"){var V,[Q,J]=[l.scale(P[0]),l.scale(P[1])];M=MC({axis:a,ticks:f,bandSize:s,offset:r.offset,entry:C,index:I}),k=(V=J??Q)!==null&&V!==void 0?V:void 0,z=r.size;var ve=Q-J;if(F=Ls(ve)?0:ve,G={x:M,y:g.top,width:z,height:g.height},Math.abs(K)>0&&Math.abs(F)<Math.abs(K)){var se=Zr(F||K)*(Math.abs(K)-Math.abs(F));k-=se,F+=se}}else{var[ye,X]=[a.scale(P[0]),a.scale(P[1])];if(M=ye,k=MC({axis:l,ticks:c,bandSize:s,offset:r.offset,entry:C,index:I}),z=X-ye,F=r.size,G={x:g.left,y:k,width:g.width,height:F},Math.abs(K)>0&&Math.abs(z)<Math.abs(K)){var oe=Zr(z||K)*(Math.abs(K)-Math.abs(z));z+=oe}}var ie=pr(pr({},C),{},{x:M,y:k,width:z,height:F,value:h?P:P[1],payload:C,background:G,tooltipPosition:{x:M+z/2,y:k+F/2}},x&&x[I]&&x[I].props);return ie})}class Mv extends O.PureComponent{render(){return O.createElement(mj,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},O.createElement(NW,null),O.createElement(uj,{legendPayload:hZ(this.props)}),O.createElement(lj,{fn:mZ,args:this.props}),O.createElement(xZ,this.props))}}j0(Mv,"displayName","Bar");j0(Mv,"defaultProps",Tj);function HR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function vg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HR(Object(n),!0).forEach(function(i){SZ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function SZ(t,e,n){return(e=EZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EZ(t){var e=TZ(t,"string");return typeof e=="symbol"?e:e+""}function TZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AZ=(t,e)=>e,wZ=(t,e,n)=>n,LZ=(t,e,n,i)=>i,UT=(t,e,n,i,r)=>r,CZ=(t,e,n,i,r)=>r.maxBarSize,OZ=(t,e,n,i,r,s)=>s,KR=(t,e,n)=>{var i=n??t;if(!Sn(i))return eo(i,e,0)},RZ=Ce([fn,R0,AZ,wZ,LZ],(t,e,n,i,r)=>e.filter(s=>t==="horizontal"?s.xAxisId===n:s.yAxisId===i).filter(s=>s.isPanorama===r).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),PZ=(t,e,n,i)=>{var r=fn(t);return r==="horizontal"?oS(t,"yAxis",n,i):oS(t,"xAxis",e,i)},DZ=(t,e,n)=>{var i=fn(t);return i==="horizontal"?XO(t,"xAxis",e):XO(t,"yAxis",n)};function IZ(t){return t.stackId!=null&&t.dataKey!=null}var MZ=(t,e,n)=>{var i={},r=t.filter(IZ),s=t.filter(c=>c.stackId==null),a=r.reduce((c,h)=>(c[h.stackId]||(c[h.stackId]=[]),c[h.stackId].push(h),c),i),l=Object.entries(a).map(c=>{var[h,p]=c,g=p.map(b=>b.dataKey),x=KR(e,n,p[0].barSize);return{stackId:h,dataKeys:g,barSize:x}}),f=s.map(c=>{var h=[c.dataKey].filter(g=>g!=null),p=KR(e,n,c.barSize);return{stackId:void 0,dataKeys:h,barSize:p}});return[...l,...f]},kZ=Ce([RZ,xV,DZ],MZ),NZ=(t,e,n,i,r)=>{var s,a,l=fn(t),f=jN(t),{maxBarSize:c}=r,h=Sn(c)?f:c,p,g;return l==="horizontal"?(p=jo(t,"xAxis",e,i),g=Wu(t,"xAxis",e,i)):(p=jo(t,"yAxis",n,i),g=Wu(t,"yAxis",n,i)),(s=(a=Tm(p,g,!0))!==null&&a!==void 0?a:h)!==null&&s!==void 0?s:0},Aj=(t,e,n,i)=>{var r=fn(t),s,a;return r==="horizontal"?(s=jo(t,"xAxis",e,i),a=Wu(t,"xAxis",e,i)):(s=jo(t,"yAxis",n,i),a=Wu(t,"yAxis",n,i)),Tm(s,a)};function jZ(t,e,n,i,r){var s=i.length;if(!(s<1)){var a=eo(t,n,0,!0),l,f=[];if(Ps(i[0].barSize)){var c=!1,h=n/s,p=i.reduce((C,I)=>C+(I.barSize||0),0);p+=(s-1)*a,p>=n&&(p-=(s-1)*a,a=0),p>=n&&h>0&&(c=!0,h*=.9,p=s*h);var g=(n-p)/2>>0,x={offset:g-a,size:0};l=i.reduce((C,I)=>{var P,M={stackId:I.stackId,dataKeys:I.dataKeys,position:{offset:x.offset+x.size+a,size:c?h:(P=I.barSize)!==null&&P!==void 0?P:0}},k=[...C,M];return x=k[k.length-1].position,k},f)}else{var b=eo(e,n,0,!0);n-2*b-(s-1)*a<=0&&(a=0);var T=(n-2*b-(s-1)*a)/s;T>1&&(T>>=0);var E=Ps(r)?Math.min(T,r):T;l=i.reduce((C,I,P)=>[...C,{stackId:I.stackId,dataKeys:I.dataKeys,position:{offset:b+(T+a)*P+(T-E)/2,size:E}}],f)}return l}}var BZ=(t,e,n,i,r,s,a)=>{var l=Sn(a)?e:a,f=jZ(n,i,r!==s?r:s,t,l);return r!==s&&f!=null&&(f=f.map(c=>vg(vg({},c),{},{position:vg(vg({},c.position),{},{offset:c.position.offset-r/2})}))),f},FZ=Ce([kZ,jN,bV,BN,NZ,Aj,CZ],BZ),UZ=(t,e,n,i)=>jo(t,"xAxis",e,i),$Z=(t,e,n,i)=>jo(t,"yAxis",n,i),zZ=(t,e,n,i)=>Wu(t,"xAxis",e,i),GZ=(t,e,n,i)=>Wu(t,"yAxis",n,i),HZ=Ce([FZ,UT],(t,e)=>{if(t!=null){var n=t.find(i=>i.stackId===e.stackId&&i.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),KZ=(t,e)=>{if(!(!t||e?.dataKey==null)){var{stackId:n}=e;if(n!=null){var i=t[n];if(i){var{stackedData:r}=i;if(r){var s=r.find(a=>a.key===e.dataKey);return s}}}}},qZ=Ce([R0,UT],(t,e)=>{if(t.some(n=>n.type==="bar"&&e.dataKey===n.dataKey&&e.stackId===n.stackId&&e.stackId===n.stackId))return e}),VZ=Ce([PZ,UT],KZ),YZ=Ce([Fi,UZ,$Z,zZ,GZ,HZ,fn,cT,Aj,VZ,qZ,OZ],(t,e,n,i,r,s,a,l,f,c,h,p)=>{var{chartData:g,dataStartIndex:x,dataEndIndex:b}=l;if(!(h==null||s==null||a!=="horizontal"&&a!=="vertical"||e==null||n==null||i==null||r==null||f==null)){var{data:T}=h,E;if(T!=null&&T.length>0?E=T:E=g?.slice(x,b+1),E!=null)return _Z({layout:a,barSettings:h,pos:s,bandSize:f,xAxis:e,yAxis:n,xAxisTicks:i,yAxisTicks:r,stackedData:c,displayedData:E,offset:t,cells:p})}}),WZ=t=>{var{chartData:e}=t,n=yi(),i=wr();return O.useEffect(()=>i?()=>{}:(n(oR(e)),()=>{n(oR(void 0))}),[e,n,i]),null},qR={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},wj=ca({name:"brush",initialState:qR,reducers:{setBrushSettings(t,e){return e.payload==null?qR:e.payload}}}),{setBrushSettings:goe}=wj.actions,ZZ=wj.reducer;function XZ(t,e,n){return(e=QZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QZ(t){var e=JZ(t,"string");return typeof e=="symbol"?e:e+""}function JZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class $T{static create(e){return new $T(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(i)switch(i){case"start":return this.scale(e);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+r}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var n=this.range(),i=n[0],r=n[n.length-1];return i<=r?e>=i&&e<=r:e>=r&&e<=i}}XZ($T,"EPS",1e-4);function eX(t){return(t%180+180)%180}var tX=function(e){var{width:n,height:i}=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=eX(r),a=s*Math.PI/180,l=Math.atan(i/n),f=a>l&&a<Math.PI-l?i/Math.sin(a):n/Math.cos(a);return Math.abs(f)},nX={dots:[],areas:[],lines:[]},Lj=ca({name:"referenceElements",initialState:nX,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Il(t).dots.findIndex(i=>i===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Il(t).areas.findIndex(i=>i===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Il(t).lines.findIndex(i=>i===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:voe,removeDot:yoe,addArea:boe,removeArea:xoe,addLine:_oe,removeLine:Soe}=Lj.actions,iX=Lj.reducer,rX=O.createContext(void 0),sX=t=>{var{children:e}=t,[n]=O.useState("".concat(Rd("recharts"),"-clip")),i=BT();if(i==null)return null;var{x:r,y:s,width:a,height:l}=i;return O.createElement(rX.Provider,{value:n},O.createElement("defs",null,O.createElement("clipPath",{id:n},O.createElement("rect",{x:r,y:s,height:l,width:a}))),e)};function Kx(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var i in e)if({}.hasOwnProperty.call(e,i)&&!{}.hasOwnProperty.call(t,i))return!1;return!0}function Cj(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var i=[],r=0;r<t.length;r+=e)i.push(t[r]);return i}function aX(t,e,n){var i={width:t.width+e.width,height:t.height+e.height};return tX(i,n)}function oX(t,e,n){var i=n==="width",{x:r,y:s,width:a,height:l}=t;return e===1?{start:i?r:s,end:i?r+a:s+l}:{start:i?r+a:s+l,end:i?r:s}}function kv(t,e,n,i,r){if(t*e<t*i||t*e>t*r)return!1;var s=n();return t*(e-t*s/2-i)>=0&&t*(e+t*s/2-r)<=0}function lX(t,e){return Cj(t,e+1)}function uX(t,e,n,i,r){for(var s=(i||[]).slice(),{start:a,end:l}=e,f=0,c=1,h=a,p=function(){var b=i?.[f];if(b===void 0)return{v:Cj(i,c)};var T=f,E,C=()=>(E===void 0&&(E=n(b,T)),E),I=b.coordinate,P=f===0||kv(t,I,C,h,l);P||(f=0,h=a,c+=1),P&&(h=I+t*(C()/2+r),f+=c)},g;c<=s.length;)if(g=p(),g)return g.v;return[]}function VR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function dr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VR(Object(n),!0).forEach(function(i){cX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function cX(t,e,n){return(e=fX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fX(t){var e=dX(t,"string");return typeof e=="symbol"?e:e+""}function dX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hX(t,e,n,i,r){for(var s=(i||[]).slice(),a=s.length,{start:l}=e,{end:f}=e,c=function(g){var x=s[g],b,T=()=>(b===void 0&&(b=n(x,g)),b);if(g===a-1){var E=t*(x.coordinate+t*T()/2-f);s[g]=x=dr(dr({},x),{},{tickCoord:E>0?x.coordinate-E*t:x.coordinate})}else s[g]=x=dr(dr({},x),{},{tickCoord:x.coordinate});var C=kv(t,x.tickCoord,T,l,f);C&&(f=x.tickCoord-t*(T()/2+r),s[g]=dr(dr({},x),{},{isShow:!0}))},h=a-1;h>=0;h--)c(h);return s}function mX(t,e,n,i,r,s){var a=(i||[]).slice(),l=a.length,{start:f,end:c}=e;if(s){var h=i[l-1],p=n(h,l-1),g=t*(h.coordinate+t*p/2-c);a[l-1]=h=dr(dr({},h),{},{tickCoord:g>0?h.coordinate-g*t:h.coordinate});var x=kv(t,h.tickCoord,()=>p,f,c);x&&(c=h.tickCoord-t*(p/2+r),a[l-1]=dr(dr({},h),{},{isShow:!0}))}for(var b=s?l-1:l,T=function(I){var P=a[I],M,k=()=>(M===void 0&&(M=n(P,I)),M);if(I===0){var z=t*(P.coordinate-t*k()/2-f);a[I]=P=dr(dr({},P),{},{tickCoord:z<0?P.coordinate-z*t:P.coordinate})}else a[I]=P=dr(dr({},P),{},{tickCoord:P.coordinate});var F=kv(t,P.tickCoord,k,f,c);F&&(f=P.tickCoord+t*(k()/2+r),a[I]=dr(dr({},P),{},{isShow:!0}))},E=0;E<b;E++)T(E);return a}function zT(t,e,n){var{tick:i,ticks:r,viewBox:s,minTickGap:a,orientation:l,interval:f,tickFormatter:c,unit:h,angle:p}=t;if(!r||!r.length||!i)return[];if(it(f)||Yd.isSsr){var g;return(g=lX(r,it(f)?f:0))!==null&&g!==void 0?g:[]}var x=[],b=l==="top"||l==="bottom"?"width":"height",T=h&&b==="width"?pm(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},E=(P,M)=>{var k=typeof c=="function"?c(P.value,M):P.value;return b==="width"?aX(pm(k,{fontSize:e,letterSpacing:n}),T,p):pm(k,{fontSize:e,letterSpacing:n})[b]},C=r.length>=2?Zr(r[1].coordinate-r[0].coordinate):1,I=oX(s,C,b);return f==="equidistantPreserveStart"?uX(C,I,E,r,a):(f==="preserveStart"||f==="preserveStartEnd"?x=mX(C,I,E,r,a,f==="preserveStartEnd"):x=hX(C,I,E,r,a),x.filter(P=>P.isShow))}var pX=["viewBox"],gX=["viewBox"];function vd(){return vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vd.apply(null,arguments)}function YR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function mi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YR(Object(n),!0).forEach(function(i){GT(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function WR(t,e){if(t==null)return{};var n,i,r=vX(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vX(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function GT(t,e,n){return(e=yX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yX(t){var e=bX(t,"string");return typeof e=="symbol"?e:e+""}function bX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class nc extends O.Component{constructor(e){super(e),this.tickRefs=O.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,n){var{viewBox:i}=e,r=WR(e,pX),s=this.props,{viewBox:a}=s,l=WR(s,gX);return!Kx(i,a)||!Kx(r,l)||!Kx(n,this.state)}getTickLineCoord(e){var{x:n,y:i,width:r,height:s,orientation:a,tickSize:l,mirror:f,tickMargin:c}=this.props,h,p,g,x,b,T,E=f?-1:1,C=e.tickSize||l,I=it(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":h=p=e.coordinate,x=i+ +!f*s,g=x-E*C,T=g-E*c,b=I;break;case"left":g=x=e.coordinate,p=n+ +!f*r,h=p-E*C,b=h-E*c,T=I;break;case"right":g=x=e.coordinate,p=n+ +f*r,h=p+E*C,b=h+E*c,T=I;break;default:h=p=e.coordinate,x=i+ +f*s,g=x+E*C,T=g+E*c,b=I;break}return{line:{x1:h,y1:g,x2:p,y2:x},tick:{x:b,y:T}}}getTickTextAnchor(){var{orientation:e,mirror:n}=this.props,i;switch(e){case"left":i=n?"start":"end";break;case"right":i=n?"end":"start";break;default:i="middle";break}return i}getTickVerticalAnchor(){var{orientation:e,mirror:n}=this.props;switch(e){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:e,y:n,width:i,height:r,orientation:s,mirror:a,axisLine:l}=this.props,f=mi(mi(mi({},nn(this.props,!1)),nn(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var c=+(s==="top"&&!a||s==="bottom"&&a);f=mi(mi({},f),{},{x1:e,y1:n+c*r,x2:e+i,y2:n+c*r})}else{var h=+(s==="left"&&!a||s==="right"&&a);f=mi(mi({},f),{},{x1:e+h*i,y1:n,x2:e+h*i,y2:n+r})}return O.createElement("line",vd({},f,{className:gn("recharts-cartesian-axis-line",Qc(l,"className"))}))}static renderTickItem(e,n,i){var r,s=gn(n.className,"recharts-cartesian-axis-tick-value");if(O.isValidElement(e))r=O.cloneElement(e,mi(mi({},n),{},{className:s}));else if(typeof e=="function")r=e(mi(mi({},n),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=gn(a,e.className)),r=O.createElement(NT,vd({},n,{className:a}),i)}return r}renderTicks(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:r,stroke:s,tick:a,tickFormatter:l,unit:f}=this.props,c=zT(mi(mi({},this.props),{},{ticks:i}),e,n),h=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),g=nn(this.props,!1),x=nn(a,!1),b=mi(mi({},g),{},{fill:"none"},nn(r,!1)),T=c.map((E,C)=>{var{line:I,tick:P}=this.getTickLineCoord(E),M=mi(mi(mi(mi({textAnchor:h,verticalAnchor:p},g),{},{stroke:"none",fill:s},x),P),{},{index:C,payload:E,visibleTicksCount:c.length,tickFormatter:l});return O.createElement(Cs,vd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(E.value,"-").concat(E.coordinate,"-").concat(E.tickCoord)},_E(this.props,E,C)),r&&O.createElement("line",vd({},b,I,{className:gn("recharts-cartesian-axis-tick-line",Qc(r,"className"))})),a&&nc.renderTickItem(a,M,"".concat(typeof l=="function"?l(E.value,C):E.value).concat(f||"")))});return T.length>0?O.createElement("g",{className:"recharts-cartesian-axis-ticks"},T):null}render(){var{axisLine:e,width:n,height:i,className:r,hide:s}=this.props;if(s)return null;var{ticks:a}=this.props;return n!=null&&n<=0||i!=null&&i<=0?null:O.createElement(Cs,{className:gn("recharts-cartesian-axis",r),ref:l=>{if(l){var f=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(f);var c=f[0];if(c){var h=window.getComputedStyle(c).fontSize,p=window.getComputedStyle(c).letterSpacing;(h!==this.state.fontSize||p!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(c).fontSize,letterSpacing:window.getComputedStyle(c).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,a),_s.renderCallByParent(this.props))}}GT(nc,"displayName","CartesianAxis");GT(nc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var xX=["x1","y1","x2","y2","key"],_X=["offset"],SX=["xAxisId","yAxisId"],EX=["xAxisId","yAxisId"];function ZR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function gr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZR(Object(n),!0).forEach(function(i){TX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function TX(t,e,n){return(e=AX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AX(t){var e=wX(t,"string");return typeof e=="symbol"?e:e+""}function wX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hc(){return Hc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Hc.apply(null,arguments)}function Nv(t,e){if(t==null)return{};var n,i,r=LX(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function LX(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var CX=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:i,y:r,width:s,height:a,ry:l}=t;return O.createElement("rect",{x:i,y:r,ry:l,width:s,height:a,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Oj(t,e){var n;if(O.isValidElement(t))n=O.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var{x1:i,y1:r,x2:s,y2:a,key:l}=e,f=Nv(e,xX),c=nn(f,!1),{offset:h}=c,p=Nv(c,_X);n=O.createElement("line",Hc({},p,{x1:i,y1:r,x2:s,y2:a,fill:"none",key:l}))}return n}function OX(t){var{x:e,width:n,horizontal:i=!0,horizontalPoints:r}=t;if(!i||!r||!r.length)return null;var{xAxisId:s,yAxisId:a}=t,l=Nv(t,SX),f=r.map((c,h)=>{var p=gr(gr({},l),{},{x1:e,y1:c,x2:e+n,y2:c,key:"line-".concat(h),index:h});return Oj(i,p)});return O.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function RX(t){var{y:e,height:n,vertical:i=!0,verticalPoints:r}=t;if(!i||!r||!r.length)return null;var{xAxisId:s,yAxisId:a}=t,l=Nv(t,EX),f=r.map((c,h)=>{var p=gr(gr({},l),{},{x1:c,y1:e,x2:c,y2:e+n,key:"line-".concat(h),index:h});return Oj(i,p)});return O.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function PX(t){var{horizontalFill:e,fillOpacity:n,x:i,y:r,width:s,height:a,horizontalPoints:l,horizontal:f=!0}=t;if(!f||!e||!e.length)return null;var c=l.map(p=>Math.round(p+r-r)).sort((p,g)=>p-g);r!==c[0]&&c.unshift(0);var h=c.map((p,g)=>{var x=!c[g+1],b=x?r+a-p:c[g+1]-p;if(b<=0)return null;var T=g%e.length;return O.createElement("rect",{key:"react-".concat(g),y:p,x:i,height:b,width:s,stroke:"none",fill:e[T],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return O.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function DX(t){var{vertical:e=!0,verticalFill:n,fillOpacity:i,x:r,y:s,width:a,height:l,verticalPoints:f}=t;if(!e||!n||!n.length)return null;var c=f.map(p=>Math.round(p+r-r)).sort((p,g)=>p-g);r!==c[0]&&c.unshift(0);var h=c.map((p,g)=>{var x=!c[g+1],b=x?r+a-p:c[g+1]-p;if(b<=0)return null;var T=g%n.length;return O.createElement("rect",{key:"react-".concat(g),x:p,y:s,width:b,height:l,stroke:"none",fill:n[T],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return O.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var IX=(t,e)=>{var{xAxis:n,width:i,height:r,offset:s}=t;return Tk(zT(gr(gr(gr({},nc.defaultProps),n),{},{ticks:Ak(n),viewBox:{x:0,y:0,width:i,height:r}})),s.left,s.left+s.width,e)},MX=(t,e)=>{var{yAxis:n,width:i,height:r,offset:s}=t;return Tk(zT(gr(gr(gr({},nc.defaultProps),n),{},{ticks:Ak(n),viewBox:{x:0,y:0,width:i,height:r}})),s.top,s.top+s.height,e)},kX={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function jv(t){var e=Rk(),n=Pk(),i=Ok(),r=gr(gr({},Kl(t,kX)),{},{x:it(t.x)?t.x:i.left,y:it(t.y)?t.y:i.top,width:it(t.width)?t.width:i.width,height:it(t.height)?t.height:i.height}),{xAxisId:s,yAxisId:a,x:l,y:f,width:c,height:h,syncWithTicks:p,horizontalValues:g,verticalValues:x}=r,b=wr(),T=ut(K=>QO(K,"xAxis",s,b)),E=ut(K=>QO(K,"yAxis",a,b));if(!it(c)||c<=0||!it(h)||h<=0||!it(l)||l!==+l||!it(f)||f!==+f)return null;var C=r.verticalCoordinatesGenerator||IX,I=r.horizontalCoordinatesGenerator||MX,{horizontalPoints:P,verticalPoints:M}=r;if((!P||!P.length)&&typeof I=="function"){var k=g&&g.length,z=I({yAxis:E?gr(gr({},E),{},{ticks:k?g:E.ticks}):void 0,width:e,height:n,offset:i},k?!0:p);mm(Array.isArray(z),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof z,"]")),Array.isArray(z)&&(P=z)}if((!M||!M.length)&&typeof C=="function"){var F=x&&x.length,G=C({xAxis:T?gr(gr({},T),{},{ticks:F?x:T.ticks}):void 0,width:e,height:n,offset:i},F?!0:p);mm(Array.isArray(G),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof G,"]")),Array.isArray(G)&&(M=G)}return O.createElement("g",{className:"recharts-cartesian-grid"},O.createElement(CX,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),O.createElement(PX,Hc({},r,{horizontalPoints:P})),O.createElement(DX,Hc({},r,{verticalPoints:M})),O.createElement(OX,Hc({},r,{offset:i,horizontalPoints:P,xAxis:T,yAxis:E})),O.createElement(RX,Hc({},r,{offset:i,verticalPoints:M,xAxis:T,yAxis:E})))}jv.displayName="CartesianGrid";var Rj=(t,e,n,i)=>jo(t,"xAxis",e,i),Pj=(t,e,n,i)=>Wu(t,"xAxis",e,i),Dj=(t,e,n,i)=>jo(t,"yAxis",n,i),Ij=(t,e,n,i)=>Wu(t,"yAxis",n,i),NX=Ce([fn,Rj,Dj,Pj,Ij],(t,e,n,i,r)=>Qu(t,"xAxis")?Tm(e,i,!1):Tm(n,r,!1)),jX=(t,e,n,i,r)=>r,BX=Ce([R0,jX],(t,e)=>{if(t.some(n=>n.type==="line"&&e.dataKey===n.dataKey&&e.data===n.data))return e}),FX=Ce([fn,Rj,Dj,Pj,Ij,BX,NX,cT],(t,e,n,i,r,s,a,l)=>{var{chartData:f,dataStartIndex:c,dataEndIndex:h}=l;if(!(s==null||e==null||n==null||i==null||r==null||i.length===0||r.length===0||a==null)){var{dataKey:p,data:g}=s,x;if(g!=null&&g.length>0?x=g:x=f?.slice(c,h+1),x!=null)return rQ({layout:t,xAxis:e,yAxis:n,xAxisTicks:i,yAxisTicks:r,dataKey:p,bandSize:a,displayedData:x})}}),UX=["type","layout","connectNulls","needClip"],$X=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function Mj(t,e){if(t==null)return{};var n,i,r=zX(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zX(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function XR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ya(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XR(Object(n),!0).forEach(function(i){B0(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function B0(t,e,n){return(e=GX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GX(t){var e=HX(t,"string");return typeof e=="symbol"?e:e+""}function HX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jd(){return jd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},jd.apply(null,arguments)}var KX=t=>{var{dataKey:e,name:n,stroke:i,legendType:r,hide:s}=t;return[{inactive:s,dataKey:e,type:r,color:i,value:m0(n,e),payload:t}]};function qX(t){var{dataKey:e,data:n,stroke:i,strokeWidth:r,fill:s,name:a,hide:l,unit:f}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:r,fill:s,dataKey:e,nameKey:void 0,name:m0(a,e),hide:l,type:t.tooltipType,color:t.stroke,unit:f}}}var kj=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function VX(t,e){for(var n=t.length%2!==0?[...t,0]:t,i=[],r=0;r<e;++r)i=[...i,...n];return i}var YX=(t,e,n)=>{var i=n.reduce((p,g)=>p+g);if(!i)return kj(e,t);for(var r=Math.floor(t/i),s=t%i,a=e-t,l=[],f=0,c=0;f<n.length;c+=n[f],++f)if(c+n[f]>s){l=[...n.slice(0,f),s-c];break}var h=l.length%2===0?[0,a]:[a];return[...VX(n,r),...l,...h].map(p=>"".concat(p,"px")).join(", ")};function WX(t,e){var n;if(O.isValidElement(t))n=O.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var i=gn("recharts-line-dot",typeof t!="boolean"?t.className:"");n=O.createElement(nj,jd({},e,{className:i}))}return n}function ZX(t,e){return t==null?!1:e?!0:t.length===1}function XX(t){var{clipPathId:e,points:n,props:i}=t,{dot:r,dataKey:s,needClip:a}=i;if(!ZX(n,r))return null;var l=TM(r),f=nn(i,!1),c=nn(r,!0),h=n.map((g,x)=>{var b=Ya(Ya(Ya({key:"dot-".concat(x),r:3},f),c),{},{index:x,cx:g.x,cy:g.y,dataKey:s,value:g.value,payload:g.payload,points:n});return WX(r,b)}),p={clipPath:a?"url(#clipPath-".concat(l?"":"dots-").concat(e,")"):null};return O.createElement(Cs,jd({className:"recharts-line-dots",key:"dots"},p),h)}function bS(t){var{clipPathId:e,pathRef:n,points:i,strokeDasharray:r,props:s,showLabels:a}=t,{type:l,layout:f,connectNulls:c,needClip:h}=s,p=Mj(s,UX),g=Ya(Ya({},nn(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(e,")"):null,points:i,type:l,layout:f,connectNulls:c,strokeDasharray:r??s.strokeDasharray});return O.createElement(O.Fragment,null,i?.length>1&&O.createElement(Mk,jd({},g,{pathRef:n})),O.createElement(XX,{points:i,clipPathId:e,props:s}),a&&Yu.renderCallByParent(s,i))}function QX(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function JX(t){var{clipPathId:e,props:n,pathRef:i,previousPointsRef:r,longestAnimatedLengthRef:s}=t,{points:a,strokeDasharray:l,isAnimationActive:f,animationBegin:c,animationDuration:h,animationEasing:p,animateNewValues:g,width:x,height:b,onAnimationEnd:T,onAnimationStart:E}=n,C=r.current,I=cj(n,"recharts-line-"),[P,M]=O.useState(!1),k=O.useCallback(()=>{typeof T=="function"&&T(),M(!1)},[T]),z=O.useCallback(()=>{typeof E=="function"&&E(),M(!0)},[E]),F=QX(i.current),G=s.current;return O.createElement(tf,{begin:c,duration:h,isActive:f,easing:p,from:{t:0},to:{t:1},onAnimationEnd:k,onAnimationStart:z,key:I},K=>{var{t:V}=K,Q=Va(G,F+G),J=Math.min(Q(V),F),ve;if(l){var se="".concat(l).split(/[,\s]+/gim).map(oe=>parseFloat(oe));ve=YX(J,F,se)}else ve=kj(F,J);if(C){var ye=C.length/a.length,X=V===1?a:a.map((oe,ie)=>{var Ie=Math.floor(ie*ye);if(C[Ie]){var Z=C[Ie],Y=Va(Z.x,oe.x),ne=Va(Z.y,oe.y);return Ya(Ya({},oe),{},{x:Y(V),y:ne(V)})}if(g){var me=Va(x*2,oe.x),Te=Va(b/2,oe.y);return Ya(Ya({},oe),{},{x:me(V),y:Te(V)})}return Ya(Ya({},oe),{},{x:oe.x,y:oe.y})});return r.current=X,O.createElement(bS,{props:n,points:X,clipPathId:e,pathRef:i,showLabels:!P,strokeDasharray:ve})}return V>0&&F>0&&(r.current=a,s.current=J),O.createElement(bS,{props:n,points:a,clipPathId:e,pathRef:i,showLabels:!P,strokeDasharray:ve})})}function eQ(t){var{clipPathId:e,props:n}=t,{points:i,isAnimationActive:r}=n,s=O.useRef(null),a=O.useRef(0),l=O.useRef(null),f=s.current;return r&&i&&i.length&&f!==i?O.createElement(JX,{props:n,clipPathId:e,previousPointsRef:s,longestAnimatedLengthRef:a,pathRef:l}):O.createElement(bS,{props:n,points:i,clipPathId:e,pathRef:l,showLabels:!0})}var tQ=(t,e)=>({x:t.x,y:t.y,value:t.value,errorVal:vr(t.payload,e)});class nQ extends O.Component{constructor(){super(...arguments),B0(this,"id",Rd("recharts-line-"))}render(){var e,{hide:n,dot:i,points:r,className:s,xAxisId:a,yAxisId:l,top:f,left:c,width:h,height:p,id:g,needClip:x,layout:b}=this.props;if(n)return null;var T=gn("recharts-line",s),E=Sn(g)?this.id:g,{r:C=3,strokeWidth:I=2}=(e=nn(i,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},P=TM(i),M=C*2+I;return O.createElement(O.Fragment,null,O.createElement(Cs,{className:T},x&&O.createElement("defs",null,O.createElement(_j,{clipPathId:E,xAxisId:a,yAxisId:l}),!P&&O.createElement("clipPath",{id:"clipPath-dots-".concat(E)},O.createElement("rect",{x:c-M/2,y:f-M/2,width:h+M,height:p+M}))),O.createElement(eQ,{props:this.props,clipPathId:E}),O.createElement(vj,{direction:b==="horizontal"?"y":"x"},O.createElement(hj,{xAxisId:a,yAxisId:l,data:r,dataPointFormatter:tQ,errorBarOffset:0},this.props.children))),O.createElement(kW,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var Nj={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Yd.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function iQ(t){var e=Kl(t,Nj),{activeDot:n,animateNewValues:i,animationBegin:r,animationDuration:s,animationEasing:a,connectNulls:l,dot:f,hide:c,isAnimationActive:h,label:p,legendType:g,xAxisId:x,yAxisId:b}=e,T=Mj(e,$X),{needClip:E}=FT(x,b),{height:C,width:I,x:P,y:M}=BT(),k=y0(),z=wr(),F=O.useMemo(()=>({dataKey:t.dataKey,data:t.data}),[t.dataKey,t.data]),G=ut(K=>FX(K,x,b,z,F));return k!=="horizontal"&&k!=="vertical"?null:O.createElement(nQ,jd({},T,{connectNulls:l,dot:f,activeDot:n,animateNewValues:i,animationBegin:r,animationDuration:s,animationEasing:a,isAnimationActive:h,hide:c,label:p,legendType:g,xAxisId:x,yAxisId:b,points:G,layout:k,height:C,width:I,left:P,top:M,needClip:E}))}function rQ(t){var{layout:e,xAxis:n,yAxis:i,xAxisTicks:r,yAxisTicks:s,dataKey:a,bandSize:l,displayedData:f}=t;return f.map((c,h)=>{var p=vr(c,a);return e==="horizontal"?{x:IC({axis:n,ticks:r,bandSize:l,entry:c,index:h}),y:Sn(p)?null:i.scale(p),value:p,payload:c}:{x:Sn(p)?null:n.scale(p),y:IC({axis:i,ticks:s,bandSize:l,entry:c,index:h}),value:p,payload:c}})}class Mm extends O.PureComponent{render(){return O.createElement(mj,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},O.createElement(uj,{legendPayload:KX(this.props)}),O.createElement(lj,{fn:qX,args:this.props}),O.createElement(iQ,this.props))}}B0(Mm,"displayName","Line");B0(Mm,"defaultProps",Nj);function QR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function JR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QR(Object(n),!0).forEach(function(i){sQ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function sQ(t,e,n){return(e=aQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aQ(t){var e=oQ(t,"string");return typeof e=="symbol"?e:e+""}function oQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lQ={xAxis:{},yAxis:{},zAxis:{}},jj=ca({name:"cartesianAxis",initialState:lQ,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:n,width:i}=e.payload;t.yAxis[n]&&(t.yAxis[n]=JR(JR({},t.yAxis[n]),{},{width:i}))}}}),{addXAxis:uQ,removeXAxis:cQ,addYAxis:fQ,removeYAxis:dQ,addZAxis:Eoe,removeZAxis:Toe,updateYAxisWidth:hQ}=jj.actions,mQ=jj.reducer,pQ=["children"],gQ=["dangerouslySetInnerHTML","ticks"];function Bj(t,e,n){return(e=vQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vQ(t){var e=yQ(t,"string");return typeof e=="symbol"?e:e+""}function yQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xS(){return xS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xS.apply(null,arguments)}function Fj(t,e){if(t==null)return{};var n,i,r=bQ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bQ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function xQ(t){var e=yi(),n=O.useMemo(()=>{var{children:s}=t,a=Fj(t,pQ);return a},[t]),i=ut(s=>Vl(s,n.id)),r=n===i;return O.useEffect(()=>(e(uQ(n)),()=>{e(cQ(n))}),[n,e]),r?t.children:null}var _Q=t=>{var{xAxisId:e,className:n}=t,i=ut(Ck),r=wr(),s="xAxis",a=ut(x=>Jd(x,s,e,r)),l=ut(x=>x2(x,s,e,r)),f=ut(x=>g2(x,e)),c=ut(x=>h9(x,e));if(f==null||c==null)return null;var{dangerouslySetInnerHTML:h,ticks:p}=t,g=Fj(t,gQ);return O.createElement(nc,xS({},g,{scale:a,x:c.x,y:c.y,width:f.width,height:f.height,className:gn("recharts-".concat(s," ").concat(s),n),viewBox:i,ticks:l}))},SQ=t=>{var e,n,i,r,s;return O.createElement(xQ,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.xAxisId,scale:t.scale,type:t.type,padding:t.padding,allowDataOverflow:t.allowDataOverflow,domain:t.domain,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,height:t.height,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(i=t.angle)!==null&&i!==void 0?i:0,minTickGap:(r=t.minTickGap)!==null&&r!==void 0?r:5,tick:(s=t.tick)!==null&&s!==void 0?s:!0,tickFormatter:t.tickFormatter},O.createElement(_Q,t))};class km extends O.Component{render(){return O.createElement(SQ,this.props)}}Bj(km,"displayName","XAxis");Bj(km,"defaultProps",{allowDataOverflow:ys.allowDataOverflow,allowDecimals:ys.allowDecimals,allowDuplicatedCategory:ys.allowDuplicatedCategory,height:ys.height,hide:!1,mirror:ys.mirror,orientation:ys.orientation,padding:ys.padding,reversed:ys.reversed,scale:ys.scale,tickCount:ys.tickCount,type:ys.type,xAxisId:0});var EQ=t=>{var{ticks:e,label:n,labelGapWithTick:i=5,tickSize:r=0,tickMargin:s=0}=t,a=0;if(e){e.forEach(h=>{if(h){var p=h.getBoundingClientRect();p.width>a&&(a=p.width)}});var l=n?n.getBoundingClientRect().width:0,f=r+s,c=a+f+l+(n?i:0);return Math.round(c)}return 0},TQ=["dangerouslySetInnerHTML","ticks"];function Uj(t,e,n){return(e=AQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AQ(t){var e=wQ(t,"string");return typeof e=="symbol"?e:e+""}function wQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _S(){return _S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_S.apply(null,arguments)}function LQ(t,e){if(t==null)return{};var n,i,r=CQ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function CQ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function OQ(t){var e=yi();return O.useEffect(()=>(e(fQ(t)),()=>{e(dQ(t))}),[t,e]),null}var RQ=t=>{var e,{yAxisId:n,className:i,width:r,label:s}=t,a=O.useRef(null),l=O.useRef(null),f=ut(Ck),c=wr(),h=yi(),p="yAxis",g=ut(P=>Jd(P,p,n,c)),x=ut(P=>v2(P,n)),b=ut(P=>m9(P,n)),T=ut(P=>x2(P,p,n,c));if(O.useLayoutEffect(()=>{var P;if(!(r!=="auto"||!x||jT(s)||O.isValidElement(s))){var M=a.current,k=M==null||(P=M.tickRefs)===null||P===void 0?void 0:P.current,{tickSize:z,tickMargin:F}=M.props,G=EQ({ticks:k,label:l.current,labelGapWithTick:5,tickSize:z,tickMargin:F});Math.round(x.width)!==Math.round(G)&&h(hQ({id:n,width:G}))}},[a,a==null||(e=a.current)===null||e===void 0||(e=e.tickRefs)===null||e===void 0?void 0:e.current,x?.width,x,h,s,n,r]),x==null||b==null)return null;var{dangerouslySetInnerHTML:E,ticks:C}=t,I=LQ(t,TQ);return O.createElement(nc,_S({},I,{ref:a,labelRef:l,scale:g,x:b.x,y:b.y,width:x.width,height:x.height,className:gn("recharts-".concat(p," ").concat(p),i),viewBox:f,ticks:T}))},PQ=t=>{var e,n,i,r,s;return O.createElement(O.Fragment,null,O.createElement(OQ,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(i=t.angle)!==null&&i!==void 0?i:0,minTickGap:(r=t.minTickGap)!==null&&r!==void 0?r:5,tick:(s=t.tick)!==null&&s!==void 0?s:!0,tickFormatter:t.tickFormatter}),O.createElement(RQ,t))},DQ={allowDataOverflow:bs.allowDataOverflow,allowDecimals:bs.allowDecimals,allowDuplicatedCategory:bs.allowDuplicatedCategory,hide:!1,mirror:bs.mirror,orientation:bs.orientation,padding:bs.padding,reversed:bs.reversed,scale:bs.scale,tickCount:bs.tickCount,type:bs.type,width:bs.width,yAxisId:0};class _d extends O.Component{render(){return O.createElement(PQ,this.props)}}Uj(_d,"displayName","YAxis");Uj(_d,"defaultProps",DQ);var qx={exports:{}},Vx={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eP;function IQ(){if(eP)return Vx;eP=1;var t=$d();function e(f,c){return f===c&&(f!==0||1/f===1/c)||f!==f&&c!==c}var n=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,r=t.useRef,s=t.useEffect,a=t.useMemo,l=t.useDebugValue;return Vx.useSyncExternalStoreWithSelector=function(f,c,h,p,g){var x=r(null);if(x.current===null){var b={hasValue:!1,value:null};x.current=b}else b=x.current;x=a(function(){function E(k){if(!C){if(C=!0,I=k,k=p(k),g!==void 0&&b.hasValue){var z=b.value;if(g(z,k))return P=z}return P=k}if(z=P,n(I,k))return z;var F=p(k);return g!==void 0&&g(z,F)?(I=k,z):(I=k,P=F)}var C=!1,I,P,M=h===void 0?null:h;return[function(){return E(c())},M===null?void 0:function(){return E(M())}]},[c,h,p,g]);var T=i(f,x[0],x[1]);return s(function(){b.hasValue=!0,b.value=T},[T]),l(T),T},Vx}var tP;function MQ(){return tP||(tP=1,qx.exports=IQ()),qx.exports}MQ();function kQ(t){t()}function NQ(){let t=null,e=null;return{clear(){t=null,e=null},notify(){kQ(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const r=e={callback:n,next:null,prev:e};return r.prev?r.prev.next=r:t=r,function(){!i||t===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}var nP={notify(){},get:()=>[]};function jQ(t,e){let n,i=nP,r=0,s=!1;function a(T){h();const E=i.subscribe(T);let C=!1;return()=>{C||(C=!0,E(),p())}}function l(){i.notify()}function f(){b.onStateChange&&b.onStateChange()}function c(){return s}function h(){r++,n||(n=t.subscribe(f),i=NQ())}function p(){r--,n&&r===0&&(n(),n=void 0,i.clear(),i=nP)}function g(){s||(s=!0,h())}function x(){s&&(s=!1,p())}const b={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:f,isSubscribed:c,trySubscribe:g,tryUnsubscribe:x,getListeners:()=>i};return b}var BQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FQ=BQ(),UQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",$Q=UQ(),zQ=()=>FQ||$Q?O.useLayoutEffect:O.useEffect,GQ=zQ(),HQ=Symbol.for("react-redux-context"),KQ=typeof globalThis<"u"?globalThis:{};function qQ(){if(!O.createContext)return{};const t=KQ[HQ]??=new Map;let e=t.get(O.createContext);return e||(e=O.createContext(null),t.set(O.createContext,e)),e}var VQ=qQ();function YQ(t){const{children:e,context:n,serverState:i,store:r}=t,s=O.useMemo(()=>{const f=jQ(r);return{store:r,subscription:f,getServerState:i?()=>i:void 0}},[r,i]),a=O.useMemo(()=>r.getState(),[r]);GQ(()=>{const{subscription:f}=s;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),a!==r.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[s,a]);const l=n||VQ;return O.createElement(l.Provider,{value:s},e)}var WQ=YQ,ZQ=(t,e)=>e,HT=Ce([ZQ,fn,wV,zi,k2,Yl,v7,Fi],S7),KT=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,i=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/i)}},$j=oa("mouseClick"),zj=Wm();zj.startListening({actionCreator:$j,effect:(t,e)=>{var n=t.payload,i=HT(e.getState(),KT(n));i?.activeIndex!=null&&e.dispatch(L9({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var SS=oa("mouseMove"),Gj=Wm();Gj.startListening({actionCreator:SS,effect:(t,e)=>{var n=t.payload,i=e.getState(),r=LT(i,i.tooltip.settings.shared),s=HT(i,KT(n));r==="axis"&&(s?.activeIndex!=null?e.dispatch(C2({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(L2()))}});function XQ(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":e}var iP={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Hj=ca({name:"rootProps",initialState:iP,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:iP.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),QQ=Hj.reducer,{updateOptions:JQ}=Hj.actions,Kj=ca({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Aoe}=Kj.actions,eJ=Kj.reducer,qj=oa("keyDown"),Vj=oa("focus"),qT=Wm();qT.startListening({actionCreator:qj,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=Number(CT(r,cf(n))),l=Yl(n);if(s==="Enter"){var f=Rv(n,"axis","hover",String(r.index));e.dispatch(uS({active:!r.active,activeIndex:r.index,activeDataKey:r.dataKey,activeCoordinate:f}));return}var c=y9(n),h=c==="left-to-right"?1:-1,p=s==="ArrowRight"?1:-1,g=a+p*h;if(!(l==null||g>=l.length||g<0)){var x=Rv(n,"axis","hover",String(g));e.dispatch(uS({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});qT.startListening({actionCreator:Vj,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&r.index==null){var s="0",a=Rv(n,"axis","hover",String(s));e.dispatch(uS({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:a}))}}}});var ea=oa("externalEvent"),Yj=Wm();Yj.startListening({actionCreator:ea,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),i={activeCoordinate:o7(n),activeDataKey:F2(n),activeIndex:rf(n),activeLabel:B2(n),activeTooltipIndex:rf(n),isTooltipActive:l7(n)};t.payload.handler(i,t.payload.reactEvent)}}});var tJ=Ce([eh],t=>t.tooltipItemPayloads),nJ=Ce([tJ,rp,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,i)=>{var r=t.find(l=>l.settings.dataKey===i);if(r!=null){var{positions:s}=r;if(s!=null){var a=e(s,n);return a}}}),Wj=oa("touchMove"),Zj=Wm();Zj.startListening({actionCreator:Wj,effect:(t,e)=>{var n=t.payload,i=e.getState(),r=LT(i,i.tooltip.settings.shared);if(r==="axis"){var s=HT(i,KT({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&e.dispatch(C2({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(r==="item"){var a,l=n.touches[0],f=document.elementFromPoint(l.clientX,l.clientY);if(!f||!f.getAttribute)return;var c=f.getAttribute(JG),h=(a=f.getAttribute(e5))!==null&&a!==void 0?a:void 0,p=nJ(e.getState(),c,h);e.dispatch(w2({activeDataKey:h,activeIndex:c,activeCoordinate:p}))}}});var iJ=tk({brush:ZZ,cartesianAxis:mQ,chartData:B7,graphicalItems:rW,layout:EG,legend:f5,options:I7,polarAxis:XY,polarOptions:eJ,referenceElements:iX,rootProps:QQ,tooltip:C9}),rJ=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Y6({reducer:iJ,preloadedState:e,middleware:i=>i({serializableCheck:!1}).concat([zj.middleware,Gj.middleware,qT.middleware,Yj.middleware,Zj.middleware]),devTools:{serialize:{replacer:XQ},name:"recharts-".concat(n)}})};function sJ(t){var{preloadedState:e,children:n,reduxStoreName:i}=t,r=wr(),s=O.useRef(null);if(r)return n;s.current==null&&(s.current=rJ(e,i));var a=PE;return O.createElement(WQ,{context:a,store:s.current},n)}function aJ(t){var{layout:e,width:n,height:i,margin:r}=t,s=yi(),a=wr();return O.useEffect(()=>{a||(s(xG(e)),s(_G({width:n,height:i})),s(bG(r)))},[s,a,e,n,i,r]),null}function oJ(t){var e=yi();return O.useEffect(()=>{e(JQ(t))},[e,t]),null}var lJ=["children"];function uJ(t,e){if(t==null)return{};var n,i,r=cJ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function cJ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Bv(){return Bv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Bv.apply(null,arguments)}var fJ={width:"100%",height:"100%"},dJ=O.forwardRef((t,e)=>{var n=Rk(),i=Pk(),r=Ik();if(!pv(n)||!pv(i))return null;var{children:s,otherAttributes:a,title:l,desc:f}=t,c,h;return typeof a.tabIndex=="number"?c=a.tabIndex:c=r?0:void 0,typeof a.role=="string"?h=a.role:h=r?"application":void 0,O.createElement(AM,Bv({},a,{title:l,desc:f,role:h,tabIndex:c,width:n,height:i,style:fJ,ref:e}),s)}),hJ=t=>{var{children:e}=t,n=ut(v0);if(!n)return null;var{width:i,height:r,y:s,x:a}=n;return O.createElement(AM,{width:i,height:r,x:a,y:s},e)},rP=O.forwardRef((t,e)=>{var{children:n}=t,i=uJ(t,lJ),r=wr();return r?O.createElement(hJ,null,n):O.createElement(dJ,Bv({ref:e},i),n)});function mJ(){var t=yi(),[e,n]=O.useState(null),i=ut(QG);return O.useEffect(()=>{if(e!=null){var r=e.getBoundingClientRect(),s=r.width/e.offsetWidth;Ps(s)&&s!==i&&t(SG(s))}},[e,t,i]),n}function sP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function pJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sP(Object(n),!0).forEach(function(i){gJ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gJ(t,e,n){return(e=vJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vJ(t){var e=yJ(t,"string");return typeof e=="symbol"?e:e+""}function yJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bJ=O.forwardRef((t,e)=>{var{children:n,className:i,height:r,onClick:s,onContextMenu:a,onDoubleClick:l,onMouseDown:f,onMouseEnter:c,onMouseLeave:h,onMouseMove:p,onMouseUp:g,onTouchEnd:x,onTouchMove:b,onTouchStart:T,style:E,width:C}=t,I=yi(),[P,M]=O.useState(null),[k,z]=O.useState(null);$7();var F=mJ(),G=O.useCallback(ne=>{F(ne),typeof e=="function"&&e(ne),M(ne),z(ne)},[F,e,M,z]),K=O.useCallback(ne=>{I($j(ne)),I(ea({handler:s,reactEvent:ne}))},[I,s]),V=O.useCallback(ne=>{I(SS(ne)),I(ea({handler:c,reactEvent:ne}))},[I,c]),Q=O.useCallback(ne=>{I(L2()),I(ea({handler:h,reactEvent:ne}))},[I,h]),J=O.useCallback(ne=>{I(SS(ne)),I(ea({handler:p,reactEvent:ne}))},[I,p]),ve=O.useCallback(()=>{I(Vj())},[I]),se=O.useCallback(ne=>{I(qj(ne.key))},[I]),ye=O.useCallback(ne=>{I(ea({handler:a,reactEvent:ne}))},[I,a]),X=O.useCallback(ne=>{I(ea({handler:l,reactEvent:ne}))},[I,l]),oe=O.useCallback(ne=>{I(ea({handler:f,reactEvent:ne}))},[I,f]),ie=O.useCallback(ne=>{I(ea({handler:g,reactEvent:ne}))},[I,g]),Ie=O.useCallback(ne=>{I(ea({handler:T,reactEvent:ne}))},[I,T]),Z=O.useCallback(ne=>{I(Wj(ne)),I(ea({handler:b,reactEvent:ne}))},[I,b]),Y=O.useCallback(ne=>{I(ea({handler:x,reactEvent:ne}))},[I,x]);return O.createElement(K2.Provider,{value:P},O.createElement(H4.Provider,{value:k},O.createElement("div",{className:gn("recharts-wrapper",i),style:pJ({position:"relative",cursor:"default",width:C,height:r},E),onClick:K,onContextMenu:ye,onDoubleClick:X,onFocus:ve,onKeyDown:se,onMouseDown:oe,onMouseEnter:V,onMouseLeave:Q,onMouseMove:J,onMouseUp:ie,onTouchEnd:Y,onTouchMove:Z,onTouchStart:Ie,ref:G},n)))}),xJ=["children","className","width","height","style","compact","title","desc"];function _J(t,e){if(t==null)return{};var n,i,r=SJ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function SJ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var EJ=O.forwardRef((t,e)=>{var{children:n,className:i,width:r,height:s,style:a,compact:l,title:f,desc:c}=t,h=_J(t,xJ),p=nn(h,!1);return l?O.createElement(rP,{otherAttributes:p,title:f,desc:c},n):O.createElement(bJ,{className:i,style:a,width:r,height:s,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},O.createElement(rP,{otherAttributes:p,title:f,desc:c,ref:e},O.createElement(sX,null,n)))}),TJ=["width","height"];function ES(){return ES=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ES.apply(null,arguments)}function AJ(t,e){if(t==null)return{};var n,i,r=wJ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wJ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var LJ={top:5,right:5,bottom:5,left:5},CJ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:LJ,reverseStackOrder:!1,syncMethod:"index"},Xj=O.forwardRef(function(e,n){var i,r=Kl(e.categoricalChartProps,CJ),{width:s,height:a}=r,l=AJ(r,TJ);if(!pv(s)||!pv(a))return null;var{chartName:f,defaultTooltipEventType:c,validateTooltipEventTypes:h,tooltipPayloadSearcher:p,categoricalChartProps:g}=e,x={chartName:f,defaultTooltipEventType:c,validateTooltipEventTypes:h,tooltipPayloadSearcher:p,eventEmitter:void 0};return O.createElement(sJ,{preloadedState:{options:x},reduxStoreName:(i=g.id)!==null&&i!==void 0?i:f},O.createElement(WZ,{chartData:g.data}),O.createElement(aJ,{width:s,height:a,layout:r.layout,margin:r.margin}),O.createElement(oJ,{accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className}),O.createElement(EJ,ES({},l,{width:s,height:a,ref:n})))}),OJ=["axis"],Qj=O.forwardRef((t,e)=>O.createElement(Xj,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:OJ,tooltipPayloadSearcher:q2,categoricalChartProps:t,ref:e})),RJ=["axis","item"],PJ=O.forwardRef((t,e)=>O.createElement(Xj,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:RJ,tooltipPayloadSearcher:q2,categoricalChartProps:t,ref:e}));function DJ({onChangeLocation:t}){const[e,n]=O.useState(""),[i,r]=O.useState(!1),[s,a]=O.useState(""),l=async()=>{if(e.trim())try{r(!0),a("");const f=await hI(e.trim());t?.(f)}catch{a("Ora negsit")}finally{r(!1)}};return A.jsxs("div",{className:"d-flex gap-2 align-items-stretch",children:[A.jsx("input",{className:"form-control",placeholder:"Caut ora (ex: Cluj-Napoca)",value:e,onChange:f=>n(f.target.value),onKeyDown:f=>f.key==="Enter"&&l()}),A.jsx("button",{className:"btn btn-primary",onClick:l,disabled:i,children:i?"Caut...":"Seteaz"}),s&&A.jsx("div",{className:"text-danger small ms-2 align-self-center",children:s})]})}function IJ({onChangeLocation:t}){const e=O.useRef(null),n=O.useRef(null),i=O.useRef(null),[r,s]=O.useState(null),a=()=>new Promise(c=>{if(window.L)return c();const h=document.createElement("link");h.rel="stylesheet",h.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(h);const p=document.createElement("script");p.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",p.onload=c,document.body.appendChild(p)});async function l(c,h){try{const T=await fetch(`https://geocoding-api.open-meteo.com/v1/reverse?latitude=${c}&longitude=${h}&language=ro&format=json`);if(T.ok){const C=(await T.json())?.results?.[0];if(C)return{lat:c,lon:h,oras:{nume:C.name,tara:C.country,judet:C.admin1,codPostal:C.postcodes?.[0]??""}}}}catch{}const g=await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${c}&lon=${h}&format=jsonv2&accept-language=ro`)).json(),x=g?.address||{},b=x.city||x.town||x.village||g?.display_name?.split(",")[0]||`${c.toFixed(4)}, ${h.toFixed(4)}`;return{lat:c,lon:h,oras:{nume:b,tara:x.country||"",judet:x.state||x.county||"",codPostal:x.postcode||""}}}O.useEffect(()=>{let c=!1;return(async()=>{if(await a(),c||!e.current)return;const h=window.L;n.current||(n.current=h.map(e.current,{center:[46.7712,23.6236],zoom:11}),h.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap"}).addTo(n.current),n.current.on("click",p=>{const{latlng:g}=p;i.current?i.current.setLatLng(g):(i.current=h.marker(g,{draggable:!0}).addTo(n.current),i.current.on("dragend",x=>{const b=x.target.getLatLng();s([b.lat,b.lng])})),s([g.lat,g.lng])})),setTimeout(()=>n.current?.invalidateSize(),50)})(),()=>{c=!0}},[]);const f=async()=>{if(!r)return;const[c,h]=r,p=await l(c,h);t?.(p)};return A.jsxs(A.Fragment,{children:[A.jsx("div",{ref:e,style:{width:"100%",height:320,borderRadius:8,overflow:"hidden",background:"#eef2f4"}}),A.jsxs("div",{className:"d-flex justify-content-between mt-2",children:[A.jsx("div",{className:"text-muted small",children:r?`Selectat: ${r[0].toFixed(4)}, ${r[1].toFixed(4)}`:"Atinge harta pentru a plasa un marker (poi trage de el)."}),A.jsx("button",{className:"btn btn-primary",onClick:f,disabled:!r,children:"Confirm locaia"})]})]})}function MJ({show:t,onHide:e,oras:n,current:i,daily:r,hourly:s,onChangeLocation:a}){const[l,f]=O.useState(!1),[c,h]=O.useState("search");s.map(g=>({time:g.time,Temp:g.temp,Umiditate:g.hum,Vant:g.wind,Presiune:g.press}));const p=r.map(g=>({zi:g.zi,Max:g.tMax,Min:g.tMin}));return A.jsxs(gi,{show:t,onHide:e,size:"lg",centered:!0,scrollable:!0,children:[A.jsx(gi.Header,{closeButton:!0,children:A.jsxs(gi.Title,{children:["Vremea  ",n]})}),A.jsxs(gi.Body,{children:[i&&A.jsxs("div",{className:"d-flex justify-content-between align-items-start flex-wrap mb-3",children:[A.jsxs("div",{className:"d-flex align-items-center gap-3",children:[A.jsx("div",{style:{fontSize:48,lineHeight:"48px"},children:i.icon}),A.jsxs("div",{children:[A.jsxs("div",{style:{fontSize:32,fontWeight:600},children:[i.temp,"C"]}),A.jsx("small",{className:"text-muted",children:"acum"})]})]}),A.jsxs("div",{className:"text-end small",children:[A.jsxs("div",{children:["Presiune: ",A.jsx("strong",{children:i.press})," hPa"]}),A.jsxs("div",{children:["Umiditate: ",A.jsxs("strong",{children:[i.hum,"%"]})]}),A.jsxs("div",{children:["Vnt: ",A.jsxs("strong",{children:[i.wind.toFixed(1)," km/h"]})]})]})]}),A.jsxs("div",{className:"mb-3",children:[A.jsx("button",{className:"btn btn-outline-primary",onClick:()=>f(g=>!g),children:l?"Ascunde selector locaie":"Schimb locaia"}),l&&A.jsxs("div",{className:"mt-3",children:[A.jsxs("div",{className:"btn-group mb-2",children:[A.jsx("button",{className:`btn btn-sm ${c==="search"?"btn-primary":"btn-outline-secondary"}`,onClick:()=>h("search"),children:"Caut ora"}),A.jsx("button",{className:`btn btn-sm ${c==="map"?"btn-primary":"btn-outline-secondary"}`,onClick:()=>h("map"),children:"Alege pe hart"})]}),c==="search"?A.jsx(DJ,{onChangeLocation:a}):A.jsx(IJ,{onChangeLocation:a},"map")]})]}),A.jsxs(vM,{defaultActiveKey:"daily",className:"mb-3",children:[A.jsxs(fL,{eventKey:"daily",title:"Pe zile",children:[A.jsx("div",{className:"d-flex flex-wrap gap-3 mb-4",children:r.map((g,x)=>A.jsxs("div",{className:"border rounded p-3 text-center",style:{width:90},children:[A.jsx("div",{className:"small fw-semibold",children:g.zi}),A.jsx("div",{style:{fontSize:30,lineHeight:"30px"},children:g.icon}),A.jsxs("div",{className:"fw-bold",children:[g.tMax,""]}),A.jsxs("div",{className:"text-muted",children:[g.tMin,""]})]},x))}),A.jsx("div",{style:{width:"100%",height:260},children:A.jsx(hS,{children:A.jsxs(PJ,{data:p,children:[A.jsx(jv,{strokeDasharray:"3 3"}),A.jsx(km,{dataKey:"zi"}),A.jsx(_d,{}),A.jsx(dS,{}),A.jsx(Mv,{dataKey:"Max",fill:"#8884d8"}),A.jsx(Mv,{dataKey:"Min",fill:"#82ca9d"})]})})})]}),A.jsxs(fL,{eventKey:"hourly",title:"Pe ore",children:[A.jsx("div",{className:"d-flex flex-wrap gap-3 mb-4",children:s.map((g,x)=>A.jsxs("div",{className:"border rounded p-2 text-center",style:{width:80},children:[A.jsx("div",{className:"small",children:g.time}),A.jsx("div",{style:{fontSize:26,lineHeight:"26px"},children:g.icon}),A.jsxs("div",{className:"fw-semibold",children:[g.temp,"C"]}),A.jsxs("div",{className:"small text-muted",children:[g.hum,"%"]})]},x))}),A.jsx("div",{style:{width:"100%",height:260},children:A.jsx(hS,{children:A.jsxs(Qj,{data:s.map(g=>({time:g.time,Temp:g.temp,Umiditate:g.hum})),children:[A.jsx(jv,{strokeDasharray:"3 3"}),A.jsx(km,{dataKey:"time"}),A.jsx(_d,{yAxisId:"left"}),A.jsx(_d,{yAxisId:"right",orientation:"right"}),A.jsx(dS,{}),A.jsx(Mm,{type:"monotone",dataKey:"Temp",yAxisId:"left",stroke:"#8884d8",dot:!1}),A.jsx(Mm,{type:"monotone",dataKey:"Umiditate",yAxisId:"right",stroke:"#82ca9d",dot:!1})]})})})]})]}),A.jsx("div",{className:"small text-center mt-3 text-muted",children:"Weather data by Open-Meteo"})]})]})}function aP(){const{selected:t,selectById:e}=Kd(),[n,i]=O.useState([]),[r,s]=O.useState("Cluj-Napoca"),[a,l]=O.useState({lat:46.7712,lon:23.6236,oras:{nume:"Cluj-Napoca",tara:"Romnia",judet:"Cluj",codPostal:""}}),[f,c]=O.useState([]),[h,p]=O.useState([]),[g,x]=O.useState(null),[b,T]=O.useState(!0),[E,C]=O.useState(!1),[I,P]=O.useState(null);O.useEffect(()=>{const G=g3();i(G),!t&&G.length&&e?.(G[0].id)},[]);const M=O.useMemo(()=>t?n.find(G=>G.id===t.id)??null:null,[t,n]);O.useEffect(()=>{let G=!1;return(async()=>{try{T(!0);const K=I?{lat:I.lat,lon:I.lon,oras:{nume:I.label??r,tara:"",judet:"",codPostal:""}}:await hI(r);if(G)return;l(K);const V=await b3(K.lat,K.lon);if(G)return;c(V.daily),p(V.hourly),x(V.current)}finally{G||T(!1)}})(),()=>{G=!0}},[r,I]);const k=G=>{P({lat:G.lat,lon:G.lon,label:G.oras.nume}),s(G.oras.nume),C(!1)},z=g?.temp??h?.[0]?.temp??null,F=g?.icon??h?.[0]?.icon??"";return A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"weather-card",children:[A.jsx(E3,{sereData:n,selectedSera:M,onUpdateSera:G=>{const K=n.find(V=>V.id===G||V.nume===G);K&&e?.(K.id)},locatie:a,loadingVreme:b,daily:f,hourly:h,current:g,tempNow:z,iconNow:F,onShowModal:()=>C(!0)}),A.jsx("div",{className:"weather-map",children:A.jsx(T3,{sereData:n,selectedSeraId:t?.id,onSelect:G=>e?.(G)})})]}),A.jsx(MJ,{show:E,onHide:()=>C(!1),oras:a.oras.nume,current:g,daily:f,hourly:h,onChangeLocation:k})]})}const kJ="_grid_1hi3d_1",NJ="_card_1hi3d_33",jJ="_highlightBg_1hi3d_51",BJ="_value_1hi3d_69",FJ="_label_1hi3d_79",UJ="_helper_1hi3d_81",$J="_healthy_1hi3d_91",zJ="_warning_1hi3d_97",GJ="_danger_1hi3d_103",HJ="_header_1hi3d_133",KJ="_icon_1hi3d_147",qJ="_body_1hi3d_183",VJ="_arrow_1hi3d_217",Ha={grid:kJ,card:NJ,highlightBg:jJ,value:BJ,label:FJ,helper:UJ,healthy:$J,warning:zJ,danger:GJ,header:HJ,icon:KJ,body:qJ,arrow:VJ},YJ="".replace(/\/$/,""),Yx=new Map;function WJ(t,e,n){const[i,r]=O.useState("");return O.useEffect(()=>{if(e==null)return;const s=Math.round(Number(e)*10)/10,a=`${t}:${s}:${n||""}`;if(Yx.has(a)){r(Yx.get(a));return}let l=!0;return(async()=>{try{const f=new URL(`${YJ}/api/advice`,window.location.origin);f.searchParams.set("sensor",t),f.searchParams.set("value",String(s)),n&&f.searchParams.set("crop",n);const c=await fetch(f.toString(),{cache:"no-store"});if(!c.ok)throw new Error("HTTP "+c.status);const h=await c.json(),p=h?.summary||"",g=Array.isArray(h?.actions)?h.actions.slice(0,2).join("  "):"",x=[p,g].filter(Boolean).join(" ");l&&(Yx.set(a,x),r(x))}catch{l&&r("")}})(),()=>{l=!1}},[t,e,n]),i}function ZJ({icon:t,label:e,value:n,helper:i,status:r,highlight:s,onClick:a,_sensorKey:l,_sensorVal:f,_crop:c}){const h=[Ha.card,s?Ha.highlightBg:"",Ha[r]].filter(Boolean).join(" "),g=(l?WJ(l,f,c):"")||i||"";return A.jsxs("div",{className:h,onClick:a,children:[A.jsxs("div",{className:Ha.header,children:[A.jsx("i",{className:`bi ${t} ${Ha.icon}`}),A.jsx("div",{className:Ha.arrow,children:A.jsx("i",{className:"bi bi-arrow-up-right"})})]}),A.jsxs("div",{className:Ha.body,children:[A.jsx("div",{className:Ha.value,children:n}),A.jsx("div",{className:Ha.label,children:e}),A.jsx("div",{className:Ha.helper,children:g})]})]})}const XJ=[{key:"24h",label:"24h"},{key:"3d",label:"3 zile"},{key:"7d",label:"7 zile"},{key:"30d",label:"30 zile"},{key:"all",label:"Tot"}],QJ=!1,oP="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyLCJ1c2VybmFtZSI6InRlc3RAZ3JlZW5ob3VzZS5vcmciLCJyb2xlIjoxLCJpYXQiOjE3NTY5NjEyNjEsImV4cCI6MTc1NzA0NzY2MX0.VwLf7TRQC3UfhNc0U23IqS6BZZOtOvaz3zdcViQJzyo",JJ="e663ac91d3824a2c",Jj={temp:"TEMPAER",humi_air:"UMDTAER",humi_soil1:"UMDTSOL1",humi_soil2:"UMDTSOL2",humi_soil3:"UMDTSOL3",humi_soil4:"UMDTSOL4",light:"ILUMINARE",water_level:"NIVELAPA",air_quality:"CALITAER"},eee=new Set(Object.values(Jj));function tee(t){switch(t){case"24h":return 24;case"3d":return 72;case"7d":return 168;case"30d":return 720;case"all":return 24*90;default:return 24}}function nee(t,e){return e==="24h"||e==="3d"?t.toLocaleTimeString("ro-RO",{hour:"2-digit",minute:"2-digit"}):t.toLocaleString("ro-RO",{day:"2-digit",month:"short",hour:"2-digit"})}function iee(t){{const e=new URL("/colleagues.php",window.location.origin);return e.searchParams.set("path","reports"),e.searchParams.set("identifier",t),e.toString()}}function eB({senzor:t,onClose:e,boardId:n}){const[i,r]=O.useState("24h"),[s,a]=O.useState(null),[l,f]=O.useState(!0),[c,h]=O.useState(null);if(!t)return null;const p=n||JJ,g=Jj[t.key]||(eee.has(t.key)?t.key:null),x=t.status==="healthy"?"#198754":t.status==="warning"?"#ffc107":"#dc3545",b=O.useMemo(()=>i==="all"?"all":i,[i]);return O.useEffect(()=>{let T=!0;async function E(){if(!g){a(null),f(!1),h("Acest senzor nu are serie numeric n DB.");return}f(!0),h(null);try{const C=iee(p),I={Accept:"application/json"};!QJ&&oP&&(I.Authorization=`Bearer ${oP}`);const P=await fetch(C,{headers:I,cache:"no-store"}),M=await P.text();if(!P.ok){const J=P.status===401?" (verific VITE_COLLEAGUE_API_TOKEN; posibil expirat)":"";throw new Error(`HTTP ${P.status}: ${M.slice(0,200)}${J}`)}let k;try{k=JSON.parse(M)}catch{throw new Error(`Rspuns non-JSON: ${M.slice(0,200)}`)}const z=k&&!Array.isArray(k)&&(k.data||k.rows||k.reports||k)||null;let F=[];z&&z[g]&&Array.isArray(z[g])?F=z[g]:Array.isArray(k)?F=k.map(J=>({value:J[g],timestamp:J.STIMEACQ||J.timestamp||J.time||J.date})).filter(J=>J.timestamp&&(J.value||J.value===0)):Array.isArray(k?.data)&&(F=k.data.map(J=>({value:J[g],timestamp:J.STIMEACQ||J.timestamp||J.time||J.date})).filter(J=>J.timestamp&&(J.value||J.value===0)));const G=Date.now(),K=G-tee(b)*3600*1e3,Q=F.map(J=>{const ve=Date.parse(String(J.timestamp).replace(" ","T")),se=Number(J.value);return{ms:ve,v:se}}).filter(J=>Number.isFinite(J.ms)&&Number.isFinite(J.v)).sort((J,ve)=>J.ms-ve.ms).filter(J=>b==="all"?!0:J.ms>=K&&J.ms<=G).map(J=>({label:nee(new Date(J.ms),b),value:J.v}));if(!T)return;a(Q)}catch(C){if(!T)return;console.error("[modal] eroare:",C?.message),h(C?.message||"Nu s-au putut ncrca datele de la colegi."),a([])}finally{T&&f(!1)}}return E(),()=>{T=!1}},[p,g,b]),A.jsxs(gi,{show:!0,onHide:e,size:"lg",centered:!0,children:[A.jsx(gi.Header,{closeButton:!0,children:A.jsx(gi.Title,{children:t.label||t.key})}),A.jsxs(gi.Body,{children:[A.jsxs("div",{style:{textAlign:"center",marginBottom:20},children:[A.jsx("span",{style:{fontSize:"2.5rem",fontWeight:600,color:x},children:t.value??""}),A.jsx("div",{style:{color:"#666",marginTop:4},children:t.helper})]}),A.jsx(DI,{className:"mb-3",children:XJ.map(T=>A.jsx(sa,{variant:i===T.key?"primary":"outline-secondary",onClick:()=>r(T.key),children:T.label},T.key))}),l&&A.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[A.jsx(Od,{size:"sm"})," Se ncarc seria"]}),c&&A.jsxs(hm,{variant:"danger",children:["Eroare: ",c]}),!l&&!c&&s&&s.length>0&&A.jsx("div",{style:{width:"100%",height:300},children:A.jsx(hS,{children:A.jsxs(Qj,{data:s,margin:{left:-20,right:20},children:[A.jsx(jv,{strokeDasharray:"3 3"}),A.jsx(km,{dataKey:"label",minTickGap:24}),A.jsx(_d,{}),A.jsx(dS,{}),A.jsx(Mm,{type:"monotone",dataKey:"value",dot:!1,stroke:"#0d6efd",isAnimationActive:!1})]})})}),!l&&!c&&(!s||s.length===0)&&A.jsx("div",{style:{color:"#555"},children:"Nu exist date pentru intervalul selectat."})]}),A.jsx(gi.Footer,{children:A.jsx(sa,{variant:"secondary",onClick:e,children:"nchide"})})]})}const ree="/api".replace(/\/$/,""),gm={temp:{minSoft:10,minGood:28,maxGood:35,maxSoft:45},humi_air:{minSoft:30,minGood:60,maxGood:85,maxSoft:100},light:{minSoft:500,minGood:5e3,maxGood:2e4,maxSoft:12e4},water_level:{minSoft:0,minGood:40,maxGood:90,maxSoft:100},air_quality:{ideal:1e3,warn:1500,bad:3e3},humi_soil1:{minSoft:10,minGood:40,maxGood:70,maxSoft:100},humi_soil2:{minSoft:10,minGood:40,maxGood:70,maxSoft:100},humi_soil3:{minSoft:10,minGood:40,maxGood:70,maxSoft:100},humi_soil4:{minSoft:10,minGood:40,maxGood:70,maxSoft:100}},Wc={temp:{label:"Temperatur aer",unit:"C",icon:"bi-thermometer"},humi_air:{label:"Umiditate aer",unit:"%",icon:"bi-droplet"},humi_soil1:{label:"Umiditate sol 1",unit:"%",icon:"bi-moisture"},humi_soil2:{label:"Umiditate sol 2",unit:"%",icon:"bi-moisture"},humi_soil3:{label:"Umiditate sol 3",unit:"%",icon:"bi-moisture"},humi_soil4:{label:"Umiditate sol 4",unit:"%",icon:"bi-moisture"},light:{label:"Iluminare",unit:" lx",icon:"bi-brightness-high"},water_level:{label:"Nivel ap",unit:"%",icon:"bi-droplet-half"},air_quality:{label:"Calitatea aerului",unit:"",icon:"bi-wind"}},lP=(t,e,n)=>Math.max(e,Math.min(n,t)),uP=(t,e,n)=>t+(e-t)*n;function see(t,{minSoft:e,minGood:n,maxGood:i,maxSoft:r}){return Number.isFinite(t)?t>=n&&t<=i?100:t<n?lP((t-e)/(n-e)*100,0,100):lP((r-t)/(r-i)*100,0,100):null}function aee(t,{ideal:e,warn:n,bad:i}){return Number.isFinite(t)?t<=e?100:t<=n?uP(100,70,(t-e)/(n-e)):t<=i?uP(70,0,(t-n)/(i-n)):0:null}function F0(t,e){const n=Number(e);if(!Number.isFinite(n))return{score:null,status:"healthy"};const i=t==="air_quality"?aee(n,gm.air_quality):see(n,gm[t]||gm.humi_soil1);if(i===null)return{score:null,status:"healthy"};const r=i>=85?"healthy":i>=60?"warning":"danger";return{score:Math.round(i),status:r}}function oee(t){let e=0,n=0;for(const[i,r]of Object.entries(t||{})){if(!(i in gm))continue;const{score:s}=F0(i,r);s!==null&&(e+=s,n++)}return n?Math.round(e/n):0}function Ng(t,e=5){const n=[];for(const[i,r]of Object.entries(t||{})){if(!(i in gm))continue;const{score:s,status:a}=F0(i,r);s!==null&&n.push({key:i,value:r,deficit:100-s,status:a,label:Wc[i]?.label||i,unit:Wc[i]?.unit||"",icon:Wc[i]?.icon||"bi-question-circle"})}return n.sort((i,r)=>r.deficit-i.deficit).slice(0,e)}const cP=new Map,lee=10*60*1e3,uee=7e3,cee={temp:"TEMPAER",humi_air:"UMDTAER",humi_soil1:"UMDTSOL1",humi_soil2:"UMDTSOL2",humi_soil3:"UMDTSOL3",humi_soil4:"UMDTSOL4",light:"ILUMINARE",water_level:"NIVELAPA",air_quality:"CALITAER"},fee=(t,e=uee)=>new Promise((n,i)=>{const r=setTimeout(()=>i(new Error("timeout")),e);t.then(s=>{clearTimeout(r),n(s)}).catch(s=>{clearTimeout(r),i(s)})});async function dee(t,e){const n=`${t}|${e}`,i=cP.get(n);if(i&&Date.now()-i.ts<lee)return i.avg;const r=cee[e];if(!r)return null;const s=new URLSearchParams({boardId:t,key:r,range:"24h"}),a=`${ree}/sensors/history.php?${s}`,l=await fee(fetch(a,{cache:"no-store",credentials:"include"}));if(!l.ok)throw new Error(`HTTP ${l.status}`);const f=await l.json();if(!f.ok)throw new Error(f.error||"Eroare API");const c=f.data||[];let h=0,p=0;for(const x of c){const b=Number(x.val),{score:T}=F0(e,b);T!==null&&(h+=T,p++)}const g=p?h/p:null;return g!==null&&cP.set(n,{ts:Date.now(),avg:g}),g}async function hee(t,e,n=2){const i=[];let r=0;const s=Array.from({length:Math.min(n,t.length)},async()=>{for(;r<t.length;){const a=t[r++];i.push(await e(a))}});return await Promise.all(s),i}async function mee(t,e,n=5){const i=Ng(e,Math.max(n*2,n+2)).map(a=>a.key);if(!i.length)return Ng(e,n);const s=(await hee(i,async a=>{try{const l=await dee(t,a);if(l===null)return null;const{status:f}=F0(a,e[a]);return{key:a,value:e[a],deficit:100-Math.round(l),status:f,label:Wc[a]?.label||a,unit:Wc[a]?.unit||"",icon:Wc[a]?.icon||"bi-question-circle"}}catch{return null}},2)).filter(Boolean).sort((a,l)=>l.deficit-a.deficit).slice(0,n);return s.length?s:Ng(e,n)}function pee(){const[t,e]=O.useState({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0});return O.useEffect(()=>{const n=()=>e({width:window.innerWidth,height:window.innerHeight});return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t}function gee(t){{const e=new URL("/colleagues.php",window.location.origin);return e.searchParams.set("path","sensors"),e.searchParams.set("identifier",t),e.searchParams.set("_",Date.now()),{url:e.toString(),headers:{Accept:"application/json"}}}}async function vee(t,e){const n=await fetch(t,{cache:"no-store",...e}),i=await n.text();if(!n.ok)throw new Error(`HTTP ${n.status}: ${i.slice(0,200)}`);try{return JSON.parse(i)}catch{throw new Error(`Nu e JSON: ${i.slice(0,200)}`)}}async function fP(t){const{url:e,headers:n}=gee(t),i=await vee(e,{headers:n});return i?.data??i}const yee="e663ac91d3824a2c",bee={"mock:mirror":{type:"mirror",src:yee,noise:.06},"mock:synthetic":{type:"synthetic"}},xee=(t,e=.05)=>{const n=Number(t);if(!Number.isFinite(n))return t;const i=Math.max(1,Math.abs(n))*e;return+(n+(Math.random()*2-1)*i).toFixed(2)},_ee=(t,e=.05)=>{const n={...t};return["TEMPAER","UMDTAER","UMDTSOL1","UMDTSOL2","UMDTSOL3","UMDTSOL4","ILUMINARE","NIVELAPA","CALITAER"].forEach(i=>{i in n&&(n[i]=xee(n[i],e))}),n},See=(t=Date.now())=>{const e=t/1e3,n=(a,l,f=0)=>a+l*Math.sin(e/600+f),i=(a,l,f)=>Math.min(f,Math.max(l,a)),r=new Date(t).getHours(),s=(Math.sin(r/24*2*Math.PI-Math.PI/2)+1)/2*22e3+300;return{TEMPAER:+i(n(26,6),18,38).toFixed(1),UMDTAER:+i(n(70,12,1),40,95).toFixed(0),UMDTSOL1:+i(n(55,10,.3),25,90).toFixed(0),UMDTSOL2:+i(n(50,12,.9),25,90).toFixed(0),UMDTSOL3:+i(n(52,11,1.5),25,90).toFixed(0),UMDTSOL4:+i(n(48,9,2.2),25,90).toFixed(0),NIVELAPA:+i(80-e%3600/60,30,90).toFixed(0),ILUMINARE:+i(s,200,25e3).toFixed(0),CALITAER:+i(600+500*Math.sin(e/300)+300*Math.random(),400,2e3).toFixed(0),STAREAER:Math.random()<.05?"ALERT":"OK",EXCESAPA:0}};async function Eee(t){const e=bee[t];return e?e.type==="mirror"?_ee(await fP(e.src),e.noise??.06):See(Date.now()):fP(t)}const Tee=Math.max(1e3,1e4);function Aee(t,e){if(e==null||Number.isNaN(Number(e)))return"";const n=Number(e);switch(t){case"temp":return n>=28&&n<=35?"Temperatura e n intervalul optim.":n<28?"Prea rece: crete nclzirea sau izolaia; redu curenii de aer.":"Prea cald: pornete ventilarea/umbrete; crete circulaia aerului.";case"humi_air":return n>=60&&n<=85?"Umiditatea aerului e bun.":n<60?"Aerul e uscat: adaug umidificare sau micoreaz ventilarea.":"Prea umed: crete ventilarea i evit supra-udarea.";case"light":return n>=5e3&&n<=2e4?"Iluminarea e adecvat.":n<5e3?"Lumina e slab: apropie sursa sau crete durata.":"Lumina e prea puternic: folosete umbrire/difuzie.";case"water_level":return n>=40&&n<=90?"Rezervorul are nivel potrivit.":n<40?"Rezervor sczut: completeaz apa.":"Nivel foarte ridicat: verific preaplinul/senzorul.";case"air_quality":return n<=1e3?"Calitatea aerului e bun.":n<=1500?"Ventileaz periodic pentru a mbunti calitatea aerului.":"Calitate slab: pornete ventilarea continu i verific circulaia aerului.";case"humi_soil1":case"humi_soil2":case"humi_soil3":case"humi_soil4":return n>=40&&n<=70?"Solul e udat corect.":n<40?"Sol uscat: programeaz udare sau mrete durata.":"Sol prea umed: reduce frecvena udrilor i verific drenajul.";default:return""}}function wee(t,e=""){if(t==null||t==="")return"";const n=Number(t);return Number.isFinite(n)?`${n}${e}`:`${t}${e}`}function Lee(t={}){const e=Number(t.ILUMINARE),n=Number.isFinite(e)?Math.min(Math.max(e,1),13e4):void 0;return{temp:t.TEMPAER,humi_air:t.UMDTAER,humi_soil1:t.UMDTSOL1,humi_soil2:t.UMDTSOL2,humi_soil3:t.UMDTSOL3,humi_soil4:t.UMDTSOL4,light:n,water_level:t.NIVELAPA,air_quality:t.CALITAER}}function dP({boardId:t}){const{width:e}=pee(),{boardId:n}=Kd(),i=t||n||"e663ac91d3824a2c",[r,s]=O.useState(null),[a,l]=O.useState(!0),[f,c]=O.useState(null),[h,p]=O.useState(null),[g,x]=O.useState([]),b=O.useRef(0);O.useEffect(()=>{let F;const G=async()=>{const K=++b.current;l(!0),c(null);try{const V=await Eee(i);K===b.current&&s(V)}catch(V){K===b.current&&c(String(V?.message||V))}finally{K===b.current&&l(!1)}};return G(),F=setInterval(G,Tee),()=>clearInterval(F)},[i]);const T=O.useMemo(()=>Lee(r||{}),[r]),E=e>600?5:3,C=O.useMemo(()=>r?oee(T):0,[r,T]),I=C>=95?"Plantele sunt n cele mai bune condiii.":C>=80?"n general e bine; cteva valori pot fi optimizate.":C>=60?"Mai multe valori sunt n afara intervalelor recomandate.":"Condiii slabe  vezi problemele principale de mai jos.",P=O.useMemo(()=>Ng(T,E),[T,E]);O.useEffect(()=>{x(P)},[P]),O.useEffect(()=>{let F=!0;const G=async()=>{try{const K=await mee(i,T,E);F&&K?.length&&x(K)}catch{}};if("requestIdleCallback"in window){const K=window.requestIdleCallback(G,{timeout:1200});return()=>{F=!1,window.cancelIdleCallback?.(K)}}else{const K=setTimeout(G,0);return()=>{F=!1,clearTimeout(K)}}},[i,E]);const M=a&&!r,k=!a&&!r;let z=null;if(M)z=A.jsx("div",{style:{padding:20,textAlign:"center"},children:"Se ncarc"});else if(k)z=A.jsx("div",{style:{padding:20,textAlign:"center"},children:f?`Eroare: ${f}`:"Nu exist date."});else{const F=[{key:"health",icon:"bi-heart-pulse",label:"Sntatea plantelor",value:`${C}%`,helper:I,status:C>=85?"healthy":C>=60?"warning":"danger",highlight:!0},...g.map(G=>{const K=Wc[G.key]||{label:G.key,unit:"",icon:"bi-question-circle"},V=T[G.key];return{key:G.key,icon:K.icon,label:K.label,value:wee(V,K.unit),helper:Aee(G.key,V),status:G.status||"healthy",highlight:!1}})];z=A.jsxs(A.Fragment,{children:[f&&A.jsx("div",{style:{padding:"8px 12px",marginBottom:10,textAlign:"center",color:"#b00020"},children:f}),A.jsx("div",{className:Ha.grid,children:F.map(({key:G,...K})=>A.jsx(ZJ,{...K,onClick:G==="health"?void 0:()=>p({key:G,...K})},G))})]})}return A.jsxs(A.Fragment,{children:[z,h&&A.jsx(eB,{senzor:h,boardId:i,onClose:()=>p(null)})]})}const VT=t=>`autos.simple.${t}`;function hP(t){switch(t){case"rosii":return{irrigation:{enabled:!1,times:["06:30","19:30"],durationMin:6,bySoil:{enabled:!0,thresholdPct:40}},ventilation:{enabled:!0,thresholdC:30},lights:{enabled:!1,from:"17:00",to:"21:00"},pests:{enabled:!0}};case"ardei":return{irrigation:{enabled:!1,times:["07:00","20:00"],durationMin:5,bySoil:{enabled:!0,thresholdPct:38}},ventilation:{enabled:!0,thresholdC:31},lights:{enabled:!1,from:"18:00",to:"22:00"},pests:{enabled:!0}};default:return{irrigation:{enabled:!1,times:["07:00","19:00"],durationMin:5,bySoil:{enabled:!0,thresholdPct:35}},ventilation:{enabled:!0,thresholdC:29},lights:{enabled:!1,from:"17:30",to:"20:30"},pests:{enabled:!0}}}}function Cee(t){try{const e=localStorage.getItem(VT(t));return e?JSON.parse(e):hP(t)}catch{return hP(t)}}function Oee(t,e){try{localStorage.setItem(VT(t),JSON.stringify(e)),window.dispatchEvent(new CustomEvent("autos-cfg-changed",{detail:{seraId:t,cfg:e}}))}catch{}}function mP({seraId:t="spanac"}){const[e,n]=O.useState(()=>Cee(t));O.useEffect(()=>{const h=g=>{if(g.key===VT(t)&&g.newValue)try{n(JSON.parse(g.newValue))}catch{}},p=g=>{g.detail?.seraId===t&&g.detail?.cfg&&n(g.detail.cfg)};return window.addEventListener("storage",h),window.addEventListener("autos-cfg-changed",p),()=>{window.removeEventListener("storage",h),window.removeEventListener("autos-cfg-changed",p)}},[t]);const i=(h,p)=>{n(g=>{const x=structuredClone(g),b=h.split(".");let T=x;return b.slice(0,-1).forEach(E=>T=T[E]),T[b[b.length-1]]=p,Oee(t,x),x})},r=[{id:1,title:"Irigare finalizat",description:"Udarea complet a plantelor n zona A",time:"07:30 AM",isCompleted:!0},{id:2,title:"Ventilaie activat",description:"Activare ventilaie automat pentru 30 min",time:"08:00 AM",isCompleted:!0},{id:3,title:"Fertilizare sol",description:"Aplicare fertilizator organic, 50g / plant",time:"08:45 AM",isCompleted:!0},{id:4,title:"Monitorizare duntori",description:"Verificare vizual i nregistrare n aplicaie",time:"09:15 AM",isCompleted:!1},{id:5,title:"Deschidere lateral solar",description:"Deschidere automat laturi solare pentru aerisire",time:"10:00 AM",isCompleted:!1}],s=Array.from({length:3},(h,p)=>{const g=p+1,x=10+Math.floor(g/2),b=g%2===0?"30":"00",T=x<12?"AM":"PM",E=(x-1)%12+1;return{id:r.length+g,title:`Rulare automatizare #${g}`,description:g%3===0?"Verificare senzori i loguri":"Irigare sector B timp 3 minute",time:`${String(E).padStart(2,"0")}:${b} ${T}`,isCompleted:g%4===0}}),a=[...r,...s],l=a.filter(h=>h.isCompleted).length,f=a.length,c=f?Math.round(l/f*100):0;return A.jsxs("div",{className:"sarcini-container",children:[A.jsxs("div",{className:"autos-panel",children:[A.jsx("h3",{className:"qa-title",children:"Automatizri"}),A.jsxs("div",{className:"autos-grid",children:[A.jsxs("div",{className:"qa-item",children:[A.jsxs("div",{className:"qa-left",children:[A.jsx("span",{className:"qa-icon","aria-hidden":!0,children:""}),A.jsx("span",{className:"qa-name",children:"Udare"})]}),A.jsxs("label",{className:"qa-toggle",children:[A.jsx("input",{type:"checkbox",checked:!!e.irrigation?.enabled,onChange:h=>i("irrigation.enabled",h.target.checked),"aria-label":"Comut Udare ora fix"}),A.jsx("span",{className:"qa-slider"})]})]}),A.jsxs("div",{className:"qa-item",children:[A.jsxs("div",{className:"qa-left",children:[A.jsx("span",{className:"qa-icon","aria-hidden":!0,children:""}),A.jsx("span",{className:"qa-name",children:"Camer"})]}),A.jsxs("label",{className:"qa-toggle",children:[A.jsx("input",{type:"checkbox",checked:!!e.pests?.enabled,onChange:h=>i("pests.enabled",h.target.checked),"aria-label":"Comut Camer"}),A.jsx("span",{className:"qa-slider"})]})]}),A.jsxs("div",{className:"qa-item",children:[A.jsxs("div",{className:"qa-left",children:[A.jsx("span",{className:"qa-icon","aria-hidden":!0,children:""}),A.jsx("span",{className:"qa-name",children:"Aerisire"})]}),A.jsxs("label",{className:"qa-toggle",children:[A.jsx("input",{type:"checkbox",checked:!!e.ventilation?.enabled,onChange:h=>i("ventilation.enabled",h.target.checked),"aria-label":"Comut Aerisire automat"}),A.jsx("span",{className:"qa-slider"})]})]}),A.jsxs("div",{className:"qa-item",children:[A.jsxs("div",{className:"qa-left",children:[A.jsx("span",{className:"qa-icon","aria-hidden":!0,children:""}),A.jsx("span",{className:"qa-name",children:"Iluminat"})]}),A.jsxs("label",{className:"qa-toggle",children:[A.jsx("input",{type:"checkbox",checked:!!e.lights?.enabled,onChange:h=>i("lights.enabled",h.target.checked),"aria-label":"Comut Iluminat"}),A.jsx("span",{className:"qa-slider"})]})]})]})]}),A.jsx("div",{className:"sarcini-header",children:A.jsx("h3",{children:"Sarcini realizate"})}),A.jsx("div",{className:"progress-bar-container",children:A.jsx("div",{className:"progress-bar-fill",style:{width:`${c}%`}})}),A.jsx("div",{className:"tasks-subheader",children:A.jsxs("div",{className:"tasks-metrics",children:[A.jsxs("span",{className:"progress-percentage",children:[c,"%"]}),A.jsx("span",{className:"progress-count",children:A.jsxs("strong",{children:[l,"/",f]})})]})}),A.jsx("div",{className:"task-list",children:a.map(h=>A.jsxs("div",{className:"task-card",children:[A.jsxs("div",{className:"task-content",children:[A.jsx("strong",{className:"task-title",children:h.title}),A.jsx("p",{className:"task-description",children:h.description}),A.jsx("small",{className:"task-time",children:h.time})]}),A.jsx("div",{className:"task-icon",children:h.isCompleted?A.jsx("i",{className:"bi bi-check-circle-fill text-success fs-5"}):A.jsx("i",{className:"bi bi-circle fs-5",style:{color:"#cccccc"}})})]},h.id))})]})}const qe=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},Ree=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=Pee},Pee=Number.MAX_SAFE_INTEGER||9007199254740991;let at=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),pe=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",t.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",t.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.ASSET_LIST_LOAD_ERROR="assetListLoadError",t.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",t.ASSET_LIST_PARSING_ERROR="assetListParsingError",t.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.ATTACH_MEDIA_ERROR="attachMediaError",t.UNKNOWN="unknown",t}({}),B=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.MEDIA_ENDED="hlsMediaEnded",t.STALL_RESOLVED="hlsStallResolved",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFERED_TO_END="hlsBufferedToEnd",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t.ASSET_LIST_LOADING="hlsAssetListLoading",t.ASSET_LIST_LOADED="hlsAssetListLoaded",t.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",t.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",t.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",t.INTERSTITIAL_STARTED="hlsInterstitialStarted",t.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",t.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",t.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",t.INTERSTITIAL_ENDED="hlsInterstitialEnded",t.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",t.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",t.EVENT_CUE_ENTER="hlsEventCueEnter",t}({});var Mt={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},et={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class ld{constructor(e,n=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=n,this.totalWeight_=i}sample(e,n){const i=Math.pow(this.alpha_,e);this.estimate_=n*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Dee{constructor(e,n,i,r=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ld(e),this.fast_=new ld(n),this.defaultTTFB_=r,this.ttfb_=new ld(e)}update(e,n){const{slow_:i,fast_:r,ttfb_:s}=this;i.halfLife!==e&&(this.slow_=new ld(e,i.getEstimate(),i.getTotalWeight())),r.halfLife!==n&&(this.fast_=new ld(n,r.getEstimate(),r.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new ld(e,s.getEstimate(),s.getTotalWeight()))}sample(e,n){e=Math.max(e,this.minDelayMs_);const i=8*n,r=e/1e3,s=i/r;this.fast_.sample(r,s),this.slow_.sample(r,s)}sampleTTFB(e){const n=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(n,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function Iee(t,e,n){return(e=kee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cn(){return cn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cn.apply(null,arguments)}function pP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function pn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pP(Object(n),!0).forEach(function(i){Iee(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Mee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kee(t){var e=Mee(t,"string");return typeof e=="symbol"?e:e+""}class io{constructor(e,n){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const i=`[${e}]:`;this.trace=Gu,this.debug=n.debug.bind(null,i),this.log=n.log.bind(null,i),this.warn=n.warn.bind(null,i),this.info=n.info.bind(null,i),this.error=n.error.bind(null,i)}}const Gu=function(){},Nee={trace:Gu,debug:Gu,log:Gu,warn:Gu,info:Gu,error:Gu};function TS(){return cn({},Nee)}function jee(t,e){const n=self.console[t];return n?n.bind(self.console,`${e?"["+e+"] ":""}[${t}] >`):Gu}function gP(t,e,n){return e[t]?e[t].bind(e):jee(t,n)}const AS=TS();function Bee(t,e,n){const i=TS();if(typeof console=="object"&&t===!0||typeof t=="object"){const r=["debug","log","info","warn","error"];r.forEach(s=>{i[s]=gP(s,t,n)});try{i.log(`Debug logs enabled for "${e}" in hls.js version 1.6.7`)}catch{return TS()}r.forEach(s=>{AS[s]=gP(s,t)})}else cn(AS,i);return i}const Wt=AS;function Zu(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function Fee(t){return typeof self<"u"&&t===self.ManagedMediaSource}function tB(t,e){const n=Object.keys(t),i=Object.keys(e),r=n.length,s=i.length;return!r||!s||r===s&&!n.some(a=>i.indexOf(a)===-1)}function ws(t,e=!1){if(typeof TextDecoder<"u"){const c=new TextDecoder("utf-8").decode(t);if(e){const h=c.indexOf("\0");return h!==-1?c.substring(0,h):c}return c.replace(/\0/g,"")}const n=t.length;let i,r,s,a="",l=0;for(;l<n;){if(i=t[l++],i===0&&e)return a;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(i);break;case 12:case 13:r=t[l++],a+=String.fromCharCode((i&31)<<6|r&63);break;case 14:r=t[l++],s=t[l++],a+=String.fromCharCode((i&15)<<12|(r&63)<<6|(s&63)<<0);break}}return a}const Fc={hexDump:function(t){let e="";for(let n=0;n<t.length;n++){let i=t[n].toString(16);i.length<2&&(i="0"+i),e+=i}return e}};function nB(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function Uee(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wx={exports:{}},vP;function $ee(){return vP||(vP=1,function(t,e){(function(n){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,l={buildAbsoluteURL:function(f,c,h){if(h=h||{},f=f.trim(),c=c.trim(),!c){if(!h.alwaysNormalize)return f;var p=l.parseURL(f);if(!p)throw new Error("Error trying to parse base URL.");return p.path=l.normalizePath(p.path),l.buildURLFromParts(p)}var g=l.parseURL(c);if(!g)throw new Error("Error trying to parse relative URL.");if(g.scheme)return h.alwaysNormalize?(g.path=l.normalizePath(g.path),l.buildURLFromParts(g)):c;var x=l.parseURL(f);if(!x)throw new Error("Error trying to parse base URL.");if(!x.netLoc&&x.path&&x.path[0]!=="/"){var b=r.exec(x.path);x.netLoc=b[1],x.path=b[2]}x.netLoc&&!x.path&&(x.path="/");var T={scheme:x.scheme,netLoc:g.netLoc,path:null,params:g.params,query:g.query,fragment:g.fragment};if(!g.netLoc&&(T.netLoc=x.netLoc,g.path[0]!=="/"))if(!g.path)T.path=x.path,g.params||(T.params=x.params,g.query||(T.query=x.query));else{var E=x.path,C=E.substring(0,E.lastIndexOf("/")+1)+g.path;T.path=l.normalizePath(C)}return T.path===null&&(T.path=h.alwaysNormalize?l.normalizePath(g.path):g.path),l.buildURLFromParts(T)},parseURL:function(f){var c=i.exec(f);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(f){for(f=f.split("").reverse().join("").replace(s,"");f.length!==(f=f.replace(a,"")).length;);return f.split("").reverse().join("")},buildURLFromParts:function(f){return f.scheme+f.netLoc+f.path+f.params+f.query+f.fragment}};t.exports=l})()}(Wx)),Wx.exports}var YT=$ee();class WT{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var xn={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class iB{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,Gee(this,"stats")}setByteRange(e,n){const i=e.split("@",2);let r;i.length===1?r=n?.byteRangeEndOffset||0:r=parseInt(i[1]),this._byteRange=[r,parseInt(i[0])+r]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[xn.AUDIO]:null,[xn.VIDEO]:null,[xn.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new WT),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=YT.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[xn.AUDIO]=null,e[xn.VIDEO]=null,e[xn.AUDIOVIDEO]=null}}function oi(t){return t.sn!=="initSegment"}class Zx extends iB{constructor(e,n){super(n),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange){const e=this.byteRange[0],n=this.byteRange[1];if(qe(e)&&qe(n))return n-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const n=this.levelkeys.identity;if(n)this._decryptdata=n.getDecryptData(this.sn);else{const i=Object.keys(this.levelkeys);if(i.length===1)return this._decryptdata=this.levelkeys[i[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=qe(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const n=Object.keys(this.levelkeys),i=n.length;if(i>1||i===1&&this.levelkeys[n[0]].encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!qe(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return oi(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const n=this.levelkeys[e];n&&!this._decryptdata&&(this._decryptdata=n.getDecryptData(this.sn))}}abortRequests(){var e,n;(e=this.loader)==null||e.abort(),(n=this.keyLoader)==null||n.abort()}setElementaryStreamInfo(e,n,i,r,s,a=!1){const{elementaryStreams:l}=this,f=l[e];if(!f){l[e]={startPTS:n,endPTS:i,startDTS:r,endDTS:s,partial:a};return}f.startPTS=Math.min(f.startPTS,n),f.endPTS=Math.max(f.endPTS,i),f.startDTS=Math.min(f.startDTS,r),f.endDTS=Math.max(f.endDTS,s)}}class zee extends iB{constructor(e,n,i,r,s){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=n,this.index=r;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function rB(t,e){const n=Object.getPrototypeOf(t);if(n){const i=Object.getOwnPropertyDescriptor(n,e);return i||rB(n,e)}}function Gee(t,e){const n=rB(t,e);n&&(n.enumerable=!0,Object.defineProperty(t,e,n))}const yP=Math.pow(2,32)-1,Hee=[].push,sB={video:1,audio:2,id3:3,text:4};function ji(t){return String.fromCharCode.apply(null,t)}function aB(t,e){const n=t[e]<<8|t[e+1];return n<0?65536+n:n}function Tt(t,e){const n=oB(t,e);return n<0?4294967296+n:n}function bP(t,e){let n=Tt(t,e);return n*=Math.pow(2,32),n+=Tt(t,e+4),n}function oB(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function Kee(t){const e=t.byteLength;for(let n=0;n<e;){const i=Tt(t,n);if(i>8&&t[n+4]===109&&t[n+5]===111&&t[n+6]===111&&t[n+7]===102)return!0;n=i>1?n+i:e}return!1}function Dt(t,e){const n=[];if(!e.length)return n;const i=t.byteLength;for(let r=0;r<i;){const s=Tt(t,r),a=ji(t.subarray(r+4,r+8)),l=s>1?r+s:i;if(a===e[0])if(e.length===1)n.push(t.subarray(r+8,l));else{const f=Dt(t.subarray(r+8,l),e.slice(1));f.length&&Hee.apply(n,f)}r=l}return n}function qee(t){const e=[],n=t[0];let i=8;const r=Tt(t,i);i+=4;let s=0,a=0;n===0?(s=Tt(t,i),a=Tt(t,i+4),i+=8):(s=bP(t,i),a=bP(t,i+8),i+=16),i+=2;let l=t.length+a;const f=aB(t,i);i+=2;for(let c=0;c<f;c++){let h=i;const p=Tt(t,h);h+=4;const g=p&2147483647;if((p&2147483648)>>>31===1)return Wt.warn("SIDX has hierarchical references (not supported)"),null;const b=Tt(t,h);h+=4,e.push({referenceSize:g,subsegmentDuration:b,info:{duration:b/r,start:l,end:l+g-1}}),l+=g,h+=4,i=h}return{earliestPresentationTime:s,timescale:r,version:n,referencesCount:f,references:e}}function lB(t){const e=[],n=Dt(t,["moov","trak"]);for(let r=0;r<n.length;r++){const s=n[r],a=Dt(s,["tkhd"])[0];if(a){let l=a[0];const f=Tt(a,l===0?12:20),c=Dt(s,["mdia","mdhd"])[0];if(c){l=c[0];const h=Tt(c,l===0?12:20),p=Dt(s,["mdia","hdlr"])[0];if(p){const g=ji(p.subarray(8,12)),x={soun:xn.AUDIO,vide:xn.VIDEO}[g],b=Dt(s,["mdia","minf","stbl","stsd"])[0],T=Vee(b);x?(e[f]={timescale:h,type:x,stsd:T},e[x]=pn({timescale:h,id:f},T)):e[f]={timescale:h,type:g,stsd:T}}}}}return Dt(t,["moov","mvex","trex"]).forEach(r=>{const s=Tt(r,4),a=e[s];a&&(a.default={duration:Tt(r,12),flags:Tt(r,20)})}),e}function Vee(t){const e=t.subarray(8),n=e.subarray(86),i=ji(e.subarray(4,8));let r=i,s;const a=i==="enca"||i==="encv";if(a){const c=Dt(e,[i])[0].subarray(i==="enca"?28:78);Dt(c,["sinf"]).forEach(p=>{const g=Dt(p,["schm"])[0];if(g){const x=ji(g.subarray(4,8));if(x==="cbcs"||x==="cenc"){const b=Dt(p,["frma"])[0];b&&(r=ji(b))}}})}const l=r;switch(r){case"avc1":case"avc2":case"avc3":case"avc4":{const f=Dt(n,["avcC"])[0];f&&f.length>3&&(r+="."+bg(f[1])+bg(f[2])+bg(f[3]),s=yg(l==="avc1"?"dva1":"dvav",n));break}case"mp4a":{const f=Dt(e,[i])[0],c=Dt(f.subarray(28),["esds"])[0];if(c&&c.length>7){let h=4;if(c[h++]!==3)break;h=Xx(c,h),h+=2;const p=c[h++];if(p&128&&(h+=2),p&64&&(h+=c[h++]),c[h++]!==4)break;h=Xx(c,h);const g=c[h++];if(g===64)r+="."+bg(g);else break;if(h+=12,c[h++]!==5)break;h=Xx(c,h);const x=c[h++];let b=(x&248)>>3;b===31&&(b+=1+((x&7)<<3)+((c[h]&224)>>5)),r+="."+b}break}case"hvc1":case"hev1":{const f=Dt(n,["hvcC"])[0];if(f&&f.length>12){const c=f[1],h=["","A","B","C"][c>>6],p=c&31,g=Tt(f,2),x=(c&32)>>5?"H":"L",b=f[12],T=f.subarray(6,12);r+="."+h+p,r+="."+Yee(g).toString(16).toUpperCase(),r+="."+x+b;let E="";for(let C=T.length;C--;){const I=T[C];(I||E)&&(E="."+I.toString(16).toUpperCase()+E)}r+=E}s=yg(l=="hev1"?"dvhe":"dvh1",n);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{r=yg(r,n)||r;break}case"vp09":{const f=Dt(n,["vpcC"])[0];if(f&&f.length>6){const c=f[4],h=f[5],p=f[6]>>4&15;r+="."+Oo(c)+"."+Oo(h)+"."+Oo(p)}break}case"av01":{const f=Dt(n,["av1C"])[0];if(f&&f.length>2){const c=f[1]>>>5,h=f[1]&31,p=f[2]>>>7?"H":"M",g=(f[2]&64)>>6,x=(f[2]&32)>>5,b=c===2&&g?x?12:10:g?10:8,T=(f[2]&16)>>4,E=(f[2]&8)>>3,C=(f[2]&4)>>2,I=f[2]&3;r+="."+c+"."+Oo(h)+p+"."+Oo(b)+"."+T+"."+E+C+I+"."+Oo(1)+"."+Oo(1)+"."+Oo(1)+"."+0,s=yg("dav1",n)}break}}return{codec:r,encrypted:a,supplemental:s}}function yg(t,e){const n=Dt(e,["dvvC"]),i=n.length?n[0]:Dt(e,["dvcC"])[0];if(i){const r=i[2]>>1&127,s=i[2]<<5&32|i[3]>>3&31;return t+"."+Oo(r)+"."+Oo(s)}}function Yee(t){let e=0;for(let n=0;n<32;n++)e|=(t>>n&1)<<31-n;return e>>>0}function Xx(t,e){const n=e+5;for(;t[e++]&128&&e<n;);return e}function bg(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function Oo(t){return(t<10?"0":"")+t}function Wee(t,e){if(!t||!e)return t;const n=e.keyId;return n&&e.isCommonEncryption&&Dt(t,["moov","trak"]).forEach(r=>{const a=Dt(r,["mdia","minf","stbl","stsd"])[0].subarray(8);let l=Dt(a,["enca"]);const f=l.length>0;f||(l=Dt(a,["encv"])),l.forEach(c=>{const h=f?c.subarray(28):c.subarray(78);Dt(h,["sinf"]).forEach(g=>{const x=Zee(g);if(x){const b=x.subarray(8,24);b.some(T=>T!==0)||(Wt.log(`[eme] Patching keyId in 'enc${f?"a":"v"}>sinf>>tenc' box: ${Fc.hexDump(b)} -> ${Fc.hexDump(n)}`),x.set(n,8))}})})}),t}function Zee(t){const e=Dt(t,["schm"])[0];if(e){const n=ji(e.subarray(4,8));if(n==="cbcs"||n==="cenc")return Dt(t,["schi","tenc"])[0]}return null}function Xee(t,e,n){const i={},r=Dt(t,["moof","traf"]);for(let s=0;s<r.length;s++){const a=r[s],l=Dt(a,["tfhd"])[0],f=Tt(l,4),c=e[f];if(!c)continue;const h=i[f]||(i[f]={start:NaN,duration:0,sampleCount:0,timescale:c.timescale,type:c.type}),p=Dt(a,["tfdt"])[0];if(p){const P=p[0];let M=Tt(p,4);P===1&&(M===yP?n.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(M*=yP+1,M+=Tt(p,8))),qe(M)&&(!qe(h.start)||M<h.start)&&(h.start=M)}const g=c.default,x=Tt(l,0)|g?.flags;let b=g?.duration||0;x&8&&(x&2?b=Tt(l,12):b=Tt(l,8));const T=Dt(a,["trun"]);let E=h.start||0,C=0,I=b;for(let P=0;P<T.length;P++){const M=T[P],k=Tt(M,4),z=h.sampleCount;h.sampleCount+=k;const F=M[3]&1,G=M[3]&4,K=M[2]&1,V=M[2]&2,Q=M[2]&4,J=M[2]&8;let ve=8,se=k;for(F&&(ve+=4),G&&k&&(!(M[ve+1]&1)&&h.keyFrameIndex===void 0&&(h.keyFrameIndex=z),ve+=4,K?(I=Tt(M,ve),ve+=4):I=b,V&&(ve+=4),J&&(ve+=4),E+=I,C+=I,se--);se--;)K?(I=Tt(M,ve),ve+=4):I=b,V&&(ve+=4),Q&&(M[ve+1]&1||h.keyFrameIndex===void 0&&(h.keyFrameIndex=h.sampleCount-(se+1),h.keyFrameStart=E),ve+=4),J&&(ve+=4),E+=I,C+=I;!C&&b&&(C+=b*k)}h.duration+=C}if(!Object.keys(i).some(s=>i[s].duration)){let s=1/0,a=0;const l=Dt(t,["sidx"]);for(let f=0;f<l.length;f++){const c=qee(l[f]);if(c!=null&&c.references){s=Math.min(s,c.earliestPresentationTime/c.timescale);const h=c.references.reduce((p,g)=>p+g.info.duration||0,0);a=Math.max(a,h+c.earliestPresentationTime/c.timescale)}}a&&qe(a)&&Object.keys(i).forEach(f=>{i[f].duration||(i[f].duration=a*i[f].timescale-i[f].start)})}return i}function Qee(t){const e={valid:null,remainder:null},n=Dt(t,["moof"]);if(n.length<2)return e.remainder=t,e;const i=n[n.length-1];return e.valid=t.slice(0,i.byteOffset-8),e.remainder=t.slice(i.byteOffset-8),e}function ua(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function xP(t,e){const n=[],i=e.samples,r=e.timescale,s=e.id;let a=!1;return Dt(i,["moof"]).map(f=>{const c=f.byteOffset-8;Dt(f,["traf"]).map(p=>{const g=Dt(p,["tfdt"]).map(x=>{const b=x[0];let T=Tt(x,4);return b===1&&(T*=Math.pow(2,32),T+=Tt(x,8)),T/r})[0];return g!==void 0&&(t=g),Dt(p,["tfhd"]).map(x=>{const b=Tt(x,4),T=Tt(x,0)&16777215,E=(T&1)!==0,C=(T&2)!==0,I=(T&8)!==0;let P=0;const M=(T&16)!==0;let k=0;const z=(T&32)!==0;let F=8;b===s&&(E&&(F+=8),C&&(F+=4),I&&(P=Tt(x,F),F+=4),M&&(k=Tt(x,F),F+=4),z&&(F+=4),e.type==="video"&&(a=U0(e.codec)),Dt(p,["trun"]).map(G=>{const K=G[0],V=Tt(G,0)&16777215,Q=(V&1)!==0;let J=0;const ve=(V&4)!==0,se=(V&256)!==0;let ye=0;const X=(V&512)!==0;let oe=0;const ie=(V&1024)!==0,Ie=(V&2048)!==0;let Z=0;const Y=Tt(G,4);let ne=8;Q&&(J=Tt(G,ne),ne+=4),ve&&(ne+=4);let me=J+c;for(let Te=0;Te<Y;Te++){if(se?(ye=Tt(G,ne),ne+=4):ye=P,X?(oe=Tt(G,ne),ne+=4):oe=k,ie&&(ne+=4),Ie&&(K===0?Z=Tt(G,ne):Z=oB(G,ne),ne+=4),e.type===xn.VIDEO){let Le=0;for(;Le<oe;){const Ae=Tt(i,me);if(me+=4,Jee(a,i[me])){const Ve=i.subarray(me,me+Ae);ZT(Ve,a?2:1,t+Z/r,n)}me+=Ae,Le+=Ae+4}}t+=ye/r}}))})})}),n}function U0(t){if(!t)return!1;const e=t.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function Jee(t,e){if(t){const n=e>>1&63;return n===39||n===40}else return(e&31)===6}function ZT(t,e,n,i){const r=uB(t);let s=0;s+=e;let a=0,l=0,f=0;for(;s<r.length;){a=0;do{if(s>=r.length)break;f=r[s++],a+=f}while(f===255);l=0;do{if(s>=r.length)break;f=r[s++],l+=f}while(f===255);const c=r.length-s;let h=s;if(l<c)s+=l;else if(l>c){Wt.error(`Malformed SEI payload. ${l} is too small, only ${c} bytes left to parse.`);break}if(a===4){if(r[h++]===181){const g=aB(r,h);if(h+=2,g===49){const x=Tt(r,h);if(h+=4,x===1195456820){const b=r[h++];if(b===3){const T=r[h++],E=31&T,C=64&T,I=C?2+E*3:0,P=new Uint8Array(I);if(C){P[0]=T;for(let M=1;M<I;M++)P[M]=r[h++]}i.push({type:b,payloadType:a,pts:n,bytes:P})}}}}}else if(a===5&&l>16){const p=[];for(let b=0;b<16;b++){const T=r[h++].toString(16);p.push(T.length==1?"0"+T:T),(b===3||b===5||b===7||b===9)&&p.push("-")}const g=l-16,x=new Uint8Array(g);for(let b=0;b<g;b++)x[b]=r[h++];i.push({payloadType:a,pts:n,uuid:p.join(""),userData:ws(x),userDataBytes:x})}}}function uB(t){const e=t.byteLength,n=[];let i=1;for(;i<e-2;)t[i]===0&&t[i+1]===0&&t[i+2]===3?(n.push(i+2),i+=2):i++;if(n.length===0)return t;const r=e-n.length,s=new Uint8Array(r);let a=0;for(i=0;i<r;a++,i++)a===n[0]&&(a++,n.shift()),s[i]=t[a];return s}function ete(t){const e=t[0];let n="",i="",r=0,s=0,a=0,l=0,f=0,c=0;if(e===0){for(;ji(t.subarray(c,c+1))!=="\0";)n+=ji(t.subarray(c,c+1)),c+=1;for(n+=ji(t.subarray(c,c+1)),c+=1;ji(t.subarray(c,c+1))!=="\0";)i+=ji(t.subarray(c,c+1)),c+=1;i+=ji(t.subarray(c,c+1)),c+=1,r=Tt(t,12),s=Tt(t,16),l=Tt(t,20),f=Tt(t,24),c=28}else if(e===1){c+=4,r=Tt(t,c),c+=4;const p=Tt(t,c);c+=4;const g=Tt(t,c);for(c+=4,a=2**32*p+g,Ree(a)||(a=Number.MAX_SAFE_INTEGER,Wt.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),l=Tt(t,c),c+=4,f=Tt(t,c),c+=4;ji(t.subarray(c,c+1))!=="\0";)n+=ji(t.subarray(c,c+1)),c+=1;for(n+=ji(t.subarray(c,c+1)),c+=1;ji(t.subarray(c,c+1))!=="\0";)i+=ji(t.subarray(c,c+1)),c+=1;i+=ji(t.subarray(c,c+1)),c+=1}const h=t.subarray(c,t.byteLength);return{schemeIdUri:n,value:i,timeScale:r,presentationTime:a,presentationTimeDelta:s,eventDuration:l,id:f,payload:h}}function tte(t,...e){const n=e.length;let i=8,r=n;for(;r--;)i+=e[r].byteLength;const s=new Uint8Array(i);for(s[0]=i>>24&255,s[1]=i>>16&255,s[2]=i>>8&255,s[3]=i&255,s.set(t,4),r=0,i=8;r<n;r++)s.set(e[r],i),i+=e[r].byteLength;return s}function nte(t,e,n){if(t.byteLength!==16)throw new RangeError("Invalid system id");let i,r;i=0,r=new Uint8Array;let s;i>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const a=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(a.buffer).setUint32(0,n.byteLength,!1),tte([112,115,115,104],new Uint8Array([i,0,0,0]),t,s,r,a,n||new Uint8Array)}const cB=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Bd={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function XT(t,e){const n=Bd[e];return!!n&&!!n[t.slice(0,4)]}function wS(t,e,n=!0){return!t.split(",").some(i=>!QT(i,e,n))}function QT(t,e,n=!0){var i;const r=Zu(n);return(i=r?.isTypeSupported(Nm(t,e)))!=null?i:!1}function Nm(t,e){return`${e}/mp4;codecs=${t}`}function _P(t){if(t){const e=t.substring(0,4);return Bd.video[e]}return 2}function Fv(t){const e=cB();return t.split(",").reduce((n,i)=>{const s=e&&U0(i)?9:Bd.video[i];return s?(s*2+n)/(n?3:2):(Bd.audio[i]+n)/(n?2:1)},0)}const Qx={};function ite(t,e=!0){if(Qx[t])return Qx[t];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[t];for(let r=0;r<n.length;r++){var i;if(QT(n[r],"audio",e))return Qx[t]=n[r],n[r];if(n[r]==="mp3"&&(i=Zu(e))!=null&&i.isTypeSupported("audio/mpeg"))return""}return t}const rte=/flac|opus|mp4a\.40\.34/i;function Uv(t,e=!0){return t.replace(rte,n=>ite(n.toLowerCase(),e))}function ste(t,e){const n=[];if(t){const i=t.split(",");for(let r=0;r<i.length;r++)XT(i[r],"video")||n.push(i[r])}return e&&n.push(e),n.join(",")}function jg(t,e){if(t&&(t.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(t)!==-1)&&(SP(t,"audio")||SP(t,"video")))return t;if(e){const n=e.split(",");if(n.length>1){if(t){for(let i=n.length;i--;)if(n[i].substring(0,4)===t.substring(0,4))return n[i]}return n[0]}}return e||t}function SP(t,e){return XT(t,e)&&QT(t,e)}function ate(t){const e=t.split(",");for(let n=0;n<e.length;n++){const i=e[n].split(".");i.length>2&&i[0]==="avc1"&&(e[n]=`avc1.${parseInt(i[1]).toString(16)}${("000"+parseInt(i[2]).toString(16)).slice(-4)}`)}return e.join(",")}function ote(t){if(t.startsWith("av01.")){const e=t.split("."),n=["0","111","01","01","01","0"];for(let i=e.length;i>4&&i<10;i++)e[i]=n[i-4];return e.join(".")}return t}function EP(t){const e=Zu(t)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function LS(t){return t.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const fB={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function dB(t,e){return{supported:!1,configurations:e,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:t}}function lte(t,e,n,i,r,s){const a=t.videoCodec,l=t.audioCodec?t.audioGroups:null,f=s?.audioCodec,c=s?.channels,h=c?parseInt(c):f?1/0:2;let p=null;if(l!=null&&l.length)try{l.length===1&&l[0]?p=e.groups[l[0]].channels:p=l.reduce((g,x)=>{if(x){const b=e.groups[x];if(!b)throw new Error(`Audio track group ${x} not found`);Object.keys(b.channels).forEach(T=>{g[T]=(g[T]||0)+b.channels[T]})}return g},{2:0})}catch{return!0}return a!==void 0&&(a.split(",").some(g=>U0(g))||t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(i,30)||t.videoRange!=="SDR"&&t.videoRange!==n||t.bitrate>Math.max(r,8e6))||!!p&&qe(h)&&Object.keys(p).some(g=>parseInt(g)>h)}function hB(t,e,n,i={}){const r=t.videoCodec;if(!r&&!t.audioCodec||!n)return Promise.resolve(fB);const s=[],a=ute(t),l=a.length,f=cte(t,e,l>0),c=f.length;for(let h=l||1*c||1;h--;){const p={type:"media-source"};if(l&&(p.video=a[h%l]),c){p.audio=f[h%c];const g=p.audio.bitrate;p.video&&g&&(p.video.bitrate-=g)}s.push(p)}if(r){const h=navigator.userAgent;if(r.split(",").some(p=>U0(p))&&cB())return Promise.resolve(dB(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${h})`),s))}return Promise.all(s.map(h=>{const p=dte(h);return i[p]||(i[p]=n.decodingInfo(h))})).then(h=>({supported:!h.some(p=>!p.supported),configurations:s,decodingInfoResults:h})).catch(h=>({supported:!1,configurations:s,decodingInfoResults:[],error:h}))}function ute(t){var e;const n=(e=t.videoCodec)==null?void 0:e.split(","),i=mB(t),r=t.width||640,s=t.height||480,a=t.frameRate||30,l=t.videoRange.toLowerCase();return n?n.map(f=>{const c={contentType:Nm(ote(f),"video"),width:r,height:s,bitrate:i,framerate:a};return l!=="sdr"&&(c.transferFunction=l),c}):[]}function cte(t,e,n){var i;const r=(i=t.audioCodec)==null?void 0:i.split(","),s=mB(t);return r&&t.audioGroups?t.audioGroups.reduce((a,l)=>{var f;const c=l?(f=e.groups[l])==null?void 0:f.tracks:null;return c?c.reduce((h,p)=>{if(p.groupId===l){const g=parseFloat(p.channels||"");r.forEach(x=>{const b={contentType:Nm(x,"audio"),bitrate:n?fte(x,s):s};g&&(b.channels=""+g),h.push(b)})}return h},a):a},[]):[]}function fte(t,e){if(e<=1)return 1;let n=128e3;return t==="ec-3"?n=768e3:t==="ac-3"&&(n=64e4),Math.min(e/2,n)}function mB(t){return Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)/1e3)*1e3||1}function dte(t){let e="";const{audio:n,video:i}=t;if(i){const r=LS(i.contentType);e+=`${r}_r${i.height}x${i.width}f${Math.ceil(i.framerate)}${i.transferFunction||"sd"}_${Math.ceil(i.bitrate/1e5)}`}if(n){const r=LS(n.contentType);e+=`${i?"_":""}${r}_c${n.channels}`}return e}const CS=["NONE","TYPE-0","TYPE-1",null];function hte(t){return CS.indexOf(t)>-1}const $v=["SDR","PQ","HLG"];function mte(t){return!!t&&$v.indexOf(t)>-1}var Bg={No:"",Yes:"YES",v2:"v2"};function TP(t){const{canSkipUntil:e,canSkipDateRanges:n,age:i}=t,r=i<e/2;return e&&r?n?Bg.v2:Bg.Yes:Bg.No}class AP{constructor(e,n,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=n,this.skip=i}addDirectives(e){const n=new self.URL(e);return this.msn!==void 0&&n.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&n.searchParams.set("_HLS_part",this.part.toString()),this.skip&&n.searchParams.set("_HLS_skip",this.skip),n.href}}class jm{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(i=>!!i).map(i=>i.substring(0,4)).join(","),"supplemental"in e){var n;this.supplemental=e.supplemental;const i=(n=e.supplemental)==null?void 0:n.videoCodec;i&&i!==e.videoCodec&&(this.codecSet+=`,${i.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return wP(this._audioGroups,e)}hasSubtitleGroup(e){return wP(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,n){if(n){if(e==="audio"){let i=this._audioGroups;i||(i=this._audioGroups=[]),i.indexOf(n)===-1&&i.push(n)}else if(e==="text"){let i=this._subtitleGroups;i||(i=this._subtitleGroups=[]),i.indexOf(n)===-1&&i.push(n)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function wP(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function pte(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function gte(t,e){let n=!1,i=[];if(t&&(n=t!=="SDR",i=[t]),e){i=e.allowedVideoRanges||$v.slice(0);const r=i.join("")!=="SDR"&&!e.videoCodec;n=e.preferHDR!==void 0?e.preferHDR:r&&pte(),n||(i=["SDR"])}return{preferHDR:n,allowedVideoRanges:i}}const vte=t=>{const e=new WeakSet;return(n,i)=>{if(t&&(i=t(n,i)),typeof i=="object"&&i!==null){if(e.has(i))return;e.add(i)}return i}},Dn=(t,e)=>JSON.stringify(t,vte(e));function yte(t,e,n,i,r){const s=Object.keys(t),a=i?.channels,l=i?.audioCodec,f=r?.videoCodec,c=a&&parseInt(a)===2;let h=!1,p=!1,g=1/0,x=1/0,b=1/0,T=1/0,E=0,C=[];const{preferHDR:I,allowedVideoRanges:P}=gte(e,r);for(let G=s.length;G--;){const K=t[s[G]];h||(h=K.channels[2]>0),g=Math.min(g,K.minHeight),x=Math.min(x,K.minFramerate),b=Math.min(b,K.minBitrate),P.filter(Q=>K.videoRanges[Q]>0).length>0&&(p=!0)}g=qe(g)?g:0,x=qe(x)?x:0;const M=Math.max(1080,g),k=Math.max(30,x);b=qe(b)?b:n,n=Math.max(b,n),p||(e=void 0);const z=s.length>1;return{codecSet:s.reduce((G,K)=>{const V=t[K];if(K===G)return G;if(C=p?P.filter(Q=>V.videoRanges[Q]>0):[],z){if(V.minBitrate>n)return Co(K,`min bitrate of ${V.minBitrate} > current estimate of ${n}`),G;if(!V.hasDefaultAudio)return Co(K,"no renditions with default or auto-select sound found"),G;if(l&&K.indexOf(l.substring(0,4))%5!==0)return Co(K,`audio codec preference "${l}" not found`),G;if(a&&!c){if(!V.channels[a])return Co(K,`no renditions with ${a} channel sound found (channels options: ${Object.keys(V.channels)})`),G}else if((!l||c)&&h&&V.channels[2]===0)return Co(K,"no renditions with stereo sound found"),G;if(V.minHeight>M)return Co(K,`min resolution of ${V.minHeight} > maximum of ${M}`),G;if(V.minFramerate>k)return Co(K,`min framerate of ${V.minFramerate} > maximum of ${k}`),G;if(!C.some(Q=>V.videoRanges[Q]>0))return Co(K,`no variants with VIDEO-RANGE of ${Dn(C)} found`),G;if(f&&K.indexOf(f.substring(0,4))%5!==0)return Co(K,`video codec preference "${f}" not found`),G;if(V.maxScore<E)return Co(K,`max score of ${V.maxScore} < selected max of ${E}`),G}return G&&(Fv(K)>=Fv(G)||V.fragmentError>t[G].fragmentError)?G:(T=V.minIndex,E=V.maxScore,K)},void 0),videoRanges:C,preferHDR:I,minFramerate:x,minBitrate:b,minIndex:T}}function Co(t,e){Wt.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function pB(t){return t.reduce((e,n)=>{let i=e.groups[n.groupId];i||(i=e.groups[n.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(n);const r=n.channels||"2";return i.channels[r]=(i.channels[r]||0)+1,i.hasDefault=i.hasDefault||n.default,i.hasAutoSelect=i.hasAutoSelect||n.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function bte(t,e,n,i){return t.slice(n,i+1).reduce((r,s,a)=>{if(!s.codecSet)return r;const l=s.audioGroups;let f=r[s.codecSet];f||(r[s.codecSet]=f={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:a,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!l,fragmentError:0}),f.minBitrate=Math.min(f.minBitrate,s.bitrate);const c=Math.min(s.height,s.width);return f.minHeight=Math.min(f.minHeight,c),f.minFramerate=Math.min(f.minFramerate,s.frameRate),f.minIndex=Math.min(f.minIndex,a),f.maxScore=Math.max(f.maxScore,s.score),f.fragmentError+=s.fragmentError,f.videoRanges[s.videoRange]=(f.videoRanges[s.videoRange]||0)+1,l&&l.forEach(h=>{if(!h)return;const p=e.groups[h];p&&(f.hasDefaultAudio=f.hasDefaultAudio||e.hasDefaultAudio?p.hasDefault:p.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(p.channels).forEach(g=>{f.channels[g]=(f.channels[g]||0)+p.channels[g]}))}),r},{})}function LP(t){if(!t)return t;const{lang:e,assocLang:n,characteristics:i,channels:r,audioCodec:s}=t;return{lang:e,assocLang:n,characteristics:i,channels:r,audioCodec:s}}function Do(t,e,n){if("attrs"in t){const i=e.indexOf(t);if(i!==-1)return i}for(let i=0;i<e.length;i++){const r=e[i];if(Zc(t,r,n))return i}return-1}function Zc(t,e,n){const{groupId:i,name:r,lang:s,assocLang:a,default:l}=t,f=t.forced;return(i===void 0||e.groupId===i)&&(r===void 0||e.name===r)&&(s===void 0||xte(s,e.lang))&&(s===void 0||e.assocLang===a)&&(l===void 0||e.default===l)&&(f===void 0||e.forced===f)&&(!("characteristics"in t)||_te(t.characteristics||"",e.characteristics))&&(n===void 0||n(t,e))}function xte(t,e="--"){return t.length===e.length?t===e:t.startsWith(e)||e.startsWith(t)}function _te(t,e=""){const n=t.split(","),i=e.split(",");return n.length===i.length&&!n.some(r=>i.indexOf(r)===-1)}function Bc(t,e){const{audioCodec:n,channels:i}=t;return(n===void 0||(e.audioCodec||"").substring(0,4)===n.substring(0,4))&&(i===void 0||i===(e.channels||"2"))}function Ste(t,e,n,i,r){const s=e[i],l=e.reduce((g,x,b)=>{const T=x.uri;return(g[T]||(g[T]=[])).push(b),g},{})[s.uri];l.length>1&&(i=Math.max.apply(Math,l));const f=s.videoRange,c=s.frameRate,h=s.codecSet.substring(0,4),p=CP(e,i,g=>{if(g.videoRange!==f||g.frameRate!==c||g.codecSet.substring(0,4)!==h)return!1;const x=g.audioGroups,b=n.filter(T=>!x||x.indexOf(T.groupId)!==-1);return Do(t,b,r)>-1});return p>-1?p:CP(e,i,g=>{const x=g.audioGroups,b=n.filter(T=>!x||x.indexOf(T.groupId)!==-1);return Do(t,b,r)>-1})}function CP(t,e,n){for(let i=e;i>-1;i--)if(n(t[i]))return i;for(let i=e+1;i<t.length;i++)if(n(t[i]))return i;return-1}function zv(t,e){var n;return!!t&&t!==((n=e.loadLevelObj)==null?void 0:n.uri)}class Ete extends io{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=n=>{var i;const{fragCurrent:r,partCurrent:s,hls:a}=this,{autoLevelEnabled:l,media:f}=a;if(!r||!f)return;const c=performance.now(),h=s?s.stats:r.stats,p=s?s.duration:r.duration,g=c-h.loading.start,x=a.minAutoLevel,b=r.level,T=this._nextAutoLevel;if(h.aborted||h.loaded&&h.loaded===h.total||b<=x){this.clearTimer(),this._nextAutoLevel=-1;return}if(!l)return;const E=T>-1&&T!==b,C=!!n||E;if(!C&&(f.paused||!f.playbackRate||!f.readyState))return;const I=a.mainForwardBufferInfo;if(!C&&I===null)return;const P=this.bwEstimator.getEstimateTTFB(),M=Math.abs(f.playbackRate);if(g<=Math.max(P,1e3*(p/(M*2))))return;const k=I?I.len/M:0,z=h.loading.first?h.loading.first-h.loading.start:-1,F=h.loaded&&z>-1,G=this.getBwEstimate(),K=a.levels,V=K[b],Q=Math.max(h.loaded,Math.round(p*(r.bitrate||V.averageBitrate)/8));let J=F?g-z:g;J<1&&F&&(J=Math.min(g,h.loaded*8/G));const ve=F?h.loaded*1e3/J:0,se=P/1e3,ye=ve?(Q-h.loaded)/ve:Q*8/G+se;if(ye<=k)return;const X=ve?ve*8:G,oe=((i=n?.details||this.hls.latestLevelDetails)==null?void 0:i.live)===!0,ie=this.hls.config.abrBandWidthUpFactor;let Ie=Number.POSITIVE_INFINITY,Z;for(Z=b-1;Z>x;Z--){const Te=K[Z].maxBitrate,Le=!K[Z].details||oe;if(Ie=this.getTimeToLoadFrag(se,X,p*Te,Le),Ie<Math.min(k,p+se))break}if(Ie>=ye||Ie>p*10)return;F?this.bwEstimator.sample(g-Math.min(P,z),h.loaded):this.bwEstimator.sampleTTFB(g);const Y=K[Z].maxBitrate;this.getBwEstimate()*ie>Y&&this.resetEstimator(Y);const ne=this.findBestLevel(Y,x,Z,0,k,1,1);ne>-1&&(Z=ne),this.warn(`Fragment ${r.sn}${s?" part "+s.index:""} of level ${b} is loading too slowly;
      Fragment duration: ${r.duration.toFixed(3)}
      Time to underbuffer: ${k.toFixed(3)} s
      Estimated load time for current fragment: ${ye.toFixed(3)} s
      Estimated load time for down switch fragment: ${Ie.toFixed(3)} s
      TTFB estimate: ${z|0} ms
      Current BW estimate: ${qe(G)?G|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${Z} @ ${Y|0} bps`),a.nextLoadLevel=a.nextAutoLevel=Z,this.clearTimer();const me=()=>{if(this.clearTimer(),this.fragCurrent===r&&this.hls.loadLevel===Z&&Z>0){const Te=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${Z>0?"and switching down":""}
      Fragment duration: ${r.duration.toFixed(3)} s
      Time to underbuffer: ${Te.toFixed(3)} s`),r.abortRequests(),this.fragCurrent=this.partCurrent=null,Z>x){let Le=this.findBestLevel(this.hls.levels[x].bitrate,x,Z,0,Te,1,1);Le===-1&&(Le=x),this.hls.nextLoadLevel=this.hls.nextAutoLevel=Le,this.resetEstimator(this.hls.levels[Le].bitrate)}}};E||ye>Ie*2?me():this.timer=self.setInterval(me,Ie*1e3),a.trigger(B.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,part:s,stats:h})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new Dee(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.FRAG_LOADING,this.onFragLoading,this),e.on(B.FRAG_LOADED,this.onFragLoaded,this),e.on(B.FRAG_BUFFERED,this.onFragBuffered,this),e.on(B.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(B.LEVEL_LOADED,this.onLevelLoaded,this),e.on(B.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(B.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(B.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.FRAG_LOADING,this.onFragLoading,this),e.off(B.FRAG_LOADED,this.onFragLoaded,this),e.off(B.FRAG_BUFFERED,this.onFragBuffered,this),e.off(B.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(B.LEVEL_LOADED,this.onLevelLoaded,this),e.off(B.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(B.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(B.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,n){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,n){const i=n.frag;if(!this.ignoreFragment(i)){if(!i.bitrateTest){var r;this.fragCurrent=i,this.partCurrent=(r=n.part)!=null?r:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,n){this.clearTimer()}onError(e,n){if(!n.fatal)switch(n.details){case pe.BUFFER_ADD_CODEC_ERROR:case pe.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case pe.FRAG_LOAD_TIMEOUT:{const i=n.frag,{fragCurrent:r,partCurrent:s}=this;if(i&&r&&i.sn===r.sn&&i.level===r.level){const a=performance.now(),l=s?s.stats:i.stats,f=a-l.loading.start,c=l.loading.first?l.loading.first-l.loading.start:-1;if(l.loaded&&c>-1){const p=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(f-Math.min(p,c),l.loaded)}else this.bwEstimator.sampleTTFB(f)}break}}}getTimeToLoadFrag(e,n,i,r){const s=e+i/n,a=r?e+this.lastLevelLoadSec:0;return s+a}onLevelLoaded(e,n){const i=this.hls.config,{loading:r}=n.stats,s=r.end-r.first;qe(s)&&(this.lastLevelLoadSec=s/1e3),n.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(n.levelInfo)}onFragLoaded(e,{frag:n,part:i}){const r=i?i.stats:n.stats;if(n.type===et.MAIN&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=i?i.duration:n.duration,a=this.hls.levels[n.level],l=(a.loaded?a.loaded.bytes:0)+r.loaded,f=(a.loaded?a.loaded.duration:0)+s;a.loaded={bytes:l,duration:f},a.realBitrate=Math.round(8*l/f)}if(n.bitrateTest){const s={stats:r,frag:n,part:i,id:n.type};this.onFragBuffered(B.FRAG_BUFFERED,s),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(e,n){const{frag:i,part:r}=n,s=r!=null&&r.stats.loaded?r.stats:i.stats;if(s.aborted||this.ignoreFragment(i))return;const a=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,s.loaded),s.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==et.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:n}=this.hls,i=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,s=this.findBestLevel(i,n,e,0,r,1,1);if(s>-1)return s;const a=this.hls.firstLevel,l=Math.min(Math.max(a,n),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${l}`),l}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,i=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(e!==-1&&(!i||!r||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=i&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,s)&&a[e].loadError<=a[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:n,hls:i}=this;if(i.levels.length<=1)return i.loadLevel;const{maxAutoLevel:r,config:s,minAutoLevel:a}=i,l=n?n.duration:e?e.duration:0,f=this.getBwEstimate(),c=this.getStarvationDelay();let h=s.abrBandWidthFactor,p=s.abrBandWidthUpFactor;if(c){const E=this.findBestLevel(f,a,r,c,0,h,p);if(E>=0)return this.rebufferNotice=-1,E}let g=l?Math.min(l,s.maxStarvationDelay):s.maxStarvationDelay;if(!c){const E=this.bitrateTestDelay;E&&(g=(l?Math.min(l,s.maxLoadingDelay):s.maxLoadingDelay)-E,this.info(`bitrate test took ${Math.round(1e3*E)}ms, set first fragment max fetchDuration to ${Math.round(1e3*g)} ms`),h=p=1)}const x=this.findBestLevel(f,a,r,c,g,h,p);if(this.rebufferNotice!==x&&(this.rebufferNotice=x,this.info(`${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${x}`)),x>-1)return x;const b=i.levels[a],T=i.loadLevelObj;return T&&b?.bitrate<T.bitrate?a:i.loadLevel}getStarvationDelay(){const e=this.hls,n=e.media;if(!n)return 1/0;const i=n&&n.playbackRate!==0?Math.abs(n.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/i}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,n,i,r,s,a,l){var f;const c=r+s,h=this.lastLoadedFragLevel,p=h===-1?this.hls.firstLevel:h,{fragCurrent:g,partCurrent:x}=this,{levels:b,allAudioTracks:T,loadLevel:E,config:C}=this.hls;if(b.length===1)return 0;const I=b[p],P=!!((f=this.hls.latestLevelDetails)!=null&&f.live),M=E===-1||h===-1;let k,z="SDR",F=I?.frameRate||0;const{audioPreference:G,videoPreference:K}=C,V=this.audioTracksByGroup||(this.audioTracksByGroup=pB(T));let Q=-1;if(M){if(this.firstSelection!==-1)return this.firstSelection;const oe=this.codecTiers||(this.codecTiers=bte(b,V,n,i)),ie=yte(oe,z,e,G,K),{codecSet:Ie,videoRanges:Z,minFramerate:Y,minBitrate:ne,minIndex:me,preferHDR:Te}=ie;Q=me,k=Ie,z=Te?Z[Z.length-1]:Z[0],F=Y,e=Math.max(e,ne),this.log(`picked start tier ${Dn(ie)}`)}else k=I?.codecSet,z=I?.videoRange;const J=x?x.duration:g?g.duration:0,ve=this.bwEstimator.getEstimateTTFB()/1e3,se=[];for(let oe=i;oe>=n;oe--){var ye,X;const ie=b[oe],Ie=oe>p;if(!ie)continue;if(C.useMediaCapabilities&&!ie.supportedResult&&!ie.supportedPromise){const Ae=navigator.mediaCapabilities;typeof Ae?.decodingInfo=="function"&&lte(ie,V,z,F,e,G)?(ie.supportedPromise=hB(ie,V,Ae,this.supportedCache),ie.supportedPromise.then(Ve=>{if(!this.hls)return;ie.supportedResult=Ve;const Ue=this.hls.levels,fe=Ue.indexOf(ie);Ve.error?this.warn(`MediaCapabilities decodingInfo error: "${Ve.error}" for level ${fe} ${Dn(Ve)}`):Ve.supported?Ve.decodingInfoResults.some(je=>je.smooth===!1||je.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${fe} not smooth or powerEfficient: ${Dn(Ve)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${fe} ${Dn(Ve)}`),fe>-1&&Ue.length>1&&(this.log(`Removing unsupported level ${fe}`),this.hls.removeLevel(fe),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))})):ie.supportedResult=fB}if((k&&ie.codecSet!==k||z&&ie.videoRange!==z||Ie&&F>ie.frameRate||!Ie&&F>0&&F<ie.frameRate||(ye=ie.supportedResult)!=null&&(X=ye.decodingInfoResults)!=null&&X.some(Ae=>Ae.smooth===!1))&&(!M||oe!==Q)){se.push(oe);continue}const Z=ie.details,Y=(x?Z?.partTarget:Z?.averagetargetduration)||J;let ne;Ie?ne=l*e:ne=a*e;const me=J&&r>=J*2&&s===0?ie.averageBitrate:ie.maxBitrate,Te=this.getTimeToLoadFrag(ve,ne,me*Y,Z===void 0);if(ne>=me&&(oe===h||ie.loadError===0&&ie.fragmentError===0)&&(Te<=ve||!qe(Te)||P&&!this.bitrateTestDelay||Te<c)){const Ae=this.forcedAutoLevel;return oe!==E&&(Ae===-1||Ae!==E)&&(se.length&&this.trace(`Skipped level(s) ${se.join(",")} of ${i} max with CODECS and VIDEO-RANGE:"${b[se[0]].codecs}" ${b[se[0]].videoRange}; not compatible with "${k}" ${z}`),this.info(`switch candidate:${p}->${oe} adjustedbw(${Math.round(ne)})-bitrate=${Math.round(ne-me)} ttfb:${ve.toFixed(1)} avgDuration:${Y.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${Te.toFixed(1)} firstSelection:${M} codecSet:${ie.codecSet} videoRange:${ie.videoRange} hls.loadLevel:${E}`)),M&&(this.firstSelection=oe),oe}}return-1}set nextAutoLevel(e){const n=this.deriveNextAutoLevel(e);this._nextAutoLevel!==n&&(this.nextAutoLevelKey="",this._nextAutoLevel=n)}deriveNextAutoLevel(e){const{maxAutoLevel:n,minAutoLevel:i}=this.hls;return Math.min(Math.max(e,i),n)}}const gB={search:function(t,e){let n=0,i=t.length-1,r=null,s=null;for(;n<=i;){r=(n+i)/2|0,s=t[r];const a=e(s);if(a>0)n=r+1;else if(a<0)i=r-1;else return s}return null}};function Tte(t,e,n){if(e===null||!Array.isArray(t)||!t.length||!qe(e))return null;const i=t[0].programDateTime;if(e<(i||0))return null;const r=t[t.length-1].endProgramDateTime;if(e>=(r||0))return null;for(let s=0;s<t.length;++s){const a=t[s];if(wte(e,n,a))return a}return null}function sf(t,e,n=0,i=0,r=.005){let s=null;if(t){s=e[1+t.sn-e[0].sn]||null;const l=t.endDTS-n;l>0&&l<15e-7&&(n+=15e-7),s&&t.level!==s.level&&s.end<=t.end&&(s=e[2+t.sn-e[0].sn]||null)}else n===0&&e[0].start===0&&(s=e[0]);if(s&&((!t||t.level===s.level)&&OP(n,i,s)===0||Ate(s,t,Math.min(r,i))))return s;const a=gB.search(e,OP.bind(null,n,i));return a&&(a!==t||!s)?a:s}function Ate(t,e,n){if(e&&e.start===0&&e.level<t.level&&(e.endPTS||0)>0){const i=e.tagList.reduce((r,s)=>(s[0]==="INF"&&(r+=parseFloat(s[1])),r),n);return t.start<=i}return!1}function OP(t=0,e=0,n){if(n.start<=t&&n.start+n.duration>t)return 0;const i=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-i<=t?1:n.start-i>t&&n.start?-1:0}function wte(t,e,n){const i=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0))*1e3;return(n.endProgramDateTime||0)-i>t}function vB(t,e,n){if(t&&t.startCC<=e&&t.endCC>=e){let i=t.fragments;const{fragmentHint:r}=t;r&&(i=i.concat(r));let s;return gB.search(i,a=>a.cc<e?1:a.cc>e?-1:(s=a,a.end<=n?1:a.start>n?-1:0)),s||null}return null}function Gv(t){switch(t.details){case pe.FRAG_LOAD_TIMEOUT:case pe.KEY_LOAD_TIMEOUT:case pe.LEVEL_LOAD_TIMEOUT:case pe.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function RP(t,e){const n=Gv(e);return t.default[`${n?"timeout":"error"}Retry`]}function JT(t,e){const n=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(n*t.retryDelayMs,t.maxRetryDelayMs)}function PP(t){return pn(pn({},t),{errorRetry:null,timeoutRetry:null})}function Hv(t,e,n,i){if(!t)return!1;const r=i?.code,s=e<t.maxNumRetry&&(Lte(r)||!!n);return t.shouldRetry?t.shouldRetry(t,e,n,i,s):s}function Lte(t){return t===0&&navigator.onLine===!1||!!t&&(t<400||t>499)}var hr={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},qa={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class Cte extends io{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(B.ERROR,this.onError,this),e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(B.ERROR,this.onError,this),e.off(B.ERROR,this.onErrorOut,this),e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===et.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,n){var i;if(n.fatal)return;const r=this.hls,s=n.context;switch(n.details){case pe.FRAG_LOAD_ERROR:case pe.FRAG_LOAD_TIMEOUT:case pe.KEY_LOAD_ERROR:case pe.KEY_LOAD_TIMEOUT:n.errorAction=this.getFragRetryOrSwitchAction(n);return;case pe.FRAG_PARSING_ERROR:if((i=n.frag)!=null&&i.gap){n.errorAction=Bm();return}case pe.FRAG_GAP:case pe.FRAG_DECRYPT_ERROR:{n.errorAction=this.getFragRetryOrSwitchAction(n),n.errorAction.action=hr.SendAlternateToPenaltyBox;return}case pe.LEVEL_EMPTY_ERROR:case pe.LEVEL_PARSING_ERROR:{var a,l;const c=n.parent===et.MAIN?n.level:r.loadLevel;n.details===pe.LEVEL_EMPTY_ERROR&&((a=n.context)!=null&&(l=a.levelDetails)!=null&&l.live)?n.errorAction=this.getPlaylistRetryOrSwitchAction(n,c):(n.levelRetry=!1,n.errorAction=this.getLevelSwitchAction(n,c))}return;case pe.LEVEL_LOAD_ERROR:case pe.LEVEL_LOAD_TIMEOUT:typeof s?.level=="number"&&(n.errorAction=this.getPlaylistRetryOrSwitchAction(n,s.level));return;case pe.AUDIO_TRACK_LOAD_ERROR:case pe.AUDIO_TRACK_LOAD_TIMEOUT:case pe.SUBTITLE_LOAD_ERROR:case pe.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){const c=r.loadLevelObj;if(c&&(s.type===Mt.AUDIO_TRACK&&c.hasAudioGroup(s.groupId)||s.type===Mt.SUBTITLE_TRACK&&c.hasSubtitleGroup(s.groupId))){n.errorAction=this.getPlaylistRetryOrSwitchAction(n,r.loadLevel),n.errorAction.action=hr.SendAlternateToPenaltyBox,n.errorAction.flags=qa.MoveAllAlternatesMatchingHost;return}}return;case pe.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const c=r.loadLevelObj,h=c?.attrs["HDCP-LEVEL"];h?n.errorAction={action:hr.SendAlternateToPenaltyBox,flags:qa.MoveAllAlternatesMatchingHDCP,hdcpLevel:h}:this.keySystemError(n)}return;case pe.BUFFER_ADD_CODEC_ERROR:case pe.REMUX_ALLOC_ERROR:case pe.BUFFER_APPEND_ERROR:if(!n.errorAction){var f;n.errorAction=this.getLevelSwitchAction(n,(f=n.level)!=null?f:r.loadLevel)}return;case pe.INTERNAL_EXCEPTION:case pe.BUFFER_APPENDING_ERROR:case pe.BUFFER_FULL_ERROR:case pe.LEVEL_SWITCH_ERROR:case pe.BUFFER_STALLED_ERROR:case pe.BUFFER_SEEK_OVER_HOLE:case pe.BUFFER_NUDGE_ON_STALL:n.errorAction=Bm();return}n.type===at.KEY_SYSTEM_ERROR&&this.keySystemError(n)}keySystemError(e){const n=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,n)}getPlaylistRetryOrSwitchAction(e,n){const i=this.hls,r=RP(i.config.playlistLoadPolicy,e),s=this.playlistError++;if(Hv(r,s,Gv(e),e.response))return{action:hr.RetryRequest,flags:qa.None,retryConfig:r,retryCount:s};const l=this.getLevelSwitchAction(e,n);return r&&(l.retryConfig=r,l.retryCount=s),l}getFragRetryOrSwitchAction(e){const n=this.hls,i=this.getVariantLevelIndex(e.frag),r=n.levels[i],{fragLoadPolicy:s,keyLoadPolicy:a}=n.config,l=RP(e.details.startsWith("key")?a:s,e),f=n.levels.reduce((h,p)=>h+p.fragmentError,0);if(r&&(e.details!==pe.FRAG_GAP&&r.fragmentError++,Hv(l,f,Gv(e),e.response)))return{action:hr.RetryRequest,flags:qa.None,retryConfig:l,retryCount:f};const c=this.getLevelSwitchAction(e,i);return l&&(c.retryConfig=l,c.retryCount=f),c}getLevelSwitchAction(e,n){const i=this.hls;n==null&&(n=i.loadLevel);const r=this.hls.levels[n];if(r){var s,a;const c=e.details;r.loadError++,c===pe.BUFFER_APPEND_ERROR&&r.fragmentError++;let h=-1;const{levels:p,loadLevel:g,minAutoLevel:x,maxAutoLevel:b}=i;!i.autoLevelEnabled&&!i.config.preserveManualLevelOnError&&(i.loadLevel=-1);const T=(s=e.frag)==null?void 0:s.type,C=(T===et.AUDIO&&c===pe.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===pe.BUFFER_ADD_CODEC_ERROR||c===pe.BUFFER_APPEND_ERROR))&&p.some(({audioCodec:z})=>r.audioCodec!==z),P=e.sourceBufferName==="video"&&(c===pe.BUFFER_ADD_CODEC_ERROR||c===pe.BUFFER_APPEND_ERROR)&&p.some(({codecSet:z,audioCodec:F})=>r.codecSet!==z&&r.audioCodec===F),{type:M,groupId:k}=(a=e.context)!=null?a:{};for(let z=p.length;z--;){const F=(z+g)%p.length;if(F!==g&&F>=x&&F<=b&&p[F].loadError===0){var l,f;const G=p[F];if(c===pe.FRAG_GAP&&T===et.MAIN&&e.frag){const K=p[F].details;if(K){const V=sf(e.frag,K.fragments,e.frag.start);if(V!=null&&V.gap)continue}}else{if(M===Mt.AUDIO_TRACK&&G.hasAudioGroup(k)||M===Mt.SUBTITLE_TRACK&&G.hasSubtitleGroup(k))continue;if(T===et.AUDIO&&(l=r.audioGroups)!=null&&l.some(K=>G.hasAudioGroup(K))||T===et.SUBTITLE&&(f=r.subtitleGroups)!=null&&f.some(K=>G.hasSubtitleGroup(K))||C&&r.audioCodec===G.audioCodec||!C&&r.audioCodec!==G.audioCodec||P&&r.codecSet===G.codecSet)continue}h=F;break}}if(h>-1&&i.loadLevel!==h)return e.levelRetry=!0,this.playlistError=0,{action:hr.SendAlternateToPenaltyBox,flags:qa.None,nextAutoLevel:h}}return{action:hr.SendAlternateToPenaltyBox,flags:qa.MoveAllAlternatesMatchingHost}}onErrorOut(e,n){var i;switch((i=n.errorAction)==null?void 0:i.action){case hr.DoNothing:break;case hr.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(n),!n.errorAction.resolved&&n.details!==pe.FRAG_GAP?n.fatal=!0:/MediaSource readyState: ended/.test(n.error.message)&&(this.warn(`MediaSource ended after "${n.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(n.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const n=this.hls,i=e.errorAction;if(!i)return;const{flags:r,hdcpLevel:s,nextAutoLevel:a}=i;switch(r){case qa.None:this.switchLevel(e,a);break;case qa.MoveAllAlternatesMatchingHDCP:s&&(n.maxHdcpLevel=CS[CS.indexOf(s)-1],i.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${n.maxHdcpLevel}" or lower`);break}i.resolved||this.switchLevel(e,a)}switchLevel(e,n){if(n!==void 0&&e.errorAction&&(this.warn(`switching to level ${n} after ${e.details}`),this.hls.nextAutoLevel=n,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===pe.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const i=LS(e.mimeType),r=this.hls.levels;for(let s=r.length;s--;)r[s][`${e.sourceBufferName}Codec`]===i&&this.hls.removeLevel(s)}}}function Bm(t){const e={action:hr.DoNothing,flags:qa.None};return t&&(e.resolved=!0),e}var pi={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class Ote{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.BUFFER_APPENDED,this.onBufferAppended,this),e.on(B.FRAG_BUFFERED,this.onFragBuffered,this),e.on(B.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.BUFFER_APPENDED,this.onBufferAppended,this),e.off(B.FRAG_BUFFERED,this.onFragBuffered,this),e.off(B.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,n){const i=this.activePartLists[n];if(i)for(let r=i.length;r--;){const s=i[r];if(!s)break;const a=s.end;if(s.start<=e&&a!==null&&e<=a)return s}return this.getBufferedFrag(e,n)}getBufferedFrag(e,n){return this.getFragAtPos(e,n,!0)}getFragAtPos(e,n,i){const{fragments:r}=this,s=Object.keys(r);for(let a=s.length;a--;){const l=r[s[a]];if(l?.body.type===n&&(!i||l.buffered)){const f=l.body;if(f.start<=e&&e<=f.end)return f}}return null}detectEvictedFragments(e,n,i,r,s){this.timeRanges&&(this.timeRanges[e]=n);const a=r?.fragment.sn||-1;Object.keys(this.fragments).forEach(l=>{const f=this.fragments[l];if(!f||a>=f.body.sn)return;if(!f.buffered&&(!f.loaded||s)){f.body.type===i&&this.removeFragment(f.body);return}const c=f.range[e];if(c){if(c.time.length===0){this.removeFragment(f.body);return}c.time.some(h=>{const p=!this.isTimeBuffered(h.startPTS,h.endPTS,n);return p&&this.removeFragment(f.body),p})}})}detectPartialFragments(e){const n=this.timeRanges;if(!n||e.frag.sn==="initSegment")return;const i=e.frag,r=ud(i),s=this.fragments[r];if(!s||s.buffered&&i.gap)return;const a=!i.relurl;Object.keys(n).forEach(l=>{const f=i.elementaryStreams[l];if(!f)return;const c=n[l],h=a||f.partial===!0;s.range[l]=this.getBufferedTimes(i,e.part,h,c)}),s.loaded=null,Object.keys(s.range).length?(s.buffered=!0,(s.body.endList=i.endList||s.body.endList)&&(this.endListFragments[s.body.type]=s),xg(s)||this.removeParts(i.sn-1,i.type)):this.removeFragment(s.body)}removeParts(e,n){const i=this.activePartLists[n];i&&(this.activePartLists[n]=DP(i,r=>r.fragment.sn>=e))}fragBuffered(e,n){const i=ud(e);let r=this.fragments[i];!r&&n&&(r=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,n,i,r){const s={time:[],partial:i},a=e.start,l=e.end,f=e.minEndPTS||l,c=e.maxStartPTS||a;for(let h=0;h<r.length;h++){const p=r.start(h)-this.bufferPadding,g=r.end(h)+this.bufferPadding;if(c>=p&&f<=g){s.time.push({startPTS:Math.max(a,r.start(h)),endPTS:Math.min(l,r.end(h))});break}else if(a<g&&l>p){const x=Math.max(a,r.start(h)),b=Math.min(l,r.end(h));b>x&&(s.partial=!0,s.time.push({startPTS:x,endPTS:b}))}else if(l<=p)break}return s}getPartialFragment(e){let n=null,i,r,s,a=0;const{bufferPadding:l,fragments:f}=this;return Object.keys(f).forEach(c=>{const h=f[c];h&&xg(h)&&(r=h.body.start-l,s=h.body.end+l,e>=r&&e<=s&&(i=Math.min(e-r,s-e),a<=i&&(n=h.body,a=i)))}),n}isEndListAppended(e){const n=this.endListFragments[e];return n!==void 0&&(n.buffered||xg(n))}getState(e){const n=ud(e),i=this.fragments[n];return i?i.buffered?xg(i)?pi.PARTIAL:pi.OK:pi.APPENDING:pi.NOT_LOADED}isTimeBuffered(e,n,i){let r,s;for(let a=0;a<i.length;a++){if(r=i.start(a)-this.bufferPadding,s=i.end(a)+this.bufferPadding,e>=r&&n<=s)return!0;if(n<=r)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,n){if(n.frag.sn==="initSegment"||n.frag.bitrateTest)return;const i=n.frag,r=n.part?null:n,s=ud(i);this.fragments[s]={body:i,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,n){const{frag:i,part:r,timeRanges:s,type:a}=n;if(i.sn==="initSegment")return;const l=i.type;if(r){let c=this.activePartLists[l];c||(this.activePartLists[l]=c=[]),c.push(r)}this.timeRanges=s;const f=s[a];this.detectEvictedFragments(a,f,l,r)}onFragBuffered(e,n){this.detectPartialFragments(n)}hasFragment(e){const n=ud(e);return!!this.fragments[n]}hasFragments(e){const{fragments:n}=this,i=Object.keys(n);if(!e)return i.length>0;for(let r=i.length;r--;){const s=n[i[r]];if(s?.body.type===e)return!0}return!1}hasParts(e){var n;return!!((n=this.activePartLists[e])!=null&&n.length)}removeFragmentsInRange(e,n,i,r,s){r&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const l=this.fragments[a];if(!l)return;const f=l.body;f.type!==i||r&&!f.gap||f.start<n&&f.end>e&&(l.buffered||s)&&this.removeFragment(f)})}removeFragment(e){const n=ud(e);e.clearElementaryStreamInfo();const i=this.activePartLists[e.type];if(i){const r=e.sn;this.activePartLists[e.type]=DP(i,s=>s.fragment.sn!==r)}delete this.fragments[n],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e,n;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const i=(e=this.hls)==null||(n=e.latestLevelDetails)==null?void 0:n.partList;i&&i.forEach(r=>r.clearElementaryStreamInfo())}}function xg(t){var e,n,i;return t.buffered&&(t.body.gap||((e=t.range.video)==null?void 0:e.partial)||((n=t.range.audio)==null?void 0:n.partial)||((i=t.range.audiovideo)==null?void 0:i.partial))}function ud(t){return`${t.type}_${t.level}_${t.sn}`}function DP(t,e){return t.filter(n=>{const i=e(n);return i||n.clearElementaryStreamInfo(),i})}var Xu={cbc:0,ctr:1};class Rte{constructor(e,n,i){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=n,this.aesMode=i}decrypt(e,n){switch(this.aesMode){case Xu.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},n,e);case Xu.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},n,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function Pte(t){const e=t.byteLength,n=e&&new DataView(t.buffer).getUint8(e-1);return n?t.slice(0,e-n):t}class Dte{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const n=new DataView(e),i=new Uint32Array(4);for(let r=0;r<4;r++)i[r]=n.getUint32(r*4);return i}initTable(){const e=this.sBox,n=this.invSBox,i=this.subMix,r=i[0],s=i[1],a=i[2],l=i[3],f=this.invSubMix,c=f[0],h=f[1],p=f[2],g=f[3],x=new Uint32Array(256);let b=0,T=0,E=0;for(E=0;E<256;E++)E<128?x[E]=E<<1:x[E]=E<<1^283;for(E=0;E<256;E++){let C=T^T<<1^T<<2^T<<3^T<<4;C=C>>>8^C&255^99,e[b]=C,n[C]=b;const I=x[b],P=x[I],M=x[P];let k=x[C]*257^C*16843008;r[b]=k<<24|k>>>8,s[b]=k<<16|k>>>16,a[b]=k<<8|k>>>24,l[b]=k,k=M*16843009^P*65537^I*257^b*16843008,c[C]=k<<24|k>>>8,h[C]=k<<16|k>>>16,p[C]=k<<8|k>>>24,g[C]=k,b?(b=I^x[x[x[M^I]]],T^=x[x[T]]):b=T=1}}expandKey(e){const n=this.uint8ArrayToUint32Array_(e);let i=!0,r=0;for(;r<n.length&&i;)i=n[r]===this.key[r],r++;if(i)return;this.key=n;const s=this.keySize=n.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const a=this.ksRows=(s+6+1)*4;let l,f;const c=this.keySchedule=new Uint32Array(a),h=this.invKeySchedule=new Uint32Array(a),p=this.sBox,g=this.rcon,x=this.invSubMix,b=x[0],T=x[1],E=x[2],C=x[3];let I,P;for(l=0;l<a;l++){if(l<s){I=c[l]=n[l];continue}P=I,l%s===0?(P=P<<8|P>>>24,P=p[P>>>24]<<24|p[P>>>16&255]<<16|p[P>>>8&255]<<8|p[P&255],P^=g[l/s|0]<<24):s>6&&l%s===4&&(P=p[P>>>24]<<24|p[P>>>16&255]<<16|p[P>>>8&255]<<8|p[P&255]),c[l]=I=(c[l-s]^P)>>>0}for(f=0;f<a;f++)l=a-f,f&3?P=c[l]:P=c[l-4],f<4||l<=4?h[f]=P:h[f]=b[p[P>>>24]]^T[p[P>>>16&255]]^E[p[P>>>8&255]]^C[p[P&255]],h[f]=h[f]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,n,i){const r=this.keySize+6,s=this.invKeySchedule,a=this.invSBox,l=this.invSubMix,f=l[0],c=l[1],h=l[2],p=l[3],g=this.uint8ArrayToUint32Array_(i);let x=g[0],b=g[1],T=g[2],E=g[3];const C=new Int32Array(e),I=new Int32Array(C.length);let P,M,k,z,F,G,K,V,Q,J,ve,se,ye,X;const oe=this.networkToHostOrderSwap;for(;n<C.length;){for(Q=oe(C[n]),J=oe(C[n+1]),ve=oe(C[n+2]),se=oe(C[n+3]),F=Q^s[0],G=se^s[1],K=ve^s[2],V=J^s[3],ye=4,X=1;X<r;X++)P=f[F>>>24]^c[G>>16&255]^h[K>>8&255]^p[V&255]^s[ye],M=f[G>>>24]^c[K>>16&255]^h[V>>8&255]^p[F&255]^s[ye+1],k=f[K>>>24]^c[V>>16&255]^h[F>>8&255]^p[G&255]^s[ye+2],z=f[V>>>24]^c[F>>16&255]^h[G>>8&255]^p[K&255]^s[ye+3],F=P,G=M,K=k,V=z,ye=ye+4;P=a[F>>>24]<<24^a[G>>16&255]<<16^a[K>>8&255]<<8^a[V&255]^s[ye],M=a[G>>>24]<<24^a[K>>16&255]<<16^a[V>>8&255]<<8^a[F&255]^s[ye+1],k=a[K>>>24]<<24^a[V>>16&255]<<16^a[F>>8&255]<<8^a[G&255]^s[ye+2],z=a[V>>>24]<<24^a[F>>16&255]<<16^a[G>>8&255]<<8^a[K&255]^s[ye+3],I[n]=oe(P^x),I[n+1]=oe(z^b),I[n+2]=oe(k^T),I[n+3]=oe(M^E),x=Q,b=J,T=ve,E=se,n=n+4}return I.buffer}}class Ite{constructor(e,n,i){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=n,this.aesMode=i}expandKey(){const e=Mte(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function Mte(t){switch(t){case Xu.cbc:return"AES-CBC";case Xu.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${t}`)}}const kte=16;class eA{constructor(e,{removePKCS7Padding:n=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=n,n)try{const i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:n}=this;if(!e||n)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?Pte(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,n,i,r){return this.useSoftware?new Promise((s,a)=>{const l=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(l,n,i,r);const f=this.flush();f?s(f.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),n,i,r)}softwareDecrypt(e,n,i,r){const{currentIV:s,currentResult:a,remainderData:l}=this;if(r!==Xu.cbc||n.byteLength!==16)return Wt.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),l&&(e=ua(l,e),this.remainderData=null);const f=this.getValidChunk(e);if(!f.length)return null;s&&(i=s);let c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new Dte),c.expandKey(n);const h=a;return this.currentResult=c.decrypt(f.buffer,0,i),this.currentIV=f.slice(-16).buffer,h||null}webCryptoDecrypt(e,n,i,r){if(this.key!==n||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,n,i,r));this.key=n,this.fastAesKey=new Ite(this.subtle,n,r)}return this.fastAesKey.expandKey().then(s=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new Rte(this.subtle,new Uint8Array(i),r).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(Wt.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,n,i,r)))}onWebCryptoError(e,n,i,r){const s=this.enableSoftwareAES;if(s){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,n,i,r);const a=this.flush();if(a)return a.buffer}throw new Error("WebCrypto"+(s?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let n=e;const i=e.length-e.length%kte;return i!==e.length&&(n=e.slice(0,i),this.remainderData=e.slice(i)),n}logOnce(e){this.logEnabled&&(Wt.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const IP=Math.pow(2,17);class Nte{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,n){const i=e.url;if(!i)return Promise.reject(new Sl({type:at.NETWORK_ERROR,details:pe.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${i?"part list":"url"}`),networkDetails:null}));this.abort();const r=this.config,s=r.fLoader,a=r.loader;return new Promise((l,f)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(b=>b[0]==="GAP")){f(kP(e));return}else e.gap=!1;const c=this.loader=s?new s(r):new a(r),h=MP(e);e.loader=c;const p=PP(r.fragLoadPolicy.default),g={loadPolicy:p,timeout:p.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:IP};e.stats=c.stats;const x={onSuccess:(b,T,E,C)=>{this.resetLoader(e,c);let I=b.data;E.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(I.slice(0,16)),I=I.slice(16)),l({frag:e,part:null,payload:I,networkDetails:C})},onError:(b,T,E,C)=>{this.resetLoader(e,c),f(new Sl({type:at.NETWORK_ERROR,details:pe.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:pn({url:i,data:void 0},b),error:new Error(`HTTP Error ${b.code} ${b.text}`),networkDetails:E,stats:C}))},onAbort:(b,T,E)=>{this.resetLoader(e,c),f(new Sl({type:at.NETWORK_ERROR,details:pe.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:E,stats:b}))},onTimeout:(b,T,E)=>{this.resetLoader(e,c),f(new Sl({type:at.NETWORK_ERROR,details:pe.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${g.timeout}ms`),networkDetails:E,stats:b}))}};n&&(x.onProgress=(b,T,E,C)=>n({frag:e,part:null,payload:E,networkDetails:C})),c.load(h,g,x)})}loadPart(e,n,i){this.abort();const r=this.config,s=r.fLoader,a=r.loader;return new Promise((l,f)=>{if(this.loader&&this.loader.destroy(),e.gap||n.gap){f(kP(e,n));return}const c=this.loader=s?new s(r):new a(r),h=MP(e,n);e.loader=c;const p=PP(r.fragLoadPolicy.default),g={loadPolicy:p,timeout:p.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:IP};n.stats=c.stats,c.load(h,g,{onSuccess:(x,b,T,E)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,n);const C={frag:e,part:n,payload:x.data,networkDetails:E};i(C),l(C)},onError:(x,b,T,E)=>{this.resetLoader(e,c),f(new Sl({type:at.NETWORK_ERROR,details:pe.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:n,response:pn({url:h.url,data:void 0},x),error:new Error(`HTTP Error ${x.code} ${x.text}`),networkDetails:T,stats:E}))},onAbort:(x,b,T)=>{e.stats.aborted=n.stats.aborted,this.resetLoader(e,c),f(new Sl({type:at.NETWORK_ERROR,details:pe.INTERNAL_ABORTED,fatal:!1,frag:e,part:n,error:new Error("Aborted"),networkDetails:T,stats:x}))},onTimeout:(x,b,T)=>{this.resetLoader(e,c),f(new Sl({type:at.NETWORK_ERROR,details:pe.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:n,error:new Error(`Timeout after ${g.timeout}ms`),networkDetails:T,stats:x}))}})})}updateStatsFromPart(e,n){const i=e.stats,r=n.stats,s=r.total;if(i.loaded+=r.loaded,s){const f=Math.round(e.duration/n.duration),c=Math.min(Math.round(i.loaded/s),f),p=(f-c)*Math.round(i.loaded/c);i.total=i.loaded+p}else i.total=Math.max(i.loaded,i.total);const a=i.loading,l=r.loading;a.start?a.first+=l.first-l.start:(a.start=l.start,a.first=l.first),a.end=l.end}resetLoader(e,n){e.loader=null,this.loader===n&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),n.destroy()}}function MP(t,e=null){const n=e||t,i={frag:t,part:e,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},r=n.byteRangeStartOffset,s=n.byteRangeEndOffset;if(qe(r)&&qe(s)){var a;let l=r,f=s;if(t.sn==="initSegment"&&jte((a=t.decryptdata)==null?void 0:a.method)){const c=s-r;c%16&&(f=s+(16-c%16)),r!==0&&(i.resetIV=!0,l=r-16)}i.rangeStart=l,i.rangeEnd=f}return i}function kP(t,e){const n=new Error(`GAP ${t.gap?"tag":"attribute"} found`),i={type:at.MEDIA_ERROR,details:pe.FRAG_GAP,fatal:!1,frag:t,error:n,networkDetails:null};return e&&(i.part=e),(e||t).stats.aborted=!0,new Sl(i)}function jte(t){return t==="AES-128"||t==="AES-256"}class Sl extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class yB extends io{constructor(e,n){super(e,n),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class tA{constructor(e,n,i,r=0,s=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=_g(),this.buffering={audio:_g(),video:_g(),audiovideo:_g()},this.level=e,this.sn=n,this.id=i,this.size=r,this.part=s,this.partial=a}}function _g(){return{start:0,executeStart:0,executeEnd:0,end:0}}const NP={length:0,start:()=>0,end:()=>0};class wt{static isBuffered(e,n){if(e){const i=wt.getBuffered(e);for(let r=i.length;r--;)if(n>=i.start(r)&&n<=i.end(r))return!0}return!1}static bufferedRanges(e){if(e){const n=wt.getBuffered(e);return wt.timeRangesToArray(n)}return[]}static timeRangesToArray(e){const n=[];for(let i=0;i<e.length;i++)n.push({start:e.start(i),end:e.end(i)});return n}static bufferInfo(e,n,i){if(e){const r=wt.bufferedRanges(e);if(r.length)return wt.bufferedInfo(r,n,i)}return{len:0,start:n,end:n,bufferedIndex:-1}}static bufferedInfo(e,n,i){n=Math.max(0,n),e.length>1&&e.sort((h,p)=>h.start-p.start||p.end-h.end);let r=-1,s=[];if(i)for(let h=0;h<e.length;h++){n>=e[h].start&&n<=e[h].end&&(r=h);const p=s.length;if(p){const g=s[p-1].end;e[h].start-g<i?e[h].end>g&&(s[p-1].end=e[h].end):s.push(e[h])}else s.push(e[h])}else s=e;let a=0,l,f=n,c=n;for(let h=0;h<s.length;h++){const p=s[h].start,g=s[h].end;if(r===-1&&n>=p&&n<=g&&(r=h),n+i>=p&&n<g)f=p,c=g,a=c-n;else if(n+i<p){l=p;break}}return{len:a,start:f||0,end:c||0,nextStart:l,buffered:e,bufferedIndex:r}}static getBuffered(e){try{return e.buffered||NP}catch(n){return Wt.log("failed to get media.buffered",n),NP}}}const bB=/\{\$([a-zA-Z0-9-_]+)\}/g;function jP(t){return bB.test(t)}function OS(t,e){if(t.variableList!==null||t.hasVariableRefs){const n=t.variableList;return e.replace(bB,i=>{const r=i.substring(2,i.length-1),s=n?.[r];return s===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),i):s})}return e}function BP(t,e,n){let i=t.variableList;i||(t.variableList=i={});let r,s;if("QUERYPARAM"in e){r=e.QUERYPARAM;try{const a=new self.URL(n).searchParams;if(a.has(r))s=a.get(r);else throw new Error(`"${r}" does not match any query parameter in URI: "${n}"`)}catch(a){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else r=e.NAME,s=e.VALUE;r in i?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):i[r]=s||""}function Bte(t,e,n){const i=e.IMPORT;if(n&&i in n){let r=t.variableList;r||(t.variableList=r={}),r[i]=n[i]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${i}"`))}const Fte=/^(\d+)x(\d+)$/,FP=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Kn{constructor(e,n){typeof e=="string"&&(e=Kn.parseAttrList(e,n)),cn(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const n=parseInt(this[e],10);return n>Number.MAX_SAFE_INTEGER?1/0:n}hexadecimalInteger(e){if(this[e]){let n=(this[e]||"0x").slice(2);n=(n.length&1?"0":"")+n;const i=new Uint8Array(n.length/2);for(let r=0;r<n.length/2;r++)i[r]=parseInt(n.slice(r*2,r*2+2),16);return i}return null}hexadecimalIntegerAsNumber(e){const n=parseInt(this[e],16);return n>Number.MAX_SAFE_INTEGER?1/0:n}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,n){const i=this[e];return i?parseFloat(i):n}enumeratedString(e){return this[e]}enumeratedStringList(e,n){const i=this[e];return(i?i.split(/[ ,]+/):[]).reduce((r,s)=>(r[s.toLowerCase()]=!0,r),n)}bool(e){return this[e]==="YES"}decimalResolution(e){const n=Fte.exec(this[e]);if(n!==null)return{width:parseInt(n[1],10),height:parseInt(n[2],10)}}static parseAttrList(e,n){let i;const r={},s='"';for(FP.lastIndex=0;(i=FP.exec(e))!==null;){const a=i[1].trim();let l=i[2];const f=l.indexOf(s)===0&&l.lastIndexOf(s)===l.length-1;let c=!1;if(f)l=l.slice(1,-1);else switch(a){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":c=!0}if(n&&(f||c))l=OS(n,l);else if(!c&&!f)switch(a){case"CLOSED-CAPTIONS":if(l==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Wt.warn(`${e}: attribute ${a} is missing quotes`)}r[a]=l}return r}}const Ute="com.apple.hls.interstitial";function $te(t){return t!=="ID"&&t!=="CLASS"&&t!=="CUE"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function zte(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"||t==="SCTE35-CMD"}class xB{constructor(e,n,i=0){var r;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=n?.tagAnchor||null,this.tagOrder=(r=n?.tagOrder)!=null?r:i,n){const s=n.attr;for(const a in s)if(Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==s[a]){Wt.warn(`DATERANGE tag attribute: "${a}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=a;break}e=cn(new Kn({}),s,e)}if(this.attr=e,n?(this._startDate=n._startDate,this._cue=n._cue,this._endDate=n._endDate,this._dateAtEnd=n._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const s=n?.endDate||new Date(this.attr["END-DATE"]);qe(s.getTime())&&(this._endDate=s)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(Wt.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const n=this.duration;return n!==null?this._dateAtEnd=new Date(this._startDate.getTime()+n*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(qe(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===Ute}get isValid(){return!!this.id&&!this._badValueForSameId&&qe(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const Gte=10;class Hte{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const n=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!n||!this.live,this.advanced=this.endSN>e.endSN||n>0||n===0&&i>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}get hasProgramDateTime(){return this.fragments.length?qe(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||Gte}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const n=this.lastPartIndex;if(n!==-1){for(let i=e.length;i--;)if(e[i].index>n)return e[i].index;return n}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function Sd(t){return t==="AES-128"||t==="AES-256"||t==="AES-256-CTR"}function nA(t){switch(t){case"AES-128":case"AES-256":return Xu.cbc;case"AES-256-CTR":return Xu.ctr;default:throw new Error(`invalid full segment method ${t}`)}}function _B(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function RS(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}function Kte(t){const e=RS(t).subarray(0,16),n=new Uint8Array(16);return n.set(e,16-e.length),n}function qte(t){const e=function(i,r,s){const a=i[r];i[r]=i[s],i[s]=a};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function Vte(t){const e=t.split(":");let n=null;if(e[0]==="data"&&e.length===2){const i=e[1].split(";"),r=i[i.length-1].split(",");if(r.length===2){const s=r[0]==="base64",a=r[1];s?(i.splice(-1,1),n=_B(a)):n=Kte(a)}}return n}const Kv=typeof self<"u"?self:void 0;var Qn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Wr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function PS(t){switch(t){case Wr.FAIRPLAY:return Qn.FAIRPLAY;case Wr.PLAYREADY:return Qn.PLAYREADY;case Wr.WIDEVINE:return Qn.WIDEVINE;case Wr.CLEARKEY:return Qn.CLEARKEY}}function UP(t){switch(t){case Qn.FAIRPLAY:return Wr.FAIRPLAY;case Qn.PLAYREADY:return Wr.PLAYREADY;case Qn.WIDEVINE:return Wr.WIDEVINE;case Qn.CLEARKEY:return Wr.CLEARKEY}}function Fg(t){const{drmSystems:e,widevineLicenseUrl:n}=t,i=e?[Qn.FAIRPLAY,Qn.WIDEVINE,Qn.PLAYREADY,Qn.CLEARKEY].filter(r=>!!e[r]):[];return!i[Qn.WIDEVINE]&&n&&i.push(Qn.WIDEVINE),i}const SB=function(t){return Kv!=null&&(t=Kv.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function Yte(t,e,n,i){let r;switch(t){case Qn.FAIRPLAY:r=["cenc","sinf"];break;case Qn.WIDEVINE:case Qn.PLAYREADY:r=["cenc"];break;case Qn.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return Wte(r,e,n,i)}function Wte(t,e,n,i){return[{initDataTypes:t,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs=${s}`,robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null})),videoCapabilities:n.map(s=>({contentType:`video/mp4; codecs=${s}`,robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}))}]}function Zte(t){var e;return t.sessionType==="persistent-license"||!!((e=t.sessionTypes)!=null&&e.some(n=>n==="persistent-license"))}function Xte(t){const e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),n=String.fromCharCode.apply(null,Array.from(e)),i=n.substring(n.indexOf("<"),n.length),a=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("KID")[0];if(a){const l=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(l){const f=_B(l).subarray(0,16);return qte(f),f}}return null}let Sg={};class $0{static clearKeyUriToKeyIdMap(){Sg={}}constructor(e,n,i,r=[1],s=null,a){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=n,this.keyFormat=i,this.keyFormatVersions=r,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!Sd(e),a!=null&&a.startsWith("0x")&&(this.keyId=new Uint8Array(nB(a)))}matches(e){var n,i;return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&e.keyFormatVersions.join(",")===this.keyFormatVersions.join(",")&&((n=e.iv)==null?void 0:n.join(","))===((i=this.iv)==null?void 0:i.join(","))}isSupported(){if(this.method){if(Sd(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Wr.FAIRPLAY:case Wr.WIDEVINE:case Wr.PLAYREADY:case Wr.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(Sd(this.method)&&this.uri&&!this.iv){typeof e!="number"&&(Wt.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const i=Qte(e);return new $0(this.method,this.uri,"identity",this.keyFormatVersions,i)}if(this.pssh&&this.keyId)return this;const n=Vte(this.uri);if(n)switch(this.keyFormat){case Wr.WIDEVINE:if(this.pssh=n,!this.keyId&&n.length>=22){const i=n.length-22;this.keyId=n.subarray(i,i+16)}break;case Wr.PLAYREADY:{const i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=nte(i,null,n),this.keyId=Xte(n);break}default:{let i=n.subarray(0,16);if(i.length!==16){const r=new Uint8Array(16);r.set(i,16-i.length),i=r}this.keyId=i;break}}if(!this.keyId||this.keyId.byteLength!==16){let i=Sg[this.uri];if(!i){const r=Object.keys(Sg).length%Number.MAX_SAFE_INTEGER;i=new Uint8Array(16),new DataView(i.buffer,12,4).setUint32(0,r),Sg[this.uri]=i}this.keyId=i}return this}}function Qte(t){const e=new Uint8Array(16);for(let n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e}const $P=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,zP=/#EXT-X-MEDIA:(.*)/g,Jte=/^#EXT(?:INF|-X-TARGETDURATION):/m,Jx=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),ene=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Io{static findGroup(e,n){for(let i=0;i<e.length;i++){const r=e[i];if(r.id===n)return r}}static resolve(e,n){return YT.buildAbsoluteURL(n,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return Jte.test(e)}static parseMasterPlaylist(e,n){const i=jP(e),r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:i},s=[];$P.lastIndex=0;let a;for(;(a=$P.exec(e))!=null;)if(a[1]){var l;const c=new Kn(a[1],r),h=OS(r,a[2]),p={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:Io.resolve(h,n)},g=c.decimalResolution("RESOLUTION");g&&(p.width=g.width,p.height=g.height),KP(c.CODECS,p);const x=c["SUPPLEMENTAL-CODECS"];x&&(p.supplemental={},KP(x,p.supplemental)),(l=p.unknownCodecs)!=null&&l.length||s.push(p),r.levels.push(p)}else if(a[3]){const c=a[3],h=a[4];switch(c){case"SESSION-DATA":{const p=new Kn(h,r),g=p["DATA-ID"];g&&(r.sessionData===null&&(r.sessionData={}),r.sessionData[g]=p);break}case"SESSION-KEY":{const p=GP(h,n,r);p.encrypted&&p.isSupported()?(r.sessionKeys===null&&(r.sessionKeys=[]),r.sessionKeys.push(p)):Wt.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${h}"`);break}case"DEFINE":{{const p=new Kn(h,r);BP(r,p,n)}break}case"CONTENT-STEERING":{const p=new Kn(h,r);r.contentSteering={uri:Io.resolve(p["SERVER-URI"],n),pathwayId:p["PATHWAY-ID"]||"."};break}case"START":{r.startTimeOffset=HP(h);break}}}const f=s.length>0&&s.length<r.levels.length;return r.levels=f?s:r.levels,r.levels.length===0&&(r.playlistParsingError=new Error("no levels found in manifest")),r}static parseMasterPlaylistMedia(e,n,i){let r;const s={},a=i.levels,l={AUDIO:a.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:a.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let f=0;for(zP.lastIndex=0;(r=zP.exec(e))!==null;){const c=new Kn(r[1],i),h=c.TYPE;if(h){const p=l[h],g=s[h]||[];s[h]=g;const x=c.LANGUAGE,b=c["ASSOC-LANGUAGE"],T=c.CHANNELS,E=c.CHARACTERISTICS,C=c["INSTREAM-ID"],I={attrs:c,bitrate:0,id:f++,groupId:c["GROUP-ID"]||"",name:c.NAME||x||"",type:h,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:x,url:c.URI?Io.resolve(c.URI,n):""};if(b&&(I.assocLang=b),T&&(I.channels=T),E&&(I.characteristics=E),C&&(I.instreamId=C),p!=null&&p.length){const P=Io.findGroup(p,I.groupId)||p[0];qP(I,P,"audioCodec"),qP(I,P,"textCodec")}g.push(I)}}return s}static parseLevelPlaylist(e,n,i,r,s,a){var l;const f={url:n},c=new Hte(n),h=c.fragments,p=[];let g=null,x=0,b=0,T=0,E=0,C=0,I=null,P=new Zx(r,f),M,k,z,F=-1,G=!1,K=null,V;if(Jx.lastIndex=0,c.m3u8=e,c.hasVariableRefs=jP(e),((l=Jx.exec(e))==null?void 0:l[0])!=="#EXTM3U")return c.playlistParsingError=new Error("Missing format identifier #EXTM3U"),c;for(;(M=Jx.exec(e))!==null;){G&&(G=!1,P=new Zx(r,f),P.playlistOffset=T,P.start=T,P.sn=x,P.cc=E,C&&(P.bitrate=C),P.level=i,g&&(P.initSegment=g,g.rawProgramDateTime&&(P.rawProgramDateTime=g.rawProgramDateTime,g.rawProgramDateTime=null),K&&(P.setByteRange(K),K=null)));const se=M[1];if(se){P.duration=parseFloat(se);const ye=(" "+M[2]).slice(1);P.title=ye||null,P.tagList.push(ye?["INF",se,ye]:["INF",se])}else if(M[3]){if(qe(P.duration)){P.playlistOffset=T,P.start=T,z&&YP(P,z,c),P.sn=x,P.level=i,P.cc=E,h.push(P);const ye=(" "+M[3]).slice(1);P.relurl=OS(c,ye),DS(P,I,p),I=P,T+=P.duration,x++,b=0,G=!0}}else{if(M=M[0].match(ene),!M){Wt.warn("No matches on slow regex match for level playlist!");continue}for(k=1;k<M.length&&M[k]===void 0;k++);const ye=(" "+M[k]).slice(1),X=(" "+M[k+1]).slice(1),oe=M[k+2]?(" "+M[k+2]).slice(1):null;switch(ye){case"BYTERANGE":I?P.setByteRange(X,I):P.setByteRange(X);break;case"PROGRAM-DATE-TIME":P.rawProgramDateTime=X,P.tagList.push(["PROGRAM-DATE-TIME",X]),F===-1&&(F=h.length);break;case"PLAYLIST-TYPE":c.type&&xl(c,ye,M),c.type=X.toUpperCase();break;case"MEDIA-SEQUENCE":c.startSN!==0?xl(c,ye,M):h.length>0&&WP(c,ye,M),x=c.startSN=parseInt(X);break;case"SKIP":{c.skippedSegments&&xl(c,ye,M);const ie=new Kn(X,c),Ie=ie.decimalInteger("SKIPPED-SEGMENTS");if(qe(Ie)){c.skippedSegments+=Ie;for(let Y=Ie;Y--;)h.push(null);x+=Ie}const Z=ie.enumeratedString("RECENTLY-REMOVED-DATERANGES");Z&&(c.recentlyRemovedDateranges=(c.recentlyRemovedDateranges||[]).concat(Z.split("	")));break}case"TARGETDURATION":c.targetduration!==0&&xl(c,ye,M),c.targetduration=Math.max(parseInt(X),1);break;case"VERSION":c.version!==null&&xl(c,ye,M),c.version=parseInt(X);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":c.live||xl(c,ye,M),c.live=!1;break;case"#":(X||oe)&&P.tagList.push(oe?[X,oe]:[X]);break;case"DISCONTINUITY":E++,P.tagList.push(["DIS"]);break;case"GAP":P.gap=!0,P.tagList.push([ye]);break;case"BITRATE":P.tagList.push([ye,X]),C=parseInt(X)*1e3,qe(C)?P.bitrate=C:C=0;break;case"DATERANGE":{const ie=new Kn(X,c),Ie=new xB(ie,c.dateRanges[ie.ID],c.dateRangeTagCount);c.dateRangeTagCount++,Ie.isValid||c.skippedSegments?c.dateRanges[Ie.id]=Ie:Wt.warn(`Ignoring invalid DATERANGE tag: "${X}"`),P.tagList.push(["EXT-X-DATERANGE",X]);break}case"DEFINE":{{const ie=new Kn(X,c);"IMPORT"in ie?Bte(c,ie,a):BP(c,ie,n)}break}case"DISCONTINUITY-SEQUENCE":c.startCC!==0?xl(c,ye,M):h.length>0&&WP(c,ye,M),c.startCC=E=parseInt(X);break;case"KEY":{const ie=GP(X,n,c);if(ie.isSupported()){if(ie.method==="NONE"){z=void 0;break}z||(z={});const Ie=z[ie.keyFormat];Ie!=null&&Ie.matches(ie)||(Ie&&(z=cn({},z)),z[ie.keyFormat]=ie)}else Wt.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${X}"`);break}case"START":c.startTimeOffset=HP(X);break;case"MAP":{const ie=new Kn(X,c);if(P.duration){const Ie=new Zx(r,f);VP(Ie,ie,i,z),g=Ie,P.initSegment=g,g.rawProgramDateTime&&!P.rawProgramDateTime&&(P.rawProgramDateTime=g.rawProgramDateTime)}else{const Ie=P.byteRangeEndOffset;if(Ie){const Z=P.byteRangeStartOffset;K=`${Ie-Z}@${Z}`}else K=null;VP(P,ie,i,z),g=P,G=!0}g.cc=E;break}case"SERVER-CONTROL":{V&&xl(c,ye,M),V=new Kn(X),c.canBlockReload=V.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=V.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&V.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=V.optionalFloat("PART-HOLD-BACK",0),c.holdBack=V.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{c.partTarget&&xl(c,ye,M);const ie=new Kn(X);c.partTarget=ie.decimalFloatingPoint("PART-TARGET");break}case"PART":{let ie=c.partList;ie||(ie=c.partList=[]);const Ie=b>0?ie[ie.length-1]:void 0,Z=b++,Y=new Kn(X,c),ne=new zee(Y,P,f,Z,Ie);ie.push(ne),P.duration+=ne.duration;break}case"PRELOAD-HINT":{const ie=new Kn(X,c);c.preloadHint=ie;break}case"RENDITION-REPORT":{const ie=new Kn(X,c);c.renditionReports=c.renditionReports||[],c.renditionReports.push(ie);break}default:Wt.warn(`line parsed but not handled: ${M}`);break}}}I&&!I.relurl?(h.pop(),T-=I.duration,c.partList&&(c.fragmentHint=I)):c.partList&&(DS(P,I,p),P.cc=E,c.fragmentHint=P,z&&YP(P,z,c)),c.targetduration||(c.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const Q=h.length,J=h[0],ve=h[Q-1];if(T+=c.skippedSegments*c.targetduration,T>0&&Q&&ve){c.averagetargetduration=T/Q;const se=ve.sn;c.endSN=se!=="initSegment"?se:0,c.live||(ve.endList=!0),J&&c.startCC===void 0&&(c.startCC=J.cc),F>0&&(nne(h,F),J&&p.unshift(J))}else c.endSN=0,c.startCC=0;return c.fragmentHint&&(T+=c.fragmentHint.duration),c.totalduration=T,p.length&&c.dateRangeTagCount&&J&&EB(p,c),c.endCC=E,c}}function EB(t,e){const n=t.length;if(!n)return;const i=t[n-1],r=e.live?1/0:e.totalduration,s=Object.keys(e.dateRanges);for(let a=s.length;a--;){const l=e.dateRanges[s[a]],f=l.startDate.getTime();l.tagAnchor=i.ref;for(let c=n;c--;){const h=tne(e,f,t,c,r);if(h!==-1){l.tagAnchor=e.fragments[h].ref;break}}}}function tne(t,e,n,i,r){const s=n[i];if(s){const l=s.programDateTime;if(e>=l||i===0){var a;const f=(((a=n[i+1])==null?void 0:a.start)||r)-s.start;if(e<=l+f*1e3){const c=n[i].sn-t.startSN,h=t.fragments;if(h.length>n.length){const g=(n[i+1]||h[h.length-1]).sn-t.startSN;for(let x=g;x>c;x--){const b=h[x].programDateTime;if(e>=b&&e<b+h[x].duration*1e3)return x}}return c}}}return-1}function GP(t,e,n){var i,r;const s=new Kn(t,n),a=(i=s.METHOD)!=null?i:"",l=s.URI,f=s.hexadecimalInteger("IV"),c=s.KEYFORMATVERSIONS,h=(r=s.KEYFORMAT)!=null?r:"identity";l&&s.IV&&!f&&Wt.error(`Invalid IV: ${s.IV}`);const p=l?Io.resolve(l,e):"",g=(c||"1").split("/").map(Number).filter(Number.isFinite);return new $0(a,p,h,g,f,s.KEYID)}function HP(t){const n=new Kn(t).decimalFloatingPoint("TIME-OFFSET");return qe(n)?n:null}function KP(t,e){let n=(t||"").split(/[ ,]+/).filter(i=>i);["video","audio","text"].forEach(i=>{const r=n.filter(s=>XT(s,i));r.length&&(e[`${i}Codec`]=r.map(s=>s.split("/")[0]).join(","),n=n.filter(s=>r.indexOf(s)===-1))}),e.unknownCodecs=n}function qP(t,e,n){const i=e[n];i&&(t[n]=i)}function nne(t,e){let n=t[e];for(let i=e;i--;){const r=t[i];if(!r)return;r.programDateTime=n.programDateTime-r.duration*1e3,n=r}}function DS(t,e,n){t.rawProgramDateTime?n.push(t):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime)}function VP(t,e,n,i){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=n,t.sn="initSegment",i&&(t.levelkeys=i),t.initSegment=null}function YP(t,e,n){t.levelkeys=e;const{encryptedFragments:i}=n;(!i.length||i[i.length-1].levelkeys!==e)&&Object.keys(e).some(r=>e[r].isCommonEncryption)&&i.push(t)}function xl(t,e,n){t.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${n[0]})`)}function WP(t,e,n){t.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${n[0]})`)}function e_(t,e){const n=e.startPTS;if(qe(n)){let i=0,r;e.sn>t.sn?(i=n-t.start,r=t):(i=t.start-n,r=e),r.duration!==i&&r.setDuration(i)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.setStart(t.start+(t.minEndPTS-t.start)):e.setStart(t.start+t.duration):e.setStart(Math.max(t.start-e.duration,0))}function TB(t,e,n,i,r,s){i-n<=0&&(Wt.warn("Fragment should have a positive duration",e),i=n+e.duration,s=r+e.duration);let l=n,f=i;const c=e.startPTS,h=e.endPTS;if(qe(c)){const E=Math.abs(c-n);qe(e.deltaPTS)?e.deltaPTS=Math.max(E,e.deltaPTS):e.deltaPTS=E,l=Math.max(n,c),n=Math.min(n,c),r=Math.min(r,e.startDTS),f=Math.min(i,h),i=Math.max(i,h),s=Math.max(s,e.endDTS)}const p=n-e.start;e.start!==0&&e.setStart(n),e.setDuration(i-e.start),e.startPTS=n,e.maxStartPTS=l,e.startDTS=r,e.endPTS=i,e.minEndPTS=f,e.endDTS=s;const g=e.sn;if(!t||g<t.startSN||g>t.endSN)return 0;let x;const b=g-t.startSN,T=t.fragments;for(T[b]=e,x=b;x>0;x--)e_(T[x],T[x-1]);for(x=b;x<T.length-1;x++)e_(T[x],T[x+1]);return t.fragmentHint&&e_(T[T.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,p}function ine(t,e){if(t===e)return;let n=null;const i=t.fragments;for(let c=i.length-1;c>=0;c--){const h=i[c].initSegment;if(h){n=h;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let r;ane(t,e,(c,h,p,g)=>{if((!e.startCC||e.skippedSegments)&&h.cc!==c.cc){const x=c.cc-h.cc;for(let b=p;b<g.length;b++)g[b].cc+=x;e.endCC=g[g.length-1].cc}qe(c.startPTS)&&qe(c.endPTS)&&(h.setStart(h.startPTS=c.startPTS),h.startDTS=c.startDTS,h.maxStartPTS=c.maxStartPTS,h.endPTS=c.endPTS,h.endDTS=c.endDTS,h.minEndPTS=c.minEndPTS,h.setDuration(c.endPTS-c.startPTS),h.duration&&(r=h),e.PTSKnown=e.alignedSliding=!0),c.hasStreams&&(h.elementaryStreams=c.elementaryStreams),h.loader=c.loader,c.hasStats&&(h.stats=c.stats),c.initSegment&&(h.initSegment=c.initSegment,n=c.initSegment)});const s=e.fragments,a=e.fragmentHint?s.concat(e.fragmentHint):s;if(n&&a.forEach(c=>{var h;c&&(!c.initSegment||c.initSegment.relurl===((h=n)==null?void 0:h.relurl))&&(c.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=s.some(c=>!c),e.deltaUpdateFailed){Wt.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let c=e.skippedSegments;c--;)s.shift();e.startSN=s[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=rne(t.dateRanges,e));const c=t.fragments.filter(h=>h.rawProgramDateTime);if(t.hasProgramDateTime&&!e.hasProgramDateTime)for(let h=1;h<a.length;h++)a[h].programDateTime===null&&DS(a[h],a[h-1],c);EB(c,e)}e.endCC=s[s.length-1].cc}if(!e.startCC){var l;const c=LB(t,e.startSN-1);e.startCC=(l=c?.cc)!=null?l:s[0].cc}sne(t.partList,e.partList,(c,h)=>{h.elementaryStreams=c.elementaryStreams,h.stats=c.stats}),r?TB(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):AB(t,e),s.length&&(e.totalduration=e.edge-s[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const f=e.advancedDateTime;if(e.advanced&&f){const c=e.edge;e.driftStart||(e.driftStartTime=f,e.driftStart=c),e.driftEndTime=f,e.driftEnd=c}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=t.requestScheduled)}function rne(t,e){const{dateRanges:n,recentlyRemovedDateranges:i}=e,r=cn({},t);i&&i.forEach(l=>{delete r[l]});const a=Object.keys(r).length;return a&&Object.keys(n).forEach(l=>{const f=r[l],c=new xB(n[l].attr,f);c.isValid?(r[l]=c,f||(c.tagOrder+=a)):Wt.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Dn(n[l].attr)}"`)}),r}function sne(t,e,n){if(t&&e){let i=0;for(let r=0,s=t.length;r<=s;r++){const a=t[r],l=e[r+i];a&&l&&a.index===l.index&&a.fragment.sn===l.fragment.sn?n(a,l):i--}}}function ane(t,e,n){const i=e.skippedSegments,r=Math.max(t.startSN,e.startSN)-e.startSN,s=(t.fragmentHint?1:0)+(i?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,a=e.startSN-t.startSN,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,f=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let c=r;c<=s;c++){const h=f[a+c];let p=l[c];if(i&&!p&&h&&(p=e.fragments[c]=h),h&&p){if(n(h,p,c,l),h.url&&h.url!==p.url){e.playlistParsingError=ZP(`media sequence mismatch ${p.sn}:`,t,e,h,p);return}else if(h.cc!==p.cc){e.playlistParsingError=ZP(`discontinuity sequence mismatch (${h.cc}!=${p.cc})`,t,e,h,p);return}}}}function ZP(t,e,n,i,r){return new Error(`${t} ${r.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${n.startSN}
${n.m3u8}`)}function AB(t,e,n=!0){const i=e.startSN+e.skippedSegments-t.startSN,r=t.fragments,s=i>=0;let a=0;if(s&&i<r.length)a=r[i].start;else if(s&&e.startSN===t.endSN+1)a=t.fragmentEnd;else if(s&&n)a=t.fragmentStart+i*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)a=t.fragmentStart;else return;IS(e,a)}function IS(t,e){if(e){const n=t.fragments;for(let i=t.skippedSegments;i<n.length;i++)n[i].addStart(e);t.fragmentHint&&t.fragmentHint.addStart(e)}}function wB(t,e=1/0){let n=1e3*t.targetduration;if(t.updated){const i=t.fragments;if(i.length&&n*4>e){const s=i[i.length-1].duration*1e3;s<n&&(n=s)}}else n/=2;return Math.round(n)}function LB(t,e,n){if(!t)return null;let i=t.fragments[e-t.startSN];return i||(i=t.fragmentHint,i&&i.sn===e)?i:e<t.startSN&&n&&n.sn===e?n:null}function XP(t,e,n){return t?CB(t.partList,e,n):null}function CB(t,e,n){if(t)for(let i=t.length;i--;){const r=t[i];if(r.index===n&&r.fragment.sn===e)return r}return null}function OB(t){t.forEach((e,n)=>{var i;(i=e.details)==null||i.fragments.forEach(r=>{r.level=n,r.initSegment&&(r.initSegment.level=n)})})}function vm(t,e){for(let i=0,r=t.length;i<r;i++){var n;if(((n=t[i])==null?void 0:n.cc)===e)return t[i]}return null}function one(t,e){return!!(t&&e.startCC<t.endCC&&e.endCC>t.startCC)}function QP(t,e){if(t){const n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}function RB(t,e){const n=e.fragments;for(let i=0,r=n.length;i<r;i++)QP(n[i],t);e.fragmentHint&&QP(e.fragmentHint,t),e.alignedSliding=!0}function lne(t,e){t&&(PB(e,t),!e.alignedSliding&&t&&qv(e,t),!e.alignedSliding&&t&&!e.skippedSegments&&AB(t,e,!1))}function PB(t,e){if(!one(e,t))return;const n=Math.min(e.endCC,t.endCC),i=vm(e.fragments,n),r=vm(t.fragments,n);if(!i||!r)return;Wt.log(`Aligning playlist at start of dicontinuity sequence ${n}`);const s=i.start-r.start;RB(s,t)}function qv(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const n=t.fragments,i=e.fragments;if(!n.length||!i.length)return;let r,s;const a=Math.min(e.endCC,t.endCC);e.startCC<a&&t.startCC<a&&(r=vm(i,a),s=vm(n,a)),(!r||!s)&&(r=i[Math.floor(i.length/2)],s=vm(n,r.cc)||n[Math.floor(n.length/2)]);const l=r.programDateTime,f=s.programDateTime;if(!l||!f)return;const c=(f-l)/1e3-(s.start-r.start);RB(c,t)}const une={toString:function(t){let e="";const n=t.length;for(let i=0;i<n;i++)e+=`[${t.start(i).toFixed(3)}-${t.end(i).toFixed(3)}]`;return e}},Re={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class iA extends yB{constructor(e,n,i,r,s){super(r,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Re.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:a,fragCurrent:l,media:f,mediaBuffer:c,state:h}=this,p=f?f.currentTime:0,g=wt.bufferInfo(c||f,p,a.maxBufferHole),x=!g.len;if(this.log(`Media seeking to ${qe(p)?p.toFixed(3):p}, state: ${h}, ${x?"out of":"in"} buffer`),this.state===Re.ENDED)this.resetLoadingState();else if(l){const b=a.maxFragLookUpTolerance,T=l.start-b,E=l.start+l.duration+b;if(x||E<g.start||T>g.end){const C=p>E;(p<T||C)&&(C&&l.loader&&(this.log(`Cancelling fragment load for seek (sn: ${l.sn})`),l.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(f){this.fragmentTracker.removeFragmentsInRange(p,1/0,this.playlistType,!0);const b=this.lastCurrentTime;if(p>b&&(this.lastCurrentTime=p),!this.loadingParts){const T=Math.max(g.end,p),E=this.shouldLoadParts(this.getLevelDetails(),T);E&&(this.log(`LL-Part loading ON after seeking to ${p.toFixed(2)} with buffer @${T.toFixed(2)}`),this.loadingParts=E)}}this.hls.hasEnoughToStart||(this.log(`Setting ${x?"startPosition":"nextLoadPosition"} to ${p} for seek without enough to start`),this.nextLoadPosition=p,x&&(this.startPosition=p)),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=s,this.hls=e,this.fragmentLoader=new Nte(e.config),this.keyLoader=i,this.fragmentTracker=n,this.config=e.config,this.decrypter=new eA(e.config)}registerListeners(){const{hls:e}=this;e.on(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(B.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(B.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===Re.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Re.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:n}=this;return n===-1&&e?e:n}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,n){if(n.live||!this.media)return!1;const i=e.end||0,r=this.config.timelineOffset||0;if(i<=r)return!1;const s=e.buffered;this.config.maxBufferHole&&s&&s.length>1&&(e=wt.bufferedInfo(s,e.start,0));const a=e.nextStart;if(a&&a>r&&a<n.edge||this.media.currentTime<e.start)return!1;const f=n.partList;if(f!=null&&f.length){const h=f[f.length-1];return wt.isBuffered(this.media,h.start+h.duration/2)}const c=n.fragments[n.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(c)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}get timelineOffset(){const e=this.config.timelineOffset;if(e){var n;return((n=this.getLevelDetails())==null?void 0:n.appliedTimelineOffset)||e}return 0}onMediaAttached(e,n){const i=this.media=this.mediaBuffer=n.media;i.removeEventListener("seeking",this.onMediaSeeking),i.removeEventListener("ended",this.onMediaEnded),i.addEventListener("seeking",this.onMediaSeeking),i.addEventListener("ended",this.onMediaEnded);const r=this.config;this.levels&&r.autoStartLoad&&this.state===Re.STOPPED&&this.startLoad(r.startPosition)}onMediaDetaching(e,n){const i=!!n.transferMedia,r=this.media;if(r!==null){if(r.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),r.removeEventListener("seeking",this.onMediaSeeking),r.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!i&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,i){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,n){}onManifestLoaded(e,n){this.startTimeOffset=n.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=Re.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,n,i){this.startFragRequested=!0,this._loadFragForPlayback(e,n,i)}_loadFragForPlayback(e,n,i){const r=s=>{const a=s.frag;if(this.fragContextChanged(a)){this.warn(`${a.type} sn: ${a.sn}${s.part?" part: "+s.part.index:""} of ${this.fragInfo(a,!1,s.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(a);return}a.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,n,i,r).then(s=>{if(!s)return;const a=this.state,l=s.frag;if(this.fragContextChanged(l)){(a===Re.FRAG_LOADING||!this.fragCurrent&&a===Re.PARSING)&&(this.fragmentTracker.removeFragment(l),this.state=Re.IDLE);return}"payload"in s&&(this.log(`Loaded ${l.type} sn: ${l.sn} of ${this.playlistLabel()} ${l.level}`),this.hls.trigger(B.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===Re.STOPPED||this.state===Re.ERROR||(this.warn(`Frag error: ${s?.message||s}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var n;const{fragmentTracker:i}=this;if(i.getState(e)===pi.APPENDING){const s=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,s),l=Math.max(e.duration,a?a.len:this.config.maxBufferLength),f=this.backtrackFragment;((f?e.sn-f.sn:0)===1||this.reduceMaxBufferLength(l,e.duration))&&i.removeFragment(e)}else((n=this.mediaBuffer)==null?void 0:n.buffered.length)===0?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===pi.PARTIAL&&i.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const n=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:n,part:null,stats:n.stats,id:n.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const n=e.details;return n?.live&&n.type!=="EVENT"&&(this.levelLastLoaded!==e||n.expired)}flushMainBuffer(e,n,i=null){if(!(e-n))return;const r={startOffset:e,endOffset:n,type:i};this.hls.trigger(B.BUFFER_FLUSHING,r)}_loadInitSegment(e,n){this._doFragLoad(e,n).then(i=>{const r=i?.frag;if(!r||this.fragContextChanged(r)||!this.levels)throw new Error("init load aborted");return i}).then(i=>{const{hls:r}=this,{frag:s,payload:a}=i,l=s.decryptdata;if(a&&a.byteLength>0&&l!=null&&l.key&&l.iv&&Sd(l.method)){const f=self.performance.now();return this.decrypter.decrypt(new Uint8Array(a),l.key.buffer,l.iv.buffer,nA(l.method)).catch(c=>{throw r.trigger(B.ERROR,{type:at.MEDIA_ERROR,details:pe.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:s}),c}).then(c=>{const h=self.performance.now();return r.trigger(B.FRAG_DECRYPTED,{frag:s,payload:c,stats:{tstart:f,tdecrypt:h}}),i.payload=c,this.completeInitSegmentLoad(i)})}return this.completeInitSegmentLoad(i)}).catch(i=>{this.state===Re.STOPPED||this.state===Re.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:n}=this;if(!n)throw new Error("init load aborted, missing levels");const i=e.frag.stats;this.state!==Re.STOPPED&&(this.state=Re.IDLE),e.frag.data=new Uint8Array(e.payload),i.parsing.start=i.buffering.start=self.performance.now(),i.parsing.end=i.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:n}=this;return!e||!n||e.sn!==n.sn||e.level!==n.level}fragBufferedComplete(e,n){const i=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.fragInfo(e,!1,n)} > buffer:${i?une.toString(wt.getBuffered(i)):"(detached)"})`),oi(e)){var r;if(e.type!==et.SUBTITLE){const a=e.elementaryStreams;if(!Object.keys(a).some(l=>!!a[l])){this.state=Re.IDLE;return}}const s=(r=this.levels)==null?void 0:r[e.level];s!=null&&s.fragmentError&&(this.log(`Resetting level fragment error count of ${s.fragmentError} on frag buffered`),s.fragmentError=0)}this.state=Re.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:n}=this;if(!n)return;const{frag:i,part:r,partsLoaded:s}=e,a=!s||s.length===0||s.some(f=>!f),l=new tA(i.level,i.sn,i.stats.chunkCount+1,0,r?r.index:-1,!a);n.flush(l)}_handleFragmentLoadProgress(e){}_doFragLoad(e,n,i=null,r){var s;this.fragCurrent=e;const a=n?.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let l=null;e.encrypted&&!((s=e.decryptdata)!=null&&s.key)?(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=Re.KEY_LOADING,this.fragCurrent=e,l=this.keyLoader.load(e).then(p=>{if(!this.fragContextChanged(p.frag))return this.hls.trigger(B.KEY_LOADED,p),this.state===Re.KEY_LOADING&&(this.state=Re.IDLE),p}),this.hls.trigger(B.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(l=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):e.encrypted||(l=this.keyLoader.loadClear(e,a.encryptedFragments,this.startFragRequested),l&&this.log("[eme] blocking frag load until media-keys acquired"));const f=this.fragPrevious;if(oi(e)&&(!f||e.sn!==f.sn)){const p=this.shouldLoadParts(n.details,e.end);p!==this.loadingParts&&(this.log(`LL-Part loading ${p?"ON":"OFF"} loading sn ${f?.sn}->${e.sn}`),this.loadingParts=p)}if(i=Math.max(e.start,i||0),this.loadingParts&&oi(e)){const p=a.partList;if(p&&r){i>e.end&&a.fragmentHint&&(e=a.fragmentHint);const g=this.getNextPart(p,e,i);if(g>-1){const x=p[g];e=this.fragCurrent=x.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${x.index} (${g}/${p.length-1}) of ${this.fragInfo(e,!1,x)}) cc: ${e.cc} [${a.startSN}-${a.endSN}], target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=x.start+x.duration,this.state=Re.FRAG_LOADING;let b;return l?b=l.then(T=>!T||this.fragContextChanged(T.frag)?null:this.doFragPartsLoad(e,x,n,r)).catch(T=>this.handleFragLoadError(T)):b=this.doFragPartsLoad(e,x,n,r).catch(T=>this.handleFragLoadError(T)),this.hls.trigger(B.FRAG_LOADING,{frag:e,part:x,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):b}else if(!e.url||this.loadedEndOfParts(p,i))return Promise.resolve(null)}}if(oi(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${i.toFixed(2)}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${a?"["+a.startSN+"-"+a.endSN+"]":""}, target: ${parseFloat(i.toFixed(3))}`),qe(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Re.FRAG_LOADING;const c=this.config.progressive;let h;return c&&l?h=l.then(p=>!p||this.fragContextChanged(p?.frag)?null:this.fragmentLoader.load(e,r)).catch(p=>this.handleFragLoadError(p)):h=Promise.all([this.fragmentLoader.load(e,c?r:void 0),l]).then(([p])=>(!c&&p&&r&&r(p),p)).catch(p=>this.handleFragLoadError(p)),this.hls.trigger(B.FRAG_LOADING,{frag:e,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):h}doFragPartsLoad(e,n,i,r){return new Promise((s,a)=>{var l;const f=[],c=(l=i.details)==null?void 0:l.partList,h=p=>{this.fragmentLoader.loadPart(e,p,r).then(g=>{f[p.index]=g;const x=g.part;this.hls.trigger(B.FRAG_LOADED,g);const b=XP(i.details,e.sn,p.index+1)||CB(c,e.sn,p.index+1);if(b)h(b);else return s({frag:e,part:x,partsLoaded:f})}).catch(a)};h(n)})}handleFragLoadError(e){if("data"in e){const n=e.data;e.data&&n.details===pe.INTERNAL_ABORTED?this.handleFragLoadAborted(n.frag,n.part):this.hls.trigger(B.ERROR,n)}else this.hls.trigger(B.ERROR,{type:at.OTHER_ERROR,details:pe.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const n=this.getCurrentContext(e);if(!n||this.state!==Re.PARSING){!this.fragCurrent&&this.state!==Re.STOPPED&&this.state!==Re.ERROR&&(this.state=Re.IDLE);return}const{frag:i,part:r,level:s}=n,a=self.performance.now();i.stats.parsing.end=a,r&&(r.stats.parsing.end=a);const l=this.getLevelDetails(),c=l&&i.sn>l.endSN||this.shouldLoadParts(l,i.end);c!==this.loadingParts&&(this.log(`LL-Part loading ${c?"ON":"OFF"} after parsing segment ending @${i.end.toFixed(2)}`),this.loadingParts=c),this.updateLevelTiming(i,r,s,e.partial)}shouldLoadParts(e,n){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e!=null&&e.partList){var i;const s=e.partList[0],a=s.end+(((i=e.fragmentHint)==null?void 0:i.duration)||0);if(n>=a){var r;if((this.hls.hasEnoughToStart?((r=this.media)==null?void 0:r.currentTime)||this.lastCurrentTime:this.getLoadPosition())>s.start-s.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:n,fragCurrent:i}=this,{level:r,sn:s,part:a}=e;if(!(n!=null&&n[r]))return this.warn(`Levels object was unset while buffering fragment ${s} of ${this.playlistLabel()} ${r}. The current chunk will not be buffered.`),null;const l=n[r],f=l.details,c=a>-1?XP(f,s,a):null,h=c?c.fragment:LB(f,s,i);return h?(i&&i!==h&&(h.stats=i.stats),{frag:h,part:c,level:l}):null}bufferFragmentData(e,n,i,r,s){var a;if(!e||this.state!==Re.PARSING)return;const{data1:l,data2:f}=e;let c=l;if(l&&f&&(c=ua(l,f)),!((a=c)!=null&&a.length))return;const h=this.initPTS[n.cc],p=h?-h.baseTime/h.timescale:void 0,g={type:e.type,frag:n,part:i,chunkMeta:r,offset:p,parent:n.type,data:c};if(this.hls.trigger(B.BUFFER_APPENDING,g),e.dropped&&e.independent&&!i){if(s)return;this.flushBufferGap(n)}}flushBufferGap(e){const n=this.media;if(!n)return;if(!wt.isBuffered(n,n.currentTime)){this.flushMainBuffer(0,e.start);return}const i=n.currentTime,r=wt.bufferInfo(n,i,0),s=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),l=Math.max(Math.min(e.start-a,r.end-a),i+a);e.start-l>a&&this.flushMainBuffer(l,e.start)}getFwdBufferInfo(e,n){var i;const r=this.getLoadPosition();if(!qe(r))return null;const a=this.lastCurrentTime>r||(i=this.media)!=null&&i.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,r,n,a)}getFwdBufferInfoAtPos(e,n,i,r){const s=wt.bufferInfo(e,n,r);if(s.len===0&&s.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(n,i);if(a&&(s.nextStart<=a.end||a.gap)){const l=Math.max(Math.min(s.nextStart,a.end)-n,r);return wt.bufferInfo(e,n,l)}}return s}getMaxBufferLength(e){const{config:n}=this;let i;return e?i=Math.max(8*n.maxBufferSize/e,n.maxBufferLength):i=n.maxBufferLength,Math.min(i,n.maxMaxBufferLength)}reduceMaxBufferLength(e,n){const i=this.config,r=Math.max(Math.min(e-n,i.maxBufferLength),n),s=Math.max(e-n*3,i.maxMaxBufferLength/2,r);return s>=r?(i.maxMaxBufferLength=s,this.warn(`Reduce max buffer length to ${s}s`),!0):!1}getAppendedFrag(e,n=et.MAIN){var i;const r=(i=this.fragmentTracker)==null?void 0:i.getAppendedFrag(e,n);return r&&"fragment"in r?r.fragment:r}getNextFragment(e,n){const i=n.fragments,r=i.length;if(!r)return null;const{config:s}=this,a=i[0].start,l=s.lowLatencyMode&&!!n.partList;let f=null;if(n.live){const p=s.initialLiveManifestSize;if(r<p)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${p})`),null;if(!n.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a){var c;l&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),f=this.getInitialLiveFragment(n);const g=this.hls.startPosition,x=this.hls.liveSyncPosition,b=f?(g!==-1&&g>=a?g:x)||f.start:e;this.log(`Setting startPosition to ${b} to match start frag at live edge. mainStart: ${g} liveSyncPosition: ${x} frag.start: ${(c=f)==null?void 0:c.start}`),this.startPosition=this.nextLoadPosition=b}}else e<=a&&(f=i[0]);if(!f){const p=this.loadingParts?n.partEnd:n.fragmentEnd;f=this.getFragmentAtPosition(e,p,n)}let h=this.filterReplacedPrimary(f,n);if(!h&&f){const p=f.sn-n.startSN;h=this.filterReplacedPrimary(i[p+1]||null,n)}return this.mapToInitFragWhenRequired(h)}isLoopLoading(e,n){const i=this.fragmentTracker.getState(e);return(i===pi.OK||i===pi.PARTIAL&&!!e.gap)&&this.nextLoadPosition>n}getNextFragmentLoopLoading(e,n,i,r,s){let a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,n),a&&!a.gap&&i.nextStart)){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,r,0);if(l!==null&&i.len+l.len>=s){const f=a.sn;return this.loopSn!==f&&(this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${f}`),this.loopSn=f),null}}return this.loopSn=void 0,a}get primaryPrefetch(){if(JP(this.hls.config)){var e,n;if((e=this.hls.interstitialsManager)==null||(n=e.playingItem)==null?void 0:n.event)return!0}return!1}filterReplacedPrimary(e,n){if(!e)return e;if(JP(this.hls.config)&&e.type!==et.SUBTITLE){const i=this.hls.interstitialsManager,r=i?.bufferingItem;if(r){const a=r.event;if(a){if(a.appendInPlace||Math.abs(e.start-r.start)>1||r.start===0)return null}else if(e.end<=r.start&&n?.live===!1||e.start>r.end&&r.nextEvent&&(r.nextEvent.appendInPlace||e.start-r.end>1))return null}const s=i?.playerQueue;if(s)for(let a=s.length;a--;){const l=s[a].interstitial;if(l.appendInPlace&&e.start>=l.startTime&&e.end<=l.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,n,i){let r=-1,s=!1,a=!0;for(let l=0,f=e.length;l<f;l++){const c=e[l];if(a=a&&!c.independent,r>-1&&i<c.start)break;const h=c.loaded;h?r=-1:(s||c.independent||a)&&c.fragment===n&&(r=l),s=h}return r}loadedEndOfParts(e,n){const i=e[e.length-1];return i&&n>i.start&&i.loaded}getInitialLiveFragment(e){const n=e.fragments,i=this.fragPrevious;let r=null;if(i){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),r=Tte(n,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const s=i.sn+1;if(s>=e.startSN&&s<=e.endSN){const a=n[s-e.startSN];i.cc===a.cc&&(r=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=vB(e,i.cc,i.end),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(r=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,n,i){const{config:r}=this;let{fragPrevious:s}=this,{fragments:a,endSN:l}=i;const{fragmentHint:f}=i,{maxFragLookUpTolerance:c}=r,h=i.partList,p=!!(this.loadingParts&&h!=null&&h.length&&f);p&&f&&!this.bitrateTest&&h[h.length-1].fragment.sn===f.sn&&(a=a.concat(f),l=f.sn);let g;if(e<n){var x;const T=e<this.lastCurrentTime||e>n-c||(x=this.media)!=null&&x.paused||!this.startFragRequested?0:c;g=sf(s,a,e,T)}else g=a[a.length-1];if(g){const b=g.sn-i.startSN,T=this.fragmentTracker.getState(g);if((T===pi.OK||T===pi.PARTIAL&&g.gap)&&(s=g),s&&g.sn===s.sn&&(!p||h[0].fragment.sn>g.sn||!i.live&&!p)&&s&&g.level===s.level){const C=a[b+1];g.sn<l&&this.fragmentTracker.getState(C)!==pi.OK?g=C:g=null}}return g}alignPlaylists(e,n,i){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const s=e.fragmentStart,a=!n,l=e.alignedSliding&&qe(s);if(a||!l&&!s){lne(i,e);const f=e.fragmentStart;return this.log(`Live playlist sliding: ${f.toFixed(2)} start-sn: ${n?n.startSN:"na"}->${e.startSN} fragments: ${r}`),f}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,n){let i=this.startPosition;i<n&&(i=-1);const r=this.timelineOffset;if(i===-1){const s=this.startTimeOffset!==null,a=s?this.startTimeOffset:e.startTimeOffset;a!==null&&qe(a)?(i=n+a,a<0&&(i+=e.edge),i=Math.min(Math.max(n,i),n+e.totalduration),this.log(`Setting startPosition to ${i} for start time offset ${a} found in ${s?"multivariant":"media"} playlist`),this.startPosition=i):e.live?(i=this.hls.liveSyncPosition||n,this.log(`Setting startPosition to -1 to start at live edge ${i}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=i=0),this.lastCurrentTime=i+r}this.nextLoadPosition=i+r}getLoadPosition(){var e;const{media:n}=this;let i=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&n?i=n.currentTime:this.nextLoadPosition>=0&&(i=this.nextLoadPosition),i}handleFragLoadAborted(e,n){this.transmuxer&&e.type===this.playlistType&&oi(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${n?" part "+n.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==Re.FRAG_LOADING_WAITING_RETRY)&&(this.state=Re.IDLE)}onFragmentOrKeyLoadError(e,n){if(n.chunkMeta&&!n.frag){const b=this.getCurrentContext(n.chunkMeta);b&&(n.frag=b.frag)}const i=n.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var r;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(r=this.fragCurrent)==null?void 0:r.url}`);return}const s=n.details===pe.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(i,!0);const a=n.errorAction,{action:l,flags:f,retryCount:c=0,retryConfig:h}=a||{},p=!!a&&!!h,g=p&&l===hr.RetryRequest,x=p&&!a.resolved&&f===qa.MoveAllAlternatesMatchingHost;if(!g&&x&&oi(i)&&!i.endList)this.resetFragmentErrors(e),this.treatAsGap(i),a.resolved=!0;else if((g||x)&&c<h.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const b=JT(h,c);this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${n.details}, retrying loading ${c+1}/${h.maxNumRetry} in ${b}ms`),a.resolved=!0,this.retryDate=self.performance.now()+b,this.state=Re.FRAG_LOADING_WAITING_RETRY}else if(h&&a)if(this.resetFragmentErrors(e),c<h.maxNumRetry)!s&&l!==hr.RemoveAlternatePermanently&&(a.resolved=!0);else{this.warn(`${n.details} reached or exceeded max retry (${c})`);return}else l===hr.SendAlternateToPenaltyBox?this.state=Re.WAITING_LEVEL:this.state=Re.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===Re.PARSING||this.state===Re.PARSED){const n=e.frag,i=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,i),s=r&&r.len>.5;s&&this.reduceMaxBufferLength(r.len,n?.duration||10);const a=!s;return a&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${i} buffer`),n&&(this.fragmentTracker.removeFragment(n),this.nextLoadPosition=n.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===et.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==Re.STOPPED&&(this.state=Re.IDLE)}afterBufferFlushed(e,n,i){if(!e)return;const r=wt.getBuffered(e);this.fragmentTracker.detectEvictedFragments(n,r,i),this.state===Re.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==Re.STOPPED&&(this.state=Re.IDLE)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const n=e?e.details:null;n!=null&&n.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(n,n.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,n,i,r){const s=i.details;if(!s){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((f,c)=>{const h=e.elementaryStreams[c];if(h){const p=h.endPTS-h.startPTS;if(p<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${p})`),f||!1;const g=r?0:TB(s,e,h.startPTS,h.endPTS,h.startDTS,h.endDTS);return this.hls.trigger(B.LEVEL_PTS_UPDATED,{details:s,level:i,drift:g,type:c,frag:e,start:h.startPTS,end:h.endPTS}),!0}return f},!1)){var l;if(i.fragmentError===0&&this.treatAsGap(e,i),((l=this.transmuxer)==null?void 0:l.error)===null){const f=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(f.message),this.hls.trigger(B.ERROR,{type:at.MEDIA_ERROR,details:pe.FRAG_PARSING_ERROR,fatal:!1,error:f,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=Re.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.fragInfo(e,!1,n)})`),this.hls.trigger(B.FRAG_PARSED,{frag:e,part:n})}playlistLabel(){return this.playlistType===et.MAIN?"level":"track"}fragInfo(e,n=!0,i){var r,s;return`${this.playlistLabel()} ${e.level} (${i?"part":"frag"}:[${((r=n&&!i?e.startPTS:(i||e).start)!=null?r:NaN).toFixed(3)}-${((s=n&&!i?e.endPTS:(i||e).end)!=null?s:NaN).toFixed(3)}]${i&&e.type==="main"?"INDEPENDENT="+(i.independent?"YES":"NO"):""}`}treatAsGap(e,n){n&&n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const n=this._state;n!==e&&(this._state=e,this.log(`${n}->${e}`))}get state(){return this._state}}function JP(t){return!!t.interstitialsController&&t.enableInterstitialPlayback!==!1}class DB{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:n}=this;let i;if(e.length)e.length===1?i=e[0]:i=cne(e,n);else return new Uint8Array(0);return this.reset(),i}reset(){this.chunks.length=0,this.dataLength=0}}function cne(t,e){const n=new Uint8Array(e);let i=0;for(let r=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}var t_={exports:{}},eD;function fne(){return eD||(eD=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(f,c,h){this.fn=f,this.context=c,this.once=h||!1}function s(f,c,h,p,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new r(h,p||f,g),b=n?n+c:c;return f._events[b]?f._events[b].fn?f._events[b]=[f._events[b],x]:f._events[b].push(x):(f._events[b]=x,f._eventsCount++),f}function a(f,c){--f._eventsCount===0?f._events=new i:delete f._events[c]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],h,p;if(this._eventsCount===0)return c;for(p in h=this._events)e.call(h,p)&&c.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},l.prototype.listeners=function(c){var h=n?n+c:c,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,b=new Array(x);g<x;g++)b[g]=p[g].fn;return b},l.prototype.listenerCount=function(c){var h=n?n+c:c,p=this._events[h];return p?p.fn?1:p.length:0},l.prototype.emit=function(c,h,p,g,x,b){var T=n?n+c:c;if(!this._events[T])return!1;var E=this._events[T],C=arguments.length,I,P;if(E.fn){switch(E.once&&this.removeListener(c,E.fn,void 0,!0),C){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,h),!0;case 3:return E.fn.call(E.context,h,p),!0;case 4:return E.fn.call(E.context,h,p,g),!0;case 5:return E.fn.call(E.context,h,p,g,x),!0;case 6:return E.fn.call(E.context,h,p,g,x,b),!0}for(P=1,I=new Array(C-1);P<C;P++)I[P-1]=arguments[P];E.fn.apply(E.context,I)}else{var M=E.length,k;for(P=0;P<M;P++)switch(E[P].once&&this.removeListener(c,E[P].fn,void 0,!0),C){case 1:E[P].fn.call(E[P].context);break;case 2:E[P].fn.call(E[P].context,h);break;case 3:E[P].fn.call(E[P].context,h,p);break;case 4:E[P].fn.call(E[P].context,h,p,g);break;default:if(!I)for(k=1,I=new Array(C-1);k<C;k++)I[k-1]=arguments[k];E[P].fn.apply(E[P].context,I)}}return!0},l.prototype.on=function(c,h,p){return s(this,c,h,p,!1)},l.prototype.once=function(c,h,p){return s(this,c,h,p,!0)},l.prototype.removeListener=function(c,h,p,g){var x=n?n+c:c;if(!this._events[x])return this;if(!h)return a(this,x),this;var b=this._events[x];if(b.fn)b.fn===h&&(!g||b.once)&&(!p||b.context===p)&&a(this,x);else{for(var T=0,E=[],C=b.length;T<C;T++)(b[T].fn!==h||g&&!b[T].once||p&&b[T].context!==p)&&E.push(b[T]);E.length?this._events[x]=E.length===1?E[0]:E:a(this,x)}return this},l.prototype.removeAllListeners=function(c){var h;return c?(h=n?n+c:c,this._events[h]&&a(this,h)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(t_)),t_.exports}var dne=fne(),rA=Uee(dne);const Fm="1.6.7",Fd={};function hne(){return typeof __HLS_WORKER_BUNDLE__=="function"}function mne(){const t=Fd[Fm];if(t)return t.clientCount++,t;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),n=self.URL.createObjectURL(e),r={worker:new self.Worker(n),objectURL:n,clientCount:1};return Fd[Fm]=r,r}function pne(t){const e=Fd[t];if(e)return e.clientCount++,e;const n=new self.URL(t,self.location.href).href,r={worker:new self.Worker(n),scriptURL:n,clientCount:1};return Fd[t]=r,r}function gne(t){const e=Fd[t||Fm];if(e&&e.clientCount--===1){const{worker:i,objectURL:r}=e;delete Fd[t||Fm],r&&self.URL.revokeObjectURL(r),i.terminate()}}function IB(t,e){return e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function sA(t,e){return e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function z0(t,e){let n=0;return n=(t[e]&127)<<21,n|=(t[e+1]&127)<<14,n|=(t[e+2]&127)<<7,n|=t[e+3]&127,n}function Um(t,e){const n=e;let i=0;for(;sA(t,e);){i+=10;const r=z0(t,e+6);i+=r,IB(t,e+10)&&(i+=10),e+=i}if(i>0)return t.subarray(n,n+i)}function vne(t,e,n,i){const r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],s=e[n+2],a=s>>2&15;if(a>12){const x=new Error(`invalid ADTS sampling index:${a}`);t.emit(B.ERROR,B.ERROR,{type:at.MEDIA_ERROR,details:pe.FRAG_PARSING_ERROR,fatal:!0,error:x,reason:x.message});return}const l=(s>>6&3)+1,f=e[n+3]>>6&3|(s&1)<<2,c="mp4a.40."+l,h=r[a];let p=a;(l===5||l===29)&&(p-=3);const g=[l<<3|(p&14)>>1,(p&1)<<7|f<<3];return Wt.log(`manifest codec:${i}, parsed codec:${c}, channels:${f}, rate:${h} (ADTS object type:${l} sampling index:${a})`),{config:g,samplerate:h,channelCount:f,codec:c,parsedCodec:c,manifestCodec:i}}function MB(t,e){return t[e]===255&&(t[e+1]&246)===240}function kB(t,e){return t[e+1]&1?7:9}function aA(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function yne(t,e){return e+5<t.length}function Vv(t,e){return e+1<t.length&&MB(t,e)}function bne(t,e){return yne(t,e)&&MB(t,e)&&aA(t,e)<=t.length-e}function xne(t,e){if(Vv(t,e)){const n=kB(t,e);if(e+n>=t.length)return!1;const i=aA(t,e);if(i<=n)return!1;const r=e+i;return r===t.length||Vv(t,r)}return!1}function NB(t,e,n,i,r){if(!t.samplerate){const s=vne(e,n,i,r);if(!s)return;cn(t,s)}}function jB(t){return 1024*9e4/t}function _ne(t,e){const n=kB(t,e);if(e+n<=t.length){const i=aA(t,e)-n;if(i>0)return{headerLength:n,frameLength:i}}}function BB(t,e,n,i,r){const s=jB(t.samplerate),a=i+r*s,l=_ne(e,n);let f;if(l){const{frameLength:p,headerLength:g}=l,x=g+p,b=Math.max(0,n+x-e.length);b?(f=new Uint8Array(x-g),f.set(e.subarray(n+g,e.length),0)):f=e.subarray(n+g,n+x);const T={unit:f,pts:a};return b||t.samples.push(T),{sample:T,length:x,missing:b}}const c=e.length-n;return f=new Uint8Array(c),f.set(e.subarray(n,e.length),0),{sample:{unit:f,pts:a},length:c,missing:-1}}function Sne(t,e){return sA(t,e)&&z0(t,e+6)+10<=t.length-e}function Ene(t){return t instanceof ArrayBuffer?t:t.byteOffset==0&&t.byteLength==t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer}function n_(t,e=0,n=1/0){return Tne(t,e,n,Uint8Array)}function Tne(t,e,n,i){const r=Ane(t);let s=1;"BYTES_PER_ELEMENT"in i&&(s=i.BYTES_PER_ELEMENT);const a=wne(t)?t.byteOffset:0,l=(a+t.byteLength)/s,f=(a+e)/s,c=Math.floor(Math.max(0,Math.min(f,l))),h=Math.floor(Math.min(c+Math.max(n,0),l));return new i(r,c,h-c)}function Ane(t){return t instanceof ArrayBuffer?t:t.buffer}function wne(t){return t&&t.buffer instanceof ArrayBuffer&&t.byteLength!==void 0&&t.byteOffset!==void 0}function Lne(t){const e={key:t.type,description:"",data:"",mimeType:null,pictureType:null},n=3;if(t.size<2)return;if(t.data[0]!==n){console.log("Ignore frame with unrecognized character encoding");return}const i=t.data.subarray(1).indexOf(0);if(i===-1)return;const r=ws(n_(t.data,1,i)),s=t.data[2+i],a=t.data.subarray(3+i).indexOf(0);if(a===-1)return;const l=ws(n_(t.data,3+i,a));let f;return r==="-->"?f=ws(n_(t.data,4+i+a)):f=Ene(t.data.subarray(4+i+a)),e.mimeType=r,e.pictureType=s,e.description=l,e.data=f,e}function Cne(t){if(t.size<2)return;const e=ws(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}}function One(t){if(t.size<2)return;if(t.type==="TXXX"){let n=1;const i=ws(t.data.subarray(n),!0);n+=i.length+1;const r=ws(t.data.subarray(n));return{key:t.type,info:i,data:r}}const e=ws(t.data.subarray(1));return{key:t.type,info:"",data:e}}function Rne(t){if(t.type==="WXXX"){if(t.size<2)return;let n=1;const i=ws(t.data.subarray(n),!0);n+=i.length+1;const r=ws(t.data.subarray(n));return{key:t.type,info:i,data:r}}const e=ws(t.data);return{key:t.type,info:"",data:e}}function Pne(t){return t.type==="PRIV"?Cne(t):t.type[0]==="W"?Rne(t):t.type==="APIC"?Lne(t):One(t)}function Dne(t){const e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=z0(t,4),i=10;return{type:e,size:n,data:t.subarray(i,i+n)}}const Eg=10,Ine=10;function FB(t){let e=0;const n=[];for(;sA(t,e);){const i=z0(t,e+6);t[e+5]>>6&1&&(e+=Eg),e+=Eg;const r=e+i;for(;e+Ine<r;){const s=Dne(t.subarray(e)),a=Pne(s);a&&n.push(a),e+=s.size+Eg}IB(t,e)&&(e+=Eg)}return n}function UB(t){return t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp"}function Mne(t){if(t.data.byteLength===8){const e=new Uint8Array(t.data),n=e[3]&1;let i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,n&&(i+=4772185884e-2),Math.round(i)}}function oA(t){const e=FB(t);for(let n=0;n<e.length;n++){const i=e[n];if(UB(i))return Mne(i)}}let Ss=function(t){return t.audioId3="org.id3",t.dateRange="com.apple.quicktime.HLS",t.emsg="https://aomedia.org/emsg/ID3",t.misbklv="urn:misb:KLV:bin:1910.1",t}({});function Ro(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class lA{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,n,i,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,n){return!1}appendFrame(e,n,i){}demux(e,n){this.cachedData&&(e=ua(this.cachedData,e),this.cachedData=null);let i=Um(e,0),r=i?i.length:0,s;const a=this._audioTrack,l=this._id3Track,f=i?oA(i):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&qe(f))&&(this.basePTS=kne(f,n,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),i&&i.length>0&&l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Ss.audioId3,duration:Number.POSITIVE_INFINITY});r<c;){if(this.canParse(e,r)){const h=this.appendFrame(a,e,r);h?(this.frameIndex++,this.lastPTS=h.sample.pts,r+=h.length,s=r):r=c}else Sne(e,r)?(i=Um(e,r),l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Ss.audioId3,duration:Number.POSITIVE_INFINITY}),r+=i.length,s=r):r++;if(r===c&&s!==c){const h=e.slice(s);this.cachedData?this.cachedData=ua(this.cachedData,h):this.cachedData=h}}return{audioTrack:a,videoTrack:Ro(),id3Track:l,textTrack:Ro()}}demuxSampleAes(e,n,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const n=this.cachedData;return n&&(this.cachedData=null,this.demux(n,0)),{audioTrack:this._audioTrack,videoTrack:Ro(),id3Track:this._id3Track,textTrack:Ro()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const kne=(t,e,n)=>{if(qe(t))return t*90;const i=n?n.baseTime*9e4/n.timescale:0;return e*9e4+i};let Tg=null;const Nne=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],jne=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Bne=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Fne=[0,1,1,4];function $B(t,e,n,i,r){if(n+24>e.length)return;const s=zB(e,n);if(s&&n+s.frameLength<=e.length){const a=s.samplesPerFrame*9e4/s.sampleRate,l=i+r*a,f={unit:e.subarray(n,n+s.frameLength),pts:l,dts:l};return t.config=[],t.channelCount=s.channelCount,t.samplerate=s.sampleRate,t.samples.push(f),{sample:f,length:s.frameLength,missing:0}}}function zB(t,e){const n=t[e+1]>>3&3,i=t[e+1]>>1&3,r=t[e+2]>>4&15,s=t[e+2]>>2&3;if(n!==1&&r!==0&&r!==15&&s!==3){const a=t[e+2]>>1&1,l=t[e+3]>>6,f=n===3?3-i:i===3?3:4,c=Nne[f*14+r-1]*1e3,p=jne[(n===3?0:n===2?1:2)*3+s],g=l===3?1:2,x=Bne[n][i],b=Fne[i],T=x*8*b,E=Math.floor(x*c/p+a)*b;if(Tg===null){const P=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Tg=P?parseInt(P[1]):0}return!!Tg&&Tg<=87&&i===2&&c>=224e3&&l===0&&(t[e+3]=t[e+3]|128),{sampleRate:p,channelCount:g,frameLength:E,samplesPerFrame:T}}}function uA(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function GB(t,e){return e+1<t.length&&uA(t,e)}function Une(t,e){return uA(t,e)&&4<=t.length-e}function HB(t,e){if(e+1<t.length&&uA(t,e)){const i=zB(t,e);let r=4;i!=null&&i.frameLength&&(r=i.frameLength);const s=e+r;return s===t.length||GB(t,s)}return!1}class $ne extends lA{constructor(e,n){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=n}resetInitSegment(e,n,i,r){super.resetInitSegment(e,n,i,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e,n){if(!e)return!1;const i=Um(e,0);let r=i?.length||0;if(HB(e,r))return!1;for(let s=e.length;r<s;r++)if(xne(e,r))return n.log("ADTS sync word found !"),!0;return!1}canParse(e,n){return bne(e,n)}appendFrame(e,n,i){NB(e,this.observer,n,i,e.manifestCodec);const r=BB(e,n,i,this.basePTS,this.frameIndex);if(r&&r.missing===0)return r}}const KB=(t,e)=>{let n=0,i=5;e+=i;const r=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;i>0;){a[0]=t[e];const l=Math.min(i,8),f=8-l;s[0]=4278190080>>>24+f<<f,r[0]=(a[0]&s[0])>>f,n=n?n<<l|r[0]:r[0],e+=1,i-=l}return n};class zne extends lA{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,n,i,r){super.resetInitSegment(e,n,i,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:n,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,n){return n+64<e.length}appendFrame(e,n,i){const r=qB(e,n,i,this.basePTS,this.frameIndex);if(r!==-1)return{sample:e.samples[e.samples.length-1],length:r,missing:0}}static probe(e){if(!e)return!1;const n=Um(e,0);if(!n)return!1;const i=n.length;return e[i]===11&&e[i+1]===119&&oA(n)!==void 0&&KB(e,i)<16}}function qB(t,e,n,i,r){if(n+8>e.length||e[n]!==11||e[n+1]!==119)return-1;const s=e[n+4]>>6;if(s>=3)return-1;const l=[48e3,44100,32e3][s],f=e[n+4]&63,h=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][f*3+s]*2;if(n+h>e.length)return-1;const p=e[n+6]>>5;let g=0;p===2?g+=2:(p&1&&p!==1&&(g+=2),p&4&&(g+=2));const x=(e[n+6]<<8|e[n+7])>>12-g&1,T=[2,1,2,3,3,4,4,5][p]+x,E=e[n+5]>>3,C=e[n+5]&7,I=new Uint8Array([s<<6|E<<1|C>>2,(C&3)<<6|p<<3|x<<2|f>>4,f<<4&224]),P=1536/l*9e4,M=i+r*P,k=e.subarray(n,n+h);return t.config=I,t.channelCount=T,t.samplerate=l,t.samples.push({unit:k,pts:M}),h}class Gne extends lA{resetInitSegment(e,n,i,r){super.resetInitSegment(e,n,i,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=Um(e,0);let i=n?.length||0;if(n&&e[i]===11&&e[i+1]===119&&oA(n)!==void 0&&KB(e,i)<=16)return!1;for(let r=e.length;i<r;i++)if(HB(e,i))return Wt.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,n){return Une(e,n)}appendFrame(e,n,i){if(this.basePTS!==null)return $B(e,n,i,this.basePTS,this.frameIndex)}}const Hne=/\/emsg[-/]ID3/i;class Kne{constructor(e,n){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=n}resetTimeStamp(){}resetInitSegment(e,n,i,r){const s=this.videoTrack=Ro("video",1),a=this.audioTrack=Ro("audio",1),l=this.txtTrack=Ro("text",1);if(this.id3Track=Ro("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const f=lB(e);if(f.video){const{id:c,timescale:h,codec:p,supplemental:g}=f.video;s.id=c,s.timescale=l.timescale=h,s.codec=p,s.supplemental=g}if(f.audio){const{id:c,timescale:h,codec:p}=f.audio;a.id=c,a.timescale=h,a.codec=p}l.id=sB.text,s.sampleDuration=0,s.duration=a.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return Kee(e)}demux(e,n){this.timeOffset=n;let i=e;const r=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=ua(this.remainderData,e));const l=Qee(i);this.remainderData=l.remainder,r.samples=l.valid||new Uint8Array}else r.samples=i;const a=this.extractID3Track(r,n);return s.samples=xP(n,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,n=this.videoTrack,i=this.txtTrack;n.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(n,this.timeOffset);return i.samples=xP(e,n),{videoTrack:n,audioTrack:Ro(),id3Track:r,textTrack:Ro()}}extractID3Track(e,n){const i=this.id3Track;if(e.samples.length){const r=Dt(e.samples,["emsg"]);r&&r.forEach(s=>{const a=ete(s);if(Hne.test(a.schemeIdUri)){const l=tD(a,n);let f=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;f<=.001&&(f=Number.POSITIVE_INFINITY);const c=a.payload;i.samples.push({data:c,len:c.byteLength,dts:l,pts:l,type:Ss.emsg,duration:f})}else if(this.config.enableEmsgKLVMetadata&&a.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const l=tD(a,n);i.samples.push({data:a.payload,len:a.payload.byteLength,dts:l,pts:l,type:Ss.misbklv,duration:Number.POSITIVE_INFINITY})}})}return i}demuxSampleAes(e,n,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function tD(t,e){return qe(t.presentationTime)?t.presentationTime/t.timeScale:e+t.presentationTimeDelta/t.timeScale}class qne{constructor(e,n,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new eA(n,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Xu.cbc)}decryptAacSample(e,n,i){const r=e[n].unit;if(r.length<=16)return;const s=r.subarray(16,r.length-r.length%16),a=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(a).then(l=>{const f=new Uint8Array(l);r.set(f,16),this.decrypter.isSync()||this.decryptAacSamples(e,n+1,i)})}decryptAacSamples(e,n,i){for(;;n++){if(n>=e.length){i();return}if(!(e[n].unit.length<32)&&(this.decryptAacSample(e,n,i),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const n=Math.floor((e.length-48)/160)*16+16,i=new Int8Array(n);let r=0;for(let s=32;s<e.length-16;s+=160,r+=16)i.set(e.subarray(s,s+16),r);return i}getAvcDecryptedUnit(e,n){const i=new Uint8Array(n);let r=0;for(let s=32;s<e.length-16;s+=160,r+=16)e.set(i.subarray(r,r+16),s);return e}decryptAvcSample(e,n,i,r,s){const a=uB(s.data),l=this.getAvcEncryptedData(a);this.decryptBuffer(l.buffer).then(f=>{s.data=this.getAvcDecryptedUnit(a,f),this.decrypter.isSync()||this.decryptAvcSamples(e,n,i+1,r)})}decryptAvcSamples(e,n,i,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;n++,i=0){if(n>=e.length){r();return}const s=e[n].units;for(;!(i>=s.length);i++){const a=s[i];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,n,i,r,a),!this.decrypter.isSync()))return}}}}class VB{constructor(){this.VideoSample=null}createVideoSample(e,n,i){return{key:e,frame:!1,pts:n,dts:i,units:[],length:0}}getLastNalUnit(e){var n;let i=this.VideoSample,r;if((!i||i.units.length===0)&&(i=e[e.length-1]),(n=i)!=null&&n.units){const s=i.units;r=s[s.length-1]}return r}pushAccessUnit(e,n){if(e.units.length&&e.frame){if(e.pts===void 0){const i=n.samples,r=i.length;if(r){const s=i[r-1];e.pts=s.pts,e.dts=s.dts}else{n.dropped++;return}}n.samples.push(e)}}parseNALu(e,n,i){const r=n.byteLength;let s=e.naluState||0;const a=s,l=[];let f=0,c,h,p,g=-1,x=0;for(s===-1&&(g=0,x=this.getNALuType(n,0),s=0,f=1);f<r;){if(c=n[f++],!s){s=c?0:1;continue}if(s===1){s=c?0:2;continue}if(!c)s=3;else if(c===1){if(h=f-s-1,g>=0){const b={data:n.subarray(g,h),type:x};l.push(b)}else{const b=this.getLastNalUnit(e.samples);b&&(a&&f<=4-a&&b.state&&(b.data=b.data.subarray(0,b.data.byteLength-a)),h>0&&(b.data=ua(b.data,n.subarray(0,h)),b.state=0))}f<r?(p=this.getNALuType(n,f),g=f,x=p,s=0):s=-1}else s=0}if(g>=0&&s>=0){const b={data:n.subarray(g,r),type:x,state:s};l.push(b)}if(l.length===0){const b=this.getLastNalUnit(e.samples);b&&(b.data=ua(b.data,n))}return e.naluState=s,l}}class ym{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,n=this.bytesAvailable,i=e.byteLength-n,r=new Uint8Array(4),s=Math.min(4,n);if(s===0)throw new Error("no bytes available");r.set(e.subarray(i,i+s)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let n;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,n=e>>3,e-=n<<3,this.bytesAvailable-=n,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let n=Math.min(this.bitsAvailable,e);const i=this.word>>>32-n;if(e>32&&Wt.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=n,this.bitsAvailable>0)this.word<<=n;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return n=e-n,n>0&&this.bitsAvailable?i<<n|this.readBits(n):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class nD extends VB{parsePES(e,n,i,r){const s=this.parseNALu(e,i.data,r);let a=this.VideoSample,l,f=!1;i.data=null,a&&s.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),s.forEach(c=>{var h,p;switch(c.type){case 1:{let T=!1;l=!0;const E=c.data;if(f&&E.length>4){const C=this.readSliceType(E);(C===2||C===4||C===7||C===9)&&(T=!0)}if(T){var g;(g=a)!=null&&g.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.frame=!0,a.key=T;break}case 5:l=!0,(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 6:{l=!0,ZT(c.data,1,i.pts,n.samples);break}case 7:{var x,b;l=!0,f=!0;const T=c.data,E=this.readSPS(T);if(!e.sps||e.width!==E.width||e.height!==E.height||((x=e.pixelRatio)==null?void 0:x[0])!==E.pixelRatio[0]||((b=e.pixelRatio)==null?void 0:b[1])!==E.pixelRatio[1]){e.width=E.width,e.height=E.height,e.pixelRatio=E.pixelRatio,e.sps=[T];const C=T.subarray(1,4);let I="avc1.";for(let P=0;P<3;P++){let M=C[P].toString(16);M.length<2&&(M="0"+M),I+=M}e.codec=I}break}case 8:l=!0,e.pps=[c.data];break;case 9:l=!0,e.audFound=!0,(p=a)!=null&&p.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;case 12:l=!0;break;default:l=!1;break}a&&l&&a.units.push(c)}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,n){return e[n]&31}readSliceType(e){const n=new ym(e);return n.readUByte(),n.readUEG(),n.readUEG()}skipScalingList(e,n){let i=8,r=8,s;for(let a=0;a<e;a++)r!==0&&(s=n.readEG(),r=(i+s+256)%256),i=r===0?i:r}readSPS(e){const n=new ym(e);let i=0,r=0,s=0,a=0,l,f,c;const h=n.readUByte.bind(n),p=n.readBits.bind(n),g=n.readUEG.bind(n),x=n.readBoolean.bind(n),b=n.skipBits.bind(n),T=n.skipEG.bind(n),E=n.skipUEG.bind(n),C=this.skipScalingList.bind(this);h();const I=h();if(p(5),b(3),h(),E(),I===100||I===110||I===122||I===244||I===44||I===83||I===86||I===118||I===128){const G=g();if(G===3&&b(1),E(),E(),b(1),x())for(f=G!==3?8:12,c=0;c<f;c++)x()&&(c<6?C(16,n):C(64,n))}E();const P=g();if(P===0)g();else if(P===1)for(b(1),T(),T(),l=g(),c=0;c<l;c++)T();E(),b(1);const M=g(),k=g(),z=p(1);z===0&&b(1),b(1),x()&&(i=g(),r=g(),s=g(),a=g());let F=[1,1];if(x()&&x())switch(h()){case 1:F=[1,1];break;case 2:F=[12,11];break;case 3:F=[10,11];break;case 4:F=[16,11];break;case 5:F=[40,33];break;case 6:F=[24,11];break;case 7:F=[20,11];break;case 8:F=[32,11];break;case 9:F=[80,33];break;case 10:F=[18,11];break;case 11:F=[15,11];break;case 12:F=[64,33];break;case 13:F=[160,99];break;case 14:F=[4,3];break;case 15:F=[3,2];break;case 16:F=[2,1];break;case 255:{F=[h()<<8|h(),h()<<8|h()];break}}return{width:Math.ceil((M+1)*16-i*2-r*2),height:(2-z)*(k+1)*16-(z?2:4)*(s+a),pixelRatio:F}}}class iD extends VB{constructor(...e){super(...e),this.initVPS=null}parsePES(e,n,i,r){const s=this.parseNALu(e,i.data,r);let a=this.VideoSample,l,f=!1;i.data=null,a&&s.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),s.forEach(c=>{var h,p;switch(c.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),a.frame=!0,l=!0;break;case 16:case 17:case 18:case 21:if(l=!0,f){var g;(g=a)!=null&&g.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:l=!0,(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 39:l=!0,ZT(c.data,2,i.pts,n.samples);break;case 32:l=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=cn(e.params,this.readVPS(c.data)),this.initVPS=c.data),e.vps=[c.data];break;case 33:if(l=!0,f=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],c.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const x=this.readSPS(c.data);e.width=x.width,e.height=x.height,e.pixelRatio=x.pixelRatio,e.codec=x.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const b in x.params)e.params[b]=x.params[b]}this.pushParameterSet(e.sps,c.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0;break;case 34:if(l=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const x=this.readPPS(c.data);for(const b in x)e.params[b]=x[b]}this.pushParameterSet(e.pps,c.data,e.vps)}break;case 35:l=!0,e.audFound=!0,(p=a)!=null&&p.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;default:l=!1;break}a&&l&&a.units.push(c)}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,n,i){(i&&i[0]===this.initVPS||!i&&!e.length)&&e.push(n)}getNALuType(e,n){return(e[n]&126)>>>1}ebsp2rbsp(e){const n=new Uint8Array(e.byteLength);let i=0;for(let r=0;r<e.byteLength;r++)r>=2&&e[r]===3&&e[r-1]===0&&e[r-2]===0||(n[i]=e[r],i++);return new Uint8Array(n.buffer,0,i)}pushAccessUnit(e,n){super.pushAccessUnit(e,n),this.initVPS&&(this.initVPS=null)}readVPS(e){const n=new ym(e);n.readUByte(),n.readUByte(),n.readBits(4),n.skipBits(2),n.readBits(6);const i=n.readBits(3),r=n.readBoolean();return{numTemporalLayers:i+1,temporalIdNested:r}}readSPS(e){const n=new ym(this.ebsp2rbsp(e));n.readUByte(),n.readUByte(),n.readBits(4);const i=n.readBits(3);n.readBoolean();const r=n.readBits(2),s=n.readBoolean(),a=n.readBits(5),l=n.readUByte(),f=n.readUByte(),c=n.readUByte(),h=n.readUByte(),p=n.readUByte(),g=n.readUByte(),x=n.readUByte(),b=n.readUByte(),T=n.readUByte(),E=n.readUByte(),C=n.readUByte(),I=[],P=[];for(let we=0;we<i;we++)I.push(n.readBoolean()),P.push(n.readBoolean());if(i>0)for(let we=i;we<8;we++)n.readBits(2);for(let we=0;we<i;we++)I[we]&&(n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte()),P[we]&&n.readUByte();n.readUEG();const M=n.readUEG();M==3&&n.skipBits(1);const k=n.readUEG(),z=n.readUEG(),F=n.readBoolean();let G=0,K=0,V=0,Q=0;F&&(G+=n.readUEG(),K+=n.readUEG(),V+=n.readUEG(),Q+=n.readUEG());const J=n.readUEG(),ve=n.readUEG(),se=n.readUEG(),ye=n.readBoolean();for(let we=ye?0:i;we<=i;we++)n.skipUEG(),n.skipUEG(),n.skipUEG();if(n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.readBoolean()&&n.readBoolean())for(let Be=0;Be<4;Be++)for(let Je=0;Je<(Be===3?2:6);Je++)if(!n.readBoolean())n.readUEG();else{const Ft=Math.min(64,1<<4+(Be<<1));Be>1&&n.readEG();for(let kt=0;kt<Ft;kt++)n.readEG()}n.readBoolean(),n.readBoolean(),n.readBoolean()&&(n.readUByte(),n.skipUEG(),n.skipUEG(),n.readBoolean());const ie=n.readUEG();let Ie=0;for(let we=0;we<ie;we++){let Be=!1;if(we!==0&&(Be=n.readBoolean()),Be){we===ie&&n.readUEG(),n.readBoolean(),n.readUEG();let Je=0;for(let _t=0;_t<=Ie;_t++){const Ft=n.readBoolean();let kt=!1;Ft||(kt=n.readBoolean()),(Ft||kt)&&Je++}Ie=Je}else{const Je=n.readUEG(),_t=n.readUEG();Ie=Je+_t;for(let Ft=0;Ft<Je;Ft++)n.readUEG(),n.readBoolean();for(let Ft=0;Ft<_t;Ft++)n.readUEG(),n.readBoolean()}}if(n.readBoolean()){const we=n.readUEG();for(let Be=0;Be<we;Be++){for(let Je=0;Je<se+4;Je++)n.readBits(1);n.readBits(1)}}let Y=0,ne=1,me=1,Te=!0,Le=1,Ae=0;n.readBoolean(),n.readBoolean();let Ve=!1;if(n.readBoolean()){if(n.readBoolean()){const Un=n.readUByte(),Gi=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],xi=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Un>0&&Un<16?(ne=Gi[Un-1],me=xi[Un-1]):Un===255&&(ne=n.readBits(16),me=n.readBits(16))}if(n.readBoolean()&&n.readBoolean(),n.readBoolean()&&(n.readBits(3),n.readBoolean(),n.readBoolean()&&(n.readUByte(),n.readUByte(),n.readUByte())),n.readBoolean()&&(n.readUEG(),n.readUEG()),n.readBoolean(),n.readBoolean(),n.readBoolean(),Ve=n.readBoolean(),Ve&&(G+=n.readUEG(),K+=n.readUEG(),V+=n.readUEG(),Q+=n.readUEG()),n.readBoolean()&&(Le=n.readBits(32),Ae=n.readBits(32),n.readBoolean()&&n.readUEG(),n.readBoolean())){const xi=n.readBoolean(),_i=n.readBoolean();let rt=!1;(xi||_i)&&(rt=n.readBoolean(),rt&&(n.readUByte(),n.readBits(5),n.readBoolean(),n.readBits(5)),n.readBits(4),n.readBits(4),rt&&n.readBits(4),n.readBits(5),n.readBits(5),n.readBits(5));for(let Kt=0;Kt<=i;Kt++){Te=n.readBoolean();const qn=Te||n.readBoolean();let En=!1;qn?n.readEG():En=n.readBoolean();const ar=En?1:n.readUEG()+1;if(xi)for(let Jn=0;Jn<ar;Jn++)n.readUEG(),n.readUEG(),rt&&(n.readUEG(),n.readUEG()),n.skipBits(1);if(_i)for(let Jn=0;Jn<ar;Jn++)n.readUEG(),n.readUEG(),rt&&(n.readUEG(),n.readUEG()),n.skipBits(1)}}n.readBoolean()&&(n.readBoolean(),n.readBoolean(),n.readBoolean(),Y=n.readUEG())}let fe=k,je=z;if(F||Ve){let we=1,Be=1;M===1?we=Be=2:M==2&&(we=2),fe=k-we*K-we*G,je=z-Be*Q-Be*V}const Ge=r?["A","B","C"][r]:"",Pe=l<<24|f<<16|c<<8|h;let ot=0;for(let we=0;we<32;we++)ot=(ot|(Pe>>we&1)<<31-we)>>>0;let ct=ot.toString(16);return a===1&&ct==="2"&&(ct="6"),{codecString:`hvc1.${Ge}${a}.${ct}.${s?"H":"L"}${C}.B0`,params:{general_tier_flag:s,general_profile_idc:a,general_profile_space:r,general_profile_compatibility_flags:[l,f,c,h],general_constraint_indicator_flags:[p,g,x,b,T,E],general_level_idc:C,bit_depth:J+8,bit_depth_luma_minus8:J,bit_depth_chroma_minus8:ve,min_spatial_segmentation_idc:Y,chroma_format_idc:M,frame_rate:{fixed:Te,fps:Ae/Le}},width:fe,height:je,pixelRatio:[ne,me]}}readPPS(e){const n=new ym(this.ebsp2rbsp(e));n.readUByte(),n.readUByte(),n.skipUEG(),n.skipUEG(),n.skipBits(2),n.skipBits(3),n.skipBits(2),n.skipUEG(),n.skipUEG(),n.skipEG(),n.skipBits(2),n.readBoolean()&&n.skipUEG(),n.skipEG(),n.skipEG(),n.skipBits(4);const r=n.readBoolean(),s=n.readBoolean();let a=1;return s&&r?a=0:s?a=3:r&&(a=2),{parallelismType:a}}matchSPS(e,n){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,n).substr(3)}}const Ni=188;class Hu{constructor(e,n,i,r){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=n,this.typeSupported=i,this.logger=r,this.videoParser=null}static probe(e,n){const i=Hu.syncOffset(e);return i>0&&n.warn(`MPEG2-TS detected but first sync word found @ offset ${i}`),i!==-1}static syncOffset(e){const n=e.length;let i=Math.min(Ni*5,n-Ni)+1,r=0;for(;r<i;){let s=!1,a=-1,l=0;for(let f=r;f<n;f+=Ni)if(e[f]===71&&(n-f===Ni||e[f+Ni]===71)){if(l++,a===-1&&(a=f,a!==0&&(i=Math.min(a+Ni*99,e.length-Ni)+1)),s||(s=MS(e,f)===0),s&&l>1&&(a===0&&l>2||f+Ni>i))return a}else{if(l)return-1;break}r++}return-1}static createTrack(e,n){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:sB[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?n:void 0}}resetInitSegment(e,n,i,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Hu.createTrack("video"),this._videoTrack.duration=r,this._audioTrack=Hu.createTrack("audio",r),this._id3Track=Hu.createTrack("id3"),this._txtTrack=Hu.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:n,_id3Track:i}=this;e&&(e.pesData=null),n&&(n.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,n,i=!1,r=!1){i||(this.sampleAes=null);let s;const a=this._videoTrack,l=this._audioTrack,f=this._id3Track,c=this._txtTrack;let h=a.pid,p=a.pesData,g=l.pid,x=f.pid,b=l.pesData,T=f.pesData,E=null,C=this.pmtParsed,I=this._pmtId,P=e.length;if(this.remainderData&&(e=ua(this.remainderData,e),P=e.length,this.remainderData=null),P<Ni&&!r)return this.remainderData=e,{audioTrack:l,videoTrack:a,id3Track:f,textTrack:c};const M=Math.max(0,Hu.syncOffset(e));P-=(P-M)%Ni,P<e.byteLength&&!r&&(this.remainderData=new Uint8Array(e.buffer,P,e.buffer.byteLength-P));let k=0;for(let F=M;F<P;F+=Ni)if(e[F]===71){const G=!!(e[F+1]&64),K=MS(e,F),V=(e[F+3]&48)>>4;let Q;if(V>1){if(Q=F+5+e[F+4],Q===F+Ni)continue}else Q=F+4;switch(K){case h:if(G){if(p&&(s=cd(p,this.logger))){if(this.videoParser===null)switch(a.segmentCodec){case"avc":this.videoParser=new nD;break;case"hevc":this.videoParser=new iD;break}this.videoParser!==null&&this.videoParser.parsePES(a,c,s,!1)}p={data:[],size:0}}p&&(p.data.push(e.subarray(Q,F+Ni)),p.size+=F+Ni-Q);break;case g:if(G){if(b&&(s=cd(b,this.logger)))switch(l.segmentCodec){case"aac":this.parseAACPES(l,s);break;case"mp3":this.parseMPEGPES(l,s);break;case"ac3":this.parseAC3PES(l,s);break}b={data:[],size:0}}b&&(b.data.push(e.subarray(Q,F+Ni)),b.size+=F+Ni-Q);break;case x:G&&(T&&(s=cd(T,this.logger))&&this.parseID3PES(f,s),T={data:[],size:0}),T&&(T.data.push(e.subarray(Q,F+Ni)),T.size+=F+Ni-Q);break;case 0:G&&(Q+=e[Q]+1),I=this._pmtId=Vne(e,Q);break;case I:{G&&(Q+=e[Q]+1);const J=Yne(e,Q,this.typeSupported,i,this.observer,this.logger);h=J.videoPid,h>0&&(a.pid=h,a.segmentCodec=J.segmentVideoCodec),g=J.audioPid,g>0&&(l.pid=g,l.segmentCodec=J.segmentAudioCodec),x=J.id3Pid,x>0&&(f.pid=x),E!==null&&!C&&(this.logger.warn(`MPEG-TS PMT found at ${F} after unknown PID '${E}'. Backtracking to sync byte @${M} to parse all TS packets.`),E=null,F=M-188),C=this.pmtParsed=!0;break}case 17:case 8191:break;default:E=K;break}}else k++;k>0&&kS(this.observer,new Error(`Found ${k} TS packet/s that do not start with 0x47`),void 0,this.logger),a.pesData=p,l.pesData=b,f.pesData=T;const z={audioTrack:l,videoTrack:a,id3Track:f,textTrack:c};return r&&this.extractRemainingSamples(z),z}flush(){const{remainderData:e}=this;this.remainderData=null;let n;return e?n=this.demux(e,-1,!1,!0):n={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(n),this.sampleAes?this.decrypt(n,this.sampleAes):n}extractRemainingSamples(e){const{audioTrack:n,videoTrack:i,id3Track:r,textTrack:s}=e,a=i.pesData,l=n.pesData,f=r.pesData;let c;if(a&&(c=cd(a,this.logger))){if(this.videoParser===null)switch(i.segmentCodec){case"avc":this.videoParser=new nD;break;case"hevc":this.videoParser=new iD;break}this.videoParser!==null&&(this.videoParser.parsePES(i,s,c,!0),i.pesData=null)}else i.pesData=a;if(l&&(c=cd(l,this.logger))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,c);break;case"mp3":this.parseMPEGPES(n,c);break;case"ac3":this.parseAC3PES(n,c);break}n.pesData=null}else l!=null&&l.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=l;f&&(c=cd(f,this.logger))?(this.parseID3PES(r,c),r.pesData=null):r.pesData=f}demuxSampleAes(e,n,i){const r=this.demux(e,i,!0,!this.config.progressive),s=this.sampleAes=new qne(this.observer,this.config,n);return this.decrypt(r,s)}decrypt(e,n){return new Promise(i=>{const{audioTrack:r,videoTrack:s}=e;r.samples&&r.segmentCodec==="aac"?n.decryptAacSamples(r.samples,0,()=>{s.samples?n.decryptAvcSamples(s.samples,0,0,()=>{i(e)}):i(e)}):s.samples&&n.decryptAvcSamples(s.samples,0,0,()=>{i(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,n){let i=0;const r=this.aacOverFlow;let s=n.data;if(r){this.aacOverFlow=null;const p=r.missing,g=r.sample.unit.byteLength;if(p===-1)s=ua(r.sample.unit,s);else{const x=g-p;r.sample.unit.set(s.subarray(0,p),x),e.samples.push(r.sample),i=r.missing}}let a,l;for(a=i,l=s.length;a<l-1&&!Vv(s,a);a++);if(a!==i){let p;const g=a<l-1;if(g?p=`AAC PES did not start with ADTS header,offset:${a}`:p="No ADTS header found in AAC PES",kS(this.observer,new Error(p),g,this.logger),!g)return}NB(e,this.observer,s,a,this.audioCodec);let f;if(n.pts!==void 0)f=n.pts;else if(r){const p=jB(e.samplerate);f=r.sample.pts+p}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,h;for(;a<l;)if(h=BB(e,s,a,f,c),a+=h.length,h.missing){this.aacOverFlow=h;break}else for(c++;a<l-1&&!Vv(s,a);a++);}parseMPEGPES(e,n){const i=n.data,r=i.length;let s=0,a=0;const l=n.pts;if(l===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<r;)if(GB(i,a)){const f=$B(e,i,a,l,s);if(f)a+=f.length,s++;else break}else a++}parseAC3PES(e,n){{const i=n.data,r=n.pts;if(r===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=i.length;let a=0,l=0,f;for(;l<s&&(f=qB(e,i,l,r,a++))>0;)l+=f}}parseID3PES(e,n){if(n.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const i=cn({},n,{type:this._videoTrack?Ss.emsg:Ss.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}}function MS(t,e){return((t[e+1]&31)<<8)+t[e+2]}function Vne(t,e){return(t[e+10]&31)<<8|t[e+11]}function Yne(t,e,n,i,r,s){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},l=(t[e+1]&15)<<8|t[e+2],f=e+3+l-4,c=(t[e+10]&15)<<8|t[e+11];for(e+=12+c;e<f;){const h=MS(t,e),p=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!i){i_("ADTS AAC",s);break}case 15:a.audioPid===-1&&(a.audioPid=h);break;case 21:a.id3Pid===-1&&(a.id3Pid=h);break;case 219:if(!i){i_("H.264",s);break}case 27:a.videoPid===-1&&(a.videoPid=h);break;case 3:case 4:!n.mpeg&&!n.mp3?s.log("MPEG audio found, not supported in this browser"):a.audioPid===-1&&(a.audioPid=h,a.segmentAudioCodec="mp3");break;case 193:if(!i){i_("AC-3",s);break}case 129:n.ac3?a.audioPid===-1&&(a.audioPid=h,a.segmentAudioCodec="ac3"):s.log("AC-3 audio found, not supported in this browser");break;case 6:if(a.audioPid===-1&&p>0){let g=e+5,x=p;for(;x>2;){switch(t[g]){case 106:n.ac3!==!0?s.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=h,a.segmentAudioCodec="ac3");break}const T=t[g+1]+2;g+=T,x-=T}}break;case 194:case 135:return kS(r,new Error("Unsupported EC-3 in M2TS found"),void 0,s),a;case 36:a.videoPid===-1&&(a.videoPid=h,a.segmentVideoCodec="hevc",s.log("HEVC in M2TS found"));break}e+=p+5}return a}function kS(t,e,n,i){i.warn(`parsing error: ${e.message}`),t.emit(B.ERROR,B.ERROR,{type:at.MEDIA_ERROR,details:pe.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:e,reason:e.message})}function i_(t,e){e.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function cd(t,e){let n=0,i,r,s,a,l;const f=t.data;if(!t||t.size===0)return null;for(;f[0].length<19&&f.length>1;)f[0]=ua(f[0],f[1]),f.splice(1,1);if(i=f[0],(i[0]<<16)+(i[1]<<8)+i[2]===1){if(r=(i[4]<<8)+i[5],r&&r>t.size-6)return null;const h=i[7];h&192&&(a=(i[9]&14)*536870912+(i[10]&255)*4194304+(i[11]&254)*16384+(i[12]&255)*128+(i[13]&254)/2,h&64?(l=(i[14]&14)*536870912+(i[15]&255)*4194304+(i[16]&254)*16384+(i[17]&255)*128+(i[18]&254)/2,a-l>60*9e4&&(e.warn(`${Math.round((a-l)/9e4)}s delta between PTS and DTS, align them`),a=l)):l=a),s=i[8];let p=s+9;if(t.size<=p)return null;t.size-=p;const g=new Uint8Array(t.size);for(let x=0,b=f.length;x<b;x++){i=f[x];let T=i.byteLength;if(p)if(p>T){p-=T;continue}else i=i.subarray(p),T-=p,p=0;g.set(i,n),n+=T}return r&&(r-=s+3),{data:g,pts:a,dts:l,len:r}}return null}class Wne{static getSilentFrame(e,n){switch(e){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Bu=Math.pow(2,32)-1;class de{static init(){de.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in de.types)de.types.hasOwnProperty(e)&&(de.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);de.HDLR_TYPES={video:n,audio:i};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);de.STTS=de.STSC=de.STCO=s,de.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),de.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),de.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),de.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),l=new Uint8Array([97,118,99,49]),f=new Uint8Array([0,0,0,1]);de.FTYP=de.box(de.types.ftyp,a,f,a,l),de.DINF=de.box(de.types.dinf,de.box(de.types.dref,r))}static box(e,...n){let i=8,r=n.length;const s=r;for(;r--;)i+=n[r].byteLength;const a=new Uint8Array(i);for(a[0]=i>>24&255,a[1]=i>>16&255,a[2]=i>>8&255,a[3]=i&255,a.set(e,4),r=0,i=8;r<s;r++)a.set(n[r],i),i+=n[r].byteLength;return a}static hdlr(e){return de.box(de.types.hdlr,de.HDLR_TYPES[e])}static mdat(e){return de.box(de.types.mdat,e)}static mdhd(e,n){n*=e;const i=Math.floor(n/(Bu+1)),r=Math.floor(n%(Bu+1));return de.box(de.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,r>>24,r>>16&255,r>>8&255,r&255,85,196,0,0]))}static mdia(e){return de.box(de.types.mdia,de.mdhd(e.timescale||0,e.duration||0),de.hdlr(e.type),de.minf(e))}static mfhd(e){return de.box(de.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?de.box(de.types.minf,de.box(de.types.smhd,de.SMHD),de.DINF,de.stbl(e)):de.box(de.types.minf,de.box(de.types.vmhd,de.VMHD),de.DINF,de.stbl(e))}static moof(e,n,i){return de.box(de.types.moof,de.mfhd(e),de.traf(i,n))}static moov(e){let n=e.length;const i=[];for(;n--;)i[n]=de.trak(e[n]);return de.box.apply(null,[de.types.moov,de.mvhd(e[0].timescale||0,e[0].duration||0)].concat(i).concat(de.mvex(e)))}static mvex(e){let n=e.length;const i=[];for(;n--;)i[n]=de.trex(e[n]);return de.box.apply(null,[de.types.mvex,...i])}static mvhd(e,n){n*=e;const i=Math.floor(n/(Bu+1)),r=Math.floor(n%(Bu+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,r>>24,r>>16&255,r>>8&255,r&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return de.box(de.types.mvhd,s)}static sdtp(e){const n=e.samples||[],i=new Uint8Array(4+n.length);let r,s;for(r=0;r<n.length;r++)s=n[r].flags,i[r+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return de.box(de.types.sdtp,i)}static stbl(e){return de.box(de.types.stbl,de.stsd(e),de.box(de.types.stts,de.STTS),de.box(de.types.stsc,de.STSC),de.box(de.types.stsz,de.STSZ),de.box(de.types.stco,de.STCO))}static avc1(e){let n=[],i=[],r,s,a;for(r=0;r<e.sps.length;r++)s=e.sps[r],a=s.byteLength,n.push(a>>>8&255),n.push(a&255),n=n.concat(Array.prototype.slice.call(s));for(r=0;r<e.pps.length;r++)s=e.pps[r],a=s.byteLength,i.push(a>>>8&255),i.push(a&255),i=i.concat(Array.prototype.slice.call(s));const l=de.box(de.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(i))),f=e.width,c=e.height,h=e.pixelRatio[0],p=e.pixelRatio[1];return de.box(de.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,f>>8&255,f&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l,de.box(de.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),de.box(de.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,h&255,p>>24,p>>16&255,p>>8&255,p&255])))}static esds(e){const n=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...n,6,1,2])}static audioStsd(e){const n=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,n>>8&255,n&255,0,0])}static mp4a(e){return de.box(de.types.mp4a,de.audioStsd(e),de.box(de.types.esds,de.esds(e)))}static mp3(e){return de.box(de.types[".mp3"],de.audioStsd(e))}static ac3(e){return de.box(de.types["ac-3"],de.audioStsd(e),de.box(de.types.dac3,e.config))}static stsd(e){const{segmentCodec:n}=e;if(e.type==="audio"){if(n==="aac")return de.box(de.types.stsd,de.STSD,de.mp4a(e));if(n==="ac3"&&e.config)return de.box(de.types.stsd,de.STSD,de.ac3(e));if(n==="mp3"&&e.codec==="mp3")return de.box(de.types.stsd,de.STSD,de.mp3(e))}else if(e.pps&&e.sps){if(n==="avc")return de.box(de.types.stsd,de.STSD,de.avc1(e));if(n==="hevc"&&e.vps)return de.box(de.types.stsd,de.STSD,de.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${n}/${e.codec})`)}static tkhd(e){const n=e.id,i=(e.duration||0)*(e.timescale||0),r=e.width||0,s=e.height||0,a=Math.floor(i/(Bu+1)),l=Math.floor(i%(Bu+1));return de.box(de.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,l>>24,l>>16&255,l>>8&255,l&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,r&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,n){const i=de.sdtp(e),r=e.id,s=Math.floor(n/(Bu+1)),a=Math.floor(n%(Bu+1));return de.box(de.types.traf,de.box(de.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255])),de.box(de.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,a>>24,a>>16&255,a>>8&255,a&255])),de.trun(e,i.length+16+20+8+16+8+8),i)}static trak(e){return e.duration=e.duration||4294967295,de.box(de.types.trak,de.tkhd(e),de.mdia(e))}static trex(e){const n=e.id;return de.box(de.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,n){const i=e.samples||[],r=i.length,s=12+16*r,a=new Uint8Array(s);let l,f,c,h,p,g;for(n+=8+s,a.set([e.type==="video"?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,r&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0),l=0;l<r;l++)f=i[l],c=f.duration,h=f.size,p=f.flags,g=f.cts,a.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255,p.isLeading<<2|p.dependsOn,p.isDependedOn<<6|p.hasRedundancy<<4|p.paddingValue<<1|p.isNonSync,p.degradPrio&61440,p.degradPrio&15,g>>>24&255,g>>>16&255,g>>>8&255,g&255],12+16*l);return de.box(de.types.trun,a)}static initSegment(e){de.types||de.init();const n=de.moov(e);return ua(de.FTYP,n)}static hvc1(e){const n=e.params,i=[e.vps,e.sps,e.pps],r=4,s=new Uint8Array([1,n.general_profile_space<<6|(n.general_tier_flag?32:0)|n.general_profile_idc,n.general_profile_compatibility_flags[0],n.general_profile_compatibility_flags[1],n.general_profile_compatibility_flags[2],n.general_profile_compatibility_flags[3],n.general_constraint_indicator_flags[0],n.general_constraint_indicator_flags[1],n.general_constraint_indicator_flags[2],n.general_constraint_indicator_flags[3],n.general_constraint_indicator_flags[4],n.general_constraint_indicator_flags[5],n.general_level_idc,240|n.min_spatial_segmentation_idc>>8,255&n.min_spatial_segmentation_idc,252|n.parallelismType,252|n.chroma_format_idc,248|n.bit_depth_luma_minus8,248|n.bit_depth_chroma_minus8,0,parseInt(n.frame_rate.fps),r-1|n.temporal_id_nested<<2|n.num_temporal_layers<<3|(n.frame_rate.fixed?64:0),i.length]);let a=s.length;for(let b=0;b<i.length;b+=1){a+=3;for(let T=0;T<i[b].length;T+=1)a+=2+i[b][T].length}const l=new Uint8Array(a);l.set(s,0),a=s.length;const f=i.length-1;for(let b=0;b<i.length;b+=1){l.set(new Uint8Array([32+b|(b===f?128:0),0,i[b].length]),a),a+=3;for(let T=0;T<i[b].length;T+=1)l.set(new Uint8Array([i[b][T].length>>8,i[b][T].length&255]),a),a+=2,l.set(i[b][T],a),a+=i[b][T].length}const c=de.box(de.types.hvcC,l),h=e.width,p=e.height,g=e.pixelRatio[0],x=e.pixelRatio[1];return de.box(de.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,h>>8&255,h&255,p>>8&255,p&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,de.box(de.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),de.box(de.types.pasp,new Uint8Array([g>>24,g>>16&255,g>>8&255,g&255,x>>24,x>>16&255,x>>8&255,x&255])))}}de.types=void 0;de.HDLR_TYPES=void 0;de.STTS=void 0;de.STSC=void 0;de.STCO=void 0;de.STSZ=void 0;de.VMHD=void 0;de.SMHD=void 0;de.STSD=void 0;de.FTYP=void 0;de.DINF=void 0;const YB=9e4;function cA(t,e,n=1,i=!1){const r=t*e*n;return i?Math.round(r):r}function Zne(t,e,n=1,i=!1){return cA(t,e,1/n,i)}function nm(t,e=!1){return cA(t,1e3,1/YB,e)}function Xne(t,e=1){return cA(t,YB,1/e)}const Qne=10*1e3,Jne=1024,eie=1152,tie=1536;let fd=null,r_=null;function rD(t,e,n,i){return{duration:e,size:n,cts:i,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:t?2:1,isNonSync:t?0:1}}}class Ug extends io{constructor(e,n,i,r){if(super("mp4-remuxer",r),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=n,this.typeSupported=i,this.ISGenerated=!1,fd===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);fd=a?parseInt(a[1]):0}if(r_===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);r_=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.log("initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let n=!1;const i=e[0].pts,r=e.reduce((s,a)=>{let l=a.pts,f=l-s;return f<-4294967296&&(n=!0,l=ta(l,i),f=l-s),f>0?s:l},i);return n&&this.debug("PTS rollover detected"),r}remux(e,n,i,r,s,a,l,f){let c,h,p,g,x,b,T=s,E=s;const C=e.pid>-1,I=n.pid>-1,P=n.samples.length,M=e.samples.length>0,k=l&&P>0||P>1;if((!C||M)&&(!I||k)||this.ISGenerated||l){if(this.ISGenerated){var F,G,K,V;const se=this.videoTrackConfig;(se&&(n.width!==se.width||n.height!==se.height||((F=n.pixelRatio)==null?void 0:F[0])!==((G=se.pixelRatio)==null?void 0:G[0])||((K=n.pixelRatio)==null?void 0:K[1])!==((V=se.pixelRatio)==null?void 0:V[1]))||!se&&k||this.nextAudioTs===null&&M)&&this.resetInitSegment()}this.ISGenerated||(p=this.generateIS(e,n,s,a));const Q=this.isVideoContiguous;let J=-1,ve;if(k&&(J=nie(n.samples),!Q&&this.config.forceKeyFrameOnDiscontinuity))if(b=!0,J>0){this.warn(`Dropped ${J} out of ${P} video samples due to a missing keyframe`);const se=this.getVideoStartPts(n.samples);n.samples=n.samples.slice(J),n.dropped+=J,E+=(n.samples[0].pts-se)/n.inputTimeScale,ve=E}else J===-1&&(this.warn(`No keyframe found out of ${P} video samples`),b=!1);if(this.ISGenerated){if(M&&k){const se=this.getVideoStartPts(n.samples),X=(ta(e.samples[0].pts,se)-se)/n.inputTimeScale;T+=Math.max(0,X),E+=Math.max(0,-X)}if(M){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),p=this.generateIS(e,n,s,a)),h=this.remuxAudio(e,T,this.isAudioContiguous,a,I||k||f===et.AUDIO?E:void 0),k){const se=h?h.endPTS-h.startPTS:0;n.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),p=this.generateIS(e,n,s,a)),c=this.remuxVideo(n,E,Q,se)}}else k&&(c=this.remuxVideo(n,E,Q,0));c&&(c.firstKeyFrame=J,c.independent=J!==-1,c.firstKeyFramePTS=ve)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(x=WB(i,s,this._initPTS,this._initDTS)),r.samples.length&&(g=ZB(r,s,this._initPTS))),{audio:h,video:c,initSegment:p,independent:b,text:g,id3:x}}generateIS(e,n,i,r){const s=e.samples,a=n.samples,l=this.typeSupported,f={},c=this._initPTS;let h=!c||r,p="audio/mp4",g,x,b,T;if(h&&(g=x=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":l.mpeg?(p="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}f.audio={id:"audio",container:p,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&l.mpeg?new Uint8Array(0):de.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(T=e.id,b=e.inputTimeScale,!c||b!==c.timescale?g=x=s[0].pts-Math.round(b*i):h=!1)}if(n.sps&&n.pps&&a.length){if(n.timescale=n.inputTimeScale,f.video={id:"main",container:"video/mp4",codec:n.codec,initSegment:de.initSegment([n]),metadata:{width:n.width,height:n.height}},h)if(T=n.id,b=n.inputTimeScale,!c||b!==c.timescale){const E=this.getVideoStartPts(a),C=Math.round(b*i);x=Math.min(x,ta(a[0].dts,E)-C),g=Math.min(g,E-C)}else h=!1;this.videoTrackConfig={width:n.width,height:n.height,pixelRatio:n.pixelRatio}}if(Object.keys(f).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:g,timescale:b},this._initDTS={baseTime:x,timescale:b}):g=b=void 0,{tracks:f,initPTS:g,timescale:b,trackId:T}}remuxVideo(e,n,i,r){const s=e.inputTimeScale,a=e.samples,l=[],f=a.length,c=this._initPTS,h=c.baseTime*s/c.timescale;let p=this.nextVideoTs,g=8,x=this.videoSampleDuration,b,T,E=Number.POSITIVE_INFINITY,C=Number.NEGATIVE_INFINITY,I=!1;if(!i||p===null){const Y=h+n*s,ne=a[0].pts-ta(a[0].dts,a[0].pts);fd&&p!==null&&Math.abs(Y-ne-(p+h))<15e3?i=!0:p=Y-ne-h}const P=p+h;for(let Y=0;Y<f;Y++){const ne=a[Y];ne.pts=ta(ne.pts,P),ne.dts=ta(ne.dts,P),ne.dts<a[Y>0?Y-1:Y].dts&&(I=!0)}I&&a.sort(function(Y,ne){const me=Y.dts-ne.dts,Te=Y.pts-ne.pts;return me||Te}),b=a[0].dts,T=a[a.length-1].dts;const M=T-b,k=M?Math.round(M/(f-1)):x||e.inputTimeScale/30;if(i){const Y=b-P,ne=Y>k,me=Y<-1;if((ne||me)&&(ne?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${nm(Y,!0)} ms (${Y}dts) hole between fragments detected at ${n.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${nm(-Y,!0)} ms (${Y}dts) overlapping between fragments detected at ${n.toFixed(3)}`),!me||P>=a[0].pts||fd)){b=P;const Te=a[0].pts-Y;if(ne)a[0].dts=b,a[0].pts=Te;else{let Le=!0;for(let Ae=0;Ae<a.length&&!(a[Ae].dts>Te&&Le);Ae++){const Ve=a[Ae].pts;if(a[Ae].dts-=Y,a[Ae].pts-=Y,Ae<a.length-1){const Ue=a[Ae+1].pts,fe=a[Ae].pts,je=Ue<=fe,Ge=Ue<=Ve;Le=je==Ge}}}this.log(`Video: Initial PTS/DTS adjusted: ${nm(Te,!0)}/${nm(b,!0)}, delta: ${nm(Y,!0)} ms`)}}b=Math.max(0,b);let z=0,F=0,G=b;for(let Y=0;Y<f;Y++){const ne=a[Y],me=ne.units,Te=me.length;let Le=0;for(let Ae=0;Ae<Te;Ae++)Le+=me[Ae].data.length;F+=Le,z+=Te,ne.length=Le,ne.dts<G?(ne.dts=G,G+=k/4|0||1):G=ne.dts,E=Math.min(ne.pts,E),C=Math.max(ne.pts,C)}T=a[f-1].dts;const K=F+4*z+8;let V;try{V=new Uint8Array(K)}catch(Y){this.observer.emit(B.ERROR,B.ERROR,{type:at.MUX_ERROR,details:pe.REMUX_ALLOC_ERROR,fatal:!1,error:Y,bytes:K,reason:`fail allocating video mdat ${K}`});return}const Q=new DataView(V.buffer);Q.setUint32(0,K),V.set(de.types.mdat,4);let J=!1,ve=Number.POSITIVE_INFINITY,se=Number.POSITIVE_INFINITY,ye=Number.NEGATIVE_INFINITY,X=Number.NEGATIVE_INFINITY;for(let Y=0;Y<f;Y++){const ne=a[Y],me=ne.units;let Te=0;for(let Ve=0,Ue=me.length;Ve<Ue;Ve++){const fe=me[Ve],je=fe.data,Ge=fe.data.byteLength;Q.setUint32(g,Ge),g+=4,V.set(je,g),g+=Ge,Te+=4+Ge}let Le;if(Y<f-1)x=a[Y+1].dts-ne.dts,Le=a[Y+1].pts-ne.pts;else{const Ve=this.config,Ue=Y>0?ne.dts-a[Y-1].dts:k;if(Le=Y>0?ne.pts-a[Y-1].pts:k,Ve.stretchShortVideoTrack&&this.nextAudioTs!==null){const fe=Math.floor(Ve.maxBufferHole*s),je=(r?E+r*s:this.nextAudioTs+h)-ne.pts;je>fe?(x=je-Ue,x<0?x=Ue:J=!0,this.log(`It is approximately ${je/90} ms to the next segment; using duration ${x/90} ms for the last video frame.`)):x=Ue}else x=Ue}const Ae=Math.round(ne.pts-ne.dts);ve=Math.min(ve,x),ye=Math.max(ye,x),se=Math.min(se,Le),X=Math.max(X,Le),l.push(rD(ne.key,x,Te,Ae))}if(l.length){if(fd){if(fd<70){const Y=l[0].flags;Y.dependsOn=2,Y.isNonSync=0}}else if(r_&&X-se<ye-ve&&k/ye<.025&&l[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let Y=b;for(let ne=0,me=l.length;ne<me;ne++){const Te=Y+l[ne].duration,Le=Y+l[ne].cts;if(ne<me-1){const Ae=Te+l[ne+1].cts;l[ne].duration=Ae-Le}else l[ne].duration=ne?l[ne-1].duration:k;l[ne].cts=0,Y=Te}}}x=J||!x?k:x;const oe=T+x;this.nextVideoTs=p=oe-h,this.videoSampleDuration=x,this.isVideoContiguous=!0;const Z={data1:de.moof(e.sequenceNumber++,b,cn(e,{samples:l})),data2:V,startPTS:(E-h)/s,endPTS:(C+x-h)/s,startDTS:(b-h)/s,endDTS:p/s,type:"video",hasAudio:!1,hasVideo:!0,nb:l.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Z}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return eie;case"ac3":return tie;default:return Jne}}remuxAudio(e,n,i,r,s){const a=e.inputTimeScale,l=e.samplerate?e.samplerate:a,f=a/l,c=this.getSamplesPerFrame(e),h=c*f,p=this._initPTS,g=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,x=[],b=s!==void 0;let T=e.samples,E=g?0:8,C=this.nextAudioTs||-1;const I=p.baseTime*a/p.timescale,P=I+n*a;if(this.isAudioContiguous=i=i||T.length&&C>0&&(r&&Math.abs(P-(C+I))<9e3||Math.abs(ta(T[0].pts,P)-(C+I))<20*h),T.forEach(function(X){X.pts=ta(X.pts,P)}),!i||C<0){if(T=T.filter(X=>X.pts>=0),!T.length)return;s===0?C=0:r&&!b?C=Math.max(0,P-I):C=T[0].pts-I}if(e.segmentCodec==="aac"){const X=this.config.maxAudioFramesDrift;for(let oe=0,ie=C+I;oe<T.length;oe++){const Ie=T[oe],Z=Ie.pts,Y=Z-ie,ne=Math.abs(1e3*Y/a);if(Y<=-X*h&&b)oe===0&&(this.warn(`Audio frame @ ${(Z/a).toFixed(3)}s overlaps marker by ${Math.round(1e3*Y/a)} ms.`),this.nextAudioTs=C=Z-I,ie=Z);else if(Y>=X*h&&ne<Qne&&b){let me=Math.round(Y/h);for(ie=Z-me*h;ie<0&&me&&h;)me--,ie+=h;oe===0&&(this.nextAudioTs=C=ie-I),this.warn(`Injecting ${me} audio frames @ ${((ie-I)/a).toFixed(3)}s due to ${Math.round(1e3*Y/a)} ms gap.`);for(let Te=0;Te<me;Te++){let Le=Wne.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);Le||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),Le=Ie.unit.subarray()),T.splice(oe,0,{unit:Le,pts:ie}),ie+=h,oe++}}Ie.pts=ie,ie+=h}}let M=null,k=null,z,F=0,G=T.length;for(;G--;)F+=T[G].unit.byteLength;for(let X=0,oe=T.length;X<oe;X++){const ie=T[X],Ie=ie.unit;let Z=ie.pts;if(k!==null){const ne=x[X-1];ne.duration=Math.round((Z-k)/f)}else if(i&&e.segmentCodec==="aac"&&(Z=C+I),M=Z,F>0){F+=E;try{z=new Uint8Array(F)}catch(ne){this.observer.emit(B.ERROR,B.ERROR,{type:at.MUX_ERROR,details:pe.REMUX_ALLOC_ERROR,fatal:!1,error:ne,bytes:F,reason:`fail allocating audio mdat ${F}`});return}g||(new DataView(z.buffer).setUint32(0,F),z.set(de.types.mdat,4))}else return;z.set(Ie,E);const Y=Ie.byteLength;E+=Y,x.push(rD(!0,c,Y,0)),k=Z}const K=x.length;if(!K)return;const V=x[x.length-1];C=k-I,this.nextAudioTs=C+f*V.duration;const Q=g?new Uint8Array(0):de.moof(e.sequenceNumber++,M/f,cn({},e,{samples:x}));e.samples=[];const J=(M-I)/a,ve=C/a,ye={data1:Q,data2:z,startPTS:J,endPTS:ve,startDTS:J,endDTS:ve,type:"audio",hasAudio:!0,hasVideo:!1,nb:K};return this.isAudioContiguous=!0,ye}}function ta(t,e){let n;if(e===null)return t;for(e<t?n=-8589934592:n=8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}function nie(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function WB(t,e,n,i){const r=t.samples.length;if(!r)return;const s=t.inputTimeScale;for(let l=0;l<r;l++){const f=t.samples[l];f.pts=ta(f.pts-n.baseTime*s/n.timescale,e*s)/s,f.dts=ta(f.dts-i.baseTime*s/i.timescale,e*s)/s}const a=t.samples;return t.samples=[],{samples:a}}function ZB(t,e,n){const i=t.samples.length;if(!i)return;const r=t.inputTimeScale;for(let a=0;a<i;a++){const l=t.samples[a];l.pts=ta(l.pts-n.baseTime*r/n.timescale,e*r)/r}t.samples.sort((a,l)=>a.pts-l.pts);const s=t.samples;return t.samples=[],{samples:s}}class iie extends io{constructor(e,n,i,r){super("passthrough-remuxer",r),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const n=this.initPTS;n&&e&&n.baseTime===e.baseTime&&n.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,n,i,r){this.audioCodec=n,this.videoCodec=i,this.generateInitSegment(Wee(e,r)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:n,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const r=this.initData=lB(e);r.audio&&(n=sD(r.audio,xn.AUDIO,this)),r.video&&(i=sD(r.video,xn.VIDEO,this));const s={};r.audio&&r.video?s.audiovideo={container:"video/mp4",codec:n+","+i,supplemental:r.video.supplemental,initSegment:e,id:"main"}:r.audio?s.audio={container:"audio/mp4",codec:n,initSegment:e,id:"audio"}:r.video?s.video={container:"video/mp4",codec:i,supplemental:r.video.supplemental,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=s}remux(e,n,i,r,s,a){var l,f;let{initPTS:c,lastEndTime:h}=this;const p={audio:void 0,video:void 0,text:r,id3:i,initSegment:void 0};qe(h)||(h=this.lastEndTime=s||0);const g=n.samples;if(!(g!=null&&g.length))return p;const x={initPTS:void 0,timescale:void 0,trackId:void 0};let b=this.initData;if((l=b)!=null&&l.length||(this.generateInitSegment(g),b=this.initData),!((f=b)!=null&&f.length))return this.warn("Failed to generate initSegment."),p;this.emitInitSegment&&(x.tracks=this.initTracks,this.emitInitSegment=!1);const T=Xee(g,b,this),E=b.audio?T[b.audio.id]:null,C=b.video?T[b.video.id]:null,I=Ag(C,1/0),P=Ag(E,1/0),M=Ag(C,0,!0),k=Ag(E,0,!0);let z,F=s,G=0;if(E&&(!C||!c&&P<I||c&&c.trackId===b.audio.id)?(x.trackId=b.audio.id,z=E,G=k-P):C&&(x.trackId=b.video.id,z=C,G=M-I),z){const X=z.timescale;F=z.start/X,x.initPTS=z.start-s*X,x.timescale=X,c||(this.initPTS=c={baseTime:x.initPTS,timescale:X,trackId:x.trackId})}(a||!c)&&(rie(c,F,s,G)||x.timescale!==c.timescale)&&(x.initPTS=F-s,x.timescale=1,c&&c.timescale===1&&this.warn(`Adjusting initPTS @${s} from ${c.baseTime/c.timescale} to ${x.initPTS}`),this.initPTS=c={baseTime:x.initPTS,timescale:1});const K=e?F-c.baseTime/c.timescale:h,V=K+G;G>0?this.lastEndTime=V:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const Q=!!b.audio,J=!!b.video;let ve="";Q&&(ve+="audio"),J&&(ve+="video");const se={data1:g,startPTS:K,startDTS:K,endPTS:V,endDTS:V,type:ve,hasAudio:Q,hasVideo:J,nb:1,dropped:0};p.audio=Q&&!J?se:void 0,p.video=J?se:void 0;const ye=C?.sampleCount;if(ye){const X=C.keyFrameIndex,oe=X!==-1;se.nb=ye,se.dropped=X===0||this.isVideoContiguous?0:oe?X:ye,se.independent=oe,se.firstKeyFrame=X,oe&&C.keyFrameStart&&(se.firstKeyFramePTS=(C.keyFrameStart-c.baseTime)/c.timescale),this.isVideoContiguous||(p.independent=oe),this.isVideoContiguous||(this.isVideoContiguous=oe),se.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${X}/${ye} dropped: ${se.dropped} start: ${se.firstKeyFramePTS||"NA"}`)}return p.initSegment=x,p.id3=WB(i,s,c,c),r.samples.length&&(p.text=ZB(r,s,c)),p}}function Ag(t,e,n=!1){return t?.start!==void 0?(t.start+(n?t.duration:0))/t.timescale:e}function rie(t,e,n,i){if(t===null)return!0;const r=Math.max(i,1),s=e-t.baseTime/t.timescale;return Math.abs(s-n)>r}function sD(t,e,n){const i=t?.codec;return i&&i.length>4?i:e===xn.AUDIO?i==="ec-3"||i==="ac-3"||i==="alac"?i:i==="fLaC"||i==="Opus"?Uv(i,!1):(n.warn(`Unhandled audio codec "${i}" in mp4 MAP`),i||"mp4a"):(n.warn(`Unhandled video codec "${i}" in mp4 MAP`),i||"avc1")}let El;try{El=self.performance.now.bind(self.performance)}catch{El=Date.now}const $g=[{demux:Kne,remux:iie},{demux:Hu,remux:Ug},{demux:$ne,remux:Ug},{demux:Gne,remux:Ug}];$g.splice(2,0,{demux:zne,remux:Ug});class aD{constructor(e,n,i,r,s,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=n,this.config=i,this.id=s,this.logger=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,n,i,r){const s=i.transmuxing;s.executeStart=El();let a=new Uint8Array(e);const{currentTransmuxState:l,transmuxConfig:f}=this;r&&(this.currentTransmuxState=r);const{contiguous:c,discontinuity:h,trackSwitch:p,accurateTimeOffset:g,timeOffset:x,initSegmentChange:b}=r||l,{audioCodec:T,videoCodec:E,defaultInitPts:C,duration:I,initSegmentData:P}=f,M=sie(a,n);if(M&&Sd(M.method)){const G=this.getDecrypter(),K=nA(M.method);if(G.isSync()){let V=G.softwareDecrypt(a,M.key.buffer,M.iv.buffer,K);if(i.part>-1){const J=G.flush();V=J&&J.buffer}if(!V)return s.executeEnd=El(),s_(i);a=new Uint8Array(V)}else return this.asyncResult=!0,this.decryptionPromise=G.webCryptoDecrypt(a,M.key.buffer,M.iv.buffer,K).then(V=>{const Q=this.push(V,null,i);return this.decryptionPromise=null,Q}),this.decryptionPromise}const k=this.needsProbing(h,p);if(k){const G=this.configureTransmuxer(a);if(G)return this.logger.warn(`[transmuxer] ${G.message}`),this.observer.emit(B.ERROR,B.ERROR,{type:at.MEDIA_ERROR,details:pe.FRAG_PARSING_ERROR,fatal:!1,error:G,reason:G.message}),s.executeEnd=El(),s_(i)}(h||p||b||k)&&this.resetInitSegment(P,T,E,I,n),(h||b||k)&&this.resetInitialTimestamp(C),c||this.resetContiguity();const z=this.transmux(a,M,x,g,i);this.asyncResult=$m(z);const F=this.currentTransmuxState;return F.contiguous=!0,F.discontinuity=!1,F.trackSwitch=!1,s.executeEnd=El(),z}flush(e){const n=e.transmuxing;n.executeStart=El();const{decrypter:i,currentTransmuxState:r,decryptionPromise:s}=this;if(s)return this.asyncResult=!0,s.then(()=>this.flush(e));const a=[],{timeOffset:l}=r;if(i){const p=i.flush();p&&a.push(this.push(p.buffer,null,e))}const{demuxer:f,remuxer:c}=this;if(!f||!c){n.executeEnd=El();const p=[s_(e)];return this.asyncResult?Promise.resolve(p):p}const h=f.flush(l);return $m(h)?(this.asyncResult=!0,h.then(p=>(this.flushRemux(a,p,e),a))):(this.flushRemux(a,h,e),this.asyncResult?Promise.resolve(a):a)}flushRemux(e,n,i){const{audioTrack:r,videoTrack:s,id3Track:a,textTrack:l}=n,{accurateTimeOffset:f,timeOffset:c}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${i.sn}${i.part>-1?" part: "+i.part:""} of ${this.id===et.MAIN?"level":"track"} ${i.level}`);const h=this.remuxer.remux(r,s,a,l,c,f,!0,this.id);e.push({remuxResult:h,chunkMeta:i}),i.transmuxing.executeEnd=El()}resetInitialTimestamp(e){const{demuxer:n,remuxer:i}=this;!n||!i||(n.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:n}=this;!e||!n||(e.resetContiguity(),n.resetNextTimestamp())}resetInitSegment(e,n,i,r,s){const{demuxer:a,remuxer:l}=this;!a||!l||(a.resetInitSegment(e,n,i,r),l.resetInitSegment(e,n,i,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,n,i,r,s){let a;return n&&n.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,n,i,r,s):a=this.transmuxUnencrypted(e,i,r,s),a}transmuxUnencrypted(e,n,i,r){const{audioTrack:s,videoTrack:a,id3Track:l,textTrack:f}=this.demuxer.demux(e,n,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,a,l,f,n,i,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,n,i,r,s){return this.demuxer.demuxSampleAes(e,n,i).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,i,r,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:n,observer:i,typeSupported:r}=this;let s;for(let p=0,g=$g.length;p<g;p++){var a;if((a=$g[p].demux)!=null&&a.probe(e,this.logger)){s=$g[p];break}}if(!s)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,f=this.remuxer,c=s.remux,h=s.demux;(!f||!(f instanceof c))&&(this.remuxer=new c(i,n,r,this.logger)),(!l||!(l instanceof h))&&(this.demuxer=new h(i,n,r,this.logger),this.probe=h.probe)}needsProbing(e,n){return!this.demuxer||!this.remuxer||e||n}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new eA(this.config)),e}}function sie(t,e){let n=null;return t.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(n=e),n}const s_=t=>({remuxResult:{},chunkMeta:t});function $m(t){return"then"in t&&t.then instanceof Function}class aie{constructor(e,n,i,r,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=n,this.initSegmentData=i,this.duration=r,this.defaultInitPts=s||null}}class oie{constructor(e,n,i,r,s,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=n,this.accurateTimeOffset=i,this.trackSwitch=r,this.timeOffset=s,this.initSegmentChange=a}}let oD=0;class XB{constructor(e,n,i,r){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=oD++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=f=>{const c=f.data,h=this.hls;if(!(!h||!(c!=null&&c.event)||c.instanceNo!==this.instanceNo))switch(c.event){case"init":{var p;const g=(p=this.workerContext)==null?void 0:p.objectURL;g&&self.URL.revokeObjectURL(g);break}case"transmuxComplete":{this.handleTransmuxComplete(c.data);break}case"flush":{this.onFlush(c.data);break}case"workerLog":{h.logger[c.data.logType]&&h.logger[c.data.logType](c.data.message);break}default:{c.data=c.data||{},c.data.frag=this.frag,c.data.part=this.part,c.data.id=this.id,h.trigger(c.event,c.data);break}}},this.onWorkerError=f=>{if(!this.hls)return;const c=new Error(`${f.message}  (${f.filename}:${f.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(B.ERROR,{type:at.OTHER_ERROR,details:pe.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:c})};const s=e.config;this.hls=e,this.id=n,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=i,this.onFlush=r;const a=(f,c)=>{c=c||{},c.frag=this.frag||void 0,f===B.ERROR&&(c=c,c.parent=this.id,c.part=this.part,this.error=c.error),this.hls.trigger(f,c)};this.observer=new rA,this.observer.on(B.FRAG_DECRYPTED,a),this.observer.on(B.ERROR,a);const l=EP(s.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const f=this.hls.logger;if(s.workerPath||hne()){try{s.workerPath?(f.log(`loading Web Worker ${s.workerPath} for "${n}"`),this.workerContext=pne(s.workerPath)):(f.log(`injecting Web Worker for "${n}"`),this.workerContext=mne());const{worker:h}=this.workerContext;h.addEventListener("message",this.onWorkerMessage),h.addEventListener("error",this.onWorkerError),h.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:l,id:n,config:Dn(s)})}catch(h){f.warn(`Error setting up "${n}" Web Worker, fallback to inline`,h),this.terminateWorker(),this.error=null,this.transmuxer=new aD(this.observer,l,s,"",n,e.logger)}return}}this.transmuxer=new aD(this.observer,l,s,"",n,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=oD++;const n=this.hls.config,i=EP(n.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:i,id:this.id,config:Dn(n)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),gne(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const n=this.transmuxer;n&&(n.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,n,i,r,s,a,l,f,c,h){var p,g;c.transmuxing.start=self.performance.now();const{instanceNo:x,transmuxer:b}=this,T=a?a.start:s.start,E=s.decryptdata,C=this.frag,I=!(C&&s.cc===C.cc),P=!(C&&c.level===C.level),M=C?c.sn-C.sn:-1,k=this.part?c.part-this.part.index:-1,z=M===0&&c.id>1&&c.id===C?.stats.chunkCount,F=!P&&(M===1||M===0&&(k===1||z&&k<=0)),G=self.performance.now();(P||M||s.stats.parsing.start===0)&&(s.stats.parsing.start=G),a&&(k||!F)&&(a.stats.parsing.start=G);const K=!(C&&((p=s.initSegment)==null?void 0:p.url)===((g=C.initSegment)==null?void 0:g.url)),V=new oie(I,F,f,P,T,K);if(!F||I||K){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${s.type} sn: ${c.sn}${c.part>-1?" part: "+c.part:""} ${this.id===et.MAIN?"level":"track"}: ${c.level} id: ${c.id}
        discontinuity: ${I}
        trackSwitch: ${P}
        contiguous: ${F}
        accurateTimeOffset: ${f}
        timeOffset: ${T}
        initSegmentChange: ${K}`);const Q=new aie(i,r,n,l,h);this.configureTransmuxer(Q)}if(this.frag=s,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:x,cmd:"demux",data:e,decryptdata:E,chunkMeta:c,state:V},e instanceof ArrayBuffer?[e]:[]);else if(b){const Q=b.push(e,E,c,V);$m(Q)?Q.then(J=>{this.handleTransmuxComplete(J)}).catch(J=>{this.transmuxerError(J,c,"transmuxer-interface push error")}):this.handleTransmuxComplete(Q)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:n,transmuxer:i}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:n,cmd:"flush",chunkMeta:e});else if(i){const r=i.flush(e);$m(r)?r.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")}):this.handleFlushResult(r,e)}}transmuxerError(e,n,i){this.hls&&(this.error=e,this.hls.trigger(B.ERROR,{type:at.MEDIA_ERROR,details:pe.FRAG_PARSING_ERROR,chunkMeta:n,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,n){e.forEach(i=>{this.handleTransmuxComplete(i)}),this.onFlush(n)}configureTransmuxer(e){const{instanceNo:n,transmuxer:i}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:n,cmd:"configure",config:e}):i&&i.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const lD=100;class lie extends iA{constructor(e,n,i){super(e,n,i,"audio-stream-controller",et.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(B.LEVEL_LOADED,this.onLevelLoaded,this),e.on(B.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(B.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(B.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(B.BUFFER_RESET,this.onBufferReset,this),e.on(B.BUFFER_CREATED,this.onBufferCreated,this),e.on(B.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(B.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(B.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(B.FRAG_LOADING,this.onFragLoading,this),e.on(B.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(B.LEVEL_LOADED,this.onLevelLoaded,this),e.off(B.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(B.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(B.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(B.BUFFER_RESET,this.onBufferReset,this),e.off(B.BUFFER_CREATED,this.onBufferCreated,this),e.off(B.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(B.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(B.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(B.FRAG_LOADING,this.onFragLoading,this),e.off(B.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:n,id:i,initPTS:r,timescale:s}){if(i===et.MAIN){const a=n.cc,l=this.fragCurrent;if(this.initPTS[a]={baseTime:r,timescale:s},this.log(`InitPTS for cc: ${a} found from main: ${r}/${s}`),this.mainAnchor=n,this.state===Re.WAITING_INIT_PTS){const f=this.waitingData;(!f&&!this.loadingParts||f&&f.frag.cc!==a)&&this.syncWithAnchor(n,f?.frag)}else!this.hls.hasEnoughToStart&&l&&l.cc!==a?(l.abortRequests(),this.syncWithAnchor(n,l)):this.state===Re.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,n){var i;const r=((i=this.mainFragLoading)==null?void 0:i.frag)||null;if(n&&r?.cc===n.cc)return;const s=(r||e).cc,a=this.getLevelDetails(),l=this.getLoadPosition(),f=vB(a,s,l);f&&(this.log(`Syncing with main frag at ${f.start} cc ${f.cc}`),this.startFragRequested=!1,this.nextLoadPosition=f.start,this.resetLoadingState(),this.state===Re.IDLE&&this.doTickIdle())}startLoad(e,n){if(!this.levels){this.startPosition=e,this.state=Re.STOPPED;return}const i=this.lastCurrentTime;this.stopLoad(),this.setInterval(lD),i>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i,this.state=Re.IDLE):this.state=Re.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}doTick(){switch(this.state){case Re.IDLE:this.doTickIdle();break;case Re.WAITING_TRACK:{const{levels:n,trackId:i}=this,r=n?.[i],s=r?.details;if(s&&!this.waitForLive(r)){if(this.waitForCdnTuneIn(s))break;this.state=Re.WAITING_INIT_PTS}break}case Re.FRAG_LOADING_WAITING_RETRY:{var e;const n=performance.now(),i=this.retryDate;if(!i||n>=i||(e=this.media)!=null&&e.seeking){const{levels:r,trackId:s}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(r?.[s]||null),this.state=Re.IDLE}break}case Re.WAITING_INIT_PTS:{const n=this.waitingData;if(n){const{frag:i,part:r,cache:s,complete:a}=n,l=this.mainAnchor;if(this.initPTS[i.cc]!==void 0){this.waitingData=null,this.state=Re.FRAG_LOADING;const f=s.flush().buffer,c={frag:i,part:r,payload:f,networkDetails:null};this._handleFragmentLoadProgress(c),a&&super._handleFragmentLoadComplete(c)}else l&&l.cc!==n.frag.cc&&this.syncWithAnchor(l,n.frag)}else this.state=Re.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:n,levels:i,media:r,trackId:s}=this,a=n.config;if(!this.buffering||!r&&!this.primaryPrefetch&&(this.startFragRequested||!a.startFragPrefetch)||!(i!=null&&i[s]))return;const l=i[s],f=l.details;if(!f||this.waitForLive(l)||this.waitForCdnTuneIn(f)){this.state=Re.WAITING_TRACK,this.startFragRequested=!1;return}const c=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&c&&(this.bufferFlushed=!1,this.afterBufferFlushed(c,xn.AUDIO,et.AUDIO));const h=this.getFwdBufferInfo(c,et.AUDIO);if(h===null)return;if(!this.switchingTrack&&this._streamEnded(h,f)){n.trigger(B.BUFFER_EOS,{type:"audio"}),this.state=Re.ENDED;return}const p=h.len,g=n.maxBufferLength,x=f.fragments,b=x[0].start,T=this.getLoadPosition(),E=this.flushing?T:h.end;if(this.switchingTrack&&r){const P=T;f.PTSKnown&&P<b&&(h.end>b||h.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=b+.05)}if(p>=g&&!this.switchingTrack&&E<x[x.length-1].start)return;let C=this.getNextFragment(E,f);if(C&&this.isLoopLoading(C,E)&&(C=this.getNextFragmentLoopLoading(C,f,h,et.MAIN,g)),!C){this.bufferFlushed=!0;return}let I=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&I&&oi(C)&&!C.endList&&(!f.live||!this.loadingParts&&E<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(I)===pi.OK&&(this.mainFragLoading=I=null),I&&oi(I))){if(C.start>I.end){const M=this.fragmentTracker.getFragAtPos(E,et.MAIN);M&&M.end>I.end&&(I=M,this.mainFragLoading={frag:M,targetBufferTime:null})}if(C.start>I.end)return}this.loadFragment(C,l,E)}onMediaDetaching(e,n){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,n)}onAudioTracksUpdated(e,{audioTracks:n}){this.resetTransmuxer(),this.levels=n.map(i=>new jm(i))}onAudioTrackSwitching(e,n){const i=!!n.url;this.trackId=n.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),i?(this.switchingTrack=n,this.flushAudioIfNeeded(n),this.state!==Re.STOPPED&&(this.setInterval(lD),this.state=Re.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=n,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,n){this.mainDetails=n.details;const i=this.cachedTrackLoadedData;i&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(B.AUDIO_TRACK_LOADED,i))}onAudioTrackLoaded(e,n){var i;const{levels:r}=this,{details:s,id:a,groupId:l,track:f}=n;if(!r){this.warn(`Audio tracks reset while loading track ${a} "${f.name}" of "${l}"`);return}const c=this.mainDetails;if(!c||s.endCC>c.endCC||c.expired){this.cachedTrackLoadedData=n,this.state!==Re.STOPPED&&(this.state=Re.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${a} "${f.name}" of "${l}" loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const h=r[a];let p=0;if(s.live||(i=h.details)!=null&&i.live){if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;if(h.details){var g;p=this.alignPlaylists(s,h.details,(g=this.levelLastLoaded)==null?void 0:g.details)}s.alignedSliding||(PB(s,c),s.alignedSliding||qv(s,c),p=s.fragmentStart)}h.details=s,this.levelLastLoaded=h,this.startFragRequested||this.setStartPosition(c,p),this.hls.trigger(B.AUDIO_TRACK_UPDATED,{details:s,id:a,groupId:n.groupId}),this.state===Re.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=Re.IDLE),this.tick()}_handleFragmentLoadProgress(e){var n;const i=e.frag,{part:r,payload:s}=e,{config:a,trackId:l,levels:f}=this;if(!f){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const c=f[l];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const h=c.details;if(!h){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(i.start);return}const p=a.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let g=this.transmuxer;g||(g=this.transmuxer=new XB(this.hls,et.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const x=this.initPTS[i.cc],b=(n=i.initSegment)==null?void 0:n.data;if(x!==void 0){const E=r?r.index:-1,C=E!==-1,I=new tA(i.level,i.sn,i.stats.chunkCount,s.byteLength,E,C);g.push(s,b,p,"",i,r,h.totalduration,!1,I,x)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${h.startSN} ,${h.endSN}],track ${l}`);const{cache:T}=this.waitingData=this.waitingData||{frag:i,part:r,cache:new DB,complete:!1};T.push(new Uint8Array(s)),this.state!==Re.STOPPED&&(this.state=Re.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,n){this.bufferFlushed=this.flushing=!1;const i=n.tracks.audio;i&&(this.mediaBuffer=i.buffer||null)}onFragLoading(e,n){!this.audioOnly&&n.frag.type===et.MAIN&&oi(n.frag)&&(this.mainFragLoading=n,this.state===Re.IDLE&&this.tick())}onFragBuffered(e,n){const{frag:i,part:r}=n;if(i.type!==et.AUDIO){!this.audioOnly&&i.type===et.MAIN&&!i.elementaryStreams.video&&!i.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${r?" p: "+r.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(oi(i)){this.fragPrevious=i;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(B.AUDIO_TRACK_SWITCHED,pn({},s)))}this.fragBufferedComplete(i,r),this.media&&this.tick()}onError(e,n){var i;if(n.fatal){this.state=Re.ERROR;return}switch(n.details){case pe.FRAG_GAP:case pe.FRAG_PARSING_ERROR:case pe.FRAG_DECRYPT_ERROR:case pe.FRAG_LOAD_ERROR:case pe.FRAG_LOAD_TIMEOUT:case pe.KEY_LOAD_ERROR:case pe.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(et.AUDIO,n);break;case pe.AUDIO_TRACK_LOAD_ERROR:case pe.AUDIO_TRACK_LOAD_TIMEOUT:case pe.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===Re.WAITING_TRACK&&((i=n.context)==null?void 0:i.type)===Mt.AUDIO_TRACK&&(this.state=Re.IDLE);break;case pe.BUFFER_ADD_CODEC_ERROR:case pe.BUFFER_APPEND_ERROR:if(n.parent!=="audio")return;this.reduceLengthAndFlushBuffer(n)||this.resetLoadingState();break;case pe.BUFFER_FULL_ERROR:if(n.parent!=="audio")return;this.reduceLengthAndFlushBuffer(n)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case pe.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onBufferFlushing(e,{type:n}){n!==xn.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:n}){if(n!==xn.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===Re.ENDED&&(this.state=Re.IDLE);const i=this.mediaBuffer||this.media;i&&(this.afterBufferFlushed(i,n,et.AUDIO),this.tick())}}_handleTransmuxComplete(e){var n;const i="audio",{hls:r}=this,{remuxResult:s,chunkMeta:a}=e,l=this.getCurrentContext(a);if(!l){this.resetWhenMissingContext(a);return}const{frag:f,part:c,level:h}=l,{details:p}=h,{audio:g,text:x,id3:b,initSegment:T}=s;if(this.fragContextChanged(f)||!p){this.fragmentTracker.removeFragment(f);return}if(this.state=Re.PARSING,this.switchingTrack&&g&&this.completeAudioSwitch(this.switchingTrack),T!=null&&T.tracks){const E=f.initSegment||f;this._bufferInitSegment(h,T.tracks,E,a),r.trigger(B.FRAG_PARSING_INIT_SEGMENT,{frag:E,id:i,tracks:T.tracks})}if(g){const{startPTS:E,endPTS:C,startDTS:I,endDTS:P}=g;c&&(c.elementaryStreams[xn.AUDIO]={startPTS:E,endPTS:C,startDTS:I,endDTS:P}),f.setElementaryStreamInfo(xn.AUDIO,E,C,I,P),this.bufferFragmentData(g,f,c,a)}if(b!=null&&(n=b.samples)!=null&&n.length){const E=cn({id:i,frag:f,details:p},b);r.trigger(B.FRAG_PARSING_METADATA,E)}if(x){const E=cn({id:i,frag:f,details:p},x);r.trigger(B.FRAG_PARSING_USERDATA,E)}}_bufferInitSegment(e,n,i,r){if(this.state!==Re.PARSING||(n.video&&delete n.video,n.audiovideo&&delete n.audiovideo,!n.audio))return;const s=n.audio;s.id=et.AUDIO;const a=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${a}/${s.codec}]`),a&&a.split(",").length===1&&(s.levelCodec=a),this.hls.trigger(B.BUFFER_CODECS,n);const l=s.initSegment;if(l!=null&&l.byteLength){const f={type:"audio",frag:i,part:null,chunkMeta:r,parent:i.type,data:l};this.hls.trigger(B.BUFFER_APPENDING,f)}this.tickImmediate()}loadFragment(e,n,i){const r=this.fragmentTracker.getState(e);if(this.switchingTrack||r===pi.NOT_LOADED||r===pi.PARTIAL){var s;if(!oi(e))this._loadInitSegment(e,n);else if((s=n.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=Re.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragmentStart!==n.details.fragmentStart&&qv(n.details,a)}else super.loadFragment(e,n,i)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:n,lang:i,assocLang:r,characteristics:s,audioCodec:a,channels:l}=this.bufferedTrack;Zc({name:n,lang:i,assocLang:r,characteristics:s,audioCodec:a,channels:l},e,Bc)||(zv(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:n}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,n.trigger(B.AUDIO_TRACK_SWITCHED,pn({},e))}}class fA extends io{constructor(e,n){super(n,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,n,i){const r=n?.renditionReports;if(r){let s=-1;for(let a=0;a<r.length;a++){const l=r[a];let f;try{f=new self.URL(l.URI,n.url).href}catch(c){this.warn(`Could not construct new URL for Rendition Report: ${c}`),f=l.URI||""}if(f===e){s=a;break}else f===e.substring(0,f.length)&&(s=a)}if(s!==-1){const a=r[s],l=parseInt(a["LAST-MSN"])||n?.lastPartSn;let f=parseInt(a["LAST-PART"])||n?.lastPartIndex;if(this.hls.config.lowLatencyMode){const h=Math.min(n.age-n.partTarget,n.targetduration);f>=0&&h>n.partTarget&&(f+=1)}const c=i&&TP(i);return new AP(l,f>=0?f:void 0,c)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,n){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,n){if(n)try{return n.addDirectives(e)}catch(i){this.warn(`Could not construct new URL with HLS Delivery Directives: ${i}`)}return e}playlistLoaded(e,n,i){const{details:r,stats:s}=n,a=self.performance.now(),l=s.loading.first?Math.max(0,a-s.loading.first):0;r.advancedDateTime=Date.now()-l;const f=this.hls.config.timelineOffset;if(f!==r.appliedTimelineOffset){const h=Math.max(f||0,0);r.appliedTimelineOffset=h,r.fragments.forEach(p=>{p.start=p.playlistOffset+h})}if(r.live||i!=null&&i.live){const h="levelInfo"in n?n.levelInfo:n.track;if(r.reloaded(i),i&&r.fragments.length>0){ine(i,r);const I=r.playlistParsingError;if(I){this.warn(I);const P=this.hls;if(!P.config.ignorePlaylistParsingErrors){var c;const{networkDetails:M}=n;P.trigger(B.ERROR,{type:at.NETWORK_ERROR,details:pe.LEVEL_PARSING_ERROR,fatal:!1,url:r.url,error:I,reason:I.message,level:n.level||void 0,parent:(c=r.fragments[0])==null?void 0:c.type,networkDetails:M,stats:s});return}r.playlistParsingError=null}}r.requestScheduled===-1&&(r.requestScheduled=s.loading.start);const p=this.hls.mainForwardBufferInfo,g=p?p.end-p.len:0,x=(r.edge-g)*1e3,b=wB(r,x);if(r.requestScheduled+b<a?r.requestScheduled=a:r.requestScheduled+=b,this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),!this.canLoad||!r.live)return;let T,E,C;if(r.canBlockReload&&r.endSN&&r.advanced){const I=this.hls.config.lowLatencyMode,P=r.lastPartSn,M=r.endSN,k=r.lastPartIndex,z=k!==-1,F=P===M;z?F?(E=M+1,C=I?0:k):(E=P,C=I?k+1:r.maxPartIndex):E=M+1;const G=r.age,K=G+r.ageHeader;let V=Math.min(K-r.partTarget,r.targetduration*1.5);if(V>0){if(K>r.targetduration*3)this.log(`Playlist last advanced ${G.toFixed(2)}s ago. Omitting segment and part directives.`),E=void 0,C=void 0;else if(i!=null&&i.tuneInGoal&&K-r.partTarget>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${V} with playlist age: ${r.age}`),V=0;else{const Q=Math.floor(V/r.targetduration);if(E+=Q,C!==void 0){const J=Math.round(V%r.targetduration/r.partTarget);C+=J}this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${G.toFixed(2)}s goal: ${V} skip sn ${Q} to part ${C}`)}r.tuneInGoal=V}if(T=this.getDeliveryDirectives(r,n.deliveryDirectives,E,C),I||!F){r.requestScheduled=a,this.loadingPlaylist(h,T);return}}else(r.canBlockReload||r.canSkipUntil)&&(T=this.getDeliveryDirectives(r,n.deliveryDirectives,E,C));T&&E!==void 0&&r.canBlockReload&&(r.requestScheduled=s.loading.first+Math.max(b-l*2,b/2)),this.scheduleLoading(h,T,r)}else this.clearTimer()}scheduleLoading(e,n,i){const r=i||e.details;if(!r){this.loadingPlaylist(e,n);return}const s=self.performance.now(),a=r.requestScheduled;if(s>=a){this.loadingPlaylist(e,n);return}const l=a-s;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(l)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,n),l)}getDeliveryDirectives(e,n,i,r){let s=TP(e);return n!=null&&n.skip&&e.deltaUpdateFailed&&(i=n.msn,r=n.part,s=Bg.No),new AP(i,r,s)}checkRetry(e){const n=e.details,i=Gv(e),r=e.errorAction,{action:s,retryCount:a=0,retryConfig:l}=r||{},f=!!r&&!!l&&(s===hr.RetryRequest||!r.resolved&&s===hr.SendAlternateToPenaltyBox);if(f){var c;if(a>=l.maxNumRetry)return!1;if(i&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${l.maxNumRetry} after "${n}" without delivery-directives`),this.loadPlaylist();else{const h=JT(l,a);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),h),this.warn(`Retrying playlist loading ${a+1}/${l.maxNumRetry} after "${n}" in ${h}ms`)}e.levelRetry=!0,r.resolved=!0}return f}}function QB(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!zm(t[n].attrs,e[n].attrs))return!1;return!0}function zm(t,e,n){const i=t["STABLE-RENDITION-ID"];return i&&!n?i===e["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(r=>t[r]!==e[r])}function NS(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}class uie extends fA{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.MANIFEST_PARSED,this.onManifestParsed,this),e.on(B.LEVEL_LOADING,this.onLevelLoading,this),e.on(B.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(B.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(B.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.MANIFEST_PARSED,this.onManifestParsed,this),e.off(B.LEVEL_LOADING,this.onLevelLoading,this),e.off(B.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(B.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(B.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.audioTracks||[]}onAudioTrackLoaded(e,n){const{id:i,groupId:r,details:s}=n,a=this.tracksInGroup[i];if(!a||a.groupId!==r){this.warn(`Audio track with id:${i} and group:${r} not found in active group ${a?.groupId}`);return}const l=a.details;a.details=n.details,this.log(`Audio track ${i} "${a.name}" lang:${a.lang} group:${r} loaded [${s.startSN}-${s.endSN}]`),i===this.trackId&&this.playlistLoaded(i,n,l)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const i=n.audioGroups||null,r=this.groupIds;let s=this.currentTrack;if(!i||r?.length!==i?.length||i!=null&&i.some(l=>r?.indexOf(l)===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const l=this.tracks.filter(g=>!i||i.indexOf(g.groupId)!==-1);if(l.length)this.selectDefaultTrack&&!l.some(g=>g.default)&&(this.selectDefaultTrack=!1),l.forEach((g,x)=>{g.id=x});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=l;const f=this.hls.config.audioPreference;if(!s&&f){const g=Do(f,l,Bc);if(g>-1)s=l[g];else{const x=Do(f,this.tracks);s=this.tracks[x]}}let c=this.findTrackId(s);c===-1&&s&&(c=this.findTrackId(null));const h={audioTracks:l};this.log(`Updating audio tracks, ${l.length} track(s) found in group(s): ${i?.join(",")}`),this.hls.trigger(B.AUDIO_TRACKS_UPDATED,h);const p=this.trackId;if(c!==-1&&p===-1)this.setAudioTrack(c);else if(l.length&&p===-1){var a;const g=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${l.length}`);this.warn(g.message),this.hls.trigger(B.ERROR,{type:at.MEDIA_ERROR,details:pe.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:g})}}}onError(e,n){n.fatal||!n.context||n.context.type===Mt.AUDIO_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const n=this.hls;if(n.config.audioPreference=e,e){const i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){const r=this.currentTrack;if(r&&Zc(e,r,Bc))return r;const s=Do(e,this.tracksInGroup,Bc);if(s>-1){const a=this.tracksInGroup[s];return this.setAudioTrack(s),a}else if(r){let a=n.loadLevel;a===-1&&(a=n.firstAutoLevel);const l=Ste(e,n.levels,i,a,Bc);if(l===-1)return null;n.nextLoadLevel=l}if(e.channels||e.audioCodec){const a=Do(e,i);if(a>-1)return i[a]}}}return null}setAudioTrack(e){const n=this.tracksInGroup;if(e<0||e>=n.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const i=this.currentTrack,r=n[e],s=r.details&&!r.details.live;if(e===this.trackId&&r===i&&s||(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger(B.AUDIO_TRACK_SWITCHING,pn({},r)),s))return;const a=this.switchParams(r.url,i?.details,r.details);this.loadPlaylist(a)}findTrackId(e){const n=this.tracksInGroup;for(let i=0;i<n.length;i++){const r=n[i];if(!(this.selectDefaultTrack&&!r.default)&&(!e||Zc(e,r,Bc)))return i}if(e){const{name:i,lang:r,assocLang:s,characteristics:a,audioCodec:l,channels:f}=e;for(let c=0;c<n.length;c++){const h=n[c];if(Zc({name:i,lang:r,assocLang:s,characteristics:a,audioCodec:l,channels:f},h,Bc))return c}for(let c=0;c<n.length;c++){const h=n[c];if(zm(e.attrs,h.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<n.length;c++){const h=n[c];if(zm(e.attrs,h.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){super.loadPlaylist();const n=this.currentTrack;this.shouldLoadPlaylist(n)&&zv(n.url,this.hls)&&this.scheduleLoading(n,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const i=e.id,r=e.groupId,s=this.getUrlWithDirectives(e.url,n),a=e.details,l=a?.age;this.log(`Loading audio-track ${i} "${e.name}" lang:${e.lang} group:${r}${n?.msn!==void 0?" at sn "+n.msn+" part "+n.part:""}${l&&a.live?" age "+l.toFixed(1)+(a.type&&" "+a.type||""):""} ${s}`),this.hls.trigger(B.AUDIO_TRACK_LOADING,{url:s,id:i,groupId:r,deliveryDirectives:n||null,track:e})}}class cie{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,n,i){if(this.queues===null||this.tracks===null)return;const r=this.queues[n];r.push(e),r.length===1&&!i&&this.executeNext(n)}appendBlocker(e){return new Promise(n=>{const i={label:"async-blocker",execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(i,e)})}prependBlocker(e){return new Promise(n=>{if(this.queues){const i={label:"async-blocker-prepend",execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(i)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var n;const i=(n=e[0])==null?void 0:n.label;(i==="async-blocker"||i==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const n=this.queues[e];if(n.length){const r=n[0];try{r.execute()}catch(s){var i;if(r.onError(s),this.queues===null||this.tracks===null)return;const a=(i=this.tracks[e])==null?void 0:i.buffer;a!=null&&a.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var n;return((n=this.queues)==null?void 0:n[e][0])||null}toString(){const{queues:e,tracks:n}=this;return e===null||n===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var n,i;return(n=this.queues)!=null&&n[e]||(i=this.tracks)!=null&&i[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var n;const i=(n=this.tracks)==null?void 0:n[e],r=i?.buffer;return r?`SourceBuffer${r.updating?" updating":""}${i.ended?" ended":""}${i.ending?" ending":""}`:"none"}listOps(e){var n;return((n=this.queues)==null?void 0:n[e].map(i=>i.label).join(", "))||""}}const uD=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,JB="HlsJsTrackRemovedError";class fie extends Error{constructor(e){super(e),this.name=JB}}class die extends io{constructor(e,n){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=i=>{var r;this.hls&&((r=this.mediaSource)==null?void 0:r.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=i=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=i=>{const{media:r,mediaSource:s}=this;i&&this.log("Media source opened"),!(!r||!s)&&(s.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(B.MEDIA_ATTACHED,{media:r,mediaSource:s}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:i,_objectUrl:r}=this;i!==r&&this.error(`Media element src was set while attaching MediaSource (${r} > ${i})`)},this.hls=e,this.fragmentTracker=n,this.appendSource=Fee(Zu(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.MANIFEST_PARSED,this.onManifestParsed,this),e.on(B.BUFFER_RESET,this.onBufferReset,this),e.on(B.BUFFER_APPENDING,this.onBufferAppending,this),e.on(B.BUFFER_CODECS,this.onBufferCodecs,this),e.on(B.BUFFER_EOS,this.onBufferEos,this),e.on(B.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(B.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(B.FRAG_PARSED,this.onFragParsed,this),e.on(B.FRAG_CHANGED,this.onFragChanged,this),e.on(B.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.MANIFEST_PARSED,this.onManifestParsed,this),e.off(B.BUFFER_RESET,this.onBufferReset,this),e.off(B.BUFFER_APPENDING,this.onBufferAppending,this),e.off(B.BUFFER_CODECS,this.onBufferCodecs,this),e.off(B.BUFFER_EOS,this.onBufferEos,this),e.off(B.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(B.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(B.FRAG_PARSED,this.onFragParsed,this),e.off(B.FRAG_CHANGED,this.onFragChanged,this),e.off(B.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:n}=this;if(!e)return null;const i={};if(this.operationQueue){const s=this.isUpdating();s||this.operationQueue.removeBlockers();const a=this.isQueued();(s||a)&&this.warn(`Transfering MediaSource with${a?" operations in queue":""}${s?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const r=this.transferData;return!this.sourceBufferCount&&r&&r.mediaSource===n?cn(i,r.tracks):this.sourceBuffers.forEach(s=>{const[a]=s;a&&(i[a]=cn({},this.tracks[a]),this.removeBuffer(a)),s[0]=s[1]=null}),{media:e,mediaSource:n,tracks:i}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,n){var i;let r=2;(n.audio&&!n.video||!n.altAudio)&&(r=1),this.bufferCodecEventsTotal=r,this.log(`${r} bufferCodec event(s) expected.`),(i=this.transferData)!=null&&i.mediaSource&&this.sourceBufferCount&&r&&this.bufferCreated()}onMediaAttaching(e,n){const i=this.media=n.media,r=Zu(this.appendSource);if(this.transferData=this.overrides=void 0,i&&r){const s=!!n.mediaSource;(s||n.overrides)&&(this.transferData=n,this.overrides=n.overrides);const a=this.mediaSource=n.mediaSource||new r;if(this.assignMediaSource(a),s)this._objectUrl=i.src,this.attachTransferred();else{const l=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{i.removeAttribute("src");const f=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||f&&a instanceof f,cD(i),hie(i,l),i.load()}catch{i.src=l}else i.src=l}i.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var n,i;this.log(`${((n=this.transferData)==null?void 0:n.mediaSource)===e?"transferred":"created"} media source: ${(i=e.constructor)==null?void 0:i.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,n=this.transferData;if(!n||!e)return;const i=this.tracks,r=n.tracks,s=r?Object.keys(r):null,a=s?s.length:0,l=()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()};if(r&&s&&a){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Dn(i,(f,c)=>f==="initSegment"?void 0:c)};
transfer tracks: ${Dn(r,(f,c)=>f==="initSegment"?void 0:c)}}`),!tB(r,i)){n.mediaSource=null,n.tracks=void 0;const f=e.currentTime,c=this.details,h=Math.max(f,c?.fragments[0].start||0);if(h-f>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${f} -> ${h}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(r)}"->"${Object.keys(i)}") start time: ${h} currentTime: ${f}`),this.onMediaDetaching(B.MEDIA_DETACHING,{}),this.onMediaAttaching(B.MEDIA_ATTACHING,n),e.currentTime=h;return}this.transferData=void 0,s.forEach(f=>{const c=f,h=r[c];if(h){const p=h.buffer;if(p){const g=this.fragmentTracker,x=h.id;if(g.hasFragments(x)||g.hasParts(x)){const E=wt.getBuffered(p);g.detectEvictedFragments(c,E,x,null,!0)}const b=a_(c),T=[c,p];this.sourceBuffers[b]=T,p.updating&&this.operationQueue&&this.operationQueue.prependBlocker(c),this.trackSourceBuffer(c,h)}}}),l(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),l()}get mediaSourceOpenOrEnded(){var e;const n=(e=this.mediaSource)==null?void 0:e.readyState;return n==="open"||n==="ended"}onMediaDetaching(e,n){const i=!!n.transferMedia;this.transferData=this.overrides=void 0;const{media:r,mediaSource:s,_objectUrl:a}=this;if(s){if(this.log(`media source ${i?"transferring":"detaching"}`),i)this.sourceBuffers.forEach(([l])=>{l&&this.removeBuffer(l)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const l=s.readyState==="open";try{const f=s.sourceBuffers;for(let c=f.length;c--;)l&&f[c].abort(),s.removeSourceBuffer(f[c]);l&&s.endOfStream()}catch(f){this.warn(`onMediaDetaching: ${f.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}s.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("sourceended",this._onMediaSourceEnded),s.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(s.removeEventListener("startstreaming",this._onStartStreaming),s.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}r&&(r.removeEventListener("emptied",this._onMediaEmptied),i||(a&&self.URL.revokeObjectURL(a),this.mediaSrc===a?(r.removeAttribute("src"),this.appendSource&&cD(r),r.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(B.MEDIA_DETACHED,n)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var n;const i=(n=this.tracks[e])==null?void 0:n.buffer;if(this.removeBuffer(e),i)try{var r;(r=this.mediaSource)!=null&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(i)}catch(s){this.warn(`onBufferReset ${e}`,s)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[a_(e)]=[null,null];const n=this.tracks[e];n&&(n.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new cie(this.tracks)}onBufferCodecs(e,n){const i=this.tracks,r=Object.keys(n);this.log(`BUFFER_CODECS: "${r}" (current SB count ${this.sourceBufferCount})`);const s="audiovideo"in n&&(i.audio||i.video)||i.audiovideo&&("audio"in n||"video"in n),a=!s&&this.sourceBufferCount&&this.media&&r.some(l=>!i[l]);if(s||a){this.warn(`Unsupported transition between "${Object.keys(i)}" and "${r}" SourceBuffers`);return}r.forEach(l=>{var f,c,h;const p=n[l],{id:g,codec:x,levelCodec:b,container:T,metadata:E,supplemental:C}=p;let I=i[l];const P=(f=this.transferData)==null||(c=f.tracks)==null?void 0:c[l],M=P!=null&&P.buffer?P:I,k=M?.pendingCodec||M?.codec,z=M?.levelCodec;I||(I=i[l]={buffer:void 0,listeners:[],codec:x,supplemental:C,container:T,levelCodec:b,metadata:E,id:g});const F=jg(k,z),G=F?.replace(uD,"$1");let K=jg(x,b);const V=(h=K)==null?void 0:h.replace(uD,"$1");K&&F&&G!==V&&(l.slice(0,5)==="audio"&&(K=Uv(K,this.appendSource)),this.log(`switching codec ${k} to ${K}`),K!==(I.pendingCodec||I.codec)&&(I.pendingCodec=K),I.container=T,this.appendChangeType(l,T,K))}),(this.tracksReady||this.sourceBufferCount)&&(n.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,n)=>{const i=this.tracks[n];return e[n]={id:i.id,container:i.container,codec:i.codec,levelCodec:i.levelCodec},e},{})}appendChangeType(e,n,i){const r=`${n};codecs=${i}`,s={label:`change-type=${r}`,execute:()=>{const a=this.tracks[e];if(a){const l=a.buffer;l!=null&&l.changeType&&(this.log(`changing ${e} sourceBuffer type to ${r}`),l.changeType(r),a.codec=i,a.container=n)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn(`Failed to change ${e} SourceBuffer type`,a)}};this.append(s,e,this.isPending(this.tracks[e]))}blockAudio(e){var n;const i=e.start,r=i+e.duration*.05;if(((n=this.fragmentTracker.getAppendedFrag(i,et.MAIN))==null?void 0:n.gap)===!0)return;const a={label:"block-audio",execute:()=>{var l;const f=this.tracks.video;(this.lastVideoAppendEnd>r||f!=null&&f.buffer&&wt.isBuffered(f.buffer,r)||((l=this.fragmentTracker.getAppendedFrag(r,et.MAIN))==null?void 0:l.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:l=>{this.warn("Error executing block-audio operation",l)}};this.blockedAudioAppend={op:a,frag:e},this.append(a,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:n}=this;e&&n&&(this.blockedAudioAppend=null,n.unblockAudio(e.op))}onBufferAppending(e,n){const{tracks:i}=this,{data:r,type:s,parent:a,frag:l,part:f,chunkMeta:c,offset:h}=n,p=c.buffering[s],{sn:g,cc:x}=l,b=self.performance.now();p.start=b;const T=l.stats.buffering,E=f?f.stats.buffering:null;T.start===0&&(T.start=b),E&&E.start===0&&(E.start=b);const C=i.audio;let I=!1;s==="audio"&&C?.container==="audio/mpeg"&&(I=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const P=i.video,M=P?.buffer;if(M&&g!=="initSegment"){const F=f||l,G=this.blockedAudioAppend;if(s==="audio"&&a!=="main"&&!this.blockedAudioAppend){const V=F.start+F.duration*.05,Q=M.buffered,J=this.currentOp("video");!Q.length&&!J?this.blockAudio(F):!J&&!wt.isBuffered(M,V)&&this.lastVideoAppendEnd<V&&this.blockAudio(F)}else if(s==="video"){const K=F.end;if(G){const V=G.frag.start;(K>V||K<this.lastVideoAppendEnd||wt.isBuffered(M,V))&&this.unblockAudio()}this.lastVideoAppendEnd=K}}const k=(f||l).start,z={label:`append-${s}`,execute:()=>{var F;p.executeStart=self.performance.now();const G=(F=this.tracks[s])==null?void 0:F.buffer;G&&(I?this.updateTimestampOffset(G,k,.1,s,g,x):h!==void 0&&qe(h)&&this.updateTimestampOffset(G,h,1e-6,s,g,x)),this.appendExecutor(r,s)},onStart:()=>{},onComplete:()=>{const F=self.performance.now();p.executeEnd=p.end=F,T.first===0&&(T.first=F),E&&E.first===0&&(E.first=F);const G={};this.sourceBuffers.forEach(([K,V])=>{K&&(G[K]=wt.getBuffered(V))}),this.appendErrors[s]=0,s==="audio"||s==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(B.BUFFER_APPENDED,{type:s,frag:l,part:f,chunkMeta:c,parent:l.type,timeRanges:G})},onError:F=>{var G;const K={type:at.MEDIA_ERROR,parent:l.type,details:pe.BUFFER_APPEND_ERROR,sourceBufferName:s,frag:l,part:f,chunkMeta:c,error:F,err:F,fatal:!1},V=(G=this.media)==null?void 0:G.error;if(F.code===DOMException.QUOTA_EXCEEDED_ERR||F.name=="QuotaExceededError"||"quota"in F)K.details=pe.BUFFER_FULL_ERROR;else if(F.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!V)K.errorAction=Bm(!0);else if(F.name===JB&&this.sourceBufferCount===0)K.errorAction=Bm(!0);else{const Q=++this.appendErrors[s];this.warn(`Failed ${Q}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${s}" sourceBuffer (${V||"no media error"})`),(Q>=this.hls.config.appendErrorMaxRetry||V)&&(K.fatal=!0)}this.hls.trigger(B.ERROR,K)}};this.append(z,s,this.isPending(this.tracks[s]))}getFlushOp(e,n,i){return this.log(`queuing "${e}" remove ${n}-${i}`),{label:"remove",execute:()=>{this.removeExecutor(e,n,i)},onStart:()=>{},onComplete:()=>{this.hls.trigger(B.BUFFER_FLUSHED,{type:e})},onError:r=>{this.warn(`Failed to remove ${n}-${i} from "${e}" SourceBuffer`,r)}}}onBufferFlushing(e,n){const{type:i,startOffset:r,endOffset:s}=n;i?this.append(this.getFlushOp(i,r,s),i):this.sourceBuffers.forEach(([a])=>{a&&this.append(this.getFlushOp(a,r,s),a)})}onFragParsed(e,n){const{frag:i,part:r}=n,s=[],a=r?r.elementaryStreams:i.elementaryStreams;a[xn.AUDIOVIDEO]?s.push("audiovideo"):(a[xn.AUDIO]&&s.push("audio"),a[xn.VIDEO]&&s.push("video"));const l=()=>{const f=self.performance.now();i.stats.buffering.end=f,r&&(r.stats.buffering.end=f);const c=r?r.stats:i.stats;this.hls.trigger(B.FRAG_BUFFERED,{frag:i,part:r,stats:c,id:i.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers(l,s).catch(f=>{this.warn(`Fragment buffered callback ${f}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,n){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var n,i;return e&&(!((n=this.tracks[e])!=null&&n.ended)||((i=this.tracks[e])==null?void 0:i.ending))})}onBufferEos(e,n){var i;this.sourceBuffers.forEach(([a])=>{if(a){const l=this.tracks[a];(!n.type||n.type===a)&&(l.ending=!0,l.ended||(l.ended=!0,this.log(`${a} buffer reached EOS`)))}});const r=((i=this.overrides)==null?void 0:i.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([a])=>{var l;return a&&!((l=this.tracks[a])!=null&&l.ended)})&&(r?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:a}=this;if(!a||a.readyState!=="open"){a&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${a.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),a.endOfStream(),this.hls.trigger(B.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(B.BUFFERED_TO_END,void 0)))}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const n=this.tracks[e];n&&(n.ending=!1)}})}onLevelUpdated(e,{details:n}){n.fragments.length&&(this.details=n,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,n){if(n.details===pe.BUFFER_APPEND_ERROR&&n.frag){var i;const r=(i=n.errorAction)==null?void 0:i.nextAutoLevel;qe(r)&&r!==n.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:n,media:i}=this;if(!i||n===null||!this.sourceBufferCount)return;const r=e.config,s=i.currentTime,a=n.levelTargetDuration,l=n.live&&r.liveBackBufferLength!==null?r.liveBackBufferLength:r.backBufferLength;if(qe(l)&&l>=0){const f=Math.max(l,a),c=Math.floor(s/a)*a-f;this.flushBackBuffer(s,a,c)}if(qe(r.frontBufferFlushThreshold)&&r.frontBufferFlushThreshold>0){const f=Math.max(r.maxBufferLength,r.frontBufferFlushThreshold),c=Math.max(f,a),h=Math.floor(s/a)*a+c;this.flushFrontBuffer(s,a,h)}}flushBackBuffer(e,n,i){this.sourceBuffers.forEach(([r,s])=>{if(s){const l=wt.getBuffered(s);if(l.length>0&&i>l.start(0)){var a;this.hls.trigger(B.BACK_BUFFER_REACHED,{bufferEnd:i});const f=this.tracks[r];if((a=this.details)!=null&&a.live)this.hls.trigger(B.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i});else if(f!=null&&f.ended){this.log(`Cannot flush ${r} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(B.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:r})}}})}flushFrontBuffer(e,n,i){this.sourceBuffers.forEach(([r,s])=>{if(s){const a=wt.getBuffered(s),l=a.length;if(l<2)return;const f=a.start(l-1),c=a.end(l-1);if(i>f||e>=f&&e<=c)return;this.hls.trigger(B.BUFFER_FLUSHING,{startOffset:f,endOffset:1/0,type:r})}})}getDurationAndRange(){var e;const{details:n,mediaSource:i}=this;if(!n||!this.media||i?.readyState!=="open")return null;const r=n.edge;if(n.live&&this.hls.config.liveDurationInfinity){if(n.fragments.length&&n.live&&i.setLiveSeekableRange){const c=Math.max(0,n.fragmentStart),h=Math.max(c,r);return{duration:1/0,start:c,end:h}}return{duration:1/0}}const s=(e=this.overrides)==null?void 0:e.duration;if(s)return qe(s)?{duration:s}:null;const a=this.media.duration,l=qe(i.duration)?i.duration:0;return r>l&&r>a||!qe(a)?{duration:r}:null}updateMediaSource({duration:e,start:n,end:i}){const r=this.mediaSource;!this.media||!r||r.readyState!=="open"||(r.duration!==e&&(qe(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),r.duration=e),n!==void 0&&i!==void 0&&(this.log(`MediaSource duration is set to ${r.duration}. Setting seekable range to ${n}-${i}.`),r.setLiveSeekableRange(n,i)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:n,tracks:i}=this;if(this.log(`checkPendingTracks (pending: ${n} codec events expected: ${e}) ${Dn(i)}`),this.tracksReady){var r;const s=(r=this.transferData)==null?void 0:r.tracks;s&&Object.keys(s).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([n,i])=>{if(n){const r=this.tracks[n];e[n]={buffer:i,container:r.container,codec:r.codec,supplemental:r.supplemental,levelCodec:r.levelCodec,id:r.id,metadata:r.metadata}}}),this.hls.trigger(B.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([n])=>{this.executeNext(n)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(B.ERROR,{type:at.MEDIA_ERROR,details:pe.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:n,mediaSource:i}=this;if(!i)throw new Error("createSourceBuffers called when mediaSource was null");for(const s in e){const a=s,l=e[a];if(this.isPending(l)){const f=this.getTrackCodec(l,a),c=`${l.container};codecs=${f}`;l.codec=f,this.log(`creating sourceBuffer(${c})${this.currentOp(a)?" Queued":""} ${Dn(l)}`);try{const h=i.addSourceBuffer(c),p=a_(a),g=[a,h];n[p]=g,l.buffer=h}catch(h){var r;this.error(`error while trying to add sourceBuffer: ${h.message}`),this.shiftAndExecuteNext(a),(r=this.operationQueue)==null||r.removeBlockers(),delete this.tracks[a],this.hls.trigger(B.ERROR,{type:at.MEDIA_ERROR,details:pe.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:h,sourceBufferName:a,mimeType:c,parent:l.id});return}this.trackSourceBuffer(a,l)}}this.bufferCreated()}getTrackCodec(e,n){const i=e.supplemental;let r=e.codec;i&&(n==="video"||n==="audiovideo")&&wS(i,"video")&&(r=ste(r,i));const s=jg(r,e.levelCodec);return s?n.slice(0,5)==="audio"?Uv(s,this.appendSource):s:""}trackSourceBuffer(e,n){const i=n.buffer;if(!i)return;const r=this.getTrackCodec(n,e);this.tracks[e]={buffer:i,codec:r,container:n.container,levelCodec:n.levelCodec,supplemental:n.supplemental,metadata:n.metadata,id:n.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(s,a)=>{const l=a.removedRanges;l!=null&&l.length&&this.hls.trigger(B.BUFFER_FLUSHED,{type:s})})}get mediaSrc(){var e,n;const i=((e=this.media)==null||(n=e.querySelector)==null?void 0:n.call(e,"source"))||this.media;return i?.src}onSBUpdateStart(e){const n=this.currentOp(e);n&&n.onStart()}onSBUpdateEnd(e){var n;if(((n=this.mediaSource)==null?void 0:n.readyState)==="closed"){this.resetBuffer(e);return}const i=this.currentOp(e);i&&(i.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,n){var i;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(i=this.mediaSource)==null?void 0:i.readyState}`);this.error(`${r}`,n),this.hls.trigger(B.ERROR,{type:at.MEDIA_ERROR,details:pe.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const s=this.currentOp(e);s&&s.onError(r)}updateTimestampOffset(e,n,i,r,s,a){const l=n-e.timestampOffset;Math.abs(l)>=i&&(this.log(`Updating ${r} SourceBuffer timestampOffset to ${n} (sn: ${s} cc: ${a})`),e.timestampOffset=n)}removeExecutor(e,n,i){const{media:r,mediaSource:s}=this,a=this.tracks[e],l=a?.buffer;if(!r||!s||!l){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const f=qe(r.duration)?r.duration:1/0,c=qe(s.duration)?s.duration:1/0,h=Math.max(0,n),p=Math.min(i,f,c);p>h&&(!a.ending||a.ended)?(a.ended=!1,this.log(`Removing [${h},${p}] from the ${e} SourceBuffer`),l.remove(h,p)):this.shiftAndExecuteNext(e)}appendExecutor(e,n){const i=this.tracks[n],r=i?.buffer;if(!r)throw new fie(`Attempting to append to the ${n} SourceBuffer, but it does not exist`);i.ending=!1,i.ended=!1,r.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(n=>{this.warn(`SourceBuffer blocked callback ${n}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(n){this.warn(`Callback run without blocking ${this.operationQueue} ${n}`)}}isUpdating(){return this.sourceBuffers.some(([e,n])=>e&&n.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,n=this.sourceBufferTypes){if(!n.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:i}=this,r=n.map(a=>this.appendBlocker(a));return n.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(r).then(a=>{i===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(n=>{var i;const r=(i=this.tracks[n])==null?void 0:i.buffer;!r||r.updating||this.shiftAndExecuteNext(n)})}append(e,n,i){this.operationQueue&&this.operationQueue.append(e,n,i)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,n)=>e+(this.isPending(this.tracks[n])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[n])=>e+(n?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,n,i){const r=this.tracks[e];if(!r)return;const s=r.buffer;if(!s)return;const a=i.bind(this,e);r.listeners.push({event:n,listener:a}),s.addEventListener(n,a)}removeBufferListeners(e){const n=this.tracks[e];if(!n)return;const i=n.buffer;i&&(n.listeners.forEach(r=>{i.removeEventListener(r.event,r.listener)}),n.listeners.length=0)}}function cD(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(n=>{t.removeChild(n)})}function hie(t,e){const n=self.document.createElement("source");n.type="video/mp4",n.src=e,t.appendChild(n)}function a_(t){return t==="audio"?1:0}class dA{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(B.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(B.MANIFEST_PARSED,this.onManifestParsed,this),e.on(B.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(B.BUFFER_CODECS,this.onBufferCodecs,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(B.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(B.MANIFEST_PARSED,this.onManifestParsed,this),e.off(B.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(B.BUFFER_CODECS,this.onBufferCodecs,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,n){const i=this.hls.levels[n.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,n){this.media=n.media instanceof HTMLVideoElement?n.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,n){const i=this.hls;this.restrictedLevels=[],this.firstLevel=n.firstLevel,i.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onLevelsUpdated(e,n){this.timer&&qe(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,n){this.hls.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const n=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&n.logger.log(`Setting autoLevelCapping to ${i}: ${e[i].height}p@${e[i].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),n.autoLevelCapping=i,n.autoLevelEnabled&&n.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=n.autoLevelCapping}}}getMaxLevel(e){const n=this.hls.levels;if(!n.length)return-1;const i=n.filter((r,s)=>this.isLevelAllowed(r)&&s<=e);return this.clientRect=null,dA.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,n={width:0,height:0};if(e){const i=e.getBoundingClientRect();n.width=i.width,n.height=i.height,!n.width&&!n.height&&(n.width=i.right-i.left||e.width||0,n.height=i.bottom-i.top||e.height||0)}return this.clientRect=n,n}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(i=>e.bitrate===i.bitrate&&e.width===i.width&&e.height===i.height)}static getMaxLevelByMediaSize(e,n,i){if(!(e!=null&&e.length))return-1;const r=(l,f)=>f?l.width!==f.width||l.height!==f.height:!0;let s=e.length-1;const a=Math.max(n,i);for(let l=0;l<e.length;l+=1){const f=e[l];if((f.width>=a||f.height>=a)&&r(f,e[l+1])){s=l;break}}return s}}const mie={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Vr=mie,pie={HLS:"h"},gie=pie,vie="CMCD-Object",yie="CMCD-Request",bie="CMCD-Session",xie="CMCD-Status",cm={OBJECT:vie,REQUEST:yie,SESSION:bie,STATUS:xie},_ie={[cm.OBJECT]:["br","ab","d","ot","tb","tpb","lb","tab","lab","url"],[cm.REQUEST]:["pb","bl","tbl","dl","ltc","mtp","nor","nrr","rc","sn","sta","su","ttfb","ttfbb","ttlb","cmsdd","cmsds","smrt","df","cs"],[cm.SESSION]:["cid","pr","sf","sid","st","v","msd"],[cm.STATUS]:["bs","bsd","cdn","rtp","bg","pt","ec","e"]};class Ud{constructor(e,n){Array.isArray(e)&&(e=e.map(i=>i instanceof Ud?i:new Ud(i))),this.value=e,this.params=n}}const Sie="Dict";function Eie(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function Tie(t,e,n,i){return new Error(`failed to ${t} "${Eie(e)}" as ${n}`,{cause:i})}function Bo(t,e,n){return Tie("serialize",t,e,n)}class eF{constructor(e){this.description=e}}const fD="Bare Item",Aie="Boolean";function wie(t){if(typeof t!="boolean")throw Bo(t,Aie);return t?"?1":"?0"}function Lie(t){return btoa(String.fromCharCode(...t))}const Cie="Byte Sequence";function Oie(t){if(ArrayBuffer.isView(t)===!1)throw Bo(t,Cie);return`:${Lie(t)}:`}const Rie="Integer";function Pie(t){return t<-999999999999999||999999999999999<t}function tF(t){if(Pie(t))throw Bo(t,Rie);return t.toString()}function Die(t){return`@${tF(t.getTime()/1e3)}`}function nF(t,e){if(t<0)return-nF(-t,e);const n=Math.pow(10,e);if(Math.abs(t*n%1-.5)<Number.EPSILON){const r=Math.floor(t*n);return(r%2===0?r:r+1)/n}else return Math.round(t*n)/n}const Iie="Decimal";function Mie(t){const e=nF(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Bo(t,Iie);const n=e.toString();return n.includes(".")?n:`${n}.0`}const kie="String",Nie=/[\x00-\x1f\x7f]+/;function jie(t){if(Nie.test(t))throw Bo(t,kie);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Bie(t){return t.description||t.toString().slice(7,-1)}const Fie="Token";function dD(t){const e=Bie(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Bo(e,Fie);return e}function jS(t){switch(typeof t){case"number":if(!qe(t))throw Bo(t,fD);return Number.isInteger(t)?tF(t):Mie(t);case"string":return jie(t);case"symbol":return dD(t);case"boolean":return wie(t);case"object":if(t instanceof Date)return Die(t);if(t instanceof Uint8Array)return Oie(t);if(t instanceof eF)return dD(t);default:throw Bo(t,fD)}}const Uie="Key";function BS(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw Bo(t,Uie);return t}function hA(t){return t==null?"":Object.entries(t).map(([e,n])=>n===!0?`;${BS(e)}`:`;${BS(e)}=${jS(n)}`).join("")}function iF(t){return t instanceof Ud?`${jS(t.value)}${hA(t.params)}`:jS(t)}function $ie(t){return`(${t.value.map(iF).join(" ")})${hA(t.params)}`}function zie(t,e={whitespace:!0}){if(typeof t!="object")throw Bo(t,Sie);const n=t instanceof Map?t.entries():Object.entries(t),i=e?.whitespace?" ":"";return Array.from(n).map(([r,s])=>{s instanceof Ud||(s=new Ud(s));let a=BS(r);return s.value===!0?a+=hA(s.params):(a+="=",Array.isArray(s.value)?a+=$ie(s):a+=iF(s)),a}).join(`,${i}`)}function Gie(t,e){return zie(t,e)}function Hie(t){return["ot","sf","st","e","sta"].includes(t)}function Kie(t){return typeof t=="number"?qe(t):t!=null&&t!==""&&t!==!1}function qie(t,e){const n=new URL(t),i=new URL(e);if(n.origin!==i.origin)return t;const r=n.pathname.split("/").slice(1),s=i.pathname.split("/").slice(1,-1);for(;r[0]===s[0];)r.shift(),s.shift();for(;s.length;)s.shift(),r.unshift("..");return r.join("/")}const zg=t=>Math.round(t),Vie=(t,e)=>(e?.baseUrl&&(t=qie(t,e.baseUrl)),encodeURIComponent(t)),wg=t=>zg(t/100)*100,Yie={br:zg,d:zg,bl:wg,dl:wg,mtp:wg,nor:Vie,rtp:wg,tb:zg};function Wie(t,e){const n={};if(t==null||typeof t!="object")return n;const i=Object.keys(t).sort(),r=cn({},Yie,e?.formatters),s=e?.filter;return i.forEach(a=>{if(s?.(a)===!1)return;let l=t[a];const f=r[a];f&&(l=f(l,e)),!(a==="v"&&l===1)&&(a=="pr"&&l===1||Kie(l)&&(Hie(a)&&typeof l=="string"&&(l=new eF(l)),n[a]=l))}),n}function rF(t,e={}){return t?Gie(Wie(t,e),cn({whitespace:!1},e)):""}function Zie(t,e={}){const n={};if(!t)return n;const i=Object.entries(t),r=Object.entries(_ie).concat(Object.entries(e?.customHeaderMap||{})),s=i.reduce((a,l)=>{var f,c;const[h,p]=l,g=((f=r.find(x=>x[1].includes(h)))===null||f===void 0?void 0:f[0])||cm.REQUEST;return(c=a[g])!==null&&c!==void 0||(a[g]={}),a[g][h]=p,a},{});return Object.entries(s).reduce((a,[l,f])=>(a[l]=rF(f,e),a),n)}function Xie(t,e,n){return cn(t,Zie(e,n))}const Qie="CMCD";function Jie(t,e={}){if(!t)return"";const n=rF(t,e);return`${Qie}=${encodeURIComponent(n)}`}const hD=/CMCD=[^&#]+/;function ere(t,e,n){const i=Jie(e,n);if(!i)return t;if(hD.test(t))return t.replace(hD,i);const r=t.includes("?")?"&":"?";return`${t}${r}${i}`}class tre{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=r=>{try{this.apply(r,{ot:Vr.MANIFEST,su:!this.initialized})}catch(s){this.hls.logger.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=r=>{try{const{frag:s,part:a}=r,l=this.hls.levels[s.level],f=this.getObjectType(s),c={d:(a||s).duration*1e3,ot:f};(f===Vr.VIDEO||f===Vr.AUDIO||f==Vr.MUXED)&&(c.br=l.bitrate/1e3,c.tb=this.getTopBandwidth(f)/1e3,c.bl=this.getBufferLength(f));const h=a?this.getNextPart(a):this.getNextFrag(s);h!=null&&h.url&&h.url!==s.url&&(c.nor=h.url),this.apply(r,c)}catch(s){this.hls.logger.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const n=this.config=e.config,{cmcd:i}=n;i!=null&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||e.sessionId,this.cid=i.contentId,this.useHeaders=i.useHeaders===!0,this.includeKeys=i.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(B.MEDIA_DETACHED,this.onMediaDetached,this),e.on(B.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(B.MEDIA_DETACHED,this.onMediaDetached,this),e.off(B.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,n){var i,r;this.audioBuffer=(i=n.tracks.audio)==null?void 0:i.buffer,this.videoBuffer=(r=n.tracks.video)==null?void 0:r.buffer}createData(){var e;return{v:1,sf:gie.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,n={}){cn(n,this.createData());const i=n.ot===Vr.INIT||n.ot===Vr.VIDEO||n.ot===Vr.MUXED;this.starved&&i&&(n.bs=!0,n.su=!0,this.starved=!1),n.su==null&&(n.su=this.buffering);const{includeKeys:r}=this;r&&(n=Object.keys(n).reduce((a,l)=>(r.includes(l)&&(a[l]=n[l]),a),{}));const s={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),Xie(e.headers,n,s)):e.url=ere(e.url,n,s)}getNextFrag(e){var n;const i=(n=this.hls.levels[e.level])==null?void 0:n.details;if(i){const r=e.sn-i.startSN;return i.fragments[r+1]}}getNextPart(e){var n,i;const{index:r,fragment:s}=e,a=(n=this.hls.levels[s.level])==null||(i=n.details)==null?void 0:i.partList;if(a){const{sn:l}=s;for(let f=a.length-1;f>=0;f--){const c=a[f];if(c.index===r&&c.fragment.sn===l)return a[f+1]}}}getObjectType(e){const{type:n}=e;if(n==="subtitle")return Vr.TIMED_TEXT;if(e.sn==="initSegment")return Vr.INIT;if(n==="audio")return Vr.AUDIO;if(n==="main")return this.hls.audioTracks.length?Vr.VIDEO:Vr.MUXED}getTopBandwidth(e){let n=0,i;const r=this.hls;if(e===Vr.AUDIO)i=r.audioTracks;else{const s=r.maxAutoLevel,a=s>-1?s+1:r.levels.length;i=r.levels.slice(0,a)}return i.forEach(s=>{s.bitrate>n&&(n=s.bitrate)}),n>0?n:NaN}getBufferLength(e){const n=this.media,i=e===Vr.AUDIO?this.audioBuffer:this.videoBuffer;return!i||!n?NaN:wt.bufferInfo(i,n.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,n=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new i(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,l){n(s),this.loader.load(s,a,l)}}}createFragmentLoader(){const{fLoader:e}=this.config,n=this.applyFragmentData,i=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new i(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,l){n(s),this.loader.load(s,a,l)}}}}const nre=3e5;class ire extends io{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(B.MANIFEST_PARSED,this.onManifestParsed,this),e.on(B.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(B.MANIFEST_PARSED,this.onManifestParsed,this),e.off(B.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,n)=>(e.indexOf(n.pathwayId)===-1&&e.push(n.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const n=this.levels;n&&(this.levels=n.filter(i=>i!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,n){const{contentSteering:i}=n;i!==null&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,n){this.audioTracks=n.audioTracks,this.subtitleTracks=n.subtitleTracks}onError(e,n){const{errorAction:i}=n;if(i?.action===hr.SendAlternateToPenaltyBox&&i.flags===qa.MoveAllAlternatesMatchingHost){const r=this.levels;let s=this._pathwayPriority,a=this.pathwayId;if(n.context){const{groupId:l,pathwayId:f,type:c}=n.context;l&&r?a=this.getPathwayForGroupId(l,c,a):f&&(a=f)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!s&&r&&(s=this.pathways()),s&&s.length>1&&(this.updatePathwayPriority(s),i.resolved=this.pathwayId!==a),n.details===pe.BUFFER_APPEND_ERROR&&!n.fatal?i.resolved=!0:i.resolved||this.warn(`Could not resolve ${n.details} ("${n.error.message}") with content-steering for Pathway: ${a} levels: ${r&&r.length} priorities: ${Dn(s)} penalized: ${Dn(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let n=this.getLevelsForPathway(this.pathwayId);if(n.length===0){const i=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),n=this.getLevelsForPathway(i),this.pathwayId=i}return n.length!==e.length&&this.log(`Found ${n.length}/${e.length} levels in Pathway "${this.pathwayId}"`),n}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(n=>e===n.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let n;const i=this.penalizedPathways,r=performance.now();Object.keys(i).forEach(s=>{r-i[s]>nre&&delete i[s]});for(let s=0;s<e.length;s++){const a=e[s];if(a in i)continue;if(a===this.pathwayId)return;const l=this.hls.nextLoadLevel,f=this.hls.levels[l];if(n=this.getLevelsForPathway(a),n.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,OB(n),this.hls.trigger(B.LEVELS_UPDATED,{levels:n});const c=this.hls.levels[l];f&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==f.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==f.bitrate&&this.log(`Unstable Pathways change from bitrate ${f.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=l);break}}}getPathwayForGroupId(e,n,i){const r=this.getLevelsForPathway(i).concat(this.levels||[]);for(let s=0;s<r.length;s++)if(n===Mt.AUDIO_TRACK&&r[s].hasAudioGroup(e)||n===Mt.SUBTITLE_TRACK&&r[s].hasSubtitleGroup(e))return r[s].pathwayId;return i}clonePathways(e){const n=this.levels;if(!n)return;const i={},r={};e.forEach(s=>{const{ID:a,"BASE-ID":l,"URI-REPLACEMENT":f}=s;if(n.some(h=>h.pathwayId===a))return;const c=this.getLevelsForPathway(l).map(h=>{const p=new Kn(h.attrs);p["PATHWAY-ID"]=a;const g=p.AUDIO&&`${p.AUDIO}_clone_${a}`,x=p.SUBTITLES&&`${p.SUBTITLES}_clone_${a}`;g&&(i[p.AUDIO]=g,p.AUDIO=g),x&&(r[p.SUBTITLES]=x,p.SUBTITLES=x);const b=sF(h.uri,p["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",f),T=new jm({attrs:p,audioCodec:h.audioCodec,bitrate:h.bitrate,height:h.height,name:h.name,url:b,videoCodec:h.videoCodec,width:h.width});if(h.audioGroups)for(let E=1;E<h.audioGroups.length;E++)T.addGroupId("audio",`${h.audioGroups[E]}_clone_${a}`);if(h.subtitleGroups)for(let E=1;E<h.subtitleGroups.length;E++)T.addGroupId("text",`${h.subtitleGroups[E]}_clone_${a}`);return T});n.push(...c),mD(this.audioTracks,i,f,a),mD(this.subtitleTracks,r,f,a)})}loadSteeringManifest(e){const n=this.hls.config,i=n.loader;this.loader&&this.loader.destroy(),this.loader=new i(n);let r;try{r=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(r.protocol!=="data:"){const h=(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate)|0;r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+h)}const s={responseType:"json",url:r.href},a=n.steeringManifestLoadPolicy.default,l=a.errorRetry||a.timeoutRetry||{},f={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},c={onSuccess:(h,p,g,x)=>{this.log(`Loaded steering manifest: "${r}"`);const b=h.data;if(b?.VERSION!==1){this.log(`Steering VERSION ${b.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=b.TTL;const{"RELOAD-URI":T,"PATHWAY-CLONES":E,"PATHWAY-PRIORITY":C}=b;if(T)try{this.uri=new self.URL(T,r).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${T}`);return}this.scheduleRefresh(this.uri||g.url),E&&this.clonePathways(E);const I={steeringManifest:b,url:r.toString()};this.hls.trigger(B.STEERING_MANIFEST_LOADED,I),C&&this.updatePathwayPriority(C)},onError:(h,p,g,x)=>{if(this.log(`Error loading steering manifest: ${h.code} ${h.text} (${p.url})`),this.stopLoad(),h.code===410){this.enabled=!1,this.log(`Steering manifest ${p.url} no longer available`);return}let b=this.timeToLoad*1e3;if(h.code===429){const T=this.loader;if(typeof T?.getResponseHeader=="function"){const E=T.getResponseHeader("Retry-After");E&&(b=parseFloat(E)*1e3)}this.log(`Steering manifest ${p.url} rate limited`);return}this.scheduleRefresh(this.uri||p.url,b)},onTimeout:(h,p,g)=>{this.log(`Timeout loading steering manifest (${p.url})`),this.scheduleRefresh(this.uri||p.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(s,f,c)}scheduleRefresh(e,n=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var i;const r=(i=this.hls)==null?void 0:i.media;if(r&&!r.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},n)}}function mD(t,e,n,i){t&&Object.keys(e).forEach(r=>{const s=t.filter(a=>a.groupId===r).map(a=>{const l=cn({},a);return l.details=void 0,l.attrs=new Kn(l.attrs),l.url=l.attrs.URI=sF(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),l.groupId=l.attrs["GROUP-ID"]=e[r],l.attrs["PATHWAY-ID"]=i,l});t.push(...s)})}function sF(t,e,n,i){const{HOST:r,PARAMS:s,[n]:a}=i;let l;e&&(l=a?.[e],l&&(t=l));const f=new self.URL(t);return r&&!l&&(f.host=r),s&&Object.keys(s).sort().forEach(c=>{c&&f.searchParams.set(c,s[c])}),f.href}function ra(t,e,n){Qa(t,e,n),t.addEventListener(e,n)}function Qa(t,e,n){t.removeEventListener(e,n)}class Ed extends io{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=Ed.CDMCleanupPromise?[Ed.CDMCleanupPromise]:[],this.onWaitingForKey=n=>{this.log(`"${n.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onWaitingForKey=null}registerListeners(){this.hls.on(B.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(B.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(B.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(B.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(B.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(B.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(B.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(B.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(B.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(B.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:n,widevineLicenseUrl:i}=this.config,r=n[e];if(r)return r.licenseUrl;if(e===Qn.WIDEVINE&&i)return i}getLicenseServerUrlOrThrow(e){const n=this.getLicenseServerUrl(e);if(n===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return n}getServerCertificateUrl(e){const{drmSystems:n}=this.config,i=n[e];if(i)return i.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const n=this.hls.levels,i=(a,l,f)=>!!a&&f.indexOf(a)===l,r=n.map(a=>a.audioCodec).filter(i),s=n.map(a=>a.videoCodec).filter(i);return r.length+s.length===0&&s.push("avc1.42e01e"),new Promise((a,l)=>{const f=c=>{const h=c.shift();this.getMediaKeysPromise(h,r,s).then(p=>a({keySystem:h,mediaKeys:p})).catch(p=>{c.length?f(c):p instanceof Qs?l(p):l(new Qs({type:at.KEY_SYSTEM_ERROR,details:pe.KEY_SYSTEM_NO_ACCESS,error:p,fatal:!0},p.message))})};f(e)})}requestMediaKeySystemAccess(e,n){const{requestMediaKeySystemAccessFunc:i}=this.config;if(typeof i!="function"){let r=`Configured requestMediaKeySystemAccess is not a function ${i}`;return SB===null&&self.location.protocol==="http:"&&(r=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(r))}return i(e,n)}getMediaKeysPromise(e,n,i){const r=Yte(e,n,i,this.config.drmSystemOptions),s=this.keySystemAccessPromises[e];let a=s?.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Dn(r)}`),a=this.requestMediaKeySystemAccess(e,r);const l=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(f=>{this.log(`Failed to obtain access to key-system "${e}": ${f}`)}),a.then(f=>{this.log(`Access for key-system "${f.keySystem}" obtained`);const c=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),l.mediaKeys=f.createMediaKeys().then(h=>(this.log(`Media-keys created for "${e}"`),l.hasMediaKeys=!0,c.then(p=>p?this.setMediaKeysServerCertificate(h,e,p):h))),l.mediaKeys.catch(h=>{this.error(`Failed to create media-keys for "${e}"}: ${h}`)}),l.mediaKeys})}return a.then(()=>s.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:n,mediaKeys:i}){this.log(`Creating key-system session "${n}" keyId: ${Fc.hexDump(e.keyId||[])}`);const r=i.createSession(),s={decryptdata:e,keySystem:n,mediaKeys:i,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const n=e.decryptdata;if(n.pssh){const i=this.createMediaKeySessionContext(e),r=this.getKeyIdString(n),s="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(i,s,n.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Fc.hexDump(e.keyId)}updateKeySession(e,n){var i;const r=e.mediaKeysSession;return this.log(`Updating key-session "${r.sessionId}" for keyID ${Fc.hexDump(((i=e.decryptdata)==null?void 0:i.keyId)||[])}
      } (data length: ${n&&n.byteLength})`),r.update(n)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>UP(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:n,mediaKeys:i})=>this.attemptSetMediaKeys(n,i))}selectKeySystem(e){return new Promise((n,i)=>this.getKeySystemSelectionPromise(e).then(({keySystem:r})=>{const s=UP(r);s?n(s):i(new Error(`Unable to find format for key-system "${r}"`))}).catch(i))}selectKeySystemFormat(e){const n=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)),this.keyFormatPromise}getKeyFormatPromise(e){const n=Fg(this.config),i=e.map(PS).filter(r=>!!r&&n.indexOf(r)!==-1);return this.selectKeySystem(i)}loadKey(e){const n=e.keyInfo.decryptdata,i=this.getKeyIdString(n),r=`(keyId: ${i} format: "${n.keyFormat}" method: ${n.method} uri: ${n.uri})`;this.log(`Starting session for key ${r}`);let s=this.keyIdToKeySessionPromise[i];return s||(s=this.getKeySystemForKeyPromise(n).then(({keySystem:l,mediaKeys:f})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${r}`),this.attemptSetMediaKeys(l,f).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:l,mediaKeys:f,decryptdata:n}))))),(this.keyIdToKeySessionPromise[i]=s.then(l=>{const f="cenc",c=n.pssh?n.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(l,f,c,"playlist-key")})).catch(l=>this.handleError(l))),s}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Qs?this.hls.trigger(B.ERROR,e.data):this.hls.trigger(B.ERROR,{type:at.KEY_SYSTEM_ERROR,details:pe.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const n=this.getKeyIdString(e),i=this.keyIdToKeySessionPromise[n];if(!i){const r=PS(e.keyFormat),s=r?[r]:Fg(this.config);return this.attemptKeySystemAccess(s)}return i}getKeySystemSelectionPromise(e){if(e.length||(e=Fg(this.config)),e.length===0)throw new Qs({type:at.KEY_SYSTEM_ERROR,details:pe.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Dn({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,n){if(this.mediaKeys===n)return Promise.resolve();const i=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(i).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(n)});return this.mediaKeys=n,this.setMediaKeysQueue.push(r),r.then(()=>{this.log(`Media-keys set for "${e}"`),i.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>i.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,n,i,r){var s,a;const l=(s=this.config.drmSystems)==null||(a=s[e.keySystem])==null?void 0:a.generateRequest;if(l)try{const b=l.call(this.hls,n,i,e);if(!b)throw new Error("Invalid response from configured generateRequest filter");n=b.initDataType,i=b.initData?b.initData:null,e.decryptdata.pssh=i?new Uint8Array(i):null}catch(b){var f;if(this.warn(b.message),(f=this.hls)!=null&&f.config.debug)throw b}if(i===null)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const c=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${r}": ${c} (init data type: ${n} length: ${i?i.byteLength:null})`);const h=new rA,p=e._onmessage=b=>{const T=e.mediaKeysSession;if(!T){h.emit("error",new Error("invalid state"));return}const{messageType:E,message:C}=b;this.log(`"${E}" message event for session "${T.sessionId}" message size: ${C.byteLength}`),E==="license-request"||E==="license-renewal"?this.renewLicense(e,C).catch(I=>{h.eventNames().length?h.emit("error",I):this.handleError(I)}):E==="license-release"?e.keySystem===Qn.FAIRPLAY&&(this.updateKeySession(e,RS("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${E}"`)},g=e._onkeystatuseschange=b=>{if(!e.mediaKeysSession){h.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const E=e.keyStatus;h.emit("keyStatus",E),E==="expired"&&(this.warn(`${e.keySystem} expired for key ${c}`),this.renewKeySession(e))};ra(e.mediaKeysSession,"message",p),ra(e.mediaKeysSession,"keystatuseschange",g);const x=new Promise((b,T)=>{h.on("error",T),h.on("keyStatus",E=>{E.startsWith("usable")?b():E==="output-restricted"?T(new Qs({type:at.KEY_SYSTEM_ERROR,details:pe.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):E==="internal-error"?T(new Qs({type:at.KEY_SYSTEM_ERROR,details:pe.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${E}"`)):E==="expired"?T(new Error("key expired while generating request")):this.warn(`unhandled key status change "${E}"`)})});return e.mediaKeysSession.generateRequest(n,i).then(()=>{var b;this.log(`Request generated for key-session "${(b=e.mediaKeysSession)==null?void 0:b.sessionId}" keyId: ${c}`)}).catch(b=>{throw new Qs({type:at.KEY_SYSTEM_ERROR,details:pe.KEY_SYSTEM_NO_SESSION,error:b,fatal:!1},`Error generating key-session request: ${b}`)}).then(()=>x).catch(b=>{throw h.removeAllListeners(),this.removeSession(e),b}).then(()=>(h.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((n,i)=>{if(typeof i=="string"&&typeof n=="object"){const r=i;i=n,n=r}this.log(`key status change "${n}" for keyStatuses keyId: ${Fc.hexDump("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))} session keyId: ${Fc.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=n})}fetchServerCertificate(e){const n=this.config,i=n.loader,r=new i(n),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,l)=>{const f={responseType:"arraybuffer",url:s},c=n.certLoadPolicy.default,h={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(g,x,b,T)=>{a(g.data)},onError:(g,x,b,T)=>{l(new Qs({type:at.KEY_SYSTEM_ERROR,details:pe.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:b,response:pn({url:f.url,data:void 0},g)},`"${e}" certificate request failed (${s}). Status: ${g.code} (${g.text})`))},onTimeout:(g,x,b)=>{l(new Qs({type:at.KEY_SYSTEM_ERROR,details:pe.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:b,response:{url:f.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(g,x,b)=>{l(new Error("aborted"))}};r.load(f,h,p)})):Promise.resolve()}setMediaKeysServerCertificate(e,n,i){return new Promise((r,s)=>{e.setServerCertificate(i).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${i?.byteLength}) on "${n}"`),r(e)}).catch(a=>{s(new Qs({type:at.KEY_SYSTEM_ERROR,details:pe.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,n){return this.requestLicense(e,new Uint8Array(n)).then(i=>this.updateKeySession(e,new Uint8Array(i)).catch(r=>{throw new Qs({type:at.KEY_SYSTEM_ERROR,details:pe.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:r,fatal:!0},r.message)}))}unpackPlayReadyKeyMessage(e,n){const i=String.fromCharCode.apply(null,new Uint16Array(n.buffer));if(!i.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),n;const r=new DOMParser().parseFromString(i,"application/xml"),s=r.querySelectorAll("HttpHeader");if(s.length>0){let h;for(let p=0,g=s.length;p<g;p++){var a,l;h=s[p];const x=(a=h.querySelector("name"))==null?void 0:a.textContent,b=(l=h.querySelector("value"))==null?void 0:l.textContent;x&&b&&e.setRequestHeader(x,b)}}const f=r.querySelector("Challenge"),c=f?.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return RS(atob(c))}setupLicenseXHR(e,n,i,r){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!i.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,n,i,r)}).catch(a=>{if(!i.decryptdata)throw a;return e.open("POST",n,!0),s.call(this.hls,e,n,i,r)}).then(a=>(e.readyState||e.open("POST",n,!0),{xhr:e,licenseChallenge:a||r})):(e.open("POST",n,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,n){const i=this.config.keyLoadPolicy.default;return new Promise((r,s)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const l=new XMLHttpRequest;l.responseType="arraybuffer",l.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(l.readyState===4)if(l.status===200){this._requestLicenseFailureCount=0;let f=l.response;this.log(`License received ${f instanceof ArrayBuffer?f.byteLength:f}`);const c=this.config.licenseResponseCallback;if(c)try{f=c.call(this.hls,l,a,e)}catch(h){this.error(h)}r(f)}else{const f=i.errorRetry,c=f?f.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||l.status>=400&&l.status<500)s(new Qs({type:at.KEY_SYSTEM_ERROR,details:pe.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:l,response:{url:a,data:void 0,code:l.status,text:l.statusText}},`License Request XHR failed (${a}). Status: ${l.status} (${l.statusText})`));else{const h=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${h} attempts left`),this.requestLicense(e,n).then(r,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=l,this.setupLicenseXHR(l,a,e,n).then(({xhr:f,licenseChallenge:c})=>{e.keySystem==Qn.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(f,c)),f.send(c)})})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,n){if(!this.config.emeEnabled)return;const i=n.media;this.media=i,ra(i,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(Qa(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,i=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,$0.clearKeyUriToKeyIdMap();const r=i.length;Ed.CDMCleanupPromise=Promise.all(i.map(s=>this.removeSession(s)).concat(n==null||(e=n.setMediaKeys(null))==null?void 0:e.catch(s=>{var a;this.log(`Could not clear media keys: ${s}`),(a=this.hls)==null||a.trigger(B.ERROR,{type:at.OTHER_ERROR,details:pe.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${s}`)})}))).catch(s=>{var a;this.log(`Could not close sessions and clear media keys: ${s}`),(a=this.hls)==null||a.trigger(B.ERROR,{type:at.OTHER_ERROR,details:pe.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${s}`)})}).then(()=>{r&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:n}){if(!(!n||!this.config.emeEnabled)&&!this.keyFormatPromise){const i=n.reduce((r,s)=>(r.indexOf(s.keyFormat)===-1&&r.push(s.keyFormat),r),[]);this.log(`Selecting key-system from session-keys ${i.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(i)}}removeSession(e){const{mediaKeysSession:n,licenseXhr:i}=e;if(n){this.log(`Remove licenses and keys and close session ${n.sessionId}`),e._onmessage&&(n.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(n.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const r=this.mediaKeySessions.indexOf(e);r>-1&&this.mediaKeySessions.splice(r,1);const{drmSystemOptions:s}=this.config;return(Zte(s)?new Promise((l,f)=>{self.setTimeout(()=>f(new Error("MediaKeySession.remove() timeout")),8e3),n.remove().then(l)}):Promise.resolve()).catch(l=>{var f;this.log(`Could not remove session: ${l}`),(f=this.hls)==null||f.trigger(B.ERROR,{type:at.OTHER_ERROR,details:pe.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${l}`)})}).then(()=>n.close()).catch(l=>{var f;this.log(`Could not close session: ${l}`),(f=this.hls)==null||f.trigger(B.ERROR,{type:at.OTHER_ERROR,details:pe.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${l}`)})})}}}Ed.CDMCleanupPromise=void 0;class Qs extends Error{constructor(e,n){super(n),this.data=void 0,e.error||(e.error=new Error(n)),this.data=e,e.err=e.error}}class rre{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(B.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(B.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(B.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(B.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,n){const i=this.hls.config;if(i.capLevelOnFPSDrop){const r=n.media instanceof self.HTMLVideoElement?n.media:null;this.media=r,r&&typeof r.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,n,i){const r=performance.now();if(n){if(this.lastTime){const s=r-this.lastTime,a=i-this.lastDroppedFrames,l=n-this.lastDecodedFrames,f=1e3*a/s,c=this.hls;if(c.trigger(B.FPS_DROP,{currentDropped:a,currentDecoded:l,totalDroppedFrames:i}),f>0&&a>c.config.fpsDroppedMonitoringThreshold*l){let h=c.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+h),h>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=h)&&(h=h-1,c.trigger(B.FPS_DROP_LEVEL_CAPPING,{level:h,droppedLevel:c.currentLevel}),c.autoLevelCapping=h,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=i,this.lastDecodedFrames=n}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const n=e.getVideoPlaybackQuality();this.checkFPS(e,n.totalVideoFrames,n.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function aF(t,e){let n;try{n=new Event("addtrack")}catch{n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function oF(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(i){Wt.debug(`[texttrack-utils]: ${i}`);try{const r=new self.TextTrackCue(e.startTime,e.endTime,e.text);r.id=e.id,t.addCue(r)}catch(r){Wt.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${r}`)}}n==="disabled"&&(t.mode=n)}function yd(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues)for(let i=t.cues.length;i--;)e&&t.cues[i].removeEventListener("enter",e),t.removeCue(t.cues[i]);n==="disabled"&&(t.mode=n)}function FS(t,e,n,i){const r=t.mode;if(r==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const s=are(t.cues,e,n);for(let a=0;a<s.length;a++)(!i||i(s[a]))&&t.removeCue(s[a])}r==="disabled"&&(t.mode=r)}function sre(t,e){if(e<=t[0].startTime)return 0;const n=t.length-1;if(e>t[n].endTime)return-1;let i=0,r=n,s;for(;i<=r;)if(s=Math.floor((r+i)/2),e<t[s].startTime)r=s-1;else if(e>t[s].startTime&&i<n)i=s+1;else return s;return t[i].startTime-e<e-t[r].startTime?i:r}function are(t,e,n){const i=[],r=sre(t,e);if(r>-1)for(let s=r,a=t.length;s<a;s++){const l=t[s];if(l.startTime>=e&&l.endTime<=n)i.push(l);else if(l.startTime>n)return i}return i}function Gg(t){const e=[];for(let n=0;n<t.length;n++){const i=t[n];(i.kind==="subtitles"||i.kind==="captions")&&i.label&&e.push(t[n])}return e}class ore extends fA{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let n=null;const i=Gg(this.media.textTracks);for(let s=0;s<i.length;s++)if(i[s].mode==="hidden")n=i[s];else if(i[s].mode==="showing"){n=i[s];break}const r=this.findTrackForTextTrack(n);this.subtitleTrack!==r&&this.setSubtitleTrack(r)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.MANIFEST_PARSED,this.onManifestParsed,this),e.on(B.LEVEL_LOADING,this.onLevelLoading,this),e.on(B.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(B.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(B.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.MANIFEST_PARSED,this.onManifestParsed,this),e.off(B.LEVEL_LOADING,this.onLevelLoading,this),e.off(B.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(B.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(B.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,n){const i=this.media;if(!i)return;const r=!!n.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||i.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,r)return;Gg(i.textTracks).forEach(a=>{yd(a)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.subtitleTracks}onSubtitleTrackLoaded(e,n){const{id:i,groupId:r,details:s}=n,a=this.tracksInGroup[i];if(!a||a.groupId!==r){this.warn(`Subtitle track with id:${i} and group:${r} not found in active group ${a?.groupId}`);return}const l=a.details;a.details=n.details,this.log(`Subtitle track ${i} "${a.name}" lang:${a.lang} group:${r} loaded [${s.startSN}-${s.endSN}]`),i===this.trackId&&this.playlistLoaded(i,n,l)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const i=n.subtitleGroups||null,r=this.groupIds;let s=this.currentTrack;if(!i||r?.length!==i?.length||i!=null&&i.some(a=>r?.indexOf(a)===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(h=>!i||i.indexOf(h.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(h=>h.default)&&(this.selectDefaultTrack=!1),a.forEach((h,p)=>{h.id=p});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const l=this.hls.config.subtitlePreference;if(!s&&l){this.selectDefaultTrack=!1;const h=Do(l,a);if(h>-1)s=a[h];else{const p=Do(l,this.tracks);s=this.tracks[p]}}let f=this.findTrackId(s);f===-1&&s&&(f=this.findTrackId(null));const c={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${i?.join(",")}" group-id`),this.hls.trigger(B.SUBTITLE_TRACKS_UPDATED,c),f!==-1&&this.trackId===-1&&this.setSubtitleTrack(f)}}findTrackId(e){const n=this.tracksInGroup,i=this.selectDefaultTrack;for(let r=0;r<n.length;r++){const s=n[r];if(!(i&&!s.default||!i&&!e)&&(!e||Zc(s,e)))return r}if(e){for(let r=0;r<n.length;r++){const s=n[r];if(zm(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<n.length;r++){const s=n[r];if(zm(e.attrs,s.attrs,["LANGUAGE"]))return r}}return-1}findTrackForTextTrack(e){if(e){const n=this.tracksInGroup;for(let i=0;i<n.length;i++){const r=n[i];if(NS(r,e))return i}}return-1}onError(e,n){n.fatal||!n.context||n.context.type===Mt.SUBTITLE_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const n=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&Zc(e,i))return i;const r=Do(e,this.tracksInGroup);if(r>-1){const s=this.tracksInGroup[r];return this.setSubtitleTrack(r),s}else{if(i)return null;{const s=Do(e,n);if(s>-1)return n[s]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const i=e.id,r=e.groupId,s=this.getUrlWithDirectives(e.url,n),a=e.details,l=a?.age;this.log(`Loading subtitle ${i} "${e.name}" lang:${e.lang} group:${r}${n?.msn!==void 0?" at sn "+n.msn+" part "+n.part:""}${l&&a.live?" age "+l.toFixed(1)+(a.type&&" "+a.type||""):""} ${s}`),this.hls.trigger(B.SUBTITLE_TRACK_LOADING,{url:s,id:i,groupId:r,deliveryDirectives:n||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const n=Gg(e.textTracks),i=this.currentTrack;let r;if(i&&(r=n.filter(s=>NS(i,s))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${i.name}" and language "${i.lang}"`)),[].slice.call(n).forEach(s=>{s.mode!=="disabled"&&s!==r&&(s.mode="disabled")}),r){const s=this.subtitleDisplay?"showing":"hidden";r.mode!==s&&(r.mode=s)}}setSubtitleTrack(e){const n=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=n.length||!qe(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const i=this.currentTrack,r=n[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r){this.hls.trigger(B.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!r.details&&!r.details.live;if(e===this.trackId&&r===i&&s)return;this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:""));const{id:a,groupId:l="",name:f,type:c,url:h}=r;this.hls.trigger(B.SUBTITLE_TRACK_SWITCH,{id:a,groupId:l,name:f,type:c,url:h});const p=this.switchParams(r.url,i?.details,r.details);this.loadPlaylist(p)}}function lre(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),n=e.toString();return URL.revokeObjectURL(e),n.slice(n.lastIndexOf("/")+1)}catch{let n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const s=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(r=="x"?s:s&3|8).toString(16)})}}}function bm(t){let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return(e>>>0).toString()}const Td=.025;let Yv=function(t){return t[t.Point=0]="Point",t[t.Range=1]="Range",t}({});function ure(t,e,n){return`${t.identifier}-${n+1}-${bm(e)}`}class cre{constructor(e,n){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=n,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var n;if(e>0&&e>=this.assetList.length)return!0;const i=this.playoutLimit;return e<=0||isNaN(i)?!1:i===0?!0:(((n=this.assetList[e])==null?void 0:n.startOffset)||0)>i}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const n=this.dateRange.tagAnchor;if(n)return o_(e,n)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const n=this.dateRange.startTime,i=o_(n,e);return n-i<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,n=qe(e)?e:this.duration;return this.cumulativeDuration+n}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const n=this.resumeAnchor;if(n)return o_(e,n)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Td))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let n;return this._duration!==null?n=this._duration:this.dateRange.duration?n=this.dateRange.duration:n=this.dateRange.plannedDuration||0,!isNaN(e)&&e<n&&(n=e),n}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?Yv.Range:Yv.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return fre(this)}}function o_(t,e){return t-e.start<e.duration/2&&!(Math.abs(t-(e.start+e.duration))<Td)?e.start:e.start+e.duration}function lF(t,e,n){const i=new self.URL(t,n);return i.protocol!=="data:"&&i.searchParams.set("_HLS_primary_id",e),i}function l_(t,e){for(;(n=t.assetList[++e])!=null&&n.error;)var n;return e}function fre(t){return`["${t.identifier}" ${t.cue.pre?"<pre>":t.cue.post?"<post>":""}${t.timelineStart.toFixed(2)}-${t.resumeTime.toFixed(2)}]`}function md(t){const e=t.timelineStart,n=t.duration||0;return`["${t.identifier}" ${e.toFixed(2)}-${(e+n).toFixed(2)}]`}class dre{constructor(e,n,i,r){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls.trigger(B.PLAYOUT_LIMIT_REACHED,{})};const s=this.hls=new e(n);this.interstitial=i,this.assetItem=r;let a=r.uri;try{a=lF(a,n.primarySessionId).href}catch{}s.loadSource(a);const l=()=>{this.hasDetails=!0};s.once(B.LEVEL_LOADED,l),s.once(B.AUDIO_TRACK_LOADED,l),s.once(B.SUBTITLE_TRACK_LOADED,l),s.on(B.MEDIA_ATTACHING,(f,{media:c})=>{this.removeMediaListeners(),this.mediaAttached=c,this.interstitial.playoutLimit&&(c.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&s.on(B.BUFFER_APPENDED,()=>{const p=this.bufferedEnd;this.reachedPlayout(p)&&(this._bufferedEosTime=p,s.trigger(B.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){var e;return((e=this.interstitial)==null?void 0:e.appendInPlace)||!1}bufferedInPlaceToEnd(e){var n;if(!this.appendInPlace)return!1;if((n=this.hls)!=null&&n.bufferedToEnd)return!0;if(!e||!this._bufferedEosTime)return!1;const i=this.timelineOffset,r=wt.bufferInfo(e,i,0);return this.getAssetTime(r.end)>=this._bufferedEosTime-.02}reachedPlayout(e){const i=this.interstitial.playoutLimit;return this.startOffset+e>=i}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const n=wt.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(n.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;return e||0}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const n=this.timelineOffset;if(e!==n){const i=e-n;if(Math.abs(i)>1/9e4){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const n=this.timelineOffset,i=this.duration;return Math.min(Math.max(0,e-n),i)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls.destroy(),this.hls=this.interstitial=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){this.hls.attachMedia(e)}detachMedia(){this.removeMediaListeners(),this.mediaAttached=null,this.hls.detachMedia()}resumeBuffering(){this.hls.resumeBuffering()}pauseBuffering(){this.hls.pauseBuffering()}transferMedia(){return this.bufferSnapShot(),this.hls.transferMedia()}resetDetails(){const e=this.hls;if(this.hasDetails){e.stopLoad();const n=i=>delete i.details;e.levels.forEach(n),e.allAudioTracks.forEach(n),e.allSubtitleTracks.forEach(n),this.hasDetails=!1}}on(e,n,i){this.hls.on(e,n)}once(e,n,i){this.hls.once(e,n)}off(e,n,i){this.hls.off(e,n)}toString(){var e;return`HlsAssetPlayer: ${md(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const pD=.033;class hre extends io{constructor(e,n){super("interstitials-sched",n),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,n){return this.events?this.events.reduce((i,r)=>e<=r.startOffset&&n>r.startOffset?(delete r.error,i+1):i,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,n){if(e.event)return this.findEventIndex(e.event.identifier);let i=-1;e.nextEvent?i=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(i=this.findEventIndex(e.previousEvent.identifier)+1);const r=this.items;if(r)for(r[i]||(n===void 0&&(n=e.start),i=this.findItemIndexAtTime(n));i>=0&&(s=r[i])!=null&&s.event;){var s;i--}return i}findItemIndexAtTime(e,n){const i=this.items;if(i)for(let r=0;r<i.length;r++){let s=i[r];if(n&&n!=="primary"&&(s=s[n]),e===s.start||e>s.start&&e<s.end)return r}return-1}findJumpRestrictedIndex(e,n){const i=this.items;if(i)for(let r=e;r<=n&&i[r];r++){const s=i[r].event;if(s!=null&&s.restrictions.jump&&!s.appendInPlace)return r}return-1}findEventIndex(e){const n=this.items;if(n)for(let r=n.length;r--;){var i;if(((i=n[r].event)==null?void 0:i.identifier)===e)return r}return-1}findAssetIndex(e,n){const i=e.assetList,r=i.length;if(r>1)for(let s=0;s<r;s++){const a=i[s];if(!a.error){const l=a.timelineStart;if(n===l||n>l&&n<l+(a.duration||0))return s}}return 0}get assetIdAtEnd(){var e,n;const i=(e=this.items)==null||(n=e[this.length-1])==null?void 0:n.event;if(i){const r=i.assetList,s=r[r.length-1];if(s)return s.identifier}return null}parseInterstitialDateRanges(e,n){const i=e.main.details,{dateRanges:r}=i,s=this.events,a=this.parseDateRanges(r,{url:i.url},n),l=Object.keys(r),f=s?s.filter(c=>!l.includes(c.identifier)):[];a.length&&a.sort((c,h)=>{const p=c.cue.pre,g=c.cue.post,x=h.cue.pre,b=h.cue.post;if(p&&!x)return-1;if(x&&!p||g&&!b)return 1;if(b&&!g)return-1;if(!p&&!x&&!g&&!b){const T=c.startTime,E=h.startTime;if(T!==E)return T-E}return c.dateRange.tagOrder-h.dateRange.tagOrder}),this.events=a,f.forEach(c=>{this.removeEvent(c)}),this.updateSchedule(e,f)}updateSchedule(e,n=[]){const i=this.events||[];if(i.length||n.length||this.length<2){const r=this.items,s=this.parseSchedule(i,e);(n.length||r?.length!==s.length||s.some((l,f)=>Math.abs(l.playout.start-r[f].playout.start)>.005||Math.abs(l.playout.end-r[f].playout.end)>.005))&&(this.items=s,this.onScheduleUpdate(n,r))}}parseDateRanges(e,n,i){const r=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const l=s[a],f=e[l];if(f.isInterstitial){let c=this.eventMap[l];c?c.setDateRange(f):(c=new cre(f,n),this.eventMap[l]=c,i===!1&&(c.appendInPlace=i)),r.push(c)}}return r}parseSchedule(e,n){const i=[],r=n.main.details,s=r.live?1/0:r.edge;let a=0;if(e=e.filter(f=>!f.error&&!(f.cue.once&&f.hasPlayed)),e.length){this.resolveOffsets(e,n);let f=0,c=0;if(e.forEach((h,p)=>{const g=h.cue.pre,x=h.cue.post,b=e[p-1]||null,T=h.appendInPlace,E=x?s:h.startOffset,C=h.duration,I=h.timelineOccupancy===Yv.Range?C:0,P=h.resumptionOffset,M=b?.startTime===E,k=E+h.cumulativeDuration;let z=T?k+C:E+P;if(g||!x&&E<=0){const G=c;c+=I,h.timelineStart=k;const K=a;a+=C,i.push({event:h,start:k,end:z,playout:{start:K,end:a},integrated:{start:G,end:c}})}else if(E<=s){if(!M){const V=E-f;if(V>pD){const Q=f,J=c;c+=V;const ve=a;a+=V;const se={previousEvent:e[p-1]||null,nextEvent:h,start:Q,end:Q+V,playout:{start:ve,end:a},integrated:{start:J,end:c}};i.push(se)}else V>0&&b&&(b.cumulativeDuration+=V,i[i.length-1].end=E)}x&&(z=k),h.timelineStart=k;const G=c;c+=I;const K=a;a+=C,i.push({event:h,start:k,end:z,playout:{start:K,end:a},integrated:{start:G,end:c}})}else return;const F=h.resumeTime;x||F>s?f=s:f=F}),f<s){var l;const h=f,p=c,g=s-f;c+=g;const x=a;a+=g,i.push({previousEvent:((l=i[i.length-1])==null?void 0:l.event)||null,nextEvent:null,start:f,end:h+g,playout:{start:x,end:a},integrated:{start:p,end:c}})}this.setDurations(s,a,c)}else i.push({previousEvent:null,nextEvent:null,start:0,end:s,playout:{start:0,end:s},integrated:{start:0,end:s}}),this.setDurations(s,s,s);return i}setDurations(e,n,i){this.durations={primary:e,playout:n,integrated:i}}resolveOffsets(e,n){const i=n.main.details,r=i.live?1/0:i.edge;let s=0,a=-1;e.forEach((l,f)=>{const c=l.cue.pre,h=l.cue.post,p=c?0:h?r:l.startTime;this.updateAssetDurations(l),a===p?l.cumulativeDuration=s:(s=0,a=p),!h&&l.snapOptions.in&&(l.resumeAnchor=sf(null,i.fragments,l.startOffset+l.resumptionOffset,0,0)||void 0),l.appendInPlace&&!l.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(l,n)||(l.appendInPlace=!1)),!l.appendInPlace&&f+1<e.length&&e[f+1].startTime-e[f].resumeTime<pD&&(e[f+1].appendInPlace=!1,e[f+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${l}`));const x=qe(l.resumeOffset)?l.resumeOffset:l.duration;s+=x})}primaryCanResumeInPlaceAt(e,n){const i=e.resumeTime,r=e.startTime+e.resumptionOffset;return Math.abs(i-r)>Td?(this.log(`"${e.identifier}" resumption ${i} not aligned with estimated timeline end ${r}`),!1):n?!Object.keys(n).some(a=>{const l=n[a].details,f=l.edge;if(i>=f)return this.log(`"${e.identifier}" resumption ${i} past ${a} playlist end ${f}`),!1;const c=sf(null,l.fragments,i);if(!c)return this.log(`"${e.identifier}" resumption ${i} does not align with any fragments in ${a} playlist (${l.fragStart}-${l.fragmentEnd})`),!0;const h=a==="audio"?.175:0;return Math.abs(c.start-i)<Td+h||Math.abs(c.end-i)<Td+h?!1:(this.log(`"${e.identifier}" resumption ${i} not aligned with ${a} fragment bounds (${c.start}-${c.end} sn: ${c.sn} cc: ${c.cc})`),!0)}):(this.log(`"${e.identifier}" resumption ${i} can not be aligned with media (none selected)`),!1)}updateAssetDurations(e){if(!e.assetListLoaded)return;const n=e.timelineStart;let i=0,r=!1,s=!1;e.assetList.forEach((a,l)=>{const f=n+i;a.startOffset=i,a.timelineStart=f,r||(r=a.duration===null),s||(s=!!a.error);const c=a.error?0:a.duration||0;i+=c}),r&&!s?e.duration=Math.max(i,e.duration):e.duration=i}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Fu(t){return`[${t.event?'"'+t.event.identifier+'"':"primary"}: ${t.start.toFixed(2)}-${t.end.toFixed(2)}]`}class mre{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,n){const i=e.assetListUrl;let r;try{r=lF(i,this.hls.sessionId,e.baseUrl)}catch(g){const x=this.assignAssetListError(e,pe.ASSET_LIST_LOAD_ERROR,g,i);this.hls.trigger(B.ERROR,x);return}n&&r.protocol!=="data:"&&r.searchParams.set("_HLS_start_offset",""+n);const s=this.hls.config,a=s.loader,l=new a(s),f={responseType:"json",url:r.href},c=s.interstitialAssetListLoadPolicy.default,h={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(g,x,b,T)=>{const E=g.data,C=E?.ASSETS;if(!Array.isArray(C)){const I=this.assignAssetListError(e,pe.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),b.url,x,T);this.hls.trigger(B.ERROR,I);return}e.assetListResponse=E,this.hls.trigger(B.ASSET_LIST_LOADED,{event:e,assetListResponse:E,networkDetails:T})},onError:(g,x,b,T)=>{const E=this.assignAssetListError(e,pe.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${g.code} ${g.text} (${x.url})`),x.url,T,b);this.hls.trigger(B.ERROR,E)},onTimeout:(g,x,b)=>{const T=this.assignAssetListError(e,pe.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${x.url})`),x.url,g,b);this.hls.trigger(B.ERROR,T)}};return l.load(f,h,p),this.hls.trigger(B.ASSET_LIST_LOADING,{event:e}),l}assignAssetListError(e,n,i,r,s,a){return e.error=i,{type:at.NETWORK_ERROR,details:n,fatal:!1,interstitial:e,url:r,error:i,networkDetails:a,stats:s}}}function gD(t){t?.play().catch(()=>{})}class pre extends io{constructor(e,n){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const i=this.currentTime;if(i===void 0||this.playbackDisabled)return;const r=i-this.timelinePos;if(Math.abs(r)<1/7056e5)return;const a=r<=-.01;this.timelinePos=i,this.bufferedPos=i;const l=this.playingItem;if(!l){this.checkBuffer();return}if(a&&this.schedule.resetErrorsInRange(i,i-r)&&this.updateSchedule(),this.checkBuffer(),a&&i<l.start||i>=l.end){var f;const g=this.schedule.findItemIndexAtTime(this.timelinePos);if(!this.isInterstitial(l)&&(f=this.media)!=null&&f.paused&&(this.shouldPlay=!1),!a){const x=this.findItemIndex(l);if(g>x){const b=this.schedule.findJumpRestrictedIndex(x+1,g);if(b>x){this.setSchedulePosition(b);return}}}this.setSchedulePosition(g);return}const c=this.playingAsset;if(!c){if(this.playingLastItem&&this.isInterstitial(l)){const g=l.event.assetList[0];g&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(i,g))}return}const h=c.timelineStart,p=c.duration||0;(a&&i<h||i>=h+p)&&this.setScheduleToAssetAtTime(i,c)},this.onTimeupdate=()=>{const i=this.currentTime;if(i===void 0||this.playbackDisabled)return;if(i>this.timelinePos)this.timelinePos=i,i>this.bufferedPos&&this.checkBuffer();else return;const r=this.playingItem;if(!r||this.playingLastItem)return;if(i>=r.end){this.timelinePos=r.end;const l=this.findItemIndex(r);this.setSchedulePosition(l+1)}const s=this.playingAsset;if(!s)return;const a=s.timelineStart+(s.duration||0);i>=a&&this.setScheduleToAssetAtTime(i,s)},this.onScheduleUpdate=(i,r)=>{const s=this.schedule,a=this.playingItem,l=s.events||[],f=s.items||[],c=s.durations,h=i.map(b=>b.identifier),p=!!(l.length||h.length);(p||r)&&this.log(`INTERSTITIALS_UPDATED (${l.length}): ${l}
Schedule: ${f.map(b=>Fu(b))} pos: ${this.timelinePos}`),h.length&&this.log(`Removed events ${h}`),this.playerQueue.forEach(b=>{if(b.interstitial.appendInPlace){const T=b.assetItem.timelineStart,E=b.timelineOffset-T;if(E)try{b.timelineOffset=T}catch(C){Math.abs(E)>Td&&this.warn(`${C} ("${b.assetId}" ${b.timelineOffset}->${T})`)}}});let g=null;if(a){const b=this.updateItem(a,this.timelinePos);this.itemsMatch(a,b)&&(this.playingItem=b,this.waitingItem=this.endedItem=null,g=()=>this.trimInPlace(b,a))}else this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const x=this.bufferingItem;if(x){const b=this.updateItem(x,this.bufferedPos);this.itemsMatch(x,b)?(this.bufferingItem=b,g||(g=()=>this.trimInPlace(b,x))):x.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(x.event,null))}if(i.forEach(b=>{b.assetList.forEach(T=>{this.clearAssetPlayer(T.identifier,null)})}),p||r){if(this.hls.trigger(B.INTERSTITIALS_UPDATED,{events:l.slice(0),schedule:f.slice(0),durations:c,removedIds:h}),this.isInterstitial(a)&&h.includes(a.event.identifier)){this.warn(`Interstitial "${a.event.identifier}" removed while playing`),this.primaryFallback(a.event);return}g&&g(),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=n,this.assetListLoader=new mre(e),this.schedule=new hre(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e.on(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(B.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(B.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(B.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(B.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(B.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(B.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(B.BUFFER_APPENDED,this.onBufferAppended,this),e.on(B.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(B.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(B.MEDIA_ENDED,this.onMediaEnded,this),e.on(B.ERROR,this.onError,this),e.on(B.DESTROYING,this.onDestroying,this)}unregisterListeners(){const e=this.hls;e&&(e.off(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(B.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(B.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(B.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(B.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(B.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(B.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(B.BUFFER_CODECS,this.onBufferCodecs,this),e.off(B.BUFFER_APPENDED,this.onBufferAppended,this),e.off(B.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(B.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(B.MEDIA_ENDED,this.onMediaEnded,this),e.off(B.ERROR,this.onError,this),e.off(B.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.manager=null,this.hls=this.HlsPlayerClass=this.schedule=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Qa(e,"play",this.onPlay),Qa(e,"pause",this.onPause),Qa(e,"seeking",this.onSeeking),Qa(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,n){const i=this.media=n.media;ra(i,"seeking",this.onSeeking),ra(i,"timeupdate",this.onTimeupdate),ra(i,"play",this.onPlay),ra(i,"pause",this.onPause)}onMediaAttached(e,n){const i=this.effectivePlayingItem,r=this.detachedData;if(this.detachedData=null,i===null)this.checkStart();else if(!r){this.clearScheduleState();const s=this.findItemIndex(i);this.setSchedulePosition(s)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,n){const i=!!n.transferMedia,r=this.media;if(this.media=null,!i&&(r&&this.removeMediaListeners(r),this.detachedData)){const s=this.getBufferingPlayer();s&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,s.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.manager){if(!this.hls)return null;const e=this,n=()=>e.bufferingItem||e.waitingItem,i=p=>p&&e.getAssetPlayer(p.identifier),r=(p,g,x,b,T)=>{if(p){let E=p[g].start;const C=p.event;if(C){if(g==="playout"||C.timelineOccupancy!==Yv.Point){const I=i(x);I?.interstitial===C&&(E+=I.assetItem.startOffset+I[T])}}else{const I=b==="bufferedPos"?a():e[b];E+=I-p.start}return E}return 0},s=(p,g)=>{if(p!==0&&g!=="primary"&&e.schedule.length){var x;const b=e.schedule.findItemIndexAtTime(p),T=(x=e.schedule.items)==null?void 0:x[b];if(T){const E=T[g].start-T.start;return p+E}}return p},a=()=>{const p=e.bufferedPos;return p===Number.MAX_VALUE?l("primary"):Math.max(p,0)},l=p=>{var g;return(g=e.primaryDetails)!=null&&g.live?e.primaryDetails.edge:e.schedule.durations[p]},f=(p,g)=>{var x,b;const T=e.effectivePlayingItem;if(T!=null&&(x=T.event)!=null&&x.restrictions.skip)return;e.log(`seek to ${p} "${g}"`);const E=e.effectivePlayingItem,C=e.schedule.findItemIndexAtTime(p,g),I=(b=e.schedule.items)==null?void 0:b[C],P=e.getBufferingPlayer(),M=P?.interstitial,k=M?.appendInPlace,z=E&&e.itemsMatch(E,I);if(E&&(k||z)){const G=i(e.playingAsset),K=G?.media||e.primaryMedia;if(K){const V=g==="primary"?K.currentTime:r(E,g,e.playingAsset,"timelinePos","currentTime"),Q=p-V,J=(k?V:K.currentTime)+Q;if(J>=0&&(!G||k||J<=G.duration)){K.currentTime=J;return}}}if(I){let G=p;if(g!=="primary"){const V=I[g].start,Q=p-V;G=I.start+Q}const K=!e.isInterstitial(I);if((!e.isInterstitial(E)||E.event.appendInPlace)&&(K||I.event.appendInPlace)){const V=e.media||(k?P?.media:null);V&&(V.currentTime=G)}else if(E){const V=e.findItemIndex(E);if(C>V){const J=e.schedule.findJumpRestrictedIndex(V+1,C);if(J>V){e.setSchedulePosition(J);return}}let Q=0;if(K)e.timelinePos=G,e.checkBuffer();else{var F;const J=I==null||(F=I.event)==null?void 0:F.assetList;if(J){const ve=p-(I[g]||I).start;for(let se=J.length;se--;){const ye=J[se];if(ye.duration&&ve>=ye.startOffset&&ve<ye.startOffset+ye.duration){Q=se;break}}}}e.setSchedulePosition(C,Q)}}},c=()=>{const p=e.effectivePlayingItem;if(e.isInterstitial(p))return p;const g=n();return e.isInterstitial(g)?g:null},h={get currentTime(){const p=c(),g=e.effectivePlayingItem;return g&&g===p?r(g,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-g.playout.start:0},set currentTime(p){const g=c(),x=e.effectivePlayingItem;x&&x===g&&f(p+x.playout.start,"playout")},get duration(){const p=c();return p?p.playout.end-p.playout.start:0},get assetPlayers(){var p;const g=(p=c())==null?void 0:p.event.assetList;return g?g.map(x=>e.getAssetPlayer(x.identifier)):[]},get playingIndex(){var p;const g=(p=c())==null?void 0:p.event;return g&&e.effectivePlayingAsset?g.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return c()}};this.manager={get events(){var p,g;return((p=e.schedule)==null||(g=p.events)==null?void 0:g.slice(0))||[]},get schedule(){var p,g;return((p=e.schedule)==null||(g=p.items)==null?void 0:g.slice(0))||[]},get interstitialPlayer(){return c()?h:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return n()},get bufferingIndex(){const p=n();return e.findItemIndex(p)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const p=e.effectivePlayingItem;return e.findItemIndex(p)},primary:{get bufferedEnd(){return a()},get currentTime(){const p=e.timelinePos;return p>0?p:0},set currentTime(p){f(p,"primary")},get duration(){return l("primary")},get seekableStart(){var p;return((p=e.primaryDetails)==null?void 0:p.fragmentStart)||0}},integrated:{get bufferedEnd(){return r(n(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return r(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(p){f(p,"integrated")},get duration(){return l("integrated")},get seekableStart(){var p;return s(((p=e.primaryDetails)==null?void 0:p.fragmentStart)||0,"integrated")}},skip:()=>{const p=e.effectivePlayingItem,g=p?.event;if(g&&!g.restrictions.skip){const x=e.findItemIndex(p);if(g.appendInPlace){const b=p.playout.start+p.event.duration;f(b+.001,"playout")}else e.advanceAfterAssetEnded(g,x,1/0)}}}}return this.manager}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const n=this.playingItem,i=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!n||!i?!1:this.findItemIndex(n)===i.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,n,i;if(this.mediaSelection===null)return;const r=this.waitingItem||this.playingItem;if(this.isInterstitial(r)&&!r.event.appendInPlace)return;let s=this.media;!s&&(e=this.bufferingItem)!=null&&(n=e.event)!=null&&n.appendInPlace&&(s=this.primaryMedia);const a=(i=s)==null?void 0:i.currentTime;if(!(a===void 0||!qe(a)))return a}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,n){const i=this.getAssetPlayer(e);i&&this.transferMediaFromPlayer(i,n)}transferMediaFromPlayer(e,n){const i=e.interstitial.appendInPlace,r=e.media;if(i&&r===this.primaryMedia){if(this.bufferingAsset=null,(!n||this.isInterstitial(n)&&!n.event.appendInPlace)&&n&&r){this.detachedData={media:r};return}const s=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Dn(s)}`),this.detachedData=s}else n&&r&&(this.shouldPlay||(this.shouldPlay=!r.paused))}transferMediaTo(e,n){var i,r;if(e.media===n)return;let s=null;const a=this.hls,l=e!==a,f=l&&e.interstitial.appendInPlace,c=(i=this.detachedData)==null?void 0:i.mediaSource;let h;if(a.media)f&&(s=a.transferMedia(),this.detachedData=s),h="Primary";else if(c){const x=this.getBufferingPlayer();x?(s=x.transferMedia(),h=`${x}`):h="detached MediaSource"}else h="detached media";if(!s){if(c)s=this.detachedData,this.log(`using detachedData: MediaSource ${Dn(s)}`);else if(!this.detachedData||a.media===n){const x=this.playerQueue;x.length>1&&x.forEach(b=>{if(l&&b.interstitial.appendInPlace!==f){const T=b.interstitial;this.clearInterstitial(b.interstitial,null),T.appendInPlace=!1,T.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${T}`)}}),this.hls.detachMedia(),this.detachedData={media:n}}}const p=s&&"mediaSource"in s&&((r=s.mediaSource)==null?void 0:r.readyState)!=="closed",g=p&&s?s:n;if(this.log(`${p?"transfering MediaSource":"attaching media"} to ${l?e:"Primary"} from ${h}`),g===s){const x=l&&e.assetId===this.schedule.assetIdAtEnd;g.overrides={duration:this.schedule.duration,endOfStream:!l||x,cueRemoval:!l}}e.attachMedia(g)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,n=e.events;if(!n||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const i=this.timelinePos,r=this.effectivePlayingItem;if(i===-1){const s=this.hls.startPosition;if(this.timelinePos=s,n.length&&n[0].cue.pre){const a=e.findEventIndex(n[0].identifier);this.setSchedulePosition(a)}else if(s>=0||!this.primaryLive){const a=this.timelinePos=s>0?s:0,l=e.findItemIndexAtTime(a);this.setSchedulePosition(l)}}else if(r&&!this.playingItem){const s=e.findItemIndex(r);this.setSchedulePosition(s)}}advanceAfterAssetEnded(e,n,i){const r=l_(e,i);if(!e.isAssetPastPlayoutLimit(r))this.setSchedulePosition(n,r);else{const s=this.schedule.items;if(s){const a=n+1,l=s.length;if(a>=l){this.setSchedulePosition(-1);return}const f=e.resumeTime;this.timelinePos<f&&(this.timelinePos=f,this.checkBuffer()),this.setSchedulePosition(a)}}}setScheduleToAssetAtTime(e,n){const i=this.schedule,r=n.parentIdentifier,s=i.getEvent(r);if(s){const a=i.findEventIndex(r),l=i.findAssetIndex(s,e);this.advanceAfterAssetEnded(s,a,l-1)}}setSchedulePosition(e,n){const i=this.schedule.items;if(!i||this.playbackDisabled)return;this.log(`setSchedulePosition ${e}, ${n}`);const r=e>=0?i[e]:null,s=this.playingItem,a=this.playingLastItem;if(this.isInterstitial(s)){var l;const c=s.event,h=this.playingAsset,p=h?.identifier,g=p?this.getAssetPlayer(p):null;if(g&&p&&(!this.eventItemsMatch(s,r)||n!==void 0&&p!==((l=c.assetList)==null?void 0:l[n].identifier))){var f;const x=c.findAssetIndex(h);if(this.log(`INTERSTITIAL_ASSET_ENDED ${x+1}/${c.assetList.length} ${md(h)}`),this.endedAsset=h,this.playingAsset=null,this.hls.trigger(B.INTERSTITIAL_ASSET_ENDED,{asset:h,assetListIndex:x,event:c,schedule:i.slice(0),scheduleIndex:e,player:g}),s!==this.playingItem){this.itemsMatch(s,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(c,this.findItemIndex(this.playingItem),x);return}this.retreiveMediaSource(p,r),g.media&&!((f=this.detachedData)!=null&&f.mediaSource)&&g.detachMedia()}if(!this.eventItemsMatch(s,r)&&(this.endedItem=s,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${c} ${Fu(s)}`),c.hasPlayed=!0,this.hls.trigger(B.INTERSTITIAL_ENDED,{event:c,schedule:i.slice(0),scheduleIndex:e}),c.cue.once)){this.updateSchedule();const x=this.schedule.items;if(r&&x){const b=this.findItemIndex(r);this.advanceSchedule(b,x,n,s,a)}return}}this.advanceSchedule(e,i,n,s,a)}advanceSchedule(e,n,i,r,s){const a=e>=0?n[e]:null,l=this.primaryMedia,f=this.playerQueue;if(f.length&&f.forEach(c=>{const h=c.interstitial,p=this.schedule.findEventIndex(h.identifier);(p<e||p>e+1)&&this.clearInterstitial(h,a)}),this.isInterstitial(a)){this.timelinePos=Math.min(Math.max(this.timelinePos,a.start),a.end);const c=a.event;if(i===void 0){i=this.schedule.findAssetIndex(c,this.timelinePos);const x=l_(c,i-1);if(c.isAssetPastPlayoutLimit(x)){this.advanceAfterAssetEnded(c,e,i);return}i=x}const h=this.waitingItem;this.assetsBuffered(a,l)||this.setBufferingItem(a);let p=this.preloadAssets(c,i);if(this.eventItemsMatch(a,h||r)||(this.waitingItem=a,this.log(`INTERSTITIAL_STARTED ${Fu(a)} ${c.appendInPlace?"append in place":""}`),this.hls.trigger(B.INTERSTITIAL_STARTED,{event:c,schedule:n.slice(0),scheduleIndex:e})),!c.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${c}`);return}if(c.assetListLoader&&(c.assetListLoader.destroy(),c.assetListLoader=void 0),!l){this.log(`Waiting for attachMedia to start Interstitial ${c}`);return}this.waitingItem=this.endedItem=null,this.playingItem=a;const g=c.assetList[i];if(!g){const x=n[e+1],b=this.media;x&&b&&!this.isInterstitial(x)&&b.currentTime<x.start&&(b.currentTime=this.timelinePos=x.start),this.advanceAfterAssetEnded(c,e,i||0);return}if(p||(p=this.getAssetPlayer(g.identifier)),p===null||p.destroyed){const x=c.assetList.length;this.warn(`asset ${i+1}/${x} player destroyed ${c}`),p=this.createAssetPlayer(c,g,i)}if(!this.eventItemsMatch(a,this.bufferingItem)&&c.appendInPlace&&this.isAssetBuffered(g))return;this.startAssetPlayer(p,i,n,e,l),this.shouldPlay&&gD(p.media)}else a!==null?(this.resumePrimary(a,e,r),this.shouldPlay&&gD(this.hls.media)):s&&this.isInterstitial(r)&&(this.endedItem=null,this.playingItem=r,r.event.appendInPlace||this.attachPrimary(this.schedule.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e,n;return(e=this.mediaSelection)==null||(n=e.main)==null?void 0:n.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,n,i){var r;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Fu(e)}`),!((r=this.detachedData)!=null&&r.mediaSource)){let a=this.timelinePos;(a<e.start||a>=e.end)&&(a=this.getPrimaryResumption(e,n),this.timelinePos=a),this.attachPrimary(a,e)}if(!i)return;const s=this.schedule.items;s&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Fu(e)}`),this.hls.trigger(B.INTERSTITIALS_PRIMARY_RESUMED,{schedule:s.slice(0),scheduleIndex:n}),this.checkBuffer())}getPrimaryResumption(e,n){const i=e.start;if(this.primaryLive){const r=this.primaryDetails;if(n===0)return this.hls.startPosition;if(r&&(i<r.fragmentStart||i>r.edge))return this.hls.liveSyncPosition||-1}return i}isAssetBuffered(e){const n=this.getAssetPlayer(e.identifier);return n!=null&&n.hls?n.hls.bufferedToEnd:wt.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,n,i){n?this.setBufferingItem(n):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const r=this.primaryMedia;if(!r)return;const s=this.hls;s.media?this.checkBuffer():(this.transferMediaTo(s,r),i&&this.startLoadingPrimaryAt(e,i)),i||(this.timelinePos=e,this.startLoadingPrimaryAt(e,i))}startLoadingPrimaryAt(e,n){var i;const r=this.hls;!r.loadingEnabled||!r.media||Math.abs((((i=r.mainForwardBufferInfo)==null?void 0:i.start)||r.media.currentTime)-e)>.5?r.startLoad(e,n):r.bufferingEnabled||r.resumeBuffering()}onManifestLoading(){this.stopLoad(),this.schedule.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(B.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(B.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,n){if(n.level===-1)return;const i=this.hls.levels[n.level],r=pn(pn({},this.mediaSelection||this.altSelection),{},{main:i});this.mediaSelection=r,this.schedule.parseInterstitialDateRanges(r,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,n){const i=this.hls.audioTracks[n.id],r=this.mediaSelection;if(!r){this.altSelection=pn(pn({},this.altSelection),{},{audio:i});return}const s=pn(pn({},r),{},{audio:i});this.mediaSelection=s}onSubtitleTrackUpdated(e,n){const i=this.hls.subtitleTracks[n.id],r=this.mediaSelection;if(!r){this.altSelection=pn(pn({},this.altSelection),{},{subtitles:i});return}const s=pn(pn({},r),{},{subtitles:i});this.mediaSelection=s}onAudioTrackSwitching(e,n){const i=LP(n);this.playerQueue.forEach(r=>r.hls.setAudioOption(n)||r.hls.setAudioOption(i))}onSubtitleTrackSwitch(e,n){const i=LP(n);this.playerQueue.forEach(r=>r.hls.setSubtitleOption(n)||n.id!==-1&&r.hls.setSubtitleOption(i))}onBufferCodecs(e,n){const i=n.tracks;i&&(this.requiredTracks=i)}onBufferAppended(e,n){this.checkBuffer()}onBufferFlushed(e,n){const i=this.playingItem;if(i&&!this.itemsMatch(i,this.bufferingItem)&&!this.isInterstitial(i)){const r=this.timelinePos;this.bufferedPos=r,this.checkBuffer()}}onBufferedToEnd(e){const n=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&n){for(let r=0;r<n.length;r++){const s=n[r];if(s.cue.post){var i;const a=this.schedule.findEventIndex(s.identifier),l=(i=this.schedule.items)==null?void 0:i[a];this.isInterstitial(l)&&this.eventItemsMatch(l,this.bufferingItem)&&this.bufferedToItem(l,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const n=this.playingItem;if(!this.playingLastItem&&n){const i=this.findItemIndex(n);this.setSchedulePosition(i+1)}else this.shouldPlay=!1}updateItem(e,n){const i=this.schedule.items;if(e&&i){const r=this.findItemIndex(e,n);return i[r]||null}return null}trimInPlace(e,n){if(this.isInterstitial(e)&&e.event.appendInPlace&&n.end-e.end>.25){e.event.assetList.forEach((s,a)=>{e.event.isAssetPastPlayoutLimit(a)&&this.clearAssetPlayer(s.identifier,null)});const i=e.end+.25,r=wt.bufferInfo(this.primaryMedia,i,0);(r.end>i||(r.nextStart||0)>i)&&(this.attachPrimary(i,null),this.flushFrontBuffer(i))}}itemsMatch(e,n){return!!n&&(e===n||e.event&&n.event&&this.eventItemsMatch(e,n)||!e.event&&!n.event&&this.findItemIndex(e)===this.findItemIndex(n))}eventItemsMatch(e,n){var i;return!!n&&(e===n||e.event.identifier===((i=n.event)==null?void 0:i.identifier))}findItemIndex(e,n){return e?this.schedule.findItemIndex(e,n):-1}updateSchedule(){const e=this.mediaSelection;e&&this.schedule.updateSchedule(e,[])}checkBuffer(e){const n=this.schedule.items;if(!n)return;const i=wt.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,n,e)}updateBufferedPos(e,n,i){const r=this.schedule,s=this.bufferingItem;if(this.bufferedPos>e)return;if(n.length===1&&this.itemsMatch(n[0],s)){this.bufferedPos=e;return}const a=this.playingItem,l=this.findItemIndex(a);let f=r.findItemIndexAtTime(e);if(this.bufferedPos<e){var c,h;const p=this.findItemIndex(s),g=Math.min(p+1,n.length-1),x=n[g];if((f===-1&&s&&e>=s.end||(c=x.event)!=null&&c.appendInPlace&&e+.01>=x.start)&&(f=g),g-l>1&&(s==null||(h=s.event)==null?void 0:h.appendInPlace)===!1)return;if(this.bufferedPos=e,f>p&&f>l)this.bufferedToItem(x);else{const b=this.primaryDetails;this.primaryLive&&b&&e>b.edge-b.targetduration&&x.start<b.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(x)&&this.preloadAssets(x.event,0)}}else i&&a&&!this.itemsMatch(a,s)&&(f===l?this.bufferedToItem(a):f===l+1&&this.bufferedToItem(n[f]))}assetsBuffered(e,n){return e.event.assetList.length===0?!1:!e.event.assetList.some(r=>{const s=this.getAssetPlayer(r.identifier);return!(s!=null&&s.bufferedInPlaceToEnd(n))})}setBufferingItem(e){const n=this.bufferingItem,i=this.schedule;if(this.itemsMatch(e,n))this.bufferingItem!==e&&(this.bufferingItem=e);else{const{items:r,events:s}=i;if(!r||!s)return n;const a=this.isInterstitial(e),l=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const f=l?l.remaining:n?n.end-this.timelinePos:0;this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Fu(e)}`+(n?` (${f.toFixed(2)} remaining)`:"")),this.playbackDisabled||(a?e.event.assetList.forEach(c=>{const h=this.getAssetPlayer(c.identifier);h&&h.resumeBuffering()}):(this.hls.resumeBuffering(),this.playerQueue.forEach(c=>c.pauseBuffering()))),this.hls.trigger(B.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:s.slice(0),schedule:r.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}return n}bufferedToItem(e,n=0){const i=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,n);else if(i!==null){this.bufferingAsset=null;const r=this.detachedData;r?r.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const n=this.findItemIndex(e),i=this.getPrimaryResumption(e,n);this.startLoadingPrimaryAt(i)}bufferedToEvent(e,n){const i=e.event,r=i.assetList.length===0&&!i.assetListLoader,s=i.cue.once;if(r||!s){const a=this.preloadAssets(i,n);if(a!=null&&a.interstitial.appendInPlace){const l=i.assetList[n],f=this.primaryMedia;l&&f&&this.bufferAssetPlayer(a,f)}}}preloadAssets(e,n){const i=e.assetUrl,r=e.assetList.length,s=r===0&&!e.assetListLoader,a=e.cue.once;if(s){const f=e.timelineStart;if(e.appendInPlace){var l;const g=this.playingItem;!this.isInterstitial(g)&&(g==null||(l=g.nextEvent)==null?void 0:l.identifier)===e.identifier&&this.flushFrontBuffer(f+.25)}let c,h=0;if(!this.playingItem&&this.primaryLive&&(h=this.hls.startPosition,h===-1&&(h=this.hls.liveSyncPosition||0)),h&&!(e.cue.pre||e.cue.post)){const g=h-f;g>0&&(c=Math.round(g*1e3)/1e3)}if(this.log(`Load interstitial asset ${n+1}/${i?1:r} ${e}${c?` live-start: ${h} start-offset: ${c}`:""}`),i)return this.createAsset(e,0,0,f,e.duration,i);const p=this.assetListLoader.loadAssetList(e,c);p&&(e.assetListLoader=p)}else if(!a&&r){for(let f=n;f<r;f++){const c=e.assetList[f],h=this.getAssetPlayerQueueIndex(c.identifier);(h===-1||this.playerQueue[h].destroyed)&&!c.error&&this.createAssetPlayer(e,c,f)}return this.getAssetPlayer(e.assetList[n].identifier)}return null}flushFrontBuffer(e){const n=this.requiredTracks;if(!n)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(n).forEach(r=>{this.hls.trigger(B.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:r})})}getAssetPlayerQueueIndex(e){const n=this.playerQueue;for(let i=0;i<n.length;i++)if(e===n[i].assetId)return i;return-1}getAssetPlayer(e){const n=this.getAssetPlayerQueueIndex(e);return this.playerQueue[n]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:n}=this;if(n){for(let i=0;i<e.length;i++)if(e[i].media===n)return e[i]}return null}createAsset(e,n,i,r,s,a){const l={parentIdentifier:e.identifier,identifier:ure(e,a,n),duration:s,startOffset:i,timelineStart:r,uri:a};return this.createAssetPlayer(e,l,n)}createAssetPlayer(e,n,i){const r=this.hls,s=r.userConfig;let a=s.videoPreference;const l=r.loadLevelObj||r.levels[r.currentLevel];(a||l)&&(a=cn({},a),l.videoCodec&&(a.videoCodec=l.videoCodec),l.videoRange&&(a.allowedVideoRanges=[l.videoRange]));const f=r.audioTracks[r.audioTrack],c=r.subtitleTracks[r.subtitleTrack];let h=0;if(this.primaryLive||e.appendInPlace){const P=this.timelinePos-n.timelineStart;if(P>1){const M=n.duration;M&&P<M&&(h=P)}}const p=n.identifier,g=pn(pn({},s),{},{autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:r.sessionId,assetPlayerId:p,abrEwmaDefaultEstimate:r.bandwidthEstimate,interstitialsController:void 0,startPosition:h,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:a,audioPreference:f||s.audioPreference,subtitlePreference:c||s.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,n.timelineStart&&(g.timelineOffset=n.timelineStart));const x=g.cmcd;x!=null&&x.sessionId&&x.contentId&&(g.cmcd=cn({},x,{contentId:bm(n.uri)})),this.getAssetPlayer(p)&&this.warn(`Duplicate date range identifier ${e} and asset ${p}`);const b=new dre(this.HlsPlayerClass,g,e,n);this.playerQueue.push(b),e.assetList[i]=n;const T=P=>{if(P.live){const z=new Error(`Interstitials MUST be VOD assets ${e}`),F={fatal:!0,type:at.OTHER_ERROR,details:pe.INTERSTITIAL_ASSET_ITEM_ERROR,error:z};this.handleAssetItemError(F,e,this.schedule.findEventIndex(e.identifier),i,z.message);return}const M=P.edge-P.fragmentStart,k=n.duration;(k===null||M>k)&&(this.log(`Interstitial asset "${p}" duration change ${k} > ${M}`),n.duration=M,this.updateSchedule())};b.on(B.LEVEL_UPDATED,(P,{details:M})=>T(M)),b.on(B.LEVEL_PTS_UPDATED,(P,{details:M})=>T(M));const E=(P,M)=>{const k=this.getAssetPlayer(p);if(k&&M.tracks){k.off(B.BUFFER_CODECS,E),k.tracks=M.tracks;const z=this.primaryMedia;this.bufferingAsset===k.assetItem&&z&&!k.media&&this.bufferAssetPlayer(k,z)}};b.on(B.BUFFER_CODECS,E);const C=()=>{var P;const M=this.getAssetPlayer(p);if(this.log(`buffered to end of asset ${M}`),!M)return;const k=this.schedule.findEventIndex(e.identifier),z=(P=this.schedule.items)==null?void 0:P[k];if(this.isInterstitial(z)){const G=e.findAssetIndex(n),K=l_(e,G);if(!e.isAssetPastPlayoutLimit(K))this.bufferedToItem(z,K);else{var F;const V=(F=this.schedule.items)==null?void 0:F[k+1];V&&this.bufferedToItem(V)}}};b.on(B.BUFFERED_TO_END,C);const I=P=>()=>{if(!this.getAssetPlayer(p))return;this.shouldPlay=!0;const k=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,k,P)};return b.once(B.MEDIA_ENDED,I(i)),b.once(B.PLAYOUT_LIMIT_REACHED,I(1/0)),b.on(B.ERROR,(P,M)=>{const k=this.getAssetPlayer(p);if(M.details===pe.BUFFER_STALLED_ERROR){if(k!=null&&k.media){const z=k.currentTime,F=k.duration-z;z&&e.appendInPlace&&F/k.media.playbackRate<.5?(this.log(`Advancing buffer past end of asset ${p} ${e} at ${k.media.currentTime}`),C()):(this.warn(`Stalled at ${z} of ${z+F} in asset ${p} ${e}`),this.onTimeupdate(),this.checkBuffer(!0))}return}this.handleAssetItemError(M,e,this.schedule.findEventIndex(e.identifier),i,`Asset player error ${M.error} ${e}`)}),b.on(B.DESTROYING,()=>{if(!this.getAssetPlayer(p))return;const M=new Error(`Asset player destroyed unexpectedly ${p}`),k={fatal:!0,type:at.OTHER_ERROR,details:pe.INTERSTITIAL_ASSET_ITEM_ERROR,error:M};this.handleAssetItemError(k,e,this.schedule.findEventIndex(e.identifier),i,M.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${md(n)}`),this.hls.trigger(B.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:n,assetListIndex:i,event:e,player:b}),b}clearInterstitial(e,n){e.assetList.forEach(i=>{this.clearAssetPlayer(i.identifier,n)}),e.reset()}resetAssetPlayer(e){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){this.log(`reset asset player "${e}" after error`);const i=this.playerQueue[n];this.transferMediaFromPlayer(i,null),i.resetDetails()}}clearAssetPlayer(e,n){const i=this.getAssetPlayerQueueIndex(e);if(i!==-1){this.log(`clear asset player "${e}" toSegment: ${n&&Fu(n)}`);const r=this.playerQueue[i];this.transferMediaFromPlayer(r,n),this.playerQueue.splice(i,1),r.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,n,i,r,s){const{interstitial:a,assetItem:l,assetId:f}=e,c=a.assetList.length,h=this.playingAsset;this.endedAsset=null,this.playingAsset=l,(!h||h.identifier!==f)&&(h&&(this.clearAssetPlayer(h.identifier,i[r]),delete h.error),this.log(`INTERSTITIAL_ASSET_STARTED ${n+1}/${c} ${md(l)}`),this.hls.trigger(B.INTERSTITIAL_ASSET_STARTED,{asset:l,assetListIndex:n,event:a,schedule:i.slice(0),scheduleIndex:r,player:e})),this.bufferAssetPlayer(e,s)}bufferAssetPlayer(e,n){var i,r;const{interstitial:s,assetItem:a}=e,l=this.schedule.findEventIndex(s.identifier),f=(i=this.schedule.items)==null?void 0:i[l];if(!f)return;this.setBufferingItem(f),this.bufferingAsset=a;const c=this.getBufferingPlayer();if(c===e)return;const h=s.appendInPlace;if(h&&c?.interstitial.appendInPlace===!1)return;const p=c?.tracks||((r=this.detachedData)==null?void 0:r.tracks)||this.requiredTracks;if(h&&a!==this.playingAsset){if(!e.tracks)return;if(p&&!tB(p,e.tracks)){const g=new Error(`Asset ${md(a)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(p)}')`),x={fatal:!0,type:at.OTHER_ERROR,details:pe.INTERSTITIAL_ASSET_ITEM_ERROR,error:g},b=s.findAssetIndex(a);this.handleAssetItemError(x,s,l,b,g.message);return}}this.transferMediaTo(e,n)}handleAssetItemError(e,n,i,r,s){if(e.details===pe.BUFFER_STALLED_ERROR)return;const a=n.assetList[r];this.warn(`INTERSTITIAL_ASSET_ERROR ${a&&md(a)} ${e.error}`);const l=a?.identifier,f=this.getAssetPlayerQueueIndex(l),c=this.playerQueue[f]||null,h=this.schedule.items,p=cn({},e,{fatal:!1,errorAction:Bm(!0),asset:a,assetListIndex:r,event:n,schedule:h,scheduleIndex:i,player:c});if(this.hls.trigger(B.INTERSTITIAL_ASSET_ERROR,p),!e.fatal)return;const g=this.playingAsset,x=new Error(s);if(a&&(this.clearAssetPlayer(l,null),a.error=x),!n.assetList.some(b=>!b.error))n.error=x;else{for(let b=r;b<n.assetList.length;b++)this.resetAssetPlayer(n.assetList[b].identifier);this.updateSchedule()}n.error?this.primaryFallback(n):g&&g.identifier===l&&this.advanceAfterAssetEnded(n,i,r)}primaryFallback(e){const n=e.timelineStart,i=this.effectivePlayingItem;if(this.updateSchedule(),i){this.log(`Fallback to primary from event "${e.identifier}" start: ${n} pos: ${this.timelinePos} playing: ${i?Fu(i):"<none>"} error: ${e.error}`);let r=this.timelinePos;r===-1&&(r=this.hls.startPosition);const s=this.updateItem(i,r);this.itemsMatch(i,s)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(n,null),this.flushFrontBuffer(n));const a=this.schedule.findItemIndexAtTime(r);this.setSchedulePosition(a)}else this.checkStart()}onAssetListLoaded(e,n){var i;const r=n.event,s=r.identifier,a=n.assetListResponse.ASSETS;if(!this.schedule.hasEvent(s))return;const l=r.timelineStart,f=r.duration;let c=0;a.forEach((b,T)=>{const E=parseFloat(b.DURATION);this.createAsset(r,T,c,l+c,E,b.URI),c+=E}),r.duration=c,this.log(`Loaded asset-list with duration: ${c} (was: ${f}) ${r}`);const h=this.waitingItem,p=h?.event.identifier===s;this.updateSchedule();const g=(i=this.bufferingItem)==null?void 0:i.event;if(p){var x;const b=this.schedule.findEventIndex(s),T=(x=this.schedule.items)==null?void 0:x[b];if(T){if(!this.playingItem&&this.timelinePos>T.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==b){r.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${r}`),this.primaryFallback(r);return}this.setBufferingItem(T)}this.setSchedulePosition(b)}else if(g?.identifier===s&&g.appendInPlace){const b=r.assetList[0],T=this.getAssetPlayer(b.identifier),E=this.primaryMedia;b&&T&&E&&this.bufferAssetPlayer(T,E)}}onError(e,n){switch(n.details){case pe.ASSET_LIST_PARSING_ERROR:case pe.ASSET_LIST_LOAD_ERROR:case pe.ASSET_LIST_LOAD_TIMEOUT:{const i=n.interstitial;i&&this.primaryFallback(i);break}case pe.BUFFER_STALLED_ERROR:{this.onTimeupdate(),this.checkBuffer(!0);break}}}}const vD=500;class gre extends iA{constructor(e,n,i){super(e,n,i,"subtitle-stream-controller",et.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(B.LEVEL_LOADED,this.onLevelLoaded,this),e.on(B.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(B.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(B.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(B.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(B.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(B.LEVEL_LOADED,this.onLevelLoaded,this),e.off(B.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(B.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(B.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(B.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(B.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,n){this.stopLoad(),this.state=Re.IDLE,this.setInterval(vD),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,n){this.tracksBuffered=[],super.onMediaDetaching(e,n)}onLevelLoaded(e,n){this.mainDetails=n.details}onSubtitleFragProcessed(e,n){const{frag:i,success:r}=n;if(this.fragContextChanged(i)||(oi(i)&&(this.fragPrevious=i),this.state=Re.IDLE),!r)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let a;const l=i.start;for(let c=0;c<s.length;c++)if(l>=s[c].start&&l<=s[c].end){a=s[c];break}const f=i.start+i.duration;a?a.end=f:(a={start:l,end:f},s.push(a)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null),this.media&&this.tick()}onBufferFlushing(e,n){const{startOffset:i,endOffset:r}=n;if(i===0&&r!==Number.POSITIVE_INFINITY){const s=r-1;if(s<=0)return;n.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(a=>{for(let l=0;l<a.length;){if(a[l].end<=s){a.shift();continue}else if(a[l].start<s)a[l].start=s;else break;l++}}),this.fragmentTracker.removeFragmentsInRange(i,s,et.SUBTITLE)}}onError(e,n){const i=n.frag;i?.type===et.SUBTITLE&&(n.details===pe.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Re.STOPPED&&(this.state=Re.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:n}){if(this.levels&&QB(this.levels,n)){this.levels=n.map(i=>new jm(i));return}this.tracksBuffered=[],this.levels=n.map(i=>{const r=new jm(i);return this.tracksBuffered[r.id]=[],r}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,et.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,n){var i;if(this.currentTrackId=n.id,!((i=this.levels)!=null&&i.length)||this.currentTrackId===-1){this.clearInterval();return}const r=this.levels[this.currentTrackId];r!=null&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.state!==Re.STOPPED&&this.setInterval(vD)}onSubtitleTrackLoaded(e,n){var i;const{currentTrackId:r,levels:s}=this,{details:a,id:l}=n;if(!s){this.warn(`Subtitle tracks were reset while loading level ${l}`);return}const f=s[l];if(l>=s.length||!f)return;this.log(`Subtitle track ${l} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(a.live||(i=f.details)!=null&&i.live){if(a.deltaUpdateFailed)return;const p=this.mainDetails;if(!p){this.startFragRequested=!1;return}const g=p.fragments[0];if(!f.details)a.hasProgramDateTime&&p.hasProgramDateTime?(qv(a,p),c=a.fragmentStart):g&&(c=g.start,IS(a,c));else{var h;c=this.alignPlaylists(a,f.details,(h=this.levelLastLoaded)==null?void 0:h.details),c===0&&g&&(c=g.start,IS(a,c))}p&&!this.startFragRequested&&this.setStartPosition(p,c)}f.details=a,this.levelLastLoaded=f,l===r&&(this.hls.trigger(B.SUBTITLE_TRACK_UPDATED,{details:a,id:l,groupId:n.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===Re.IDLE&&(sf(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),f.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:n,payload:i}=e,r=n.decryptdata,s=this.hls;if(!this.fragContextChanged(n)&&i&&i.byteLength>0&&r!=null&&r.key&&r.iv&&Sd(r.method)){const a=performance.now();this.decrypter.decrypt(new Uint8Array(i),r.key.buffer,r.iv.buffer,nA(r.method)).catch(l=>{throw s.trigger(B.ERROR,{type:at.MEDIA_ERROR,details:pe.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:n}),l}).then(l=>{const f=performance.now();s.trigger(B.FRAG_DECRYPTED,{frag:n,payload:l,stats:{tstart:a,tdecrypt:f}})}).catch(l=>{this.warn(`${l.name}: ${l.message}`),this.state=Re.IDLE})}}doTick(){if(!this.media){this.state=Re.IDLE;return}if(this.state===Re.IDLE){const{currentTrackId:e,levels:n}=this,i=n?.[e];if(!i||!n.length||!i.details||this.waitForLive(i))return;const{config:r}=this,s=this.getLoadPosition(),a=wt.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,r.maxBufferHole),{end:l,len:f}=a,c=i.details,h=this.hls.maxBufferLength+c.levelTargetDuration;if(f>h)return;const p=c.fragments,g=p.length,x=c.edge;let b=null;const T=this.fragPrevious;if(l<x){const I=r.maxFragLookUpTolerance,P=l>x-I?0:I;b=sf(T,p,Math.max(p[0].start,l),P),!b&&T&&T.start<p[0].start&&(b=p[0])}else b=p[g-1];if(b=this.filterReplacedPrimary(b,i.details),!b)return;const E=b.sn-c.startSN,C=p[E-1];if(C&&C.cc===b.cc&&this.fragmentTracker.getState(C)===pi.NOT_LOADED&&(b=C),this.fragmentTracker.getState(b)===pi.NOT_LOADED){const I=this.mapToInitFragWhenRequired(b);I&&this.loadFragment(I,i,l)}}}loadFragment(e,n,i){oi(e)?super.loadFragment(e,n,i):this._loadInitSegment(e,n)}get mediaBufferTimeRanges(){return new vre(this.tracksBuffered[this.currentTrackId]||[])}}class vre{constructor(e){this.buffered=void 0;const n=(i,r,s)=>{if(r=r>>>0,r>s-1)throw new DOMException(`Failed to execute '${i}' on 'TimeRanges': The index provided (${r}) is greater than the maximum bound (${s})`);return e[r][i]};this.buffered={get length(){return e.length},end(i){return n("end",i,e.length)},start(i){return n("start",i,e.length)}}}}const yre={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},uF=t=>String.fromCharCode(yre[t]||t),Ka=15,_l=100,bre={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},xre={17:2,18:4,21:6,22:8,23:10,19:13,20:15},_re={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Sre={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Ere=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Tre{constructor(){this.time=null,this.verboseLevel=0}log(e,n){if(this.verboseLevel>=e){const i=typeof n=="function"?n():n;Wt.log(`${this.time} [${e}] ${i}`)}}}const Rc=function(e){const n=[];for(let i=0;i<e.length;i++)n.push(e[i].toString(16));return n};class cF{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const n=["foreground","underline","italics","background","flash"];for(let i=0;i<n.length;i++){const r=n[i];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Are{constructor(){this.uchar=" ",this.penState=new cF}reset(){this.uchar=" ",this.penState.reset()}setChar(e,n){this.uchar=e,this.penState.copy(n)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class wre{constructor(e){this.chars=[],this.pos=0,this.currPenState=new cF,this.cueStartTime=null,this.logger=void 0;for(let n=0;n<_l;n++)this.chars.push(new Are);this.logger=e}equals(e){for(let n=0;n<_l;n++)if(!this.chars[n].equals(e.chars[n]))return!1;return!0}copy(e){for(let n=0;n<_l;n++)this.chars[n].copy(e.chars[n])}isEmpty(){let e=!0;for(let n=0;n<_l;n++)if(!this.chars[n].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>_l&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=_l)}moveCursor(e){const n=this.pos+e;if(e>1)for(let i=this.pos+1;i<n+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(n)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const n=uF(e);if(this.pos>=_l){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)}clearFromPos(e){let n;for(n=e;n<_l;n++)this.chars[n].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let n=!0;for(let i=0;i<_l;i++){const r=this.chars[i].uchar;r!==" "&&(n=!1),e.push(r)}return n?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class u_{constructor(e){this.rows=[],this.currRow=Ka-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let n=0;n<Ka;n++)this.rows.push(new wre(e));this.logger=e}reset(){for(let e=0;e<Ka;e++)this.rows[e].clear();this.currRow=Ka-1}equals(e){let n=!0;for(let i=0;i<Ka;i++)if(!this.rows[i].equals(e.rows[i])){n=!1;break}return n}copy(e){for(let n=0;n<Ka;n++)this.rows[n].copy(e.rows[n])}isEmpty(){let e=!0;for(let n=0;n<Ka;n++)if(!this.rows[n].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Dn(e));let n=e.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(let l=0;l<Ka;l++)this.rows[l].clear();const s=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const l=a.rows[s].cueStartTime,f=this.logger.time;if(l!==null&&f!==null&&l<f)for(let c=0;c<this.nrRollUpRows;c++)this.rows[n-this.nrRollUpRows+c+1].copy(a.rows[s+c])}}this.currRow=n;const i=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,a=Math.max(s-1,0);i.setCursor(e.indent),e.color=i.chars[a].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Dn(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(e,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const n=[];let i="",r=-1;for(let s=0;s<Ka;s++){const a=this.rows[s].getTextString();a&&(r=s+1,e?n.push("Row "+r+": '"+a+"'"):n.push(a.trim()))}return n.length>0&&(e?i="["+n.join(" | ")+"]":i=n.join(`
`)),i}getTextAndFormat(){return this.rows}}class yD{constructor(e,n,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new u_(i),this.nonDisplayedMemory=new u_(i),this.lastOutputScreen=new u_(i),this.currRollUpRow=this.displayedMemory.rows[Ka-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Ka-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);const n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>n+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const n={flash:!1};if(n.underline=e%2===1,n.italics=e>=46,n.italics)n.foreground="white";else{const i=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=r[i]}this.logger.log(2,"MIDROW: "+Dn(n)),this.writeScreen.setPen(n)}outputDataUpdate(e=!1){const n=this.logger.time;n!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class bD{constructor(e,n,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=Cre(),this.logger=void 0;const r=this.logger=new Tre;this.channels=[null,new yD(e,n,r),new yD(e+1,i,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,n){this.channels[e].setHandler(n)}addData(e,n){this.logger.time=e;for(let i=0;i<n.length;i+=2){const r=n[i]&127,s=n[i+1]&127;let a=!1,l=null;if(r===0&&s===0)continue;this.logger.log(3,()=>"["+Rc([n[i],n[i+1]])+"] -> ("+Rc([r,s])+")");const f=this.cmdHistory;if(r>=16&&r<=31){if(Lre(r,s,f)){Lg(null,null,f),this.logger.log(3,()=>"Repeated command ("+Rc([r,s])+") is dropped");continue}Lg(r,s,this.cmdHistory),a=this.parseCmd(r,s),a||(a=this.parseMidrow(r,s)),a||(a=this.parsePAC(r,s)),a||(a=this.parseBackgroundAttributes(r,s))}else Lg(null,null,f);if(!a&&(l=this.parseChars(r,s),l)){const h=this.currentChannel;h&&h>0?this.channels[h].insertChars(l):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!l&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Rc([r,s])+" orig: "+Rc([n[i],n[i+1]]))}}parseCmd(e,n){const i=(e===20||e===28||e===21||e===29)&&n>=32&&n<=47,r=(e===23||e===31)&&n>=33&&n<=35;if(!(i||r))return!1;const s=e===20||e===21||e===23?1:2,a=this.channels[s];return e===20||e===21||e===28||e===29?n===32?a.ccRCL():n===33?a.ccBS():n===34?a.ccAOF():n===35?a.ccAON():n===36?a.ccDER():n===37?a.ccRU(2):n===38?a.ccRU(3):n===39?a.ccRU(4):n===40?a.ccFON():n===41?a.ccRDC():n===42?a.ccTR():n===43?a.ccRTD():n===44?a.ccEDM():n===45?a.ccCR():n===46?a.ccENM():n===47&&a.ccEOC():a.ccTO(n-32),this.currentChannel=s,!0}parseMidrow(e,n){let i=0;if((e===17||e===25)&&n>=32&&n<=47){if(e===17?i=1:i=2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[i];return r?(r.ccMIDROW(n),this.logger.log(3,()=>"MIDROW ("+Rc([e,n])+")"),!0):!1}return!1}parsePAC(e,n){let i;const r=(e>=17&&e<=23||e>=25&&e<=31)&&n>=64&&n<=127,s=(e===16||e===24)&&n>=64&&n<=95;if(!(r||s))return!1;const a=e<=23?1:2;n>=64&&n<=95?i=a===1?bre[e]:_re[e]:i=a===1?xre[e]:Sre[e];const l=this.channels[a];return l?(l.setPAC(this.interpretPAC(i,n)),this.currentChannel=a,!0):!1}interpretPAC(e,n){let i;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return n>95?i=n-96:i=n-64,r.underline=(i&1)===1,i<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(r.italics=!0,r.color="white"):r.indent=Math.floor((i-16)/2)*4,r}parseChars(e,n){let i,r=null,s=null;if(e>=25?(i=2,s=e-8):(i=1,s=e),s>=17&&s<=19){let a;s===17?a=n+80:s===18?a=n+112:a=n+144,this.logger.log(2,()=>"Special char '"+uF(a)+"' in channel "+i),r=[a]}else e>=32&&e<=127&&(r=n===0?[e]:[e,n]);return r&&this.logger.log(3,()=>"Char codes =  "+Rc(r).join(",")),r}parseBackgroundAttributes(e,n){const i=(e===16||e===24)&&n>=32&&n<=47,r=(e===23||e===31)&&n>=45&&n<=47;if(!(i||r))return!1;let s;const a={};e===16||e===24?(s=Math.floor((n-32)/2),a.background=Ere[s],n%2===1&&(a.background=a.background+"_semi")):n===45?a.background="transparent":(a.foreground="black",n===47&&(a.underline=!0));const l=e<=23?1:2;return this.channels[l].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const n=this.channels[e];n&&n.reset()}Lg(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let n=0;n<this.channels.length;n++){const i=this.channels[n];i&&i.cueSplitAtTime(e)}}}function Lg(t,e,n){n.a=t,n.b=e}function Lre(t,e,n){return n.a===t&&n.b===e}function Cre(){return{a:null,b:null}}var mA=function(){if(Kv!=null&&Kv.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function n(l,f){if(typeof f!="string"||!Array.isArray(l))return!1;const c=f.toLowerCase();return~l.indexOf(c)?c:!1}function i(l){return n(t,l)}function r(l){return n(e,l)}function s(l,...f){let c=1;for(;c<arguments.length;c++){const h=arguments[c];for(const p in h)l[p]=h[p]}return l}function a(l,f,c){const h=this,p={enumerable:!0};h.hasBeenReset=!1;let g="",x=!1,b=l,T=f,E=c,C=null,I="",P=!0,M="auto",k="start",z=50,F="middle",G=50,K="middle";Object.defineProperty(h,"id",s({},p,{get:function(){return g},set:function(V){g=""+V}})),Object.defineProperty(h,"pauseOnExit",s({},p,{get:function(){return x},set:function(V){x=!!V}})),Object.defineProperty(h,"startTime",s({},p,{get:function(){return b},set:function(V){if(typeof V!="number")throw new TypeError("Start time must be set to a number.");b=V,this.hasBeenReset=!0}})),Object.defineProperty(h,"endTime",s({},p,{get:function(){return T},set:function(V){if(typeof V!="number")throw new TypeError("End time must be set to a number.");T=V,this.hasBeenReset=!0}})),Object.defineProperty(h,"text",s({},p,{get:function(){return E},set:function(V){E=""+V,this.hasBeenReset=!0}})),Object.defineProperty(h,"region",s({},p,{get:function(){return C},set:function(V){C=V,this.hasBeenReset=!0}})),Object.defineProperty(h,"vertical",s({},p,{get:function(){return I},set:function(V){const Q=i(V);if(Q===!1)throw new SyntaxError("An invalid or illegal string was specified.");I=Q,this.hasBeenReset=!0}})),Object.defineProperty(h,"snapToLines",s({},p,{get:function(){return P},set:function(V){P=!!V,this.hasBeenReset=!0}})),Object.defineProperty(h,"line",s({},p,{get:function(){return M},set:function(V){if(typeof V!="number"&&V!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");M=V,this.hasBeenReset=!0}})),Object.defineProperty(h,"lineAlign",s({},p,{get:function(){return k},set:function(V){const Q=r(V);if(!Q)throw new SyntaxError("An invalid or illegal string was specified.");k=Q,this.hasBeenReset=!0}})),Object.defineProperty(h,"position",s({},p,{get:function(){return z},set:function(V){if(V<0||V>100)throw new Error("Position must be between 0 and 100.");z=V,this.hasBeenReset=!0}})),Object.defineProperty(h,"positionAlign",s({},p,{get:function(){return F},set:function(V){const Q=r(V);if(!Q)throw new SyntaxError("An invalid or illegal string was specified.");F=Q,this.hasBeenReset=!0}})),Object.defineProperty(h,"size",s({},p,{get:function(){return G},set:function(V){if(V<0||V>100)throw new Error("Size must be between 0 and 100.");G=V,this.hasBeenReset=!0}})),Object.defineProperty(h,"align",s({},p,{get:function(){return K},set:function(V){const Q=r(V);if(!Q)throw new SyntaxError("An invalid or illegal string was specified.");K=Q,this.hasBeenReset=!0}})),h.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class Ore{decode(e,n){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function fF(t){function e(i,r,s,a){return(i|0)*3600+(r|0)*60+(s|0)+parseFloat(a||0)}const n=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?e(n[2],n[3],0,n[4]):e(n[1],n[2],n[3],n[4]):null}class Rre{constructor(){this.values=Object.create(null)}set(e,n){!this.get(e)&&n!==""&&(this.values[e]=n)}get(e,n,i){return i?this.has(e)?this.values[e]:n[i]:this.has(e)?this.values[e]:n}has(e){return e in this.values}alt(e,n,i){for(let r=0;r<i.length;++r)if(n===i[r]){this.set(e,n);break}}integer(e,n){/^-?\d+$/.test(n)&&this.set(e,parseInt(n,10))}percent(e,n){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(n)){const i=parseFloat(n);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}}function dF(t,e,n,i){const r=i?t.split(i):[t];for(const s in r){if(typeof r[s]!="string")continue;const a=r[s].split(n);if(a.length!==2)continue;const l=a[0],f=a[1];e(l,f)}}const US=new mA(0,0,""),Cg=US.align==="middle"?"middle":"center";function Pre(t,e,n){const i=t;function r(){const l=fF(t);if(l===null)throw new Error("Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),l}function s(l,f){const c=new Rre;dF(l,function(g,x){let b;switch(g){case"region":for(let T=n.length-1;T>=0;T--)if(n[T].id===x){c.set(g,n[T].region);break}break;case"vertical":c.alt(g,x,["rl","lr"]);break;case"line":b=x.split(","),c.integer(g,b[0]),c.percent(g,b[0])&&c.set("snapToLines",!1),c.alt(g,b[0],["auto"]),b.length===2&&c.alt("lineAlign",b[1],["start",Cg,"end"]);break;case"position":b=x.split(","),c.percent(g,b[0]),b.length===2&&c.alt("positionAlign",b[1],["start",Cg,"end","line-left","line-right","auto"]);break;case"size":c.percent(g,x);break;case"align":c.alt(g,x,["start",Cg,"end","left","right"]);break}},/:/,/\s/),f.region=c.get("region",null),f.vertical=c.get("vertical","");let h=c.get("line","auto");h==="auto"&&US.line===-1&&(h=-1),f.line=h,f.lineAlign=c.get("lineAlign","start"),f.snapToLines=c.get("snapToLines",!0),f.size=c.get("size",100),f.align=c.get("align",Cg);let p=c.get("position","auto");p==="auto"&&US.position===50&&(p=f.align==="start"||f.align==="left"?0:f.align==="end"||f.align==="right"?100:50),f.position=p}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=r(),a(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+i);t=t.slice(3),a(),e.endTime=r(),a(),s(t,e)}function hF(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class Dre{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Ore,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));function i(){let s=n.buffer,a=0;for(s=hF(s);a<s.length&&s[a]!=="\r"&&s[a]!==`
`;)++a;const l=s.slice(0,a);return s[a]==="\r"&&++a,s[a]===`
`&&++a,n.buffer=s.slice(a),l}function r(s){dF(s,function(a,l){},/:/)}try{let s="";if(n.state==="INITIAL"){if(!/\r\n|\n/.test(n.buffer))return this;s=i();const l=s.match(/^()?WEBVTT([ \t].*)?$/);if(!(l!=null&&l[0]))throw new Error("Malformed WebVTT signature.");n.state="HEADER"}let a=!1;for(;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(a?a=!1:s=i(),n.state){case"HEADER":/:/.test(s)?r(s):s||(n.state="ID");continue;case"NOTE":s||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){n.state="NOTE";break}if(!s)continue;if(n.cue=new mA(0,0,""),n.state="CUE",s.indexOf("-->")===-1){n.cue.id=s;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{Pre(s,n.cue,n.regionList)}catch{n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":{const l=s.indexOf("-->")!==-1;if(!s||l&&(a=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(n.cue===null)continue;n.cue.text&&(n.cue.text+=`
`),n.cue.text+=s}continue;case"BADCUE":s||(n.state="ID")}}}catch{n.state==="CUETEXT"&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state=n.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(n){e.onparsingerror&&e.onparsingerror(n)}return e.onflush&&e.onflush(),this}}const Ire=/\r\n|\n\r|\n|\r/g,c_=function(e,n,i=0){return e.slice(i,i+n.length)===n},Mre=function(e){let n=parseInt(e.slice(-3));const i=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!qe(n)||!qe(i)||!qe(r)||!qe(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return n+=1e3*i,n+=60*1e3*r,n+=60*60*1e3*s,n};function pA(t,e,n){return bm(t.toString())+bm(e.toString())+bm(n)}const kre=function(e,n,i){let r=e[n],s=e[r.prevCC];if(!s||!s.new&&r.new){e.ccOffset=e.presentationOffset=r.start,r.new=!1;return}for(;(a=s)!=null&&a.new;){var a;e.ccOffset+=r.start-s.start,r.new=!1,r=s,s=e[r.prevCC]}e.presentationOffset=i};function Nre(t,e,n,i,r,s,a){const l=new Dre,f=ws(new Uint8Array(t)).trim().replace(Ire,`
`).split(`
`),c=[],h=e?Xne(e.baseTime,e.timescale):0;let p="00:00.000",g=0,x=0,b,T=!0;l.oncue=function(E){const C=n[i];let I=n.ccOffset;const P=(g-h)/9e4;if(C!=null&&C.new&&(x!==void 0?I=n.ccOffset=C.start:kre(n,i,P)),P){if(!e){b=new Error("Missing initPTS for VTT MPEGTS");return}I=P-n.presentationOffset}const M=E.endTime-E.startTime,k=ta((E.startTime+I-x)*9e4,r*9e4)/9e4;E.startTime=Math.max(k,0),E.endTime=Math.max(k+M,0);const z=E.text.trim();E.text=decodeURIComponent(encodeURIComponent(z)),E.id||(E.id=pA(E.startTime,E.endTime,z)),E.endTime>0&&c.push(E)},l.onparsingerror=function(E){b=E},l.onflush=function(){if(b){a(b);return}s(c)},f.forEach(E=>{if(T)if(c_(E,"X-TIMESTAMP-MAP=")){T=!1,E.slice(16).split(",").forEach(C=>{c_(C,"LOCAL:")?p=C.slice(6):c_(C,"MPEGTS:")&&(g=parseInt(C.slice(7)))});try{x=Mre(p)/1e3}catch(C){b=C}return}else E===""&&(T=!1);l.parse(E+`
`)}),l.flush()}const f_="stpp.ttml.im1t",mF=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,pF=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,jre={left:"start",center:"center",right:"end",start:"start",end:"end"};function xD(t,e,n,i){const r=Dt(new Uint8Array(t),["mdat"]);if(r.length===0){i(new Error("Could not parse IMSC1 mdat"));return}const s=r.map(l=>ws(l)),a=Zne(e.baseTime,1,e.timescale);try{s.forEach(l=>n(Bre(l,a)))}catch(l){i(l)}}function Bre(t,e){const r=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(s).reduce((p,g)=>(p[g]=r.getAttribute(`ttp:${g}`)||s[g],p),{}),l=r.getAttribute("xml:space")!=="preserve",f=_D(d_(r,"styling","style")),c=_D(d_(r,"layout","region")),h=d_(r,"body","[begin]");return[].map.call(h,p=>{const g=gF(p,l);if(!g||!p.hasAttribute("begin"))return null;const x=m_(p.getAttribute("begin"),a),b=m_(p.getAttribute("dur"),a);let T=m_(p.getAttribute("end"),a);if(x===null)throw SD(p);if(T===null){if(b===null)throw SD(p);T=x+b}const E=new mA(x-e,T-e,g);E.id=pA(E.startTime,E.endTime,E.text);const C=c[p.getAttribute("region")],I=f[p.getAttribute("style")],P=Fre(C,I,f),{textAlign:M}=P;if(M){const k=jre[M];k&&(E.lineAlign=k),E.align=M}return cn(E,P),E}).filter(p=>p!==null)}function d_(t,e,n){const i=t.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(n)):[]}function _D(t){return t.reduce((e,n)=>{const i=n.getAttribute("xml:id");return i&&(e[i]=n),e},{})}function gF(t,e){return[].slice.call(t.childNodes).reduce((n,i,r)=>{var s;return i.nodeName==="br"&&r?n+`
`:(s=i.childNodes)!=null&&s.length?gF(i,e):e?n+i.textContent.trim().replace(/\s+/g," "):n+i.textContent},"")}function Fre(t,e,n){const i="http://www.w3.org/ns/ttml#styling";let r=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return a&&n.hasOwnProperty(a)&&(r=n[a]),s.reduce((l,f)=>{const c=h_(e,i,f)||h_(t,i,f)||h_(r,i,f);return c&&(l[f]=c),l},{})}function h_(t,e,n){return t&&t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null}function SD(t){return new Error(`Could not parse ttml timestamp ${t}`)}function m_(t,e){if(!t)return null;let n=fF(t);return n===null&&(mF.test(t)?n=Ure(t,e):pF.test(t)&&(n=$re(t,e))),n}function Ure(t,e){const n=mF.exec(t),i=(n[4]|0)+(n[5]|0)/e.subFrameRate;return(n[1]|0)*3600+(n[2]|0)*60+(n[3]|0)+i/e.frameRate}function $re(t,e){const n=pF.exec(t),i=Number(n[1]);switch(n[2]){case"h":return i*3600;case"m":return i*60;case"ms":return i*1e3;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}class Og{constructor(e,n){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=n}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,n,i){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=n,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class zre{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=TD(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(B.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(B.FRAG_LOADING,this.onFragLoading,this),e.on(B.FRAG_LOADED,this.onFragLoaded,this),e.on(B.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(B.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(B.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(B.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(B.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(B.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(B.FRAG_LOADING,this.onFragLoading,this),e.off(B.FRAG_LOADED,this.onFragLoaded,this),e.off(B.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(B.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(B.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(B.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(B.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Og(this,"textTrack1"),n=new Og(this,"textTrack2"),i=new Og(this,"textTrack3"),r=new Og(this,"textTrack4");this.cea608Parser1=new bD(1,e,n),this.cea608Parser2=new bD(3,i,r)}addCues(e,n,i,r,s){let a=!1;for(let l=s.length;l--;){const f=s[l],c=Gre(f[0],f[1],n,i);if(c>=0&&(f[0]=Math.min(f[0],n),f[1]=Math.max(f[1],i),a=!0,c/(i-n)>.5))return}if(a||s.push([n,i]),this.config.renderTextTracksNatively){const l=this.captionsTracks[e];this.Cues.newCue(l,n,i,r)}else{const l=this.Cues.newCue(null,n,i,r);this.hls.trigger(B.CUES_PARSED,{type:"captions",cues:l,track:e})}}onInitPtsFound(e,{frag:n,id:i,initPTS:r,timescale:s}){const{unparsedVttFrags:a}=this;i===et.MAIN&&(this.initPTS[n.cc]={baseTime:r,timescale:s}),a.length&&(this.unparsedVttFrags=[],a.forEach(l=>{this.initPTS[l.frag.cc]?this.onFragLoaded(B.FRAG_LOADED,l):this.hls.trigger(B.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:l.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,n){const{media:i}=this;if(i)for(let r=0;r<i.textTracks.length;r++){const s=i.textTracks[r];if(ED(s,{name:e,lang:n,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:n,captionsTracks:i,media:r}=this,{label:s,languageCode:a}=n[e],l=this.getExistingTrack(s,a);if(l)i[e]=l,yd(i[e]),aF(i[e],r);else{const f=this.createTextTrack("captions",s,a);f&&(f[e]=!0,i[e]=f)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const n=this.captionsProperties[e];if(!n)return;const i=n.label,r={_id:e,label:i,kind:"captions",default:n.media?!!n.media.default:!1,closedCaptions:n.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(B.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}createTextTrack(e,n,i){const r=this.media;if(r)return r.addTextTrack(e,n,i)}onMediaAttaching(e,n){this.media=n.media,n.mediaSource||this._cleanTracks()}onMediaDetaching(e,n){const i=!!n.transferMedia;if(this.media=null,i)return;const{captionsTracks:r}=this;Object.keys(r).forEach(s=>{yd(r[s]),delete r[s]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=TD(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const n=e.textTracks;if(n)for(let i=0;i<n.length;i++)yd(n[i])}onSubtitleTracksUpdated(e,n){const i=n.subtitleTracks||[],r=i.some(s=>s.textCodec===f_);if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(QB(this.tracks,i)){this.tracks=i;return}if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const a=this.media,l=a?Gg(a.textTracks):null;if(this.tracks.forEach((f,c)=>{let h;if(l){let p=null;for(let g=0;g<l.length;g++)if(l[g]&&ED(l[g],f)){p=l[g],l[g]=null;break}p&&(h=p)}if(h)yd(h);else{const p=vF(f);h=this.createTextTrack(p,f.name,f.lang),h&&(h.mode="disabled")}h&&this.textTracks.push(h)}),l!=null&&l.length){const f=l.filter(c=>c!==null).map(c=>c.label);f.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${f.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(l=>({label:l.name,kind:l.type.toLowerCase(),default:l.default,subtitleTrack:l}));this.hls.trigger(B.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,n){this.config.enableCEA708Captions&&n.captions&&n.captions.forEach(i=>{const r=/(?:CC|SERVICE)([1-4])/.exec(i.instreamId);if(!r)return;const s=`textTrack${r[1]}`,a=this.captionsProperties[s];a&&(a.label=i.name,i.lang&&(a.languageCode=i.lang),a.media=i)})}closedCaptionsForLevel(e){const n=this.hls.levels[e.level];return n?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,n){if(this.enabled&&n.frag.type===et.MAIN){var i,r;const{cea608Parser1:s,cea608Parser2:a,lastSn:l}=this,{cc:f,sn:c}=n.frag,h=(i=(r=n.part)==null?void 0:r.index)!=null?i:-1;s&&a&&(c!==l+1||c===l&&h!==this.lastPartIndex+1||f!==this.lastCc)&&(s.reset(),a.reset()),this.lastCc=f,this.lastSn=c,this.lastPartIndex=h}}onFragLoaded(e,n){const{frag:i,payload:r}=n;if(i.type===et.SUBTITLE)if(r.byteLength){const s=i.decryptdata,a="stats"in n;if(s==null||!s.encrypted||a){const l=this.tracks[i.level],f=this.vttCCs;f[i.cc]||(f[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),l&&l.textCodec===f_?this._parseIMSC1(i,r):this._parseVTTs(n)}}else this.hls.trigger(B.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,n){const i=this.hls;xD(n,this.initPTS[e.cc],r=>{this._appendCues(r,e.level),i.trigger(B.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},r=>{i.logger.log(`Failed to parse IMSC1: ${r}`),i.trigger(B.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:r})})}_parseVTTs(e){var n;const{frag:i,payload:r}=e,{initPTS:s,unparsedVttFrags:a}=this,l=s.length-1;if(!s[i.cc]&&l===-1){a.push(e);return}const f=this.hls,c=(n=i.initSegment)!=null&&n.data?ua(i.initSegment.data,new Uint8Array(r)).buffer:r;Nre(c,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,h=>{this._appendCues(h,i.level),f.trigger(B.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},h=>{const p=h.message==="Missing initPTS for VTT MPEGTS";p?a.push(e):this._fallbackToIMSC1(i,r),f.logger.log(`Failed to parse VTT cue: ${h}`),!(p&&l>i.cc)&&f.trigger(B.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:h})})}_fallbackToIMSC1(e,n){const i=this.tracks[e.level];i.textCodec||xD(n,this.initPTS[e.cc],()=>{i.textCodec=f_,this._parseIMSC1(e,n)},()=>{i.textCodec="wvtt"})}_appendCues(e,n){const i=this.hls;if(this.config.renderTextTracksNatively){const r=this.textTracks[n];if(!r||r.mode==="disabled")return;e.forEach(s=>oF(r,s))}else{const r=this.tracks[n];if(!r)return;const s=r.default?"default":"subtitles"+n;i.trigger(B.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,n){const{frag:i}=n;i.type===et.SUBTITLE&&this.onFragLoaded(B.FRAG_LOADED,n)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,n){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:i,samples:r}=n;if(!(i.type===et.MAIN&&this.closedCaptionsForLevel(i)==="NONE"))for(let s=0;s<r.length;s++){const a=r[s].bytes;if(a){this.cea608Parser1||this.initCea608Parsers();const l=this.extractCea608Data(a);this.cea608Parser1.addData(r[s].pts,l[0]),this.cea608Parser2.addData(r[s].pts,l[1])}}}onBufferFlushing(e,{startOffset:n,endOffset:i,endOffsetSubtitles:r,type:s}){const{media:a}=this;if(!(!a||a.currentTime<i)){if(!s||s==="video"){const{captionsTracks:l}=this;Object.keys(l).forEach(f=>FS(l[f],n,i))}if(this.config.renderTextTracksNatively&&n===0&&r!==void 0){const{textTracks:l}=this;Object.keys(l).forEach(f=>FS(l[f],n,r))}}}extractCea608Data(e){const n=[[],[]],i=e[0]&31;let r=2;for(let s=0;s<i;s++){const a=e[r++],l=127&e[r++],f=127&e[r++];if(l===0&&f===0)continue;if((4&a)!==0){const h=3&a;(h===0||h===1)&&(n[h].push(l),n[h].push(f))}}return n}}function vF(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function ED(t,e){return!!t&&t.kind===vF(e)&&NS(e,t)}function Gre(t,e,n,i){return Math.min(e,i)-Math.max(t,n)}function TD(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const Hre=/\s/,Kre={newCue(t,e,n,i){const r=[];let s,a,l,f,c;const h=self.VTTCue||self.TextTrackCue;for(let g=0;g<i.rows.length;g++)if(s=i.rows[g],l=!0,f=0,c="",!s.isEmpty()){var p;for(let T=0;T<s.chars.length;T++)Hre.test(s.chars[T].uchar)&&l?f++:(c+=s.chars[T].uchar,l=!1);s.cueStartTime=e,e===n&&(n+=1e-4),f>=16?f--:f++;const x=hF(c.trim()),b=pA(e,n,x);t!=null&&(p=t.cues)!=null&&p.getCueById(b)||(a=new h(e,n,x),a.id=b,a.line=g+1,a.align="left",a.position=10+Math.min(80,Math.floor(f*8/32)*10),r.push(a))}return t&&r.length&&(r.sort((g,x)=>g.line==="auto"||x.line==="auto"?0:g.line>8&&x.line>8?x.line-g.line:g.line-x.line),r.forEach(g=>oF(t,g))),r}};function qre(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const Vre=/(\d+)-(\d+)\/(\d+)/;class AD{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Xre,this.controller=new self.AbortController,this.stats=new WT}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,n,i){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const s=Yre(e,this.controller.signal),a=e.responseType==="arraybuffer",l=a?"byteLength":"length",{maxTimeToFirstByteMs:f,maxLoadTimeMs:c}=n.loadPolicy;this.context=e,this.config=n,this.callbacks=i,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),n.timeout=f&&qe(f)?f:c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},n.timeout),($m(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(p=>{var g;this.response=this.loader=p;const x=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),n.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},c-(x-r.loading.start)),!p.ok){const{status:T,statusText:E}=p;throw new Qre(E||"fetch, bad network response",T,p)}r.loading.first=x,r.total=Zre(p.headers)||r.total;const b=(g=this.callbacks)==null?void 0:g.onProgress;return b&&qe(n.highWaterMark)?this.loadProgressively(p,r,e,n.highWaterMark,b):a?p.arrayBuffer():e.responseType==="json"?p.json():p.text()}).then(p=>{var g,x;const b=this.response;if(!b)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const T=p[l];T&&(r.loaded=r.total=T);const E={url:b.url,data:p,code:b.status},C=(g=this.callbacks)==null?void 0:g.onProgress;C&&!qe(n.highWaterMark)&&C(r,e,p,b),(x=this.callbacks)==null||x.onSuccess(E,r,e,b)}).catch(p=>{var g;if(self.clearTimeout(this.requestTimeout),r.aborted)return;const x=p&&p.code||0,b=p?p.message:null;(g=this.callbacks)==null||g.onError({code:x,text:b},e,p?p.details:null,r)})}getCacheAge(){let e=null;if(this.response){const n=this.response.headers.get("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,n,i,r=0,s){const a=new DB,l=e.body.getReader(),f=()=>l.read().then(c=>{if(c.done)return a.dataLength&&s(n,i,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const h=c.value,p=h.length;return n.loaded+=p,p<r||a.dataLength?(a.push(h),a.dataLength>=r&&s(n,i,a.flush().buffer,e)):s(n,i,h.buffer,e),f()}).catch(()=>Promise.reject());return f()}}function Yre(t,e){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(cn({},t.headers))};return t.rangeEnd&&n.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),n}function Wre(t){const e=Vre.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function Zre(t){const e=t.get("Content-Range");if(e){const i=Wre(e);if(qe(i))return i}const n=t.get("Content-Length");if(n)return parseInt(n)}function Xre(t,e){return new self.Request(t.url,e)}class Qre extends Error{constructor(e,n,i){super(e),this.code=void 0,this.details=void 0,this.code=n,this.details=i}}const Jre=/^age:\s*[\d.]+\s*$/im;class yF{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new WT,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,n,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=n,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:e,context:n}=this;if(!e||!n)return;const i=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!(this.loader!==i||this.stats.aborted))return s(i,n.url)}).catch(a=>{if(!(this.loader!==i||this.stats.aborted))return i.open("GET",n.url,!0),s(i,n.url)}).then(()=>{this.loader!==i||this.stats.aborted||this.openAndSendXhr(i,n,e)}).catch(a=>{var l;(l=this.callbacks)==null||l.onError({code:i.status,text:a.message},n,i,r)}):this.openAndSendXhr(i,n,e)}openAndSendXhr(e,n,i){e.readyState||e.open("GET",n.url,!0);const r=n.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:a}=i.loadPolicy;if(r)for(const l in r)e.setRequestHeader(l,r[l]);n.rangeEnd&&e.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=n.responseType,self.clearTimeout(this.requestTimeout),i.timeout=s&&qe(s)?s:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){const{context:e,loader:n,stats:i}=this;if(!e||!n)return;const r=n.readyState,s=this.config;if(!i.aborted&&r>=2&&(i.loading.first===0&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),r===4)){self.clearTimeout(this.requestTimeout),n.onreadystatechange=null,n.onprogress=null;const c=n.status,h=n.responseType==="text"?n.responseText:null;if(c>=200&&c<300){const b=h??n.response;if(b!=null){var a,l;i.loading.end=Math.max(self.performance.now(),i.loading.first);const T=n.responseType==="arraybuffer"?b.byteLength:b.length;i.loaded=i.total=T,i.bwEstimate=i.total*8e3/(i.loading.end-i.loading.first);const E=(a=this.callbacks)==null?void 0:a.onProgress;E&&E(i,e,b,n);const C={url:n.responseURL,data:b,code:c};(l=this.callbacks)==null||l.onSuccess(C,i,e,n);return}}const p=s.loadPolicy.errorRetry,g=i.retry,x={url:e.url,data:void 0,code:c};if(Hv(p,g,!1,x))this.retry(p);else{var f;Wt.error(`${c} while loading ${e.url}`),(f=this.callbacks)==null||f.onError({code:c,text:n.statusText},e,n,i)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,n=this.stats.retry;if(Hv(e,n,!0))this.retry(e);else{var i;Wt.warn(`timeout while loading ${(i=this.context)==null?void 0:i.url}`);const r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:n,stats:i}=this;this.retryDelay=JT(e,i.retry),i.retry++,Wt.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${n?.url}, retrying ${i.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total)}getCacheAge(){let e=null;if(this.loader&&Jre.test(this.loader.getAllResponseHeaders())){const n=this.loader.getResponseHeader("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const ese={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},tse=pn(pn({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:yF,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Ete,bufferController:die,capLevelController:dA,errorController:Cte,fpsController:rre,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:SB,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:ese},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},nse()),{},{subtitleStreamController:gre,subtitleTrackController:ore,timelineController:zre,audioStreamController:lie,audioTrackController:uie,emeController:Ed,cmcdController:tre,contentSteeringController:ire,interstitialsController:pre});function nse(){return{cueHandler:Kre,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function ise(t,e,n){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const i=$S(t),r=["manifest","level","frag"],s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return r.forEach(a=>{const l=`${a==="level"?"playlist":a}LoadPolicy`,f=e[l]===void 0,c=[];s.forEach(h=>{const p=`${a}Loading${h}`,g=e[p];if(g!==void 0&&f){c.push(p);const x=i[l].default;switch(e[l]={default:x},h){case"TimeOut":x.maxLoadTimeMs=g,x.maxTimeToFirstByteMs=g;break;case"MaxRetry":x.errorRetry.maxNumRetry=g,x.timeoutRetry.maxNumRetry=g;break;case"RetryDelay":x.errorRetry.retryDelayMs=g,x.timeoutRetry.retryDelayMs=g;break;case"MaxRetryTimeout":x.errorRetry.maxRetryDelayMs=g,x.timeoutRetry.maxRetryDelayMs=g;break}}}),c.length&&n.warn(`hls.js config: "${c.join('", "')}" setting(s) are deprecated, use "${l}": ${Dn(e[l])}`)}),pn(pn({},i),e)}function $S(t){return t&&typeof t=="object"?Array.isArray(t)?t.map($S):Object.keys(t).reduce((e,n)=>(e[n]=$S(t[n]),e),{}):t}function rse(t,e){const n=t.loader;n!==AD&&n!==yF?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):qre()&&(t.loader=AD,t.progressive=!0,t.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const Hg=2,sse=.1,ase=.05,ose=100;class lse extends yB{constructor(e,n){super("gap-controller",e.logger),this.hls=null,this.fragmentTracker=null,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var i;(i=this.media)!=null&&i.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var i;this.ended=((i=this.media)==null?void 0:i.currentTime)||1,this.hls.trigger(B.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=n,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(B.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(B.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,n){this.setInterval(ose),this.mediaSource=n.mediaSource;const i=this.media=n.media;ra(i,"playing",this.onMediaPlaying),ra(i,"waiting",this.onMediaWaiting),ra(i,"ended",this.onMediaEnded)}onMediaDetaching(e,n){this.clearInterval();const{media:i}=this;i&&(Qa(i,"playing",this.onMediaPlaying),Qa(i,"waiting",this.onMediaWaiting),Qa(i,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,n){this.buffered=n.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const n=this.media.currentTime;this.poll(n,this.lastCurrentTime),this.lastCurrentTime=n}poll(e,n){var i,r;const s=(i=this.hls)==null?void 0:i.config;if(!s)return;const a=this.media;if(!a)return;const{seeking:l}=a,f=this.seeking&&!l,c=!this.seeking&&l,h=a.paused&&!l||a.ended||a.playbackRate===0;if(this.seeking=l,e!==n){n&&(this.ended=0),this.moved=!0,l||(this.nudgeRetry=0,s.nudgeOnVideoHole&&!h&&e>n&&this.nudgeOnVideoHole(e,n)),this.waiting===0&&this.stallResolved(e);return}if(c||f){f&&this.stallResolved(e);return}if(h){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(B.MEDIA_ENDED,{stalled:!1}));return}if(!wt.getBuffered(a).length){this.nudgeRetry=0;return}const p=wt.bufferInfo(a,e,0),g=p.nextStart||0,x=this.fragmentTracker;if(l&&x&&this.hls){const z=wD(this.hls.inFlightFragments,e),F=p.len>Hg,G=!g||z||g-e>Hg&&!x.getPartialFragment(e);if(F||G)return;this.moved=!1}const b=(r=this.hls)==null?void 0:r.latestLevelDetails;if(!this.moved&&this.stalled!==null&&x){if(!(p.len>0)&&!g)return;const F=Math.max(g,p.start||0)-e,K=!!(b!=null&&b.live)?b.targetduration*2:Hg,V=x.getPartialFragment(e);if(F>0&&(F<=K||V)){a.paused||this._trySkipBufferHole(V);return}}const T=s.detectStallWithCurrentTimeMs,E=self.performance.now(),C=this.waiting;let I=this.stalled;if(I===null)if(C>0&&E-C<T)I=this.stalled=C;else{this.stalled=E;return}const P=E-I;if(!l&&(P>=T||C)&&this.hls){var M;if(((M=this.mediaSource)==null?void 0:M.readyState)==="ended"&&!(b!=null&&b.live)&&Math.abs(e-(b?.edge||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(B.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(p),!this.media||!this.hls)return}const k=wt.bufferInfo(a,e,s.maxBufferHole);this._tryFixBufferStall(k,P,e)}stallResolved(e){const n=this.stalled;if(n&&this.hls&&(this.stalled=null,this.stallReported)){const i=self.performance.now()-n;this.log(`playback not stuck anymore @${e}, after ${Math.round(i)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(B.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,n){var i;const r=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(i=this.buffered.audio)!=null&&i.length&&r&&r.length>1&&e>r.end(0)){const s=wt.bufferedInfo(wt.timeRangesToArray(this.buffered.audio),e,0);if(s.len>1&&n>=s.start){const a=wt.timeRangesToArray(r),l=wt.bufferedInfo(a,n,0).bufferedIndex;if(l>-1&&l<a.length-1){const f=wt.bufferedInfo(a,e,0).bufferedIndex,c=a[l].end,h=a[l+1].start;if((f===-1||f>l)&&h-c<1&&e-c<2){const p=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${c} -> ${h} buffered index: ${f}`);this.warn(p.message),this.media.currentTime+=1e-6;const g=this.fragmentTracker.getPartialFragment(e)||void 0,x=wt.bufferInfo(this.media,e,0);this.hls.trigger(B.ERROR,{type:at.MEDIA_ERROR,details:pe.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:p,reason:p.message,frag:g,buffer:x.len,bufferInfo:x})}}}}}_tryFixBufferStall(e,n,i){var r,s;const{fragmentTracker:a,media:l}=this,f=(r=this.hls)==null?void 0:r.config;if(!l||!a||!f)return;const c=(s=this.hls)==null?void 0:s.latestLevelDetails,h=a.getPartialFragment(i);if((h||c!=null&&c.live&&i<c.fragmentStart)&&(this._trySkipBufferHole(h)||!this.media))return;const p=e.buffered,g=this.adjacentTraversal(e,i);(p&&p.length>1&&e.len>f.maxBufferHole||e.nextStart&&(e.nextStart-i<f.maxBufferHole||g))&&(n>f.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,n){const i=this.fragmentTracker,r=e.nextStart;if(i&&r){const s=i.getFragAtPos(n,et.MAIN),a=i.getFragAtPos(r,et.MAIN);if(s&&a)return a.sn-s.sn<2}return!1}_reportStall(e){const{hls:n,media:i,stallReported:r,stalled:s}=this;if(!r&&s!==null&&i&&n){this.stallReported=!0;const a=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${Dn(e)})`);this.warn(a.message),n.trigger(B.ERROR,{type:at.MEDIA_ERROR,details:pe.BUFFER_STALLED_ERROR,fatal:!1,error:a,buffer:e.len,bufferInfo:e,stalled:{start:s}})}}_trySkipBufferHole(e){var n;const{fragmentTracker:i,media:r}=this,s=(n=this.hls)==null?void 0:n.config;if(!r||!i||!s)return 0;const a=r.currentTime,l=wt.bufferInfo(r,a,0),f=a<l.start?l.start:l.nextStart;if(f&&this.hls){const h=l.len<=s.maxBufferHole,p=l.len>0&&l.len<1&&r.readyState<3,g=f-a;if(g>0&&(h||p)){if(g>s.maxBufferHole){let b=!1;if(a===0){const T=i.getAppendedFrag(0,et.MAIN);T&&f<T.end&&(b=!0)}if(!b){const T=e||i.getAppendedFrag(a,et.MAIN);if(T){var c;if(!((c=this.hls.loadLevelObj)!=null&&c.details)||wD(this.hls.inFlightFragments,f))return 0;let C=!1,I=T.end;for(;I<f;){const P=i.getAppendedFrag(I,et.MAIN)||i.getPartialFragment(I);if(P)I+=P.duration;else{C=!0;break}}if(C)return 0}}}const x=Math.max(f+ase,a+sse);if(this.warn(`skipping hole, adjusting currentTime from ${a} to ${x}`),this.moved=!0,r.currentTime=x,!(e!=null&&e.gap)){const b=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${x}`);this.hls.trigger(B.ERROR,{type:at.MEDIA_ERROR,details:pe.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:b,reason:b.message,frag:e||void 0,buffer:l.len,bufferInfo:l})}return x}}return 0}_tryNudgeBuffer(e){const{hls:n,media:i,nudgeRetry:r}=this,s=n?.config;if(!i||!s)return 0;const a=i.currentTime;if(this.nudgeRetry++,r<s.nudgeMaxRetry){const l=a+(r+1)*s.nudgeOffset,f=new Error(`Nudging 'currentTime' from ${a} to ${l}`);this.warn(f.message),i.currentTime=l,n.trigger(B.ERROR,{type:at.MEDIA_ERROR,details:pe.BUFFER_NUDGE_ON_STALL,error:f,fatal:!1,buffer:e.len,bufferInfo:e})}else{const l=new Error(`Playhead still not moving while enough data buffered @${a} after ${s.nudgeMaxRetry} nudges`);this.error(l.message),n.trigger(B.ERROR,{type:at.MEDIA_ERROR,details:pe.BUFFER_STALLED_ERROR,error:l,fatal:!0,buffer:e.len,bufferInfo:e})}}}function wD(t,e){const n=LD(t.main);if(n&&n.start<=e)return n;const i=LD(t.audio);return i&&i.start<=e?i:null}function LD(t){if(!t)return null;switch(t.state){case Re.IDLE:case Re.STOPPED:case Re.ENDED:case Re.ERROR:return null}return t.frag}const use=.25;function zS(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function CD(t,e,n,i,r){let s=new t(e,n,"");try{s.value=i,r&&(s.type=r)}catch{s=new t(e,n,Dn(r?pn({type:r},i):i))}return s}const Rg=(()=>{const t=zS();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class cse{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(B.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e.on(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(B.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(B.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(B.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(B.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(B.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(B.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(B.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}onMediaAttaching(e,n){var i;this.media=n.media,((i=n.overrides)==null?void 0:i.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){const e=this.hls.latestLevelDetails;e&&this.updateDateRangeCues(e)}onMediaDetaching(e,n){this.media=null,!n.transferMedia&&(this.id3Track&&(this.removeCues&&yd(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const n=this.getID3Track(e.textTracks);return n.mode="hidden",n}getID3Track(e){if(this.media){for(let n=0;n<e.length;n++){const i=e[n];if(i.kind==="metadata"&&i.label==="id3")return aF(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,n){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:i,enableID3MetadataCues:r}}}=this;if(!i&&!r)return;const{samples:s}=n;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=zS();if(a)for(let l=0;l<s.length;l++){const f=s[l].type;if(f===Ss.emsg&&!i||!r)continue;const c=FB(s[l].data);if(c){const h=s[l].pts;let p=h+s[l].duration;p>Rg&&(p=Rg),p-h<=0&&(p=h+use);for(let x=0;x<c.length;x++){const b=c[x];if(!UB(b)){this.updateId3CueEnds(h,f);const T=CD(a,h,p,b,f);T&&this.id3Track.addCue(T)}}}}}updateId3CueEnds(e,n){var i;const r=(i=this.id3Track)==null?void 0:i.cues;if(r)for(let s=r.length;s--;){const a=r[s];a.type===n&&a.startTime<e&&a.endTime===Rg&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:n,endOffset:i,type:r}){const{id3Track:s,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:l,enableID3MetadataCues:f}}=a;if(s&&(l||f)){let c;r==="audio"?c=h=>h.type===Ss.audioId3&&f:r==="video"?c=h=>h.type===Ss.emsg&&l:c=h=>h.type===Ss.audioId3&&f||h.type===Ss.emsg&&l,FS(s,n,i,c)}}onLevelUpdated(e,{details:n}){this.updateDateRangeCues(n,!0)}onLevelPtsUpdated(e,n){Math.abs(n.drift)>.01&&this.updateDateRangeCues(n.details)}updateDateRangeCues(e,n){if(!this.media||!e.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{id3Track:i}=this,{dateRanges:r}=e,s=Object.keys(r);let a=this.dateRangeCuesAppended;if(i&&n){var l;if((l=i.cues)!=null&&l.length){const h=Object.keys(a).filter(p=>!s.includes(p));for(let p=h.length;p--;){const g=h[p],x=a[g].cues;delete a[g],Object.keys(x).forEach(b=>{try{const T=x[b];T.removeEventListener("enter",this.onEventCueEnter),i.removeCue(T)}catch{}})}}else a=this.dateRangeCuesAppended={}}const f=e.fragments[e.fragments.length-1];if(s.length===0||!qe(f?.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const c=zS();for(let h=0;h<s.length;h++){const p=s[h],g=r[p],x=g.startTime,b=a[p],T=b?.cues||{};let E=b?.durationKnown||!1,C=Rg;const{duration:I,endDate:P}=g;if(P&&I!==null)C=x+I,E=!0;else if(g.endOnNext&&!E){const k=s.reduce((z,F)=>{if(F!==g.id){const G=r[F];if(G.class===g.class&&G.startDate>g.startDate&&(!z||g.startDate<z.startDate))return G}return z},null);k&&(C=k.startTime,E=!0)}const M=Object.keys(g.attr);for(let k=0;k<M.length;k++){const z=M[k];if(!$te(z))continue;const F=T[z];if(F)E&&!b.durationKnown?F.endTime=C:Math.abs(F.startTime-x)>.01&&(F.startTime=x,F.endTime=C);else if(c){let G=g.attr[z];zte(z)&&(G=nB(G));const V=CD(c,x,C,{key:z,data:G},Ss.dateRange);V&&(V.id=p,this.id3Track.addCue(V),T[z]=V,this.hls.config.interstitialsController&&(z==="X-ASSET-LIST"||z==="X-ASSET-URL")&&V.addEventListener("enter",this.onEventCueEnter))}}a[p]={cues:T,dateRange:g,durationKnown:E}}}}class fse{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:n}=this,i=this.levelDetails;if(!n||!i)return;this.currentTime=n.currentTime;const r=this.computeLatency();if(r===null)return;this._latency=r;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:a}=this.config;if(!s||a===1||!i.live)return;const l=this.targetLatency;if(l===null)return;const f=r-l,c=Math.min(this.maxLatency,l+i.targetduration);if(f<c&&f>.05&&this.forwardBufferLength>1){const p=Math.min(2,Math.max(1,a)),g=Math.round(2/(1+Math.exp(-.75*f-this.edgeStalled))*20)/20,x=Math.min(p,Math.max(1,g));this.changeMediaPlaybackRate(n,x)}else n.playbackRate!==1&&n.playbackRate!==0&&this.changeMediaPlaybackRate(n,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const n=this.levelDetails;return n?e.liveMaxLatencyDurationCount*n.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:n,partHoldBack:i,targetduration:r}=e,{liveSyncDuration:s,liveSyncDurationCount:a,lowLatencyMode:l}=this.config,f=this.hls.userConfig;let c=l&&i||n;(this._targetLatencyUpdated||f.liveSyncDuration||f.liveSyncDurationCount||c===0)&&(c=s!==void 0?s:a*r);const h=r;return c+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,h)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),n=this.targetLatency;if(e===null||n===null)return null;const i=this.levelDetails;if(i===null)return null;const r=i.edge,s=e-n-this.edgeStalled,a=r-i.totalduration,l=r-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(a,s),l)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const n=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-n,0)}get forwardBufferLength(){const{media:e}=this,n=this.levelDetails;if(!e||!n)return 0;const i=e.buffered.length;return(i?e.buffered.end(i-1):n.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(B.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(B.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(B.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(B.ERROR,this.onError,this))}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:n}){n.advanced&&this.onTimeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,n){var i;n.details===pe.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(i=this.levelDetails)!=null&&i.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,n){var i,r;e.playbackRate!==n&&((i=this.hls)==null||i.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(r=this.targetLatency)==null?void 0:r.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${n}`),e.playbackRate=n)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class dse extends fA{constructor(e,n){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=n,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(B.LEVEL_LOADED,this.onLevelLoaded,this),e.on(B.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(B.FRAG_BUFFERED,this.onFragBuffered,this),e.on(B.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(B.LEVEL_LOADED,this.onLevelLoaded,this),e.off(B.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(B.FRAG_BUFFERED,this.onFragBuffered,this),e.off(B.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(n=>{n.loadError=0,n.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,n){this.resetLevels()}onManifestLoaded(e,n){const i=this.hls.config.preferManagedMediaSource,r=[],s={},a={};let l=!1,f=!1,c=!1;n.levels.forEach(h=>{const p=h.attrs;let{audioCodec:g,videoCodec:x}=h;g&&(h.audioCodec=g=Uv(g,i)||void 0),x&&(x=h.videoCodec=ate(x));const{width:b,height:T,unknownCodecs:E}=h;let C=E?E.length:0;if(E)for(let V=C;V--;){const Q=E[V];this.isAudioSupported(Q)?(h.audioCodec=g=g?`${g},${Q}`:Q,C--,Bd.audio[g.substring(0,4)]=2):this.isVideoSupported(Q)&&(h.videoCodec=x=x?`${x},${Q}`:Q,C--,Bd.video[x.substring(0,4)]=2)}if(l||(l=!!(b&&T)),f||(f=!!x),c||(c=!!g),C||g&&!this.isAudioSupported(g)||x&&!this.isVideoSupported(x)){this.log(`Some or all CODECS not supported "${p.CODECS}"`);return}const{CODECS:I,"FRAME-RATE":P,"HDCP-LEVEL":M,"PATHWAY-ID":k,RESOLUTION:z,"VIDEO-RANGE":F}=p,K=`${`${k||"."}-`}${h.bitrate}-${z}-${P}-${I}-${F}-${M}`;if(s[K])if(s[K].uri!==h.url&&!h.attrs["PATHWAY-ID"]){const V=a[K]+=1;h.attrs["PATHWAY-ID"]=new Array(V+1).join(".");const Q=this.createLevel(h);s[K]=Q,r.push(Q)}else s[K].addGroupId("audio",p.AUDIO),s[K].addGroupId("text",p.SUBTITLES);else{const V=this.createLevel(h);s[K]=V,a[K]=1,r.push(V)}}),this.filterAndSortMediaOptions(r,n,l,f,c)}createLevel(e){const n=new jm(e),i=e.supplemental;if(i!=null&&i.videoCodec&&!this.isVideoSupported(i.videoCodec)){const r=new Error(`SUPPLEMENTAL-CODECS not supported "${i.videoCodec}"`);this.log(r.message),n.supportedResult=dB(r,[])}return n}isAudioSupported(e){return wS(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return wS(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,n,i,r,s){let a=[],l=[],f=e;if((i||r)&&s&&(f=f.filter(({videoCodec:E,videoRange:C,width:I,height:P})=>(!!E||!!(I&&P))&&mte(C))),f.length===0){Promise.resolve().then(()=>{if(this.hls){let E="no level with compatible codecs found in manifest",C=E;n.levels.length&&(C=`one or more CODECS in variant not supported: ${Dn(n.levels.map(P=>P.attrs.CODECS).filter((P,M,k)=>k.indexOf(P)===M))}`,this.warn(C),E+=` (${C})`);const I=new Error(E);this.hls.trigger(B.ERROR,{type:at.MEDIA_ERROR,details:pe.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:n.url,error:I,reason:C})}});return}n.audioTracks&&(a=n.audioTracks.filter(E=>!E.audioCodec||this.isAudioSupported(E.audioCodec)),OD(a)),n.subtitles&&(l=n.subtitles,OD(l));const c=f.slice(0);f.sort((E,C)=>{if(E.attrs["HDCP-LEVEL"]!==C.attrs["HDCP-LEVEL"])return(E.attrs["HDCP-LEVEL"]||"")>(C.attrs["HDCP-LEVEL"]||"")?1:-1;if(i&&E.height!==C.height)return E.height-C.height;if(E.frameRate!==C.frameRate)return E.frameRate-C.frameRate;if(E.videoRange!==C.videoRange)return $v.indexOf(E.videoRange)-$v.indexOf(C.videoRange);if(E.videoCodec!==C.videoCodec){const I=_P(E.videoCodec),P=_P(C.videoCodec);if(I!==P)return P-I}if(E.uri===C.uri&&E.codecSet!==C.codecSet){const I=Fv(E.codecSet),P=Fv(C.codecSet);if(I!==P)return P-I}return E.averageBitrate!==C.averageBitrate?E.averageBitrate-C.averageBitrate:0});let h=c[0];if(this.steering&&(f=this.steering.filterParsedLevels(f),f.length!==c.length)){for(let E=0;E<c.length;E++)if(c[E].pathwayId===f[0].pathwayId){h=c[E];break}}this._levels=f;for(let E=0;E<f.length;E++)if(f[E]===h){var p;this._firstLevel=E;const C=h.bitrate,I=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${f.length} level(s) found, first bitrate: ${C}`),((p=this.hls.userConfig)==null?void 0:p.abrEwmaDefaultEstimate)===void 0){const P=Math.min(C,this.hls.config.abrEwmaDefaultEstimateMax);P>I&&I===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=P)}break}const g=s&&!r,x=this.hls.config,b=!!(x.audioStreamController&&x.audioTrackController),T={levels:f,audioTracks:a,subtitleTracks:l,sessionData:n.sessionData,sessionKeys:n.sessionKeys,firstLevel:this._firstLevel,stats:n.stats,audio:s,video:r,altAudio:b&&!g&&a.some(E=>!!E.url)};this.hls.trigger(B.MANIFEST_PARSED,T)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const n=this._levels;if(n.length===0)return;if(e<0||e>=n.length){const h=new Error("invalid level idx"),p=e<0;if(this.hls.trigger(B.ERROR,{type:at.OTHER_ERROR,details:pe.LEVEL_SWITCH_ERROR,level:e,fatal:p,error:h,reason:h.message}),p)return;e=Math.min(e,n.length-1)}const i=this.currentLevelIndex,r=this.currentLevel,s=r?r.attrs["PATHWAY-ID"]:void 0,a=n[e],l=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,i===e&&r&&s===l)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${l?" with Pathway "+l:""} from level ${i}${s?" with Pathway "+s:""}`);const f={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(B.LEVEL_SWITCHING,f);const c=a.details;if(!c||c.live){const h=this.switchParams(a.uri,r?.details,c);this.loadPlaylist(h)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const n=this.steering.pathways(),i=e.filter(r=>n.indexOf(r)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${n}`);return}this.steering.pathwayPriority=i}}onError(e,n){n.fatal||!n.context||n.context.type===Mt.LEVEL&&n.context.level===this.level&&this.checkRetry(n)}onFragBuffered(e,{frag:n}){if(n!==void 0&&n.type===et.MAIN){const i=n.elementaryStreams;if(!Object.keys(i).some(s=>!!i[s]))return;const r=this._levels[n.level];r!=null&&r.loadError&&(this.log(`Resetting level error count of ${r.loadError} on frag buffered`),r.loadError=0)}}onLevelLoaded(e,n){var i;const{level:r,details:s}=n,a=n.levelInfo;if(!a){var l;this.warn(`Invalid level index ${r}`),(l=n.deliveryDirectives)!=null&&l.skip&&(s.deltaUpdateFailed=!0);return}if(a===this.currentLevel||n.withoutMultiVariant){a.fragmentError===0&&(a.loadError=0);let f=a.details;f===n.details&&f.advanced&&(f=void 0),this.playlistLoaded(r,n,f)}else(i=n.deliveryDirectives)!=null&&i.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const i=this.getUrlWithDirectives(e.uri,n),r=this.currentLevelIndex,s=e.attrs["PATHWAY-ID"],a=e.details,l=a?.age;this.log(`Loading level index ${r}${n?.msn!==void 0?" at sn "+n.msn+" part "+n.part:""}${s?" Pathway "+s:""}${l&&a.live?" age "+l.toFixed(1)+(a.type&&" "+a.type||""):""} ${i}`),this.hls.trigger(B.LEVEL_LOADING,{url:i,level:r,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:n||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var n;if(this._levels.length===1)return;const i=this._levels.filter((s,a)=>a!==e?!0:(this.steering&&this.steering.removeLevel(s),s===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,s.details&&s.details.fragments.forEach(l=>l.level=-1)),!1));OB(i),this._levels=i,this.currentLevelIndex>-1&&(n=this.currentLevel)!=null&&n.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const r=i.length-1;this._firstLevel=Math.min(this._firstLevel,r),this._startLevel&&(this._startLevel=Math.min(this._startLevel,r)),this.hls.trigger(B.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:n}){this._levels=n}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:n,maxHdcpLevel:i}=this.hls;this._maxAutoLevel!==n&&(this._maxAutoLevel=n,this.hls.trigger(B.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:n,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))}}function OD(t){const e={};t.forEach(n=>{const i=n.groupId||"";n.id=e[i]=e[i]||0,e[i]++})}function bF(){return self.SourceBuffer||self.WebKitSourceBuffer}function xF(){if(!Zu())return!1;const e=bF();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function hse(){if(!xF())return!1;const t=Zu();return typeof t?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(Nm(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(Nm(e,"audio"))))}function mse(){var t;const e=bF();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const pse=100;class gse extends iA{constructor(e,n,i){super(e,n,i,"stream-controller",et.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const r=this.media,s=r?r.currentTime:null;if(s===null||!qe(s)||(this.log(`Media seeked to ${s.toFixed(3)}`),!this.getBufferedFrag(s)))return;const a=this.getFwdBufferInfoAtPos(r,s,et.MAIN,0);if(a===null||a.len===0){this.warn(`Main forward buffer length at ${s} on "seeked" event ${a?a.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(B.MANIFEST_PARSED,this.onManifestParsed,this),e.on(B.LEVEL_LOADING,this.onLevelLoading,this),e.on(B.LEVEL_LOADED,this.onLevelLoaded,this),e.on(B.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(B.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(B.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(B.BUFFER_CREATED,this.onBufferCreated,this),e.on(B.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(B.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(B.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(B.MANIFEST_PARSED,this.onManifestParsed,this),e.off(B.LEVEL_LOADED,this.onLevelLoaded,this),e.off(B.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(B.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(B.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(B.BUFFER_CREATED,this.onBufferCreated,this),e.off(B.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(B.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(B.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,n){if(this.levels){const{lastCurrentTime:i,hls:r}=this;if(this.stopLoad(),this.setInterval(pse),this.level=-1,!this.startFragRequested){let s=r.startLevel;s===-1&&(r.config.testBandwidth&&this.levels.length>1?(s=0,this.bitrateTest=!0):s=r.firstAutoLevel),r.nextLoadLevel=s,this.level=r.loadLevel,this._hasEnoughToStart=!!n}i>0&&e===-1&&!n&&(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i),this.state=Re.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=Re.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Re.WAITING_LEVEL:{const{levels:n,level:i}=this,r=n?.[i],s=r?.details;if(s&&(!s.live||this.levelLastLoaded===r&&!this.waitForLive(r))){if(this.waitForCdnTuneIn(s))break;this.state=Re.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=Re.IDLE;break}break}case Re.FRAG_LOADING_WAITING_RETRY:{var e;const n=self.performance.now(),i=this.retryDate;if(!i||n>=i||(e=this.media)!=null&&e.seeking){const{levels:r,level:s}=this,a=r?.[s];this.resetStartWhenNotLoaded(a||null),this.state=Re.IDLE}}break}this.state===Re.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:n,levels:i,media:r}=this;if(n===null||!r&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const s=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(i!=null&&i[s]))return;const a=i[s],l=this.getMainFwdBufferInfo();if(l===null)return;const f=this.getLevelDetails();if(f&&this._streamEnded(l,f)){const T={};this.altAudio===2&&(T.type="video"),this.hls.trigger(B.BUFFER_EOS,T),this.state=Re.ENDED;return}if(!this.buffering)return;e.loadLevel!==s&&e.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const c=a.details;if(!c||this.state===Re.WAITING_LEVEL||this.waitForLive(a)){this.level=s,this.state=Re.WAITING_LEVEL,this.startFragRequested=!1;return}const h=l.len,p=this.getMaxBufferLength(a.maxBitrate);if(h>=p)return;this.backtrackFragment&&this.backtrackFragment.start>l.end&&(this.backtrackFragment=null);const g=this.backtrackFragment?this.backtrackFragment.start:l.end;let x=this.getNextFragment(g,c);if(this.couldBacktrack&&!this.fragPrevious&&x&&oi(x)&&this.fragmentTracker.getState(x)!==pi.OK){var b;const E=((b=this.backtrackFragment)!=null?b:x).sn-c.startSN,C=c.fragments[E-1];C&&x.cc===C.cc&&(x=C,this.fragmentTracker.removeFragment(C))}else this.backtrackFragment&&l.len&&(this.backtrackFragment=null);if(x&&this.isLoopLoading(x,g)){if(!x.gap){const E=this.audioOnly&&!this.altAudio?xn.AUDIO:xn.VIDEO,C=(E===xn.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;C&&this.afterBufferFlushed(C,E,et.MAIN)}x=this.getNextFragmentLoopLoading(x,c,l,et.MAIN,p)}x&&(x.initSegment&&!x.initSegment.data&&!this.bitrateTest&&(x=x.initSegment),this.loadFragment(x,a,g))}loadFragment(e,n,i){const r=this.fragmentTracker.getState(e);r===pi.NOT_LOADED||r===pi.PARTIAL?oi(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,n)):super.loadFragment(e,n,i):this._loadInitSegment(e,n):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,et.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:n}=this;if(n!=null&&n.readyState){let i;const r=this.getAppendedFrag(n.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const l=this.getMainFwdBufferInfo();if(!l||l.len<s.targetduration*2)return}if(!n.paused&&e){const l=this.hls.nextLoadLevel,f=e[l],c=this.fragLastKbps;c&&this.fragCurrent?i=this.fragCurrent.duration*f.maxBitrate/(1e3*c)+1:i=0}else i=0;const a=this.getBufferedFrag(n.currentTime+i);if(a){const l=this.followingBufferedFrag(a);if(l){this.abortCurrentFrag();const f=l.maxStartPTS?l.maxStartPTS:l.start,c=l.duration,h=Math.max(a.end,f+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(h,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Re.KEY_LOADING:case Re.FRAG_LOADING:case Re.FRAG_LOADING_WAITING_RETRY:case Re.PARSING:case Re.PARSED:this.state=Re.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,n){super.flushMainBuffer(e,n,this.altAudio===2?"video":null)}onMediaAttached(e,n){super.onMediaAttached(e,n);const i=n.media;ra(i,"playing",this.onMediaPlaying),ra(i,"seeked",this.onMediaSeeked)}onMediaDetaching(e,n){const{media:i}=this;i&&(Qa(i,"playing",this.onMediaPlaying),Qa(i,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,n),!n.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(B.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,n){let i=!1,r=!1;n.levels.forEach(s=>{const a=s.audioCodec;a&&(i=i||a.indexOf("mp4a.40.2")!==-1,r=r||a.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=i&&r&&!mse(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=n.levels,this.startFragRequested=!1}onLevelLoading(e,n){const{levels:i}=this;if(!i||this.state!==Re.IDLE)return;const r=n.levelInfo;(!r.details||r.details.live&&(this.levelLastLoaded!==r||r.details.expired)||this.waitForCdnTuneIn(r.details))&&(this.state=Re.WAITING_LEVEL)}onLevelLoaded(e,n){var i;const{levels:r,startFragRequested:s}=this,a=n.level,l=n.details,f=l.totalduration;if(!r){this.warn(`Levels were reset while loading level ${a}`);return}this.log(`Level ${a} loaded [${l.startSN},${l.endSN}]${l.lastPartSn?`[part-${l.lastPartSn}-${l.lastPartIndex}]`:""}, cc [${l.startCC}, ${l.endCC}] duration:${f}`);const c=n.levelInfo,h=this.fragCurrent;h&&(this.state===Re.FRAG_LOADING||this.state===Re.FRAG_LOADING_WAITING_RETRY)&&h.level!==n.level&&h.loader&&this.abortCurrentFrag();let p=0;if(l.live||(i=c.details)!=null&&i.live){var g;if(this.checkLiveUpdate(l),l.deltaUpdateFailed)return;p=this.alignPlaylists(l,c.details,(g=this.levelLastLoaded)==null?void 0:g.details)}if(c.details=l,this.levelLastLoaded=c,s||this.setStartPosition(l,p),this.hls.trigger(B.LEVEL_UPDATED,{details:l,level:a}),this.state===Re.WAITING_LEVEL){if(this.waitForCdnTuneIn(l))return;this.state=Re.IDLE}s&&l.live&&this.synchronizeToLiveEdge(l),this.tick()}synchronizeToLiveEdge(e){const{config:n,media:i}=this;if(!i)return;const r=this.hls.liveSyncPosition,s=this.getLoadPosition(),a=e.fragmentStart,l=e.edge,f=s>=a-n.maxFragLookUpTolerance&&s<=l;if(r!==null&&i.duration>r&&(s<r||!f)){const h=n.liveMaxLatencyDuration!==void 0?n.liveMaxLatencyDuration:n.liveMaxLatencyDurationCount*e.targetduration;if((!f&&i.readyState<4||s<l-h)&&(this._hasEnoughToStart||(this.nextLoadPosition=r),i.readyState))if(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${l}, reset currentTime to : ${r.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var c;const p=wt.bufferInfo(i,r,0);if(!(p!=null&&(c=p.buffered)!=null&&c.length)){i.currentTime=r;return}if(p.start<=s){i.currentTime=r;return}const{nextStart:x}=wt.bufferedInfo(p.buffered,s,0);x&&(i.currentTime=x)}else i.currentTime=r}}_handleFragmentLoadProgress(e){var n;const i=e.frag,{part:r,payload:s}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const l=a[i.level];if(!l){this.warn(`Level ${i.level} not found on progress`);return}const f=l.details;if(!f){this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),this.fragmentTracker.removeFragment(i);return}const c=l.videoCodec,h=f.PTSKnown||!f.live,p=(n=i.initSegment)==null?void 0:n.data,g=this._getAudioCodec(l),x=this.transmuxer=this.transmuxer||new XB(this.hls,et.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),b=r?r.index:-1,T=b!==-1,E=new tA(i.level,i.sn,i.stats.chunkCount,s.byteLength,b,T),C=this.initPTS[i.cc];x.push(s,p,g,c,i,r,f.totalduration,h,E,C)}onAudioTrackSwitching(e,n){const i=this.hls,r=this.altAudio===2;if(zv(n.url,i))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(r){this.fragmentTracker.removeAllFragments(),i.once(B.BUFFER_FLUSHED,()=>{var a;(a=this.hls)==null||a.trigger(B.AUDIO_TRACK_SWITCHED,n)}),i.trigger(B.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}i.trigger(B.AUDIO_TRACK_SWITCHED,n)}}onAudioTrackSwitched(e,n){const i=zv(n.url,this.hls);if(i){const r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=i?2:0,this.tick()}onBufferCreated(e,n){const i=n.tracks;let r,s,a=!1;for(const l in i){const f=i[l];if(f.id==="main"){if(s=l,r=f,l==="video"){const c=i[l];c&&(this.videoBuffer=c.buffer)}}else a=!0}a&&r?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,n){const{frag:i,part:r}=n,s=i.type===et.MAIN;if(s){if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${r?" p: "+r.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),this.state===Re.PARSED&&(this.state=Re.IDLE);return}const l=r?r.stats:i.stats;this.fragLastKbps=Math.round(8*l.total/(l.buffering.end-l.loading.first)),oi(i)&&(this.fragPrevious=i),this.fragBufferedComplete(i,r)}const a=this.media;a&&(!this._hasEnoughToStart&&wt.getBuffered(a).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),s&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,n){var i;if(n.fatal){this.state=Re.ERROR;return}switch(n.details){case pe.FRAG_GAP:case pe.FRAG_PARSING_ERROR:case pe.FRAG_DECRYPT_ERROR:case pe.FRAG_LOAD_ERROR:case pe.FRAG_LOAD_TIMEOUT:case pe.KEY_LOAD_ERROR:case pe.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(et.MAIN,n);break;case pe.LEVEL_LOAD_ERROR:case pe.LEVEL_LOAD_TIMEOUT:case pe.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===Re.WAITING_LEVEL&&((i=n.context)==null?void 0:i.type)===Mt.LEVEL&&(this.state=Re.IDLE);break;case pe.BUFFER_ADD_CODEC_ERROR:case pe.BUFFER_APPEND_ERROR:if(n.parent!=="main")return;this.reduceLengthAndFlushBuffer(n)&&this.resetLoadingState();break;case pe.BUFFER_FULL_ERROR:if(n.parent!=="main")return;this.reduceLengthAndFlushBuffer(n)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case pe.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onFragLoadEmergencyAborted(){this.state=Re.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:n}){if(n!==xn.AUDIO||!this.altAudio){const i=(n===xn.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;i&&(this.afterBufferFlushed(i,n,et.MAIN),this.tick())}}onLevelsUpdated(e,n){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=n.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const n=e.currentTime;let i=this.startPosition;if(i>=0&&n<i){if(e.seeking){this.log(`could not seek to ${i}, already seeking at ${n}`);return}const r=this.timelineOffset;r&&i&&(i+=r);const s=this.getLevelDetails(),a=wt.getBuffered(e),l=a.length?a.start(0):0,f=l-i,c=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||f>0&&(f<c||this.loadingParts&&f<2*(s?.partTarget||0)))&&(this.log(`adjusting start position by ${f} to match buffer start`),i+=f,this.startPosition=i),n<i&&(this.log(`seek to target start position ${i} from current time ${n} buffer start ${l}`),e.currentTime=i)}}_getAudioCodec(e){let n=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&n&&(this.log("Swapping audio codec"),n.indexOf("mp4a.40.5")!==-1?n="mp4a.40.2":n="mp4a.40.5"),n}_loadBitrateTestFrag(e,n){e.bitrateTest=!0,this._doFragLoad(e,n).then(i=>{const{hls:r}=this,s=i?.frag;if(!s||this.fragContextChanged(s))return;n.fragmentError=0,this.state=Re.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const a=s.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),r.trigger(B.FRAG_LOADED,i),s.bitrateTest=!1})}_handleTransmuxComplete(e){var n;const i=this.playlistType,{hls:r}=this,{remuxResult:s,chunkMeta:a}=e,l=this.getCurrentContext(a);if(!l){this.resetWhenMissingContext(a);return}const{frag:f,part:c,level:h}=l,{video:p,text:g,id3:x,initSegment:b}=s,{details:T}=h,E=this.altAudio?void 0:s.audio;if(this.fragContextChanged(f)){this.fragmentTracker.removeFragment(f);return}if(this.state=Re.PARSING,b){if(b!=null&&b.tracks){const M=f.initSegment||f;this._bufferInitSegment(h,b.tracks,M,a),r.trigger(B.FRAG_PARSING_INIT_SEGMENT,{frag:M,id:i,tracks:b.tracks})}const C=b.initPTS,I=b.timescale,P=this.initPTS[f.cc];qe(C)&&(!P||P.baseTime!==C||P.timescale!==I)&&(this.initPTS[f.cc]={baseTime:C,timescale:I},r.trigger(B.INIT_PTS_FOUND,{frag:f,id:i,initPTS:C,timescale:I}))}if(p&&T){E&&p.type==="audiovideo"&&this.logMuxedErr(f);const C=T.fragments[f.sn-1-T.startSN],I=f.sn===T.startSN,P=!C||f.cc>C.cc;if(s.independent!==!1){const{startPTS:M,endPTS:k,startDTS:z,endDTS:F}=p;if(c)c.elementaryStreams[p.type]={startPTS:M,endPTS:k,startDTS:z,endDTS:F};else if(p.firstKeyFrame&&p.independent&&a.id===1&&!P&&(this.couldBacktrack=!0),p.dropped&&p.independent){const G=this.getMainFwdBufferInfo(),K=(G?G.end:this.getLoadPosition())+this.config.maxBufferHole,V=p.firstKeyFramePTS?p.firstKeyFramePTS:M;if(!I&&K<V-this.config.maxBufferHole&&!P){this.backtrack(f);return}else P&&(f.gap=!0);f.setElementaryStreamInfo(p.type,f.start,k,f.start,F,!0)}else I&&M-(T.appliedTimelineOffset||0)>Hg&&(f.gap=!0);f.setElementaryStreamInfo(p.type,M,k,z,F),this.backtrackFragment&&(this.backtrackFragment=f),this.bufferFragmentData(p,f,c,a,I||P)}else if(I||P)f.gap=!0;else{this.backtrack(f);return}}if(E){const{startPTS:C,endPTS:I,startDTS:P,endDTS:M}=E;c&&(c.elementaryStreams[xn.AUDIO]={startPTS:C,endPTS:I,startDTS:P,endDTS:M}),f.setElementaryStreamInfo(xn.AUDIO,C,I,P,M),this.bufferFragmentData(E,f,c,a)}if(T&&x!=null&&(n=x.samples)!=null&&n.length){const C={id:i,frag:f,details:T,samples:x.samples};r.trigger(B.FRAG_PARSING_METADATA,C)}if(T&&g){const C={id:i,frag:f,details:T,samples:g.samples};r.trigger(B.FRAG_PARSING_USERDATA,C)}}logMuxedErr(e){this.warn(`${oi(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,n,i,r){if(this.state!==Re.PARSING)return;this.audioOnly=!!n.audio&&!n.video,this.altAudio&&!this.audioOnly&&(delete n.audio,n.audiovideo&&this.logMuxedErr(i));const{audio:s,video:a,audiovideo:l}=n;if(s){const c=e.audioCodec;let h=jg(s.codec,c);h==="mp4a"&&(h="mp4a.40.5");const p=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){h&&(h.indexOf("mp4a.40.5")!==-1?h="mp4a.40.2":h="mp4a.40.5");const g=s.metadata;g&&"channelCount"in g&&(g.channelCount||1)!==1&&p.indexOf("firefox")===-1&&(h="mp4a.40.5")}h&&h.indexOf("mp4a.40.5")!==-1&&p.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(h="mp4a.40.2",this.log(`Android: force audio codec to ${h}`)),c&&c!==h&&this.log(`Swapping manifest audio codec "${c}" for "${h}"`),s.levelCodec=h,s.id=et.MAIN,this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${h||""}/${c||""}/${s.codec}]`),delete n.audiovideo}if(a){a.levelCodec=e.videoCodec,a.id=et.MAIN;const c=a.codec;if(c?.length===4)switch(c){case"hvc1":case"hev1":a.codec="hvc1.1.6.L120.90";break;case"av01":a.codec="av01.0.04M.08";break;case"avc1":a.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${c}]${a.codec!==c?" parsed-corrected="+a.codec:""}${a.supplemental?" supplemental="+a.supplemental:""}`),delete n.audiovideo}l&&(this.log(`Init audiovideo buffer, container:${l.container}, codecs[level/parsed]=[${e.codecs}/${l.codec}]`),delete n.video,delete n.audio);const f=Object.keys(n);if(f.length){if(this.hls.trigger(B.BUFFER_CODECS,n),!this.hls)return;f.forEach(c=>{const p=n[c].initSegment;p!=null&&p.byteLength&&this.hls.trigger(B.BUFFER_APPENDING,{type:c,data:p,frag:i,part:null,chunkMeta:r,parent:i.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,et.MAIN)}get maxBufferLength(){const{levels:e,level:n}=this,i=e?.[n];return i?this.getMaxBufferLength(i.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Re.IDLE}checkFragmentChanged(){const e=this.media;let n=null;if(e&&e.readyState>1&&e.seeking===!1){const i=e.currentTime;if(wt.isBuffered(e,i)?n=this.getAppendedFrag(i):wt.isBuffered(e,i+.1)&&(n=this.getAppendedFrag(i+.1)),n){this.backtrackFragment=null;const r=this.fragPlaying,s=n.level;(!r||n.sn!==r.sn||r.level!==s)&&(this.fragPlaying=n,this.hls.trigger(B.FRAG_CHANGED,{frag:n}),(!r||r.level!==s)&&this.hls.trigger(B.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const n=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return qe(n)?this.getAppendedFrag(n):null}get currentProgramDateTime(){var e;const n=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(qe(n)){const i=this.getLevelDetails(),r=this.currentFrag||(i?sf(null,i.fragments,n):null);if(r){const s=r.programDateTime;if(s!==null){const a=s+(n-r.start)*1e3;return new Date(a)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class vse{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const i in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[i].loader;if(r){var n;if(e&&e!==((n=r.context)==null?void 0:n.frag.type))return;r.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e];(n.mediaKeySessionContext||n.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e].loader;n&&n.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,n=pe.KEY_LOAD_ERROR,i,r,s){return new Sl({type:at.NETWORK_ERROR,details:n,fatal:!1,frag:e,response:s,error:i,networkDetails:r})}loadClear(e,n,i){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(n.length)for(let r=0,s=n.length;r<s;r++){const a=n[r];if(e.cc<=a.cc&&(!oi(e)||!oi(a)||e.sn<a.sn)||!i&&r==s-1)return this.emeController.selectKeySystemFormat(a).then(l=>{if(!this.emeController)return;a.setKeyFormat(l);const f=PS(l);if(f)return this.emeController.getKeySystemAccess([f])})}if(this.config.requireKeySystemAccessOnStart){const r=Fg(this.config);if(r.length)return this.emeController.getKeySystemAccess(r)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(n=>this.loadInternal(e,n)):this.loadInternal(e)}loadInternal(e,n){var i,r;n&&e.setKeyFormat(n);const s=e.decryptdata;if(!s){const c=new Error(n?`Expected frag.decryptdata to be defined after setting format ${n}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,pe.KEY_LOAD_ERROR,c))}const a=s.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,pe.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let l=this.keyUriToKeyInfo[a];if((i=l)!=null&&i.decryptdata.key)return s.key=l.decryptdata.key,Promise.resolve({frag:e,keyInfo:l});if((r=l)!=null&&r.keyLoadPromise){var f;switch((f=l.mediaKeySessionContext)==null?void 0:f.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return l.keyLoadPromise.then(c=>(s.key=c.keyInfo.decryptdata.key,{frag:e,keyInfo:l}))}}switch(l=this.keyUriToKeyInfo[a]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(l,e):this.loadKeyEME(l,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(l,e);default:return Promise.reject(this.createKeyLoadError(e,pe.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,n){const i={frag:n,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const r=this.emeController.loadKey(i);if(r)return(e.keyLoadPromise=r.then(s=>(e.mediaKeySessionContext=s,i))).catch(s=>{throw e.keyLoadPromise=null,s})}return Promise.resolve(i)}loadKeyHTTP(e,n){const i=this.config,r=i.loader,s=new r(i);return n.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((a,l)=>{const f={keyInfo:e,frag:n,responseType:"arraybuffer",url:e.decryptdata.uri},c=i.keyLoadPolicy.default,h={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(g,x,b,T)=>{const{frag:E,keyInfo:C,url:I}=b;if(!E.decryptdata||C!==this.keyUriToKeyInfo[I])return l(this.createKeyLoadError(E,pe.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),T));C.decryptdata.key=E.decryptdata.key=new Uint8Array(g.data),E.keyLoader=null,C.loader=null,a({frag:E,keyInfo:C})},onError:(g,x,b,T)=>{this.resetLoader(x),l(this.createKeyLoadError(n,pe.KEY_LOAD_ERROR,new Error(`HTTP Error ${g.code} loading key ${g.text}`),b,pn({url:f.url,data:void 0},g)))},onTimeout:(g,x,b)=>{this.resetLoader(x),l(this.createKeyLoadError(n,pe.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),b))},onAbort:(g,x,b)=>{this.resetLoader(x),l(this.createKeyLoadError(n,pe.INTERNAL_ABORTED,new Error("key loading aborted"),b))}};s.load(f,h,p)})}resetLoader(e){const{frag:n,keyInfo:i,url:r}=e,s=i.loader;n.keyLoader===s&&(n.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[r],s&&s.destroy()}}function RD(t){const{type:e}=t;switch(e){case Mt.AUDIO_TRACK:return et.AUDIO;case Mt.SUBTITLE_TRACK:return et.SUBTITLE;default:return et.MAIN}}function p_(t,e){let n=t.url;return(n===void 0||n.indexOf("data:")===0)&&(n=e.url),n}class yse{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(B.MANIFEST_LOADING,this.onManifestLoading,this),e.on(B.LEVEL_LOADING,this.onLevelLoading,this),e.on(B.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(B.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(B.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(B.MANIFEST_LOADING,this.onManifestLoading,this),e.off(B.LEVEL_LOADING,this.onLevelLoading,this),e.off(B.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(B.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(B.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const n=this.hls.config,i=n.pLoader,r=n.loader,s=i||r,a=new s(n);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const n=this.loaders[e];n&&n.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,n){const{url:i}=n;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Mt.MANIFEST,url:i,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,n){const{id:i,level:r,pathwayId:s,url:a,deliveryDirectives:l,levelInfo:f}=n;this.load({id:i,level:r,pathwayId:s,responseType:"text",type:Mt.LEVEL,url:a,deliveryDirectives:l,levelOrTrack:f})}onAudioTrackLoading(e,n){const{id:i,groupId:r,url:s,deliveryDirectives:a,track:l}=n;this.load({id:i,groupId:r,level:null,responseType:"text",type:Mt.AUDIO_TRACK,url:s,deliveryDirectives:a,levelOrTrack:l})}onSubtitleTrackLoading(e,n){const{id:i,groupId:r,url:s,deliveryDirectives:a,track:l}=n;this.load({id:i,groupId:r,level:null,responseType:"text",type:Mt.SUBTITLE_TRACK,url:s,deliveryDirectives:a,levelOrTrack:l})}onLevelsUpdated(e,n){const i=this.loaders[Mt.LEVEL];if(i){const r=i.context;r&&!n.levels.some(s=>s===r.levelOrTrack)&&(i.abort(),delete this.loaders[Mt.LEVEL])}}load(e){var n;const i=this.hls.config;let r=this.getInternalLoader(e);if(r){const c=this.hls.logger,h=r.context;if(h&&h.levelOrTrack===e.levelOrTrack&&(h.url===e.url||h.deliveryDirectives&&!e.deliveryDirectives)){h.url===e.url?c.log(`[playlist-loader]: ignore ${e.url} ongoing request`):c.log(`[playlist-loader]: ignore ${e.url} in favor of ${h.url}`);return}c.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),r.abort()}let s;if(e.type===Mt.MANIFEST?s=i.manifestLoadPolicy.default:s=cn({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),r=this.createInternalLoader(e),qe((n=e.deliveryDirectives)==null?void 0:n.part)){let c;if(e.type===Mt.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===Mt.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===Mt.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const h=c.partTarget,p=c.targetduration;if(h&&p){const g=Math.max(h*3,p*.8)*1e3;s=cn({},s,{maxTimeToFirstByteMs:Math.min(g,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(g,s.maxTimeToFirstByteMs)})}}}const a=s.errorRetry||s.timeoutRetry||{},l={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},f={onSuccess:(c,h,p,g)=>{const x=this.getInternalLoader(p);this.resetInternalLoader(p.type);const b=c.data;if(b.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(c,p,new Error("no EXTM3U delimiter"),g||null,h);return}h.parsing.start=performance.now(),Io.isMediaPlaylist(b)||p.type!==Mt.MANIFEST?this.handleTrackOrLevelPlaylist(c,h,p,g||null,x):this.handleMasterPlaylist(c,h,p,g)},onError:(c,h,p,g)=>{this.handleNetworkError(h,p,!1,c,g)},onTimeout:(c,h,p)=>{this.handleNetworkError(h,p,!0,void 0,c)}};r.load(e,l,f)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:n},forceStartLoad:i}=this.hls;(e||i)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${n}`),this.hls.startLoad(n))}handleMasterPlaylist(e,n,i,r){const s=this.hls,a=e.data,l=p_(e,i),f=Io.parseMasterPlaylist(a,l);if(f.playlistParsingError){this.handleManifestParsingError(e,i,f.playlistParsingError,r,n);return}const{contentSteering:c,levels:h,sessionData:p,sessionKeys:g,startTimeOffset:x,variableList:b}=f;this.variableList=b;const{AUDIO:T=[],SUBTITLES:E,"CLOSED-CAPTIONS":C}=Io.parseMasterPlaylistMedia(a,l,f);T.length&&!T.some(P=>!P.url)&&h[0].audioCodec&&!h[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),T.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Kn({}),bitrate:0,url:""})),s.trigger(B.MANIFEST_LOADED,{levels:h,audioTracks:T,subtitles:E,captions:C,contentSteering:c,url:l,stats:n,networkDetails:r,sessionData:p,sessionKeys:g,startTimeOffset:x,variableList:b})}handleTrackOrLevelPlaylist(e,n,i,r,s){const a=this.hls,{id:l,level:f,type:c}=i,h=p_(e,i),p=qe(f)?f:qe(l)?l:0,g=RD(i),x=Io.parseLevelPlaylist(e.data,h,p,g,0,this.variableList);if(c===Mt.MANIFEST){const b={attrs:new Kn({}),bitrate:0,details:x,name:"",url:h};x.requestScheduled=n.loading.start+wB(x,0),a.trigger(B.MANIFEST_LOADED,{levels:[b],audioTracks:[],url:h,stats:n,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}n.parsing.end=performance.now(),i.levelDetails=x,this.handlePlaylistLoaded(x,e,n,i,r,s)}handleManifestParsingError(e,n,i,r,s){this.hls.trigger(B.ERROR,{type:at.NETWORK_ERROR,details:pe.MANIFEST_PARSING_ERROR,fatal:n.type===Mt.MANIFEST,url:e.url,err:i,error:i,reason:i.message,response:e,context:n,networkDetails:r,stats:s})}handleNetworkError(e,n,i=!1,r,s){let a=`A network ${i?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===Mt.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===Mt.AUDIO_TRACK||e.type===Mt.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const l=new Error(a);this.hls.logger.warn(`[playlist-loader]: ${a}`);let f=pe.UNKNOWN,c=!1;const h=this.getInternalLoader(e);switch(e.type){case Mt.MANIFEST:f=i?pe.MANIFEST_LOAD_TIMEOUT:pe.MANIFEST_LOAD_ERROR,c=!0;break;case Mt.LEVEL:f=i?pe.LEVEL_LOAD_TIMEOUT:pe.LEVEL_LOAD_ERROR,c=!1;break;case Mt.AUDIO_TRACK:f=i?pe.AUDIO_TRACK_LOAD_TIMEOUT:pe.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case Mt.SUBTITLE_TRACK:f=i?pe.SUBTITLE_TRACK_LOAD_TIMEOUT:pe.SUBTITLE_LOAD_ERROR,c=!1;break}h&&this.resetInternalLoader(e.type);const p={type:at.NETWORK_ERROR,details:f,fatal:c,url:e.url,loader:h,context:e,error:l,networkDetails:n,stats:s};if(r){const g=n?.url||e.url;p.response=pn({url:g,data:void 0},r)}this.hls.trigger(B.ERROR,p)}handlePlaylistLoaded(e,n,i,r,s,a){const l=this.hls,{type:f,level:c,id:h,groupId:p,deliveryDirectives:g}=r,x=p_(n,r),b=RD(r),T=typeof r.level=="number"&&b===et.MAIN?c:void 0;if(!e.fragments.length){const C=e.playlistParsingError=new Error("No Segments found in Playlist");l.trigger(B.ERROR,{type:at.NETWORK_ERROR,details:pe.LEVEL_EMPTY_ERROR,fatal:!1,url:x,error:C,reason:C.message,response:n,context:r,level:T,parent:b,networkDetails:s,stats:i});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const E=e.playlistParsingError;if(E){if(this.hls.logger.warn(E),!l.config.ignorePlaylistParsingErrors){l.trigger(B.ERROR,{type:at.NETWORK_ERROR,details:pe.LEVEL_PARSING_ERROR,fatal:!1,url:x,error:E,reason:E.message,response:n,context:r,level:T,parent:b,networkDetails:s,stats:i});return}e.playlistParsingError=null}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),f){case Mt.MANIFEST:case Mt.LEVEL:l.trigger(B.LEVEL_LOADED,{details:e,levelInfo:r.levelOrTrack||l.levels[0],level:T||0,id:h||0,stats:i,networkDetails:s,deliveryDirectives:g,withoutMultiVariant:f===Mt.MANIFEST});break;case Mt.AUDIO_TRACK:l.trigger(B.AUDIO_TRACK_LOADED,{details:e,track:r.levelOrTrack,id:h||0,groupId:p||"",stats:i,networkDetails:s,deliveryDirectives:g});break;case Mt.SUBTITLE_TRACK:l.trigger(B.SUBTITLE_TRACK_LOADED,{details:e,track:r.levelOrTrack,id:h||0,groupId:p||"",stats:i,networkDetails:s,deliveryDirectives:g});break}}}class Xa{static get version(){return Fm}static isMSESupported(){return xF()}static isSupported(){return hse()}static getMediaSource(){return Zu()}static get Events(){return B}static get MetadataSchema(){return Ss}static get ErrorTypes(){return at}static get ErrorDetails(){return pe}static get DefaultConfig(){return Xa.defaultConfig?Xa.defaultConfig:tse}static set DefaultConfig(e){Xa.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new rA,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const n=this.logger=Bee(e.debug||!1,"Hls instance",e.assetPlayerId),i=this.config=ise(Xa.DefaultConfig,e,n);this.userConfig=e,i.progressive&&rse(i,n);const{abrController:r,bufferController:s,capLevelController:a,errorController:l,fpsController:f}=i,c=new l(this),h=this.abrController=new r(this),p=new Ote(this),g=i.interstitialsController,x=g?this.interstitialsController=new g(this,Xa):null,b=this.bufferController=new s(this,p),T=this.capLevelController=new a(this),E=new f(this),C=new yse(this),I=i.contentSteeringController,P=I?new I(this):null,M=this.levelController=new dse(this,P),k=new cse(this),z=new vse(this.config),F=this.streamController=new gse(this,p,z),G=this.gapController=new lse(this,p);T.setStreamController(F),E.setStreamController(F);const K=[C,M,F];x&&K.splice(1,0,x),P&&K.splice(1,0,P),this.networkControllers=K;const V=[h,b,G,T,E,k,p];this.audioTrackController=this.createController(i.audioTrackController,K);const Q=i.audioStreamController;Q&&K.push(this.audioStreamController=new Q(this,p,z)),this.subtitleTrackController=this.createController(i.subtitleTrackController,K);const J=i.subtitleStreamController;J&&K.push(this.subtititleStreamController=new J(this,p,z)),this.createController(i.timelineController,V),z.emeController=this.emeController=this.createController(i.emeController,V),this.cmcdController=this.createController(i.cmcdController,V),this.latencyController=this.createController(fse,V),this.coreComponents=V,K.push(c);const ve=c.onErrorOut;typeof ve=="function"&&this.on(B.ERROR,ve,c),this.on(B.MANIFEST_LOADED,C.onManifestLoaded,C)}createController(e,n){if(e){const i=new e(this);return n&&n.push(i),i}return null}on(e,n,i=this){this._emitter.on(e,n,i)}once(e,n,i=this){this._emitter.once(e,n,i)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,n,i=this,r){this._emitter.off(e,n,i,r)}listeners(e){return this._emitter.listeners(e)}emit(e,n,i){return this._emitter.emit(e,n,i)}trigger(e,n){if(this.config.debug)return this.emit(e,e,n);try{return this.emit(e,e,n)}catch(i){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+i.message+'". Here is a stacktrace:',i),!this.triggeringException){this.triggeringException=!0;const r=e===B.ERROR;this.trigger(B.ERROR,{type:at.OTHER_ERROR,details:pe.INTERNAL_EXCEPTION,fatal:r,event:e,error:i}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(B.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(n=>n.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(n=>n.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const s=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(B.ERROR,{type:at.OTHER_ERROR,details:pe.ATTACH_MEDIA_ERROR,fatal:!0,error:s});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const n="media"in e,i=n?e.media:e,r=n?e:{media:i};this._media=i,this.trigger(B.MEDIA_ATTACHING,r)}detachMedia(){this.logger.log("detachMedia"),this.trigger(B.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(B.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const n=this.media,i=this._url,r=this._url=YT.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${r}`),n&&i&&(i!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(n)),this.trigger(B.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,n){this.logger.log(`startLoad(${e+(n?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let i=0;i<this.networkControllers.length&&(this.networkControllers[i].startLoad(e,n),!(!this.started||!this.networkControllers));i++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[et.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[et.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[et.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,n=e?.currentTime;this.detachMedia(),e&&(this.attachMedia(e),n&&this.startLoad(n))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=lre()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const n=!!e;n!==this.config.capLevelToPlayerSize&&(n?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=n)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){hte(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:n}}=this;if(!e)return 0;const i=e.length;for(let r=0;r<i;r++)if(e[r].maxBitrate>=n)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:n,maxHdcpLevel:i}=this;let r;if(n===-1&&e!=null&&e.length?r=e.length-1:r=n,i)for(let s=r;s--;){const a=e[s].attrs["HDCP-LEVEL"];if(a&&a<=i)return s}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var n;return((n=this.audioTrackController)==null?void 0:n.setAudioOption(e))||null}setSubtitleOption(e){var n;return((n=this.subtitleTrackController)==null?void 0:n.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const n=this.audioTrackController;n&&(n.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const n=this.subtitleTrackController;n&&(n.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const n=this.subtitleTrackController;n&&(n.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,n=this.allAudioTracks){const i=pB(n);return hB(e,i,navigator.mediaCapabilities)}}Xa.defaultConfig=void 0;const Wv=[{sera:"Sera Spanac",name:"Spanac - cam 1",type:"mp4",src:"https://dm0qx8t0i9gc9.cloudfront.net/watermarks/video/BgrICs-NZj4hksnn3/videoblocks-aerial-footage-in-a-greenhouse-with-moder-agriculture-technology-for-growing-green-salad_r7qr34uus__789bf4e34ba620421521574703463dc6__P360.mp4"},{sera:"Sera Spanac",name:"Spanac - cam 2",type:"mp4",src:"https://media.istockphoto.com/id/1359006633/ro/video/imagini-video-4k-cu-spanac-proasp%C4%83t-care-cre%C8%99te-%C3%AEntr-o-ferm%C4%83.mp4?s=mp4-640x640-is&k=20&c=rUp1EWQuDkr1I4ayYeAF_H__I560IXrByzel8N7Aztk="},{sera:"Sera Rosii",name:"Rosii - cam 1",type:"mp4",src:"https://dm0qx8t0i9gc9.cloudfront.net/watermarks/video/rZJIMvhmliwmde8a6/videoblocks-tomato-plants-are-in-greenhouse-bucket-full-of-ripe-red-tomatoes-bio-nutrition-concept_rpd8iuewl__1d5a17a22ed05c6600a2d5543d4f062e__P360.mp4"},{sera:"Sera Rosii",name:"Rosii - cam 2",type:"mp4",src:"https://media.istockphoto.com/id/2160554367/ro/video/organic-tomatoes-growing-in-a-greenhouse.mp4?s=mp4-640x640-is&k=20&c=lzhUwxy9lJqKkQEQ3ODy__4Ez6snftbymh2-NIyoQ5k="},{sera:"Sera Ardei",name:"Sera Ardei",type:"mp4",src:"https://media.istockphoto.com/id/1356891601/ro/video/mare-ser%C4%83-pepinier%C4%83-comercial%C4%83.mp4?s=mp4-640x640-is&k=20&c=Kq28wUPnAX3Y1FYqR2xI5tKBCYiQ5ue7Z-33YST22Eg="}];function g_(t){return String(t||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ").trim().toLowerCase()}function bse(t){const e=g_(t);if(!e)return[];let n=Wv.filter(i=>g_(i.sera)===e);return n.length||(n=Wv.filter(i=>{const r=g_(i.sera);return e.includes("spanac")?r.includes("spanac"):e.includes("rosii")||e.includes("rosi")||e.includes("ros")?r.includes("rosii"):e.includes("ardei")?r.includes("ardei"):!1})),n}const v_=[];function PD({seraName:t}){const[e,n]=O.useState(!0),[i,r]=O.useState(0),[s,a]=O.useState(!1),[l,f]=O.useState(v_.length===0),[c,h]=O.useState(0),p=O.useRef(null),g=O.useRef(null),x=O.useMemo(()=>{const M=bse(t);return M.length?M:Wv},[t]),b=O.useMemo(()=>{const M=l||v_.length===0?x:v_;return M.length?M:Wv},[l,x]),T=b.length>0?b[i%b.length]:null;O.useEffect(()=>{r(0),h(0),n(!0)},[t]),O.useEffect(()=>{!l&&c>=3&&f(!0)},[c,l]),O.useEffect(()=>{if(!T||!p.current)return;const M=p.current;if(g.current){try{g.current.destroy()}catch{}g.current=null}M.pause(),M.removeAttribute("src"),M.load();const k=()=>{r(F=>(F+1)%b.length)},z=()=>{n(!0),h(0)};if(M.removeEventListener("ended",k),M.addEventListener("ended",k),T.type==="hls")if(Xa.isSupported()){const F=new Xa;g.current=F,F.loadSource(T.src),F.attachMedia(M),F.on(Xa.Events.MANIFEST_PARSED,()=>{M.muted=!0,M.play().then(z).catch(()=>h(G=>G+1))}),F.on(Xa.Events.ERROR,(G,K)=>{if(K?.fatal){n(!1),h(V=>V+1);try{F.destroy()}catch{}}})}else M.canPlayType("application/vnd.apple.mpegurl")?(M.src=T.src,M.muted=!0,M.play().then(z).catch(()=>h(F=>F+1))):(n(!1),h(F=>F+1));else T.type==="mp4"&&(M.src=T.src,M.muted=!0,M.play().then(z).catch(()=>h(F=>F+1)));return()=>{if(M.removeEventListener("ended",k),g.current){try{g.current.destroy()}catch{}g.current=null}}},[i,T,b]);const E=()=>r(M=>b.length?(M-1+b.length)%b.length:0),C=()=>r(M=>b.length?(M+1)%b.length:0),I=()=>{if(!(!p.current||!T)&&!(T.type!=="hls"&&T.type!=="mp4"))try{const M=p.current,k=document.createElement("canvas");k.width=M.videoWidth||1280,k.height=M.videoHeight||720,k.getContext("2d").drawImage(M,0,0,k.width,k.height);const F=k.toDataURL("image/png");window.open(F,"_blank")}catch(M){console.error("Snapshot error:",M)}};if(!T)return A.jsx("div",{className:"camera-wrapper",children:A.jsx("div",{className:"camera-card",children:A.jsxs("div",{className:"video-container empty",children:["Nu sunt camere disponibile pentru ",A.jsx("b",{children:t||"ser necunoscut"}),"."]})})});const P=`${t??"na"}-${i}`;return A.jsx("div",{className:"camera-wrapper",children:A.jsx("div",{className:"camera-card",children:A.jsxs("div",{className:"video-container",children:[T.type==="iframe"?A.jsx("div",{className:"iframe-wrapper",children:A.jsx("iframe",{src:T.src,title:T.name,loading:"lazy",allowFullScreen:!0,frameBorder:"0",className:"camera-iframe"},P)}):A.jsx("video",{ref:p,...s?{controls:!0}:{},muted:!0,playsInline:!0,className:"camera-player",autoPlay:!0,loop:T.type==="mp4"},P),A.jsxs("div",{className:"overlay-top",children:[A.jsxs("div",{className:"left-group",children:[A.jsx("div",{className:"wireless-status",children:A.jsx("img",{src:e?"/assets/img/wireless.svg":"/assets/img/wireless-error.svg",alt:e?"Conexiune OK":"Eroare conexiune",className:"wireless-icon"})}),A.jsx("div",{className:"camera-name",children:T.name||t||"Camer"})]}),A.jsxs("div",{className:"right-group",children:[A.jsxs("div",{className:"camera-index",children:[Math.min(i+1,b.length),"/",b.length]}),A.jsx("button",{"aria-label":"Comut controale",className:"toggle-controls-btn",onClick:()=>a(M=>!M),children:A.jsx("i",{className:"bi bi-three-dots"})})]})]}),A.jsxs("div",{className:"overlay-bottom",children:[A.jsx("button",{"aria-label":"Anterior",className:"control-btn",onClick:E,children:A.jsx("i",{className:"bi bi-chevron-left"})}),A.jsx("button",{"aria-label":"Snapshot",className:"control-btn",onClick:I,children:A.jsx("i",{className:"bi bi-camera"})}),A.jsx("button",{"aria-label":"Notificri",className:"control-btn",children:A.jsx("i",{className:"bi bi-bell"})}),A.jsx("button",{"aria-label":"Urmtor",className:"control-btn",onClick:C,children:A.jsx("i",{className:"bi bi-chevron-right"})})]}),!e&&A.jsx("div",{className:"connection-warning",children:"Probleme de conexiune. Verific semnalul camerei."})]})})})}const _F="notif.items";function Pc(){try{const t=localStorage.getItem(_F);if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e:[]}catch{return[]}}function im(t){try{localStorage.setItem(_F,JSON.stringify(t))}catch{}const e=t.filter(n=>n.status==="activ").length;try{localStorage.setItem("notif.count",String(e))}catch{}window.dispatchEvent(new CustomEvent("notif-count",{detail:e})),window.dispatchEvent(new CustomEvent("notif-update",{detail:{items:t,active:e}}))}const Cl={getAll(){return Pc()},setAll(t){im(t)},add(t){const e=Pc();e.unshift(t),im(e)},update(t,e){const n=Pc().map(i=>i.id===t?{...i,...e}:i);im(n)},remove(t){const e=Pc().filter(n=>n.id!==t);im(e)},subscribe(t){const e=n=>t(n.detail?.items??Pc());return window.addEventListener("notif-update",e),t(Pc()),()=>window.removeEventListener("notif-update",e)},seedIfEmpty(t=[]){const e=Pc();(!e||e.length===0)&&im(t)}};function DD(){const[t,e]=O.useState([]);O.useEffect(()=>Cl.subscribe(e),[]);const n=O.useMemo(()=>t.filter(a=>a.status==="activ").length,[t]),i=a=>Cl.update(a,{status:"realizat"}),r=a=>Cl.update(a,{status:"amanat"}),s=a=>Cl.remove(a);return A.jsxs("div",{className:"home-notif-container service-item position-relative w-100 p-4",children:[A.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[A.jsxs("h3",{className:"mb-0 text-start",children:[A.jsx("i",{className:"bi bi-bell-fill me-2 text-success"}),"Notificri"]}),A.jsx("span",{className:"badge rounded-pill bg-success fw-bold",children:n})]}),A.jsx("div",{className:"home-notif-list",children:n===0?A.jsx("div",{className:"text-center text-muted py-3",children:"Nu exist notificri active."}):t.filter(a=>a.status==="activ").map(a=>A.jsxs("div",{className:`home-notif-card ${a.type}`,children:[A.jsx("div",{className:"home-notif-top",children:A.jsxs("span",{className:"home-sera-badge",children:[A.jsx("i",{className:"bi bi-house-door me-1"}),a.sera]})}),A.jsx("div",{className:"home-notif-message",children:a.message}),A.jsxs("div",{className:"home-notif-actions",children:[A.jsx("button",{onClick:()=>i(a.id),className:"home-notif-btn ok",children:"Realizat"}),A.jsx("button",{onClick:()=>r(a.id),className:"home-notif-btn postpone",children:"Amanat"}),A.jsx("button",{onClick:()=>s(a.id),className:"home-notif-btn cancel",children:"Anulat"})]})]},a.id))})]})}function xse(){const{boardId:t,selected:e}=Kd();return A.jsxs("main",{className:"dashboard",children:[A.jsxs("div",{className:"grid-desktop",children:[A.jsx("div",{className:"tile tile--weather",children:A.jsx(aP,{})}),A.jsx("div",{className:"tile tile--sensors",children:t&&A.jsx(dP,{boardId:t})}),A.jsx("div",{className:"tile tile--camera",children:A.jsx(PD,{boardId:t,seraName:e?.name})}),A.jsx("div",{className:"tile tile--devices scrollable",children:A.jsx(DD,{})}),A.jsx("div",{className:"tile tile--tasks scrollable",children:A.jsx(mP,{})})]}),A.jsxs("div",{className:"grid-mobile",children:[A.jsx("div",{className:"stack",children:A.jsx(aP,{})}),A.jsx("div",{className:"stack",children:A.jsx(PD,{boardId:t,seraName:e?.name})}),A.jsx("div",{className:"stack",children:t&&A.jsx(dP,{boardId:t})}),A.jsx("div",{className:"stack",children:A.jsx(mP,{})}),A.jsx("div",{className:"stack",children:A.jsx(DD,{})})]})]})}const _se=[{from:0,to:30,color:"#e74c3c"},{from:30,to:45,color:"#f1c40f"},{from:45,to:60,color:"#d6e98b"},{from:60,to:80,color:"#20c997"},{from:80,to:100,color:"#1e7e34"}],Pg=t=>-180+t/100*180,ID=t=>Math.PI/180*t,Ad=(t,e,n,i)=>({x:t+n*Math.cos(ID(i)),y:e+n*Math.sin(ID(i))}),Sse=(t,e,n,i,r)=>{const s=Ad(t,e,n,i),a=Ad(t,e,n,r),l=Math.abs(r-i)>180?1:0;return`M ${s.x} ${s.y} A ${n} ${n} 0 ${l} 1 ${a.x} ${a.y}`};function Ese(t,e,n,i,r,s){const a=Ad(t,e,n,r),l=Ad(t,e,i,r-s/2),f=Ad(t,e,i,r+s/2);return`M ${l.x} ${l.y} L ${a.x} ${a.y} L ${f.x} ${f.y} Z`}function Tse(t,e){return e.find(i=>t>=i.from&&t<=i.to)?.color??"#64748b"}function Ase(t,e){const n=[...e].sort((s,a)=>s-a),i=n[0],r=n[n.length-1];return r===i?0:(t-i)/(r-i)*100}function wse({percent:t=0,size:e=140,thickness:n=16,status:i="healthy",ticks:r=[],showTicks:s=!0,segments:a=_se,showCenter:l=!1,centerText:f}){const c=e/2,h=e/2,p=e/2-1,g=1.2,x=O.useMemo(()=>a.map((Q,J)=>{const ve=Pg(Q.from)+g/3,se=Pg(Q.to)-g/3;return A.jsx("path",{d:Sse(c,h,p,ve,se),stroke:Q.color,strokeWidth:n,strokeLinecap:"butt",strokeLinejoin:"miter",fill:"none"},J)}),[a,c,h,p,n]),b=p-n-6,T=i==="healthy"?"0 0 20px rgba(25,135,84,.20)":i==="warning"?"0 0 20px rgba(255,193,7,.22)":"0 0 22px rgba(220,53,69,.26)",E=O.useMemo(()=>{const Q=Math.max(0,Math.min(100,t)),J=Pg(Q),ve=16,se=p+n/2-1,ye=b-2;return A.jsx("path",{d:Ese(c,h,se,ye,J,ve),fill:"#1f2937"})},[t,c,h,p,n,b]),C=r?.length?r:a.map(Q=>Q.to),I=Array.from(new Set(C)),P=Math.max(8,Math.min(18,Math.round(e*.1))),M=p+n/2,k=12,z=M+k,F=k+n/2+6,G=Math.max(10,Math.round(P*.7)),K=e+G*2,V=e*.62+F;return A.jsxs("svg",{width:"100%",height:V,viewBox:`-${G} -${F} ${K} ${V}`,style:{overflow:"visible",filter:`drop-shadow(${T})`},"aria-hidden":"true",children:[x,A.jsx("defs",{children:A.jsxs("filter",{id:"gFaceShadow",x:"-40%",y:"-60%",width:"200%",height:"200%",children:[A.jsx("feDropShadow",{dx:"0",dy:"6",stdDeviation:"6",floodOpacity:"0.28"}),A.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"2",floodOpacity:"0.18"})]})}),A.jsx("circle",{cx:c,cy:h,r:b,fill:"#fff",filter:"url(#gFaceShadow)"}),E,l&&A.jsx("text",{x:c,y:h,textAnchor:"middle",dominantBaseline:"middle",style:{fontWeight:800,fill:"#0f172a",fontSize:Math.round(e*.28)},children:f??Math.round(t)}),s&&I.length>0&&I.map(Q=>{const J=Math.max(1.8,Math.min(98.2,Ase(Q,I))),ve=Pg(J),se=Ad(c,h,z,ve),ye=Tse(Q,a);return A.jsx("text",{x:se.x,y:se.y,fontSize:P,textAnchor:"middle",dominantBaseline:"middle",style:{fontWeight:700,fill:ye},children:Q},String(Q))})]})}const Lse="_card_176xr_2",Cse="_healthy_176xr_22",Ose="_warning_176xr_25",Rse="_danger_176xr_28",Pse="_highlight_176xr_33",Dse="_label_176xr_39",Ise="_helper_176xr_42",Mse="_gaugeWrap_176xr_47",kse="_valBox_176xr_58",Nse="_val_176xr_58",jse="_valSm_176xr_73",Bse="_valXs_176xr_76",Fse="_meta_176xr_81",Use="_metaIcon_176xr_103",Js={card:Lse,healthy:Cse,warning:Ose,danger:Rse,highlight:Pse,label:Dse,helper:Ise,gaugeWrap:Mse,valBox:kse,val:Nse,valSm:jse,valXs:Bse,meta:Fse,metaIcon:Use};function SF(t=1200){const[e,n]=O.useState(typeof window<"u"?window.innerWidth:t);return O.useEffect(()=>{const i=()=>n(window.innerWidth);return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),e}function $se({icon:t,label:e,value:n,percent:i=0,helper:r,status:s="healthy",highlight:a=!1,onClick:l,ticks:f=[],unit:c="%"}){const p=SF()<=640,g=p?150:180,x=p?16:18,T=String(n).length,E=T>10?Js.valXs:T>7?Js.valSm:"",C=[Js.card,Js[s],a?Js.highlight:""].filter(Boolean).join(" ");return A.jsxs("button",{className:C,onClick:l,type:"button",children:[A.jsxs("div",{className:Js.gaugeWrap,children:[A.jsx(wse,{percent:i,status:s,size:g,thickness:x,ticks:f,showTicks:f.length>0}),A.jsx("div",{className:Js.valBox,children:A.jsx("div",{className:`${Js.val} ${E}`,children:n})})]}),A.jsxs("div",{className:Js.meta,children:[A.jsxs("div",{className:Js.label,title:e,children:[t&&A.jsx("i",{className:`bi ${t} ${Js.metaIcon}`}),e]}),r&&A.jsx("div",{className:Js.helper,children:r})]})]})}function Kg(t="/reports",e={}){const n=t.startsWith("/")?t.slice(1):t,i=new URL("/colleagues.php",window.location.origin);return i.searchParams.set("path",n),Object.entries(e).forEach(([r,s])=>{s!=null&&s!==""&&i.searchParams.set(r,s)}),i.toString()}function qg(){return{Accept:"application/json"}}const zse=Math.max(2e3,1e4),Gse="/command",Vg=t=>{if(t==null)return 0;if(typeof t=="number")return t>0?1:0;if(typeof t=="boolean")return t?1:0;const e=String(t).trim().toLowerCase();if(["1","on","true","open","high"].includes(e))return 1;if(["0","off","false","closed","low"].includes(e))return 0;const n=Number(t);return Number.isFinite(n)&&n>0?1:0},Hse=t=>Vg(t)?"Pornit":"Oprit",Kse=t=>new Promise(e=>setTimeout(e,t)),dd=t=>t?.ATIMEACQ||t?.STIMEACQ||t?.TTIMEACQ||null,qse=t=>{if(!t)return 1/0;const e=Date.parse(t);return Number.isFinite(e)?Math.max(0,(Date.now()-e)/1e3):1/0};function MD(t,e){const n=[t,t?.state,t?.status,t?.outputs,t?.actuators,t?.data];for(const i of n)if(!(!i||typeof i!="object")){for(const r of e)if(r in i)return i[r]}}async function kD(t,e){const n=await fetch(t,{cache:"no-store",...e,headers:{Accept:e?.method==="POST"?"*/*":"application/json",...e?.headers||{}}}),i=await n.text(),r=n.headers.get("content-type")||"";if(!n.ok){const s=`HTTP ${n.status}: ${i.slice(0,240)}`;throw n.status===401?new Error("401  Token expirat/nevalid. Verific COLLEAGUE_API_TOKEN i repornete dev serverul."):n.status===404?new Error("404  Endpoint inexistent. Verific VITE_ACT_ENDPOINT (ex. /command) i proxy-ul /ext."):new Error(s)}return/application\/json/i.test(r)?JSON.parse(i):{ok:!0,text:i}}function Vse({boardId:t="e663ac91d3824a2c",refreshMs:e=zse,actEndpoint:n=Gse,actuators:i=[{key:"TESTLED",label:"LED",primary:"led",icon:""},{key:"TESTFAN",label:"Ventilator",primary:"fan",icon:""},{key:"TESTSRV",label:"Servo",primary:"srv",icon:""},{key:"TESTPMP",label:"Pomp",primary:"pmp",icon:""}],readAliases:r={TESTLED:["TESTLED","led","LED","testled","act_led"],TESTFAN:["TESTFAN","fan","FAN","testfan","act_fan"],TESTSRV:["TESTSRV","srv","servo","SRV","SERVO","testsrv","act_srv","act_servo"],TESTPMP:["TESTPMP","pmp","pump","PMP","PUMP","testpmp","act_pmp","act_pump"]}}){const[s,a]=O.useState(null),[l,f]=O.useState(null),[c,h]=O.useState(null),[p,g]=O.useState(!1),x=O.useRef(!0),b=O.useRef(null),T=O.useRef({}),E=async()=>{const K=Kg("/sensors",{identifier:t,_:Date.now()}),V=await kD(K,{headers:qg()});return V?.data??V},C=async()=>{const K=Kg("/reports",{identifier:t,_:Date.now()});try{const V=await kD(K,{headers:qg()});return Array.isArray(V)?V:Array.isArray(V?.data)?V.data:[]}catch{return[]}},I=(K,V,Q,J)=>{const ve=r[V]||[V],se=Q?"on":"off",ye=Q?1:0;for(const X of K){const oe=Date.parse(X.timestamp||X.time||X.created_at||X.date||"");if(J&&Number.isFinite(oe)&&oe<J)continue;const ie=(X.actuator||X.action||X.key||X.name||"").toString().toLowerCase(),Ie=X.value??X.state??X.new_value??X.payload?.value??X.data?.value;if(!ie||!(ve||[]).some(ne=>ie.includes(String(ne).toLowerCase())))continue;if(Vg(Ie)===ye||String(Ie).toLowerCase()===se)return!0}return!1},P=async(K,V)=>{const Q=Kg("/command",{identifier:t}),J=[{headers:{"Content-Type":"application/json"},body:JSON.stringify({deviceId:t,actuator:K,value:V}),label:"json"},{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({identifier:t,actuator:K,value:V}).toString(),label:"form1"},{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({identifier:t,key:K,state:V}).toString(),label:"form2"},{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({identifier:t,actuator:K,value:V==="on"?"1":"0"}).toString(),label:"form3"}];let ve=0,se="";for(const ye of J)try{const X=await fetch(Q,{method:"POST",headers:{Accept:"*/*",...qg(),...ye.headers},body:ye.body,cache:"no-store"});if(ve=X.status,se=await X.text(),X.ok)return!0;if(X.status===401)throw new Error("401  Token expirat/nevalid. Verific COLLEAGUE_API_TOKEN n .env.");if(X.status>=500)break}catch(X){se=String(X?.message||X)}throw new Error(`HTTP ${ve||"400"}  serverul a respins comanda. Detalii: ${String(se).slice(0,240)}`)},M=async(K,V,Q,J=9e4)=>{const ve=Date.now();let se=null;for(;Date.now()-ve<J;){const ye=await E();se=ye;const X=Vg(MD(ye,r[K]||[K])),oe=dd(ye);if(X===V&&(!oe||Date.parse(oe)>=Q))return{confirmed:!0,via:"sensors",snap:ye,stamp:oe};const ie=await C();if(I(ie,K,V,Q))return{confirmed:!0,via:"reports",snap:ye,stamp:oe};await Kse(800)}return{confirmed:!1,via:"timeout",snap:se,stamp:dd(se)}},k=async(K=!1)=>{try{K&&g(!0);const V=await E();if(!x.current)return;const Q=dd(V),J=Number.isFinite(Date.parse(Q))?Date.parse(Q):0,ve=T.current;if(J)for(const[se,ye]of Object.entries(ve))ye&&Date.now()>ye.untilMs&&delete ve[se];a(V),f(null)}catch(V){x.current&&f(String(V?.message||V))}finally{K&&g(!1)}};O.useEffect(()=>(x.current=!0,k(),b.current=setInterval(k,e),()=>{x.current=!1,clearInterval(b.current)}),[t,e]);const z=O.useMemo(()=>{const K={},V=dd(s),Q=Number.isFinite(Date.parse(V))?Date.parse(V):0,J=T.current;for(const ve of i){let se=s?.[ve.key];se===void 0&&(se=MD(s,r[ve.key]||[ve.key]));let ye=Vg(se);const X=J[ve.key];X&&((!Q||Q<X.cmdAtMs)&&(ye=X.want),X.confirmedVia==="reports"&&(ye=X.want)),K[ve.key]=ye}return K},[s,i,r]);async function F(K,V){const Q=i.find(ve=>ve.key===K);if(!Q)return;h(K),f(null);const J=Date.now();T.current[K]={want:V?1:0,cmdAtMs:J,untilMs:J+9e4};try{await P(Q.primary,V?"on":"off")}catch(ve){delete T.current[K];const se=String(ve?.message||ve);let ye="";se.startsWith("401")?ye=" Verific COLLEAGUE_API_TOKEN n .env.":se.startsWith("404")?ye=" Verific VITE_ACT_ENDPOINT (ex. /command) i proxy-ul /ext.":se.includes("Failed to fetch")&&(ye=" Conexiune/policy CORS."),f(`${se}${ye}`),h(null);return}finally{h(null)}try{const ve=V?1:0,{confirmed:se,via:ye,snap:X}=await M(K,ve,J,9e4);se?(ye==="reports"?T.current[K]={...T.current[K]||{},want:ve,cmdAtMs:J,untilMs:Date.now()+9e4,confirmedVia:"reports"}:delete T.current[K],X&&a(X)):(delete T.current[K],X&&a(X))}catch{delete T.current[K]}}const G={wrap:{},errBox:{background:"#ffe6e6",color:"#7a0612",padding:10,borderRadius:8,marginBottom:12},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:16},card:{background:"#1f2937",color:"white",borderRadius:14,padding:16,boxShadow:"0 6px 18px rgba(0,0,0,.15)"},cardHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},cardTitle:{fontSize:22,display:"flex",alignItems:"center",gap:8},badge:K=>({background:K?"#16a34a":"#9ca3af",color:"white",padding:"4px 10px",borderRadius:999,fontSize:12,letterSpacing:.3}),btnRow:{display:"flex",gap:10},btn:K=>({flex:1,padding:"10px 12px",borderRadius:10,border:"none",cursor:"pointer",background:K,color:"white",fontWeight:600}),btnGhost:{padding:"8px 12px",borderRadius:10,border:"1px solid #e5e7eb",background:"white",cursor:"pointer"},refreshRow:{marginTop:16,display:"flex",gap:10,alignItems:"center",flexWrap:"wrap"},lastRef:{fontSize:12,opacity:.7},staleWarn:{fontSize:12,color:"#b45309",background:"#fffbeb",padding:"6px 10px",borderRadius:8,border:"1px solid #f59e0b"}};return A.jsxs("div",{style:G.wrap,children:[l&&A.jsxs("div",{style:G.errBox,children:[A.jsx("strong",{children:"Eroare:"})," ",l]}),A.jsx("div",{style:G.grid,children:i.map(K=>{const V=z[K.key]===1,Q=c===K.key;return A.jsxs("div",{style:G.card,children:[A.jsxs("div",{style:G.cardHeader,children:[A.jsxs("div",{style:G.cardTitle,children:[A.jsx("span",{style:{marginRight:0},children:K.icon}),K.label]}),A.jsx("div",{style:G.badge(V),children:Hse(V)})]}),A.jsxs("div",{style:G.btnRow,children:[A.jsx("button",{disabled:Q||V,onClick:()=>F(K.key,!0),style:{...G.btn("#10b981"),opacity:Q||V?.6:1,cursor:Q||V?"not-allowed":"pointer"},children:Q?"":"ON"}),A.jsx("button",{disabled:Q||!V,onClick:()=>F(K.key,!1),style:{...G.btn("#ef4444"),opacity:Q||!V?.6:1,cursor:Q||!V?"not-allowed":"pointer"},children:Q?"":"OFF"})]})]},K.key)})}),A.jsxs("div",{style:G.refreshRow,children:[A.jsx("button",{onClick:()=>k(!0),style:G.btnGhost,disabled:p,children:p?"Se ncarc":"Remprospteaz"}),A.jsxs("div",{style:G.lastRef,children:["Ultimul refresh: ",A.jsx("code",{children:dd(s)||""})]}),(()=>{const K=dd(s),V=qse(K);return!s||V<=90?null:A.jsxs("div",{style:G.staleWarn,children:["Atenie: date mai vechi de ",Math.round(V),"s (ultimul snapshot: ",A.jsx("code",{children:K}),")."]})})()]})]})}const Yse={irrigation:"",lights:"",vent:"",pests:""};function Dg({variant:t,title:e,description:n,statusOn:i,children:r}){return A.jsxs("div",{className:"autos__card","data-variant":t,"data-on":i?"1":"0",children:[A.jsxs("div",{className:"autos__cardHead",children:[A.jsx("span",{className:"autos__icon",children:Yse[t]}),A.jsx("span",{className:"autos__title",children:e}),A.jsx("span",{className:`autos__badge ${i?"on":"off"}`,children:i?"Activ":"Oprit"})]}),A.jsx("p",{className:"autos__desc",children:n}),A.jsx("div",{className:"autos__inputs",children:r})]})}function rm({checked:t,onChange:e,label:n}){return A.jsxs("label",{className:"autos__toggle",children:[A.jsx("input",{type:"checkbox",checked:!!t,onChange:i=>e(i.target.checked)}),A.jsx("span",{className:"autos__toggleSlider"}),A.jsx("span",{className:"autos__toggleLabel",children:n})]})}async function EF(t,e){const n=await fetch(t,{cache:"no-store",...e,headers:{Accept:e?.method==="POST"?"*/*":"application/json","Content-Type":e?.method==="POST"?"application/json":void 0,...e?.headers||{}}}),i=await n.text();if(!n.ok)throw new Error(`HTTP ${n.status}: ${i.slice(0,200)}`);return/application\/json/i.test(n.headers.get("content-type")||"")?JSON.parse(i):{ok:!0,text:i}}async function Wse(t,e){const n=`${t}/sensors?identifier=${encodeURIComponent(e)}&_=${Date.now()}`,i=await EF(n);return i?.data??i}async function Zse(t,e,n,i,r){const s=`${t}${e}?identifier=${encodeURIComponent(n)}`;await EF(s,{method:"POST",body:JSON.stringify({deviceId:n,actuator:i,value:r})})}const wd=(t,e,n)=>Math.min(n,Math.max(e,t)),TF=t=>{const e=Number(typeof t=="string"?t.replace(",","."):t);return Number.isFinite(e)?e:null};function AF(t,e){const n=[t,t?.data,t?.state,t?.status,t?.sensors,t?.inputs];for(const i of n)if(!(!i||typeof i!="object")){for(const r of e)if(r in i)return i[r]}}function Xse(t){const e=AF(t,["TEMP","temperature","temp","T","DHT_temp","DHT22_temp","dht.temp"]),n=TF(e);return n==null?null:wd(n,-40,100)}function Qse(t){const e=AF(t,["SOIL_PCT","soil_pct","soil","umiditate_sol","soilMoisture"]),n=TF(e);return n==null?null:n<=1?wd(Math.round(n*100),0,100):wd(Math.round(n),0,100)}function Jse(t,e){if(!t||!e)return!1;const[n,i]=t.split(":").map(Number),[r,s]=e.split(":").map(Number),a=n*60+i,l=r*60+s,f=new Date,c=f.getHours()*60+f.getMinutes();return a<=l?c>=a&&c<l:c>=a||c<l}function eae({seraId:t,cfg:e,boardMap:n,extRoot:i,actEndpoint:r,pollMs:s,hyst:a}){const l=O.useRef({desired:{pump:null,fan:null,led:null},lastRunKey:new Set,soilCooldownUntil:0,timeouts:[]});O.useEffect(()=>()=>{l.current.timeouts.forEach(clearTimeout),l.current.timeouts=[],l.current.desired={pump:null,fan:null,led:null}},[t]);const f=async(p,g,x,b)=>{const T={irrigation:"pump",ventilation:"fan",lights:"led"}[g];if(l.current.desired[T]!==(x?1:0)){await Zse(i,r,p,b[g],x?"on":"off"),l.current.desired[T]=x?1:0;try{window.dispatchEvent(new CustomEvent("actuator-command",{detail:{boardId:p,actuator:b[g],on:x}}))}catch{}}},c=async(p,g,x)=>{await f(p,"irrigation",!0,g);const b=setTimeout(async()=>{try{await f(p,"irrigation",!1,g)}catch{}},Math.max(1,x)*60*1e3);l.current.timeouts.push(b),l.current.soilCooldownUntil=Date.now()+Math.max(1,x)*2*60*1e3},h=(p,g,x)=>`${new Date().toISOString().slice(0,10)}|${x}|${p}|${g}`;O.useEffect(()=>{const p=n[t],g=p?.id,x=p?.actuators;if(!g||!x)return;let b=!1;async function T(){if(b)return;let C=null;try{C=await Wse(i,g)}catch{}const I=C?Xse(C):null,P=C?Qse(C):null;if(e.ventilation.enabled&&I!=null){const M=e.ventilation.thresholdC,k=l.current.desired.fan===1?I>=M-(a?.tempOffDelta??1):I>=M;await f(g,"ventilation",k,x)}if(e.lights.enabled){const M=Jse(e.lights.from,e.lights.to);await f(g,"lights",M,x)}if(e.irrigation.enabled)for(const M of e.irrigation.times){if(!/^\d{2}:\d{2}$/.test(M))continue;const k=new Date,z=String(k.getHours()).padStart(2,"0"),F=String(k.getMinutes()).padStart(2,"0"),G=`${z}:${F}`===M,K=h(t,"irrigation.time",M);if(G&&!l.current.lastRunKey.has(K)&&(l.current.lastRunKey.add(K),await c(g,x,e.irrigation.durationMin)),!G&&l.current.lastRunKey.size>1e3){const V=new Date().toISOString().slice(0,10);l.current.lastRunKey=new Set([...l.current.lastRunKey].filter(Q=>Q.startsWith(V)))}}if(e.irrigation.bySoil?.enabled&&P!=null){const M=e.irrigation.bySoil.thresholdPct??40,z=Date.now()<l.current.soilCooldownUntil;P<M&&!z&&await c(g,x,e.irrigation.durationMin)}}T();const E=setInterval(T,s);return()=>{b=!0,clearInterval(E)}},[t,e,n,i,r,s,a])}const tae=[{id:"spanac",name:"Sera Spanac"},{id:"rosii",name:"Sera Roii"},{id:"ardei",name:"Sera Ardei"}];function ND(t){switch(t){case"rosii":return{irrigation:{enabled:!1,times:["06:30","19:30"],durationMin:6,bySoil:{enabled:!0,thresholdPct:40}},ventilation:{enabled:!0,thresholdC:30},lights:{enabled:!1,from:"17:00",to:"21:00"},pests:{enabled:!0}};case"ardei":return{irrigation:{enabled:!1,times:["07:00","20:00"],durationMin:5,bySoil:{enabled:!0,thresholdPct:38}},ventilation:{enabled:!0,thresholdC:31},lights:{enabled:!1,from:"18:00",to:"22:00"},pests:{enabled:!0}};default:return{irrigation:{enabled:!1,times:["07:00","19:00"],durationMin:5,bySoil:{enabled:!0,thresholdPct:35}},ventilation:{enabled:!0,thresholdC:29},lights:{enabled:!1,from:"17:30",to:"20:30"},pests:{enabled:!0}}}}const wF=t=>`autos.simple.${t}`,jD=t=>{try{const e=localStorage.getItem(wF(t));return e?JSON.parse(e):ND(t)}catch{return ND(t)}},nae=(t,e)=>{try{localStorage.setItem(wF(t),JSON.stringify(e))}catch{}try{window.dispatchEvent(new CustomEvent("autos-cfg-changed",{detail:{seraId:t,cfg:e}}))}catch{}},iae=Math.max(5e3,1e4),rae={tempOffDelta:1,soilOffDelta:3},sae={spanac:{id:"e663ac91d3824a2c",actuators:{irrigation:"pmp",ventilation:"fan",lights:"led"}},rosii:{id:null,actuators:{irrigation:"pmp",ventilation:"fan",lights:"led"}},ardei:{id:null,actuators:{irrigation:"pmp",ventilation:"fan",lights:"led"}}};function aae({seraId:t,sereList:e,boardMap:n=sae}){const i=(e&&e.length?e:tae).map(p=>({id:p.id,name:p.name})),[r]=O.useState(i[0]?.id),s=t??r,[a,l]=O.useState(()=>jD(s)),f=O.useMemo(()=>i.find(p=>p.id===s)?.name||"",[i,s]);O.useEffect(()=>l(jD(s)),[s]),O.useEffect(()=>{s&&nae(s,a)},[s,a]),O.useEffect(()=>{const p=g=>{g.detail?.seraId===s&&l(g.detail.cfg)};return window.addEventListener("autos-cfg-changed",p),()=>window.removeEventListener("autos-cfg-changed",p)},[s]),O.useEffect(()=>{const p="autos.simple.migr.offTimeDefault.v1";try{if(localStorage.getItem(p))return;l(g=>{if(g?.irrigation?.enabled&&g?.irrigation?.bySoil?.enabled){const x=structuredClone(g);return x.irrigation.enabled=!1,x}return g}),localStorage.setItem(p,"done")}catch{}},[]),eae({seraId:s,cfg:a,boardMap:n,pollMs:iae,hyst:rae});const c=(p,g)=>l(x=>{const b=structuredClone(x),T=p.split(".");let E=b;return T.slice(0,-1).forEach(C=>E=E[C]),E[T[T.length-1]]=g,b}),h=a.irrigation.enabled||a.irrigation.bySoil?.enabled;return A.jsxs("div",{className:"autos",children:[A.jsx("div",{className:"autos__topbar",children:A.jsxs("span",{className:"autos__hint",children:["Automatizri pentru ",A.jsx("b",{children:f||""})]})}),A.jsxs("div",{className:"autos__grid",children:[A.jsxs(Dg,{variant:"irrigation",title:"Udare automat",description:"Uda la orele alese i/sau cnd solul e prea uscat.",statusOn:!!h,children:[A.jsx("div",{className:"autos__row",children:A.jsx(rm,{checked:a.irrigation.enabled,onChange:p=>c("irrigation.enabled",p),label:a.irrigation.enabled?"Udare ora fix: Pornit":"Udare ora fix: Oprit"})}),A.jsxs("div",{className:"autos__row autos__row--4",children:[A.jsxs("div",{className:"autos__field",children:[A.jsx("label",{children:"Ora 1"}),A.jsx("input",{type:"time",value:a.irrigation.times[0],onChange:p=>c("irrigation.times",[p.target.value,a.irrigation.times[1]])})]}),A.jsxs("div",{className:"autos__field",children:[A.jsx("label",{children:"Ora 2"}),A.jsx("input",{type:"time",value:a.irrigation.times[1],onChange:p=>c("irrigation.times",[a.irrigation.times[0],p.target.value])})]}),A.jsxs("div",{className:"autos__field",children:[A.jsx("label",{children:"Durat"}),A.jsxs("div",{className:"autos__inline",children:[A.jsx("input",{type:"number",min:1,max:30,value:a.irrigation.durationMin,onChange:p=>c("irrigation.durationMin",wd(Number(p.target.value)||1,1,30))}),A.jsx("span",{children:"min"})]})]})]}),A.jsxs("div",{className:"autos__row autos__row--soil",children:[A.jsx(rm,{checked:!!a.irrigation.bySoil?.enabled,onChange:p=>c("irrigation.bySoil.enabled",p),label:a.irrigation.bySoil?.enabled?"Umid sol: Activ":"Umid sol: Inactiv"}),A.jsxs("div",{className:"autos__field autos__field--small",children:[A.jsx("label",{children:"Prag umiditate"}),A.jsxs("div",{className:"autos__inline",children:[A.jsx("input",{type:"number",min:10,max:90,disabled:!a.irrigation.bySoil?.enabled,value:a.irrigation.bySoil?.thresholdPct??40,onChange:p=>c("irrigation.bySoil.thresholdPct",wd(Number(p.target.value)||10,10,90))}),A.jsx("span",{children:"%"})]})]}),A.jsx("input",{className:"autos__range",type:"range",min:10,max:90,step:1,disabled:!a.irrigation.bySoil?.enabled,value:a.irrigation.bySoil?.thresholdPct??40,onChange:p=>c("irrigation.bySoil.thresholdPct",Number(p.target.value))})]})]}),A.jsxs(Dg,{variant:"lights",title:"Iluminat complementar",description:"Aprinde luminile n intervalul ales.",statusOn:a.lights.enabled,children:[A.jsx("div",{className:"autos__row",children:A.jsx(rm,{checked:a.lights.enabled,onChange:p=>c("lights.enabled",p),label:a.lights.enabled?"Pornit":"Oprit"})}),A.jsxs("div",{className:"autos__row autos__row--2",children:[A.jsxs("div",{className:"autos__field",children:[A.jsx("label",{children:"De la"}),A.jsx("input",{type:"time",value:a.lights.from,disabled:!a.lights.enabled,onChange:p=>c("lights.from",p.target.value)})]}),A.jsxs("div",{className:"autos__field",children:[A.jsx("label",{children:"Pn la"}),A.jsx("input",{type:"time",value:a.lights.to,disabled:!a.lights.enabled,onChange:p=>c("lights.to",p.target.value)})]})]})]}),A.jsxs(Dg,{variant:"vent",title:"Aerisire automat",description:"Pornete ventilarea peste prag.",statusOn:a.ventilation.enabled,children:[A.jsx("div",{className:"autos__row",children:A.jsx(rm,{checked:a.ventilation.enabled,onChange:p=>c("ventilation.enabled",p),label:a.ventilation.enabled?"Pornit":"Oprit"})}),A.jsx("div",{className:"autos__row autos__row--1",children:A.jsxs("div",{className:"autos__field",children:[A.jsx("label",{children:"Prag temperatur"}),A.jsxs("div",{className:"autos__inline",children:[A.jsx("input",{type:"number",min:20,max:45,value:a.ventilation.thresholdC,onChange:p=>c("ventilation.thresholdC",wd(Number(p.target.value)||20,20,45))}),A.jsx("span",{children:"C"})]})]})})]}),A.jsx(Dg,{variant:"pests",title:"Monitorizare duntori",description:"Alerte la semne din imagini/senzori.",statusOn:a.pests.enabled,children:A.jsx("div",{className:"autos__row",children:A.jsx(rm,{checked:a.pests.enabled,onChange:p=>c("pests.enabled",p),label:a.pests.enabled?"Pornit":"Oprit"})})})]})]})}const oae=Math.max(1e3,1e4),Dc=[{id:"spanac",name:"Sera Spanac",boardId:"e663ac91d3824a2c"},{id:"rosii",name:"Sera Rosii",boardId:"mock:mirror"},{id:"ardei",name:"Sera Ardei",boardId:"mock:synthetic"}],lae=["TEMPAER","UMDTSOL1","UMDTSOL2","UMDTSOL3","UMDTSOL4","NIVELAPA","EXCESAPA","UMDTAER","ILUMINARE","CALITAER","STAREAER"],uae=t=>Math.max(0,Math.min(1,t)),hd=(t,e,n)=>t==null||Number.isNaN(+t)||e===n?0:Math.round(uae((t-e)/(n-e))*100),cae=(t,e="")=>t==null||Number.isNaN(+t)?"":e===" lx"?`${Math.round(t)} lx`:e==="%"?`${+(+t).toFixed(2)}%`:e==="C"?`${+(+t).toFixed(1)}C`:e===" CA"?`${+(+t).toFixed(0)} CA`:`${+(+t).toFixed(2)}${e}`;function fae(t,e){const n=Number(e);switch(t){case"TEMPAER":return n>=28&&n<=35?{status:"healthy",helper:"Temperatura optim."}:n<28?{status:"warning",helper:"Prea rece  nclzete/izoleaz."}:{status:"warning",helper:"Prea cald  ventilare/umbrire."};case"UMDTAER":return n>=60&&n<=85?{status:"healthy",helper:"Umiditate bun."}:n<60?{status:"warning",helper:"Aer uscat  umidific."}:{status:"warning",helper:"Prea umed  crete ventilarea."};case"UMDTSOL1":case"UMDTSOL2":case"UMDTSOL3":case"UMDTSOL4":return n>=40&&n<=70?{status:"healthy",helper:"Sol n parametri."}:n<40?{status:"warning",helper:"Sol uscat  ud."}:{status:"warning",helper:"Sol prea umed  redu udarea."};case"ILUMINARE":return n>=5e3&&n<=2e4?{status:"healthy",helper:"Iluminare adecvat."}:n<5e3?{status:"warning",helper:"Lumina e slab."}:{status:"warning",helper:"Lumina e prea puternic."};case"NIVELAPA":return n>=40&&n<=90?{status:"healthy",helper:"Nivel potrivit."}:n<40?{status:"warning",helper:"Completeaz rezervorul."}:{status:"warning",helper:"Foarte ridicat  verific preaplinul."};case"CALITAER":return n<=1e3?{status:"healthy",helper:"Calitate bun."}:n<=1500?{status:"warning",helper:"Mediu  aerisete periodic."}:{status:"danger",helper:"Slab  ventilare continu."};case"STAREAER":return String(e).toLowerCase().includes("alert")?{status:"warning",helper:"Atenie la calitatea aerului."}:{status:"healthy",helper:"Normal"};case"EXCESAPA":return Number(n)>0?{status:"danger",helper:"Exces de ap detectat."}:{status:"healthy",helper:"Normal"};default:return{status:"healthy",helper:""}}}const y_={TEMPAER:{label:"Temperatur aer",unit:"C",icon:"bi-thermometer"},UMDTAER:{label:"Umiditate aer",unit:"%",icon:"bi-droplet"},UMDTSOL1:{label:"Umiditate sol 1",unit:"%",icon:"bi-moisture"},UMDTSOL2:{label:"Umiditate sol 2",unit:"%",icon:"bi-moisture"},UMDTSOL3:{label:"Umiditate sol 3",unit:"%",icon:"bi-moisture"},UMDTSOL4:{label:"Umiditate sol 4",unit:"%",icon:"bi-moisture"},ILUMINARE:{label:"Iluminare",unit:" lx",icon:"bi-brightness-high"},NIVELAPA:{label:"Nivel ap",unit:"%",icon:"bi-droplet-half"},EXCESAPA:{label:"Exces ap",unit:"",icon:"bi-exclamation-octagon"},CALITAER:{label:"Calitatea aerului",unit:" CA",icon:"bi-wind"},STAREAER:{label:"Stare aer",unit:"",icon:"bi-activity"}};async function dae(t,e){const n=await fetch(t,{cache:"no-store",...e}),i=await n.text();if(!n.ok)throw new Error(n.status===401?"Token expirat sau nevalid (401).":`HTTP ${n.status}: ${i.slice(0,200)}`);try{return JSON.parse(i)}catch{throw new Error(`Nu e JSON: ${i.slice(0,200)}`)}}async function BD(t){const e=Kg("/sensors",{identifier:t,_:Date.now()}),n=await dae(e,{headers:qg()});return n?.data??n}const hae="e663ac91d3824a2c",mae={"mock:mirror":{type:"mirror",src:hae,noise:.06},"mock:synthetic":{type:"synthetic"}};function pae(t,e=.05){const n=Number(t);if(!Number.isFinite(n))return t;const i=Math.max(1,Math.abs(n))*e;return+(n+(Math.random()*2-1)*i).toFixed(2)}function gae(t,e=.05){const n={...t};return["TEMPAER","UMDTAER","UMDTSOL1","UMDTSOL2","UMDTSOL3","UMDTSOL4","ILUMINARE","NIVELAPA","CALITAER"].forEach(i=>{i in n&&(n[i]=pae(n[i],e))}),n}function vae(t=Date.now()){const e=t/1e3,n=(a,l,f=0)=>a+l*Math.sin(e/600+f),i=(a,l,f)=>Math.min(f,Math.max(l,a)),r=new Date(t).getHours(),s=(Math.sin(r/24*2*Math.PI-Math.PI/2)+1)/2*22e3+300;return{TEMPAER:+i(n(26,6),18,38).toFixed(1),UMDTAER:+i(n(70,12,1),40,95).toFixed(0),UMDTSOL1:+i(n(55,10,.3),25,90).toFixed(0),UMDTSOL2:+i(n(50,12,.9),25,90).toFixed(0),UMDTSOL3:+i(n(52,11,1.5),25,90).toFixed(0),UMDTSOL4:+i(n(48,9,2.2),25,90).toFixed(0),NIVELAPA:+i(80-e%3600/60,30,90).toFixed(0),ILUMINARE:+i(s,200,25e3).toFixed(0),CALITAER:+i(600+500*Math.sin(e/300)+300*Math.random(),400,2e3).toFixed(0),STAREAER:Math.random()<.05?"ALERT":"OK",EXCESAPA:0}}async function yae(t){const e=mae[t];if(!e)return BD(t);if(e.type==="mirror"){const n=await BD(e.src);return gae(n,e.noise??.06)}return vae(Date.now())}function bae(){const[t,e]=O.useState("sensors"),[n,i]=gI(Dc[0].id),r=Dc.find(E=>E.id===n)?.boardId||Dc[0].boardId,[s,a]=O.useState(null),[l,f]=O.useState(null),[c,h]=O.useState(null),p=O.useRef(0),g=SF();O.useEffect(()=>{Dc.some(E=>E.id===n)||i(Dc[0].id)},[n]),O.useEffect(()=>{let E=!0;const C=async()=>{const P=++p.current;try{const M=await yae(r);E&&P===p.current&&(a(M),f(null))}catch(M){E&&P===p.current&&(a(null),f(String(M?.message||M)))}};C();const I=setInterval(C,oae);return()=>{E=!1,clearInterval(I)}},[r]);const x=O.useMemo(()=>{if(!s)return[];const E=[];for(const C of lae){if(!(C in s))continue;const I=s[C];if(I==null||typeof I=="string"&&I.trim()==="")continue;const P=y_[C]||{label:C,unit:"",icon:"bi-question-circle"};let M=0;C==="TEMPAER"?M=hd(I,10,40):C==="UMDTAER"?M=hd(I,40,100):C==="ILUMINARE"?M=hd(I,200,1200):C==="CALITAER"?M=100-hd(I,0,2e3):C.startsWith("UMDTSOL")||C==="NIVELAPA"?M=hd(I,0,100):C==="EXCESAPA"?M=Number(I)?100:0:C==="STAREAER"&&(M=String(I).toUpperCase()==="ALERT"?30:80);const{status:k,helper:z}=fae(C,I);E.push({key:C,icon:P.icon,label:P.label,value:C==="EXCESAPA"?Number(I)?"Da":"Nu":cae(I,P.unit||""),percent:M,helper:z,status:k,unit:P.unit||""})}return E},[s]),b=O.useMemo(()=>g<=640?{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:14}:g<=900?{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:16}:g<=1280?{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:18}:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:16},[g]),T=`tabPanel tabPanel--${t}`;return A.jsxs("section",{className:"statsWrap",children:[A.jsxs("div",{className:"statsBox",children:[A.jsxs("div",{className:"statsBoxHeader",children:[A.jsx(mI,{options:Dc,value:n,onChange:i,fill:!0}),A.jsxs("button",{className:`tabPill sensorsTab ${t==="sensors"?"active":""}`,onClick:()=>e("sensors"),type:"button",children:[A.jsx("i",{className:"bi bi-activity me-1"})," Senzori"]}),A.jsxs("button",{className:`tabPill accuTab ${t==="accu"?"active":""}`,onClick:()=>e("accu"),type:"button",children:[A.jsx("i",{className:"bi bi-battery-half me-1"})," Acumulatori"]}),A.jsxs("button",{className:`tabPill autosTab ${t==="autos"?"active":""}`,onClick:()=>e("autos"),type:"button",children:[A.jsx("i",{className:"bi bi-sliders me-1"})," Automatizri"]})]}),A.jsxs("div",{className:`statsBoxBody ${T}`,children:[t==="sensors"&&(s?A.jsx("div",{style:b,children:x.map(({key:E,...C})=>A.jsx($se,{...C,onClick:()=>h({key:E,label:y_[E]?.label||E,icon:y_[E]?.icon||"bi-question-circle",value:C.value,helper:C.helper,status:C.status})},E))}):A.jsx("div",{style:{padding:16,textAlign:"center"},children:l||"Se ncarc"})),t==="accu"&&A.jsx(Vse,{boardId:r}),t==="autos"&&A.jsx(aae,{seraId:n,sereList:Dc.map(E=>({id:E.id,name:E.name}))})]})]}),c&&A.jsx(eB,{senzor:c,boardId:r,onClose:()=>h(null)})]})}const xae={rosii:{name:"Roii",color:"#e74c3c"},salata:{name:"Salat",color:"#2ecc71"},castr:{name:"Castravei",color:"#27ae60"},gol:{name:"Liber",color:"#bdc3c7",locked:!0}},Ga=40,Ld=()=>Math.random().toString(36).slice(2,9);function b_(t,e){const[n,i]=O.useState(()=>{try{const r=localStorage.getItem(t);return r?JSON.parse(r):e}catch{return e}});return O.useEffect(()=>{try{localStorage.setItem(t,JSON.stringify(n))}catch{}},[t,n]),[n,i]}function FD(){return{id:Ld(),name:"Sera nou",latime_m:6,lungime_m:20,orientare:"Nord  Sud",layoutDir:"horizontal",zoom:1,beds:[{id:Ld(),name:"Strat #1",crop:"salata",size_m:3,path_m:.2},{id:Ld(),name:"Strat #2",crop:"rosii",size_m:3,path_m:.2}],sensors:[]}}function _ae(t){if(!t||!t.beds?.length)return{available:0,used:0,remaining:0,overflow:!1,axis:"latime"};const e=Number(t.latime_m),n=t.beds.reduce((s,a)=>s+(Number(a.size_m)||0),0),i=t.beds.reduce((s,a,l)=>s+(l<t.beds.length-1&&Number(a.path_m)||0),0),r=n+i;return{available:e,used:r,remaining:e-r,overflow:e-r<-1e-6,axis:"latime"}}const LF=t=>Object.entries(t).sort((e,n)=>{const i=e[1].locked?1:0,r=n[1].locked?1:0;return i-r||e[1].name.localeCompare(n[1].name,"ro")});function Sae({greenhouses:t,selectedId:e,onSelect:n,onAdd:i,onDelete:r}){const[s,a]=vi.useState(!1),l=vi.useRef(null),f=t.find(h=>h.id===e);vi.useEffect(()=>{const h=g=>{l.current&&!l.current.contains(g.target)&&a(!1)},p=g=>g.key==="Escape"&&a(!1);return document.addEventListener("mousedown",h),document.addEventListener("keydown",p),()=>{document.removeEventListener("mousedown",h),document.removeEventListener("keydown",p)}},[]);const c=h=>{n(h),a(!1)};return A.jsxs("header",{className:"gh-header",children:[A.jsx("div",{className:"gh-brand",children:A.jsx("h1",{children:"Editor sere "})}),A.jsxs("div",{className:"gh-header-actions",ref:l,children:[A.jsx("button",{className:"btn btn-success hide-sm",onClick:i,"aria-label":"Adaug ser",children:"+ Adaug"}),A.jsx("button",{className:"btn btn-success dd-trigger",onClick:()=>a(h=>!h),"aria-haspopup":"listbox","aria-expanded":s,title:f?.name,type:"button",children:A.jsx("span",{className:"dd-current","aria-live":"polite",children:f?.name??"Alege ser"})}),s&&A.jsx("div",{className:"dd-menu",role:"listbox",tabIndex:-1,children:A.jsxs("div",{className:"dd-list",children:[t.length===0&&A.jsx("div",{className:"dd-empty",children:"Nu ai sere nc."}),t.map(h=>A.jsxs("div",{className:`dd-item ${h.id===e?"active":""}`,role:"option","aria-selected":h.id===e,children:[A.jsx("button",{className:"dd-label",onClick:()=>c(h.id),children:h.name}),A.jsx("button",{className:"dd-del",title:"terge",onClick:()=>r(h.id),"aria-label":`terge ${h.name}`,children:""})]},h.id)),A.jsx("div",{className:"dd-sep"}),A.jsx("button",{className:"dd-add",onClick:()=>{a(!1),i()},children:"+ Adaug ser nou"})]})})]})]})}function Eae(t,e=.35){if(!t||typeof t!="string")return"#cfcfcf";const n=t.replace("#",""),i=(c,h=2)=>parseInt(n.length===3?n[c]+n[c]:n.slice(c,c+h),16),r=c=>Math.max(0,Math.min(255,Math.round(c))).toString(16).padStart(2,"0"),s=i(0),a=i(2),l=i(4),f=c=>c+(255-c)*e;return`#${r(f(s))}${r(f(a))}${r(f(l))}`}function Tae({gh:t,usage:e,crops:n,onUpdate:i,addSensor:r,setSensor:s,deleteSensor:a}){const l=t.zoom||1,[f,c]=O.useState(typeof window<"u"?window.matchMedia("(max-width: 768px)").matches:!1);O.useEffect(()=>{const xe=window.matchMedia("(max-width: 768px)"),we=Be=>c(Be.matches);return xe.addEventListener?.("change",we),c(xe.matches),()=>xe.removeEventListener?.("change",we)},[]);const h=t.layoutDir||"auto",p=h==="vertical"||h!=="horizontal"&&f,[g,x]=O.useState({x:0,y:0}),[b,T]=O.useState(!1),[E,C]=O.useState(typeof window<"u"?window.innerWidth>=768:!1),I=O.useRef(null),P=O.useRef(null),M=O.useRef({}),{baseW:k,baseH:z,pad:F,innerW:G,innerH:K}=O.useMemo(()=>{const xe=Math.max(1,Number(t.lungime_m))*Ga,we=Math.max(1,Number(t.latime_m))*Ga,Be=12;return{baseW:xe,baseH:we,pad:Be,innerW:xe-Be*2,innerH:we-Be*2}},[t.lungime_m,t.latime_m]),V=Math.max(1,+t.lungime_m||1),Q=Math.max(1,+t.latime_m||1),J=(xe,we)=>({x:F+(Number(xe)||0)*Ga,y:F+(Number(we)||0)*Ga}),ve=(xe,we)=>({x_m:+(Math.max(0,Math.min(G,xe-F))/Ga).toFixed(2),y_m:+(Math.max(0,Math.min(K,we-F))/Ga).toFixed(2)}),se=()=>{const xe={x:k*(1-l)/2,y:z*(1-l)/2};x(we=>Math.abs(we.x-xe.x)>.5||Math.abs(we.y-xe.y)>.5?xe:we)},ye=()=>{const xe=I.current;if(!xe)return;const we=xe.clientWidth,Be=xe.clientHeight,Je=Math.min(we/k,Be/z),_t=Math.min(1,Je),Ft=Math.max(.5,Math.min(2,_t));i?.({zoom:Ft}),requestAnimationFrame(se)};O.useEffect(()=>{const xe=()=>{C(window.innerWidth>=768),ye()};return window.addEventListener("resize",xe),()=>window.removeEventListener("resize",xe)},[]),O.useEffect(()=>{ye()},[k,z]),O.useEffect(()=>{se()},[l]),O.useEffect(()=>{ye()},[p]);const X=xe=>Math.max(0,Number(xe)||0)*Ga,oe=O.useMemo(()=>{const xe=t.beds.reduce((_t,Ft,kt)=>(_t+=X(Ft.size_m),kt<t.beds.length-1&&(_t+=X(Ft.path_m)),_t),0),we=p&&xe>0?G/xe:1,Be=p?0:Math.max(0,(K-xe)/2);let Je=p?0:Be;return t.beds.map((_t,Ft)=>{const kt=X(_t.size_m),Un=Ft<t.beds.length-1?X(_t.path_m):0;if(p){const En=Math.max(0,Math.min(kt*we,G-Je+.001)),ar=F+(G-Je-En),Jn=F,Ds=K,Lr=ar+En/2,Is=Jn+28;return Je+=kt*we+Un*we,{x:ar,y:Jn,w:En,h:Ds,labelX:Lr,labelY:Is,b:_t}}const Gi=Math.max(0,Math.min(kt,K-Je+.001)),xi=F,_i=F+Je,rt=G,Kt=xi+rt/2,qn=_i+Math.min(28,Gi/2+10);return Je+=kt+Un,{x:xi,y:_i,w:rt,h:Gi,labelX:Kt,labelY:qn,b:_t}})},[t.beds,G,K,p,F]),ie=xe=>{const we=P.current,Be=we.createSVGPoint();Be.x=xe.clientX,Be.y=xe.clientY;const Je=we.getScreenCTM(),_t=Be.matrixTransform(Je.inverse());return{x:(_t.x-g.x)/l,y:(_t.y-g.y)/l}},Ie=xe=>{E&&(T(!0),xe.currentTarget.setPointerCapture(xe.pointerId),xe.currentTarget.dataset.panStartX=xe.clientX,xe.currentTarget.dataset.panStartY=xe.clientY,xe.currentTarget.dataset.panOrigX=g.x,xe.currentTarget.dataset.panOrigY=g.y)},Z=xe=>{if(!b)return;const we=+xe.currentTarget.dataset.panStartX,Be=+xe.currentTarget.dataset.panStartY,Je=+xe.currentTarget.dataset.panOrigX,_t=+xe.currentTarget.dataset.panOrigY,Ft=P.current?.getBoundingClientRect(),kt=(Ft?.width||1)/k,Un=(Ft?.height||1)/z;x({x:Je+(xe.clientX-we)/kt,y:_t+(xe.clientY-Be)/Un})},Y=()=>T(!1),ne=xe=>{const{x:we,y:Be}=ie(xe),{x_m:Je,y_m:_t}=ve(we,Be);r?.({x_m:Je,y_m:_t})},me=()=>window.confirm("tergi acest senzor?"),Te=xe=>{me()&&a?.(xe)},Le=xe=>we=>{E&&(we.currentTarget.setPointerCapture(we.pointerId),we.currentTarget.dataset.dragStartX=we.clientX,we.currentTarget.dataset.dragStartY=we.clientY,we.currentTarget.dataset.startX=we.currentTarget.dataset.cx,we.currentTarget.dataset.startY=we.currentTarget.dataset.cy,M.current[xe]=setTimeout(()=>{try{we.currentTarget.releasePointerCapture(we.pointerId)}catch{}Te(xe)},650))},Ae=xe=>we=>{if(clearTimeout(M.current[xe]),!we.currentTarget.hasPointerCapture?.(we.pointerId))return;const Be=+we.currentTarget.dataset.dragStartX,Je=+we.currentTarget.dataset.dragStartY,_t=+we.currentTarget.dataset.startX,Ft=+we.currentTarget.dataset.startY,kt=P.current?.getBoundingClientRect(),Un=(kt?.width||1)/k,Gi=(kt?.height||1)/z,xi=(we.clientX-Be)/(Un*l),_i=(we.clientY-Je)/(Gi*l),rt=_t+xi,Kt=Ft+_i,{x_m:qn,y_m:En}=ve(rt,Kt);s?.(xe,{x_m:qn,y_m:En})},Ve=xe=>()=>clearTimeout(M.current[xe]),Ue=xe=>()=>Te(xe),fe=xe=>we=>{we.preventDefault(),Te(xe)},je=Math.max(0,Number(t.lungime_m)||0),Ge=Math.max(0,Number(t.latime_m)||0),Pe=O.useMemo(()=>{if(je<=0)return[];const xe=Math.floor(je),we=Math.abs(je-xe)>1e-6,Be=Array.from({length:xe+1},(Je,_t)=>({v:_t,x:F+_t/je*G,frac:!1}));return we&&Be.push({v:je,x:F+G,frac:!0}),Be},[je,G,F]),ot=O.useMemo(()=>{if(Ge<=0)return[];const xe=Math.floor(Ge),we=Math.abs(Ge-xe)>1e-6,Be=Array.from({length:xe+1},(Je,_t)=>({v:_t,y:F+_t/Ge*K,frac:!1}));return we&&Be.push({v:Ge,y:F+K,frac:!0}),Be},[Ge,K,F]),ct=xe=>Number.isInteger(xe)?xe:+xe.toFixed(1);return A.jsx("div",{ref:I,className:`gh-canvas-wrap ${e?.overflow?"is-overflow":""}`,"aria-label":"Hart ser",style:{width:"100%",aspectRatio:`${V} / ${Q}`,minHeight:"140px",height:"auto"},children:A.jsxs("svg",{ref:P,className:["gh-canvas",b?"is-grabbing":""].join(" "),viewBox:`0 0 ${k} ${z}`,preserveAspectRatio:"xMidYMid meet",onPointerDown:Ie,onPointerMove:Z,onPointerUp:Y,onDoubleClick:ne,children:[A.jsx("defs",{children:A.jsx("pattern",{id:"gh-grid",width:Ga,height:Ga,patternUnits:"userSpaceOnUse",children:A.jsx("path",{d:`M ${Ga} 0 L 0 0 0 ${Ga}`,fill:"none",stroke:"#e5e7eb",strokeWidth:"1",opacity:"0.25",vectorEffect:"non-scaling-stroke"})})}),A.jsx("rect",{x:"0",y:"0",width:k,height:z,fill:"url(#gh-grid)"}),A.jsx("rect",{x:F,y:F,width:G,height:K,rx:12,className:"frame"}),Pe.map((xe,we)=>A.jsxs("g",{children:[A.jsx("line",{x1:xe.x,y1:F,x2:xe.x,y2:F+5,className:"ruler-line"}),A.jsx("text",{x:xe.x,y:F-5,className:"ruler-text",textAnchor:xe.frac?"end":"middle",children:ct(xe.v)})]},`xt-${we}`)),ot.map((xe,we)=>A.jsxs("g",{children:[A.jsx("line",{x1:F,y1:xe.y,x2:F+5,y2:xe.y,className:"ruler-line"}),A.jsx("text",{x:F-6,y:xe.y+3,className:"ruler-text",textAnchor:"end",children:ct(xe.v)})]},`yt-${we}`)),oe.map(({x:xe,y:we,w:Be,h:Je,labelX:_t,labelY:Ft,b:kt})=>Be>0&&Je>0?A.jsxs("g",{children:[A.jsx("rect",{x:xe,y:we,width:Be,height:Je,fill:Eae(n[kt.crop]?.color,.35),className:"bed",rx:0}),A.jsx("text",{x:_t,y:Ft,textAnchor:"middle",className:"bed-crop",children:n[kt.crop]?.name||kt.crop}),A.jsx("text",{x:_t,y:Ft+18,textAnchor:"middle",className:"bed-name",children:kt.name})]},kt.id):null),A.jsx("g",{className:"sensors-layer",children:(t.sensors||[]).map(xe=>{const{x:we,y:Be}=J(xe.x_m,xe.y_m);return A.jsxs("g",{transform:`translate(${we},${Be})`,children:[A.jsx("circle",{r:"8",className:"sensor-dot","data-cx":we,"data-cy":Be,onPointerDown:Le(xe.id),onPointerMove:Ae(xe.id),onPointerUp:Ve(xe.id),onDoubleClick:Ue(xe.id),onContextMenu:fe(xe.id)}),A.jsx("text",{y:"-12",textAnchor:"middle",className:"sensor-label",children:xe.name})]},xe.id)})})]})})}function Aae({gh:t,usage:e,crops:n,onChange:i,addBed:r,removeBed:s,setBed:a}){const l=LF(n),f=(b,T)=>{const E=b?.[T];if(!E)return{name:T,days:null};const C=Number(E.days_to_harvest??E.harvestDays??E.days??E.harvest_days??0);return{name:E.name||T,days:Number.isFinite(C)&&C>0?C:null}},c=b=>{if(!b)return null;if(/^\d{4}-\d{2}-\d{2}$/.test(b)){const[E,C,I]=b.split("-").map(Number);return new Date(E,C-1,I)}if(/^\d{2}\/\d{2}\/\d{4}$/.test(b)){const[E,C,I]=b.split("/").map(Number),P=E>12?E:C,M=E>12?C:E;return new Date(I,M-1,P)}if(/^\d{2}\.\d{2}\.\d{4}$/.test(b)){const[E,C,I]=b.split(".").map(Number);return new Date(I,C-1,E)}const T=new Date(b);return Number.isNaN(T.getTime())?null:T},h=b=>b?[b.getFullYear(),String(b.getMonth()+1).padStart(2,"0"),String(b.getDate()).padStart(2,"0")].join("-"):"",p=b=>b?b.toLocaleDateString("ro-RO"):"",g=(b,T)=>{if(!b||!T)return{iso:"",pretty:""};const E=c(b);if(!E)return{iso:"",pretty:""};const C=new Date(E.getFullYear(),E.getMonth(),E.getDate()+Number(T));return{iso:h(C),pretty:p(C)}},x=(b,T)=>{const E=Number(T?.lungime_m||0);return Number((Number(b.size_m||0)*E).toFixed(2))};return A.jsx("aside",{className:"gh-props gh-props-bar",children:A.jsxs("div",{className:"props-grid",children:[A.jsxs("div",{className:"col col-left usage",children:[A.jsx("label",{children:"Nume ser"}),A.jsx("input",{value:t.name,onChange:b=>i({name:b.target.value})}),A.jsxs("div",{className:"row-two",children:[A.jsxs("div",{children:[A.jsx("label",{children:"Lime (m)"}),A.jsx("input",{type:"number",step:"0.1",value:t.latime_m,onChange:b=>i({latime_m:Number(b.target.value||0)})})]}),A.jsxs("div",{children:[A.jsx("label",{children:"Lungime (m)"}),A.jsx("input",{type:"number",step:"0.1",value:t.lungime_m,onChange:b=>i({lungime_m:Number(b.target.value||0)})})]})]})]}),A.jsxs("div",{className:"col col-middle",children:[A.jsxs("div",{className:"split",children:[A.jsx("h4",{children:"Straturi"}),A.jsx("button",{onClick:r,children:"+ Adaug strat"})]}),A.jsx("div",{className:"beds",children:t.beds.map((b,T)=>{const E=f(n,b.crop),C=Number(b.harvest_days??E.days)||null,I=g(b.plant_date,C),P=x(b,t);return A.jsxs("details",{className:"bed-acc",children:[A.jsxs("summary",{className:"bed-acc__head",children:[A.jsxs("span",{className:"bed-acc__title",children:["Strat #",T+1]}),A.jsx("i",{className:"bed-acc__caret","aria-hidden":!0})]}),A.jsxs("div",{className:"bed-row bed-card",children:[A.jsxs("div",{className:"bed-labels bed-labels-nc two",children:[A.jsx("label",{children:"Nume strat"}),A.jsx("label",{children:"Tip cultur"})]}),A.jsx("input",{className:"bed-name",value:b.name,onChange:M=>a(b.id,{name:M.target.value}),placeholder:"Nume strat"}),A.jsx("select",{className:"bed-crop",value:b.crop,onChange:M=>a(b.id,{crop:M.target.value}),title:E.name||"Cultur",children:l.map(([M,k])=>A.jsx("option",{value:M,children:k.name},M))}),A.jsxs("div",{className:"bed-size",children:[A.jsx("input",{type:"number",min:"0.1",step:"0.1",value:b.size_m,onChange:M=>a(b.id,{size_m:Math.max(.1,Number(M.target.value||0))})}),A.jsx("span",{children:"m"})]}),A.jsxs("div",{className:"bed-path",children:[A.jsx("input",{type:"number",min:"0",step:"0.1",value:b.path_m,onChange:M=>a(b.id,{path_m:Math.max(0,Number(M.target.value||0))})}),A.jsx("span",{children:"m"})]}),A.jsxs("div",{className:"bed-labels bed-labels-ph two",children:[A.jsx("label",{children:"Data plantare"}),A.jsx("label",{children:"Data recoltare"})]}),A.jsx("div",{className:"bed-plant",children:A.jsx("input",{type:"date",value:h(c(b.plant_date)),onChange:M=>a(b.id,{plant_date:M.target.value||null}),title:"Data plantare"})}),A.jsx("div",{className:"bed-harvest",children:A.jsx("input",{type:"text",value:I.pretty||"",readOnly:!0,title:C?`~${C} zile`:"Seteaz zilele pn la recolt"})}),A.jsx("div",{className:"bed-labels bed-label-days one",children:A.jsx("label",{children:"Zile estimative pn la recoltare"})}),A.jsx("div",{className:"bed-days",children:A.jsx("input",{type:"number",min:"1",step:"1",value:b.harvest_days??"",onChange:M=>{const k=M.target.value;a(b.id,{harvest_days:k===""?null:Math.max(1,Number(k))})},placeholder:E.days?String(E.days):"zile",title:"Zile pn la recolt"})}),A.jsx("div",{className:"bed-area",children:A.jsxs("span",{children:[P.toFixed(2)," m"]})}),A.jsx("button",{className:"del",onClick:()=>s(b.id),children:""})]})]},b.id)})})]}),A.jsx("div",{className:"col col-right",children:A.jsxs("div",{className:`usage ${e?.overflow?"bad":""}`,children:[A.jsxs("div",{className:"row",children:[A.jsxs("span",{children:["Disponibil pe lime: ",A.jsxs("b",{children:[e.available," m"]})]}),A.jsxs("span",{children:["Folosit: ",A.jsxs("b",{children:[e.used.toFixed(2)," m"]})]}),e.overflow?A.jsxs("span",{className:"warn",children:["Depeti cu ",Math.abs(e.remaining).toFixed(2)," m"]}):A.jsxs("span",{children:["Rmas: ",A.jsxs("b",{children:[e.remaining.toFixed(2)," m"]})]})]}),A.jsx("div",{className:"bar",children:A.jsx("div",{style:{width:`${Math.min(100,e.used/Math.max(e.available,1e-4)*100)}%`}})})]})})]})})}function wae({crops:t,addCrop:e,setCropField:n,deleteCrop:i}){const r=LF(t);return A.jsxs("div",{className:"gh-legend gh-legend--edit",children:[r.map(([s,a])=>A.jsxs("div",{className:`legend-edit-item ${a.locked?"locked":""}`,children:[A.jsx("input",{type:"color",className:"color-input",value:a.color,onChange:l=>n(s,{color:l.target.value}),title:"Culoare",disabled:a.locked}),A.jsx("input",{className:"name-input",value:a.name,onChange:l=>n(s,{name:l.target.value}),placeholder:"Nume cultur",disabled:a.locked}),!a.locked&&A.jsx("button",{className:"del",onClick:()=>i(s),title:"terge",children:""})]},s)),A.jsx("button",{className:"legend-add",onClick:e,children:"+ Adaug cultur"})]})}function Lae(){const[t,e]=b_("gh-crops",xae),[n,i]=b_("gh-list",[FD()]),[r,s]=b_("gh-selected",n[0]?.id);O.useEffect(()=>{!n.find(I=>I.id===r)&&n.length&&s(n[0].id)},[n,r,s]);const a=O.useMemo(()=>n.find(I=>I.id===r),[n,r]),l=O.useMemo(()=>_ae(a),[a]),f=I=>i(P=>P.map(M=>M.id===a.id?{...a,...I}:M)),c=()=>f({beds:a.beds.concat({id:Ld(),name:`Strat #${a.beds.length+1}`,crop:"gol",size_m:1,path_m:.4})}),h=I=>f({beds:a.beds.filter(P=>P.id!==I)}),p=(I,P)=>f({beds:a.beds.map(M=>M.id===I?{...M,...P}:M)}),g=I=>{if(t[I]?.locked)return;const P={...t};delete P[I],e(P),i(M=>M.map(k=>({...k,beds:k.beds.map(z=>z.crop===I?{...z,crop:"gol"}:z)})))},x=()=>{const I="crop_"+Ld();e(P=>({...P,[I]:{name:"Nou cultur",color:"#6ee7b7"}}))},b=(I,P)=>e(M=>({...M,[I]:{...M[I],...P}})),T=I=>{const P={id:Ld(),name:`Senzor #${(a.sensors?.length||0)+1}`,x_m:I?.x_m??Number((a.lungime_m/2).toFixed(2)),y_m:I?.y_m??Number((a.latime_m/2).toFixed(2))};return f({sensors:[...a.sensors||[],P]}),P.id},E=(I,P)=>f({sensors:(a.sensors||[]).map(M=>M.id===I?{...M,...P}:M)}),C=I=>f({sensors:(a.sensors||[]).filter(P=>P.id!==I)});return a?A.jsx("div",{className:"gh-page",children:A.jsxs("div",{className:"gh-two",children:[A.jsx("div",{className:"gh-col gh-left",children:A.jsxs("section",{className:"card gh-left-card",children:[A.jsx(Sae,{greenhouses:n,selectedId:r,onSelect:s,onAdd:()=>{const I=FD();i(P=>[I,...P]),s(I.id)},onDelete:I=>i(P=>P.filter(M=>M.id!==I))}),A.jsx(Aae,{gh:a,usage:l,crops:t,onChange:f,addBed:c,removeBed:h,setBed:p,addSensor:T,setSensor:E,deleteSensor:C})]})}),A.jsx("div",{className:"gh-col gh-right",children:A.jsxs("section",{className:"card gh-canvas-card",children:[A.jsx(Tae,{gh:a,usage:l,crops:t,onUpdate:f,addSensor:T,setSensor:E,deleteSensor:C}),A.jsx(wae,{crops:t,addCrop:x,setCropField:b,deleteCrop:g})]})})]})}):null}function Cae(){return A.jsx("section",{className:"section gh-page",children:A.jsx(Lae,{})})}const Oae=[void 0,"/agromi-proxy.php","/api/agromi-proxy.php",`${location.origin}/agromi-proxy.php`,`${location.origin}/api/agromi-proxy.php`].filter(Boolean),Rae="/assets/img/agromi-logo-mare.png",Pae=["tomate","castraveti","salata"],UD=["ingrasaminte","pesticide","recipiente","irigatii"],Dae={ingrasaminte:"ngrminte",pesticide:"Pesticide",recipiente:"Tvi & Ghivece",irigatii:"Irigare"},Iae={tomate:["rosii","seminte-rosii","tomate","rosii-hibrid"],castraveti:["castraveti","seminte-castraveti"],salata:["salata","seminte-salata","laptuca"],ingrasaminte:["ingrasaminte","fertilizatori","fertilizanti"],pesticide:["pesticide","fungicide","insecticide"],recipiente:["recipiente","tavi-rasad","ghivece"],irigatii:["irigatii","irigare"]},$D={utilTotal:18,seedsPerCrop:4};async function Mae(t,e){let n;for(const i of Oae)try{const r=new URL(i,location.origin);r.search=r.search?`${r.search.slice(1)}&${t}`:t;const s=await fetch(r.toString(),{signal:e}),a=await s.text();if(!s.ok)throw new Error(`HTTP ${s.status}${a?": "+a.slice(0,120):""}`);try{return JSON.parse(a)}catch{throw new Error(`Nu e JSON: ${a.slice(0,120)}`)}}catch(r){n=r}throw n||new Error("Proxy indisponibil")}async function zD(t,e=8,n){const i=new URLSearchParams({route:"scrape",cat:t,per_page:String(e)}),r=await Mae(i.toString(),n);return Array.isArray(r)?r:r.items||[]}async function GS(t,e=8,n){const i=Iae[t]||[t];for(const r of i)try{const s=await zD(r,e,n);if(s?.length)return s}catch(s){/^Error: HTTP 4\d\d/.test(String(s))||console.debug("[agromi] fetchCatSmart err pentru",r,s?.message)}try{return await zD(t,e,n)}catch{return[]}}async function kae(t,e,n){const i=[],r=Math.max(2,Math.ceil(e/t.length));for(const s of t){if(i.length>=e)break;const a=await GS(s,r,n);for(const l of a){if(i.length>=e)break;i.push(l)}}return i}function sm(t){return t==null||Number.isNaN(t)?"":new Intl.NumberFormat("ro-RO",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)+" lei"}function Nae(t){if(!t)return{type:"none"};const e=String(t).replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim(),n=[...e.matchAll(/(\d{1,3}(?:[.,]\d{3})*(?:[.,]\d{2}))\s*lei/gi)].map(s=>s[1]).map(s=>Number(s.replace(/\./g,"").replace(",","."))).filter(s=>!Number.isNaN(s)),i=/interval|pn la|||-/.test(e.toLowerCase()),r=/iniial|curent|reducere|promo/i.test(e);if(n.length>=2&&i){const s=Math.min(...n),a=Math.max(...n);return{type:"range",min:s,max:a}}if(n.length>=2&&r){const s=n[0],a=n[n.length-1];if(a<s)return{type:"sale",regular:s,sale:a}}if(n.length>=2){const s=Math.min(...n),a=Math.max(...n);return s!==a?{type:"range",min:s,max:a}:{type:"single",price:s}}return n.length===1?{type:"single",price:n[0]}:{type:"none"}}function GD(t=""){try{const e=new URL(t,window.location.href);return e.pathname=e.pathname.replace(/-\d+x\d+(?=\.(jpg|jpeg|png|webp)$)/i,"").replace(/-scaled(?=\.(jpg|jpeg|png|webp)$)/i,""),e.toString()}catch{return t.replace(/-\d+x\d+(?=\.(jpg|jpeg|png|webp)(\?|$))/i,"").replace(/-scaled(?=\.(jpg|jpeg|png|webp)(\?|$))/i,"")}}function HD(t=""){return/-\d+x\d+(?=\.(jpg|jpeg|png|webp)(\?|$))|-scaled(?=\.(jpg|jpeg|png|webp)(\?|$))/i.test(t)}function jae({raw:t}){const e=Nae(t);return e.type==="sale"?A.jsxs("div",{className:"ag-price",children:[A.jsx("span",{className:"ag-price-new",children:sm(e.sale)}),A.jsx("span",{className:"ag-price-old",children:sm(e.regular)})]}):e.type==="range"?A.jsx("div",{className:"ag-price",children:A.jsxs("span",{className:"ag-price-range",children:[sm(e.min)," ",A.jsx("span",{className:"ag-dash",children:""})," ",sm(e.max)]})}):e.type==="single"?A.jsx("div",{className:"ag-price",children:A.jsx("span",{className:"ag-price-single",children:sm(e.price)})}):A.jsx("div",{className:"ag-price ag-price-missing",children:"Pre la cerere"})}function KD({p:t}){const e="/assets/img/placeholder.png",n=O.useMemo(()=>HD(t?.image)?GD(t.image):t?.image||e,[t?.image]),[i,r]=O.useState(n),s=O.useRef(HD(t?.image)),a=O.useRef(!1),l=()=>{if(!s.current&&t?.image){s.current=!0,r(GD(t.image));return}a.current||(a.current=!0,r(e))},f=t?.name||"Produs";return A.jsxs("article",{className:"ag-card","aria-label":`Produs: ${f}`,children:[A.jsx("div",{className:"ag-imgwrap",children:A.jsx("img",{src:i,alt:f,loading:"lazy",onError:l,referrerPolicy:"no-referrer"})}),A.jsxs("div",{className:"ag-body",children:[A.jsx("h3",{className:"ag-title",title:f,children:f}),A.jsx(jae,{raw:t?.price}),A.jsx("a",{className:"ag-btn",href:t?.permalink||"#",target:"_blank",rel:"noopener noreferrer nofollow",children:"Comand"})]})]})}function Bae({utilLimit:t=$D.utilTotal,seedsPerCrop:e=$D.seedsPerCrop,crops:n=Pae}){const[i,r]=O.useState("toate"),[s,a]=O.useState({data:[],loading:!0,error:null});O.useEffect(()=>{const I=new AbortController;return a({data:[],loading:!0,error:null}),(async()=>{if(i==="toate"){const P=await kae(UD,t,I.signal);a({data:P,loading:!1,error:null})}else{const P=await GS(i,t,I.signal);a({data:P,loading:!1,error:null})}})().catch(P=>a({data:[],loading:!1,error:P.message})),()=>I.abort()},[i,t]);const[l,f]=O.useState({}),[c,h]=O.useState(!0),[p,g]=O.useState(null),[x,b]=O.useState("toate");O.useEffect(()=>{const I=new AbortController;return h(!0),g(null),(async()=>{const P={},M=[];for(const k of n){const z=await GS(k,e,I.signal);P[k]=z,M.push(...z)}P.toate=M,f(P),h(!1)})().catch(P=>{f({}),g(P.message),h(!1)}),()=>I.abort()},[n,e]);const T="Recomandri utilitare",E="Recomandri pentru culturile tale",C=l[x]||[];return A.jsxs("div",{className:"ag-wrap",children:[A.jsxs("header",{className:"ag-hero",children:[A.jsxs("div",{className:"ag-hero-left",children:[A.jsx("img",{className:"ag-logo",src:Rae,alt:"Agromi"}),A.jsxs("div",{className:"ag-hero-copy",children:[A.jsx("strong",{children:"Partener Agromi"}),A.jsx("span",{className:"ag-hero-sub",children:"recomandri i produse utile pentru ferm"})]})]}),A.jsx("a",{className:"ag-hero-cta",href:"https://agromi.ro/magazin/",target:"_blank",rel:"noopener noreferrer",children:"Deschide magazinul"})]}),A.jsx("div",{className:"ag-section",children:A.jsxs("div",{className:"ag-panel",children:[A.jsxs("div",{className:"ag-section-head ag-row",children:[A.jsxs("div",{className:"ag-left",children:[A.jsx("h2",{className:"ag-h2 ag-h2--accent",children:T}),A.jsxs("div",{className:"ag-pills",children:[A.jsx("button",{className:`ag-pill ${i==="toate"?"is-active":""}`,onClick:()=>r("toate"),children:"toate"}),UD.map(I=>A.jsx("button",{className:`ag-pill ${i===I?"is-active":""}`,onClick:()=>r(I),children:Dae[I]||I},I))]})]}),A.jsx("div",{className:"ag-right",children:A.jsx("a",{className:"ag-morebtn ag-morebtn--ghost",href:"https://agromi.ro/magazin/",target:"_blank",rel:"noopener noreferrer",children:"Vezi toate produsele "})})]}),s.loading?A.jsx("div",{className:"ag-skel",children:"Se ncarc recomandrile"}):s.error?A.jsxs("div",{className:"ag-err",children:["Nu s-au putut ncrca produsele utilitare: ",s.error]}):A.jsx("div",{className:"ag-grid ag-nine",children:s.data.map((I,P)=>A.jsx(KD,{p:I},`${I.permalink||I.name}-${P}`))})]})}),A.jsx("div",{className:"ag-section",children:A.jsxs("div",{className:"ag-panel",children:[A.jsxs("div",{className:"ag-section-head ag-row",children:[A.jsxs("div",{className:"ag-left",children:[A.jsx("h2",{className:"ag-h2 ag-h2--accent",children:E}),A.jsxs("div",{className:"ag-pills",children:[A.jsx("button",{className:`ag-pill ${x==="toate"?"is-active":""}`,onClick:()=>b("toate"),children:"toate"}),n.map(I=>A.jsx("button",{className:`ag-pill ${x===I?"is-active":""}`,onClick:()=>b(I),children:I},I))]})]}),A.jsx("div",{className:"ag-right",children:A.jsx("a",{className:"ag-morebtn",href:"https://agromi.ro/categorie-produs/seminte-de-legume/",target:"_blank",rel:"noopener noreferrer",children:"Vezi toate seminele "})})]}),c?A.jsx("div",{className:"ag-skel",children:"Se ncarc seminele recomandate"}):p?A.jsxs("div",{className:"ag-err",children:["Nu s-au putut ncrca seminele: ",p]}):A.jsx("div",{className:"ag-grid ag-six",children:C.map((I,P)=>A.jsx(KD,{p:I},`${I.permalink||I.name}-${P}`))})]})})]})}function Fae({role:t,activeSection:e,setActiveSection:n,err:i,saveOk:r,AlertComp:s}){const a=[{key:"notifications",label:"Notificri",icon:"bi-bell-fill"},{key:"personal",label:"Date Personale",icon:"bi-person-fill"},{key:"contract",label:"Contract",icon:"bi-file-earmark-text-fill"},{key:"farm",label:"Date Ferm",icon:"bi-house-fill"},{key:"system",label:"Sistem",icon:"bi-sliders"}];return A.jsxs(A.Fragment,{children:[i,r,A.jsx("div",{className:"section-tabs mb-4",children:a.map(l=>A.jsxs("button",{className:`tab-btn ${e===l.key?"active":""}`,onClick:()=>n(l.key),children:[A.jsx("i",{className:`bi ${l.icon} me-2`})," ",l.label]},l.key))})]})}function Uae({me:t,onMeChange:e,openPasswordModal:n}){return A.jsx(Es,{className:"settings-card",children:A.jsxs(Es.Body,{children:[A.jsxs("h3",{className:"section-title mb-4",children:[A.jsx("i",{className:"bi bi-person-circle me-2"})," Informaii Personale"]}),A.jsxs(aa,{children:[A.jsx(jn,{md:6,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Nume Complet"}),A.jsx(Ke.Control,{name:"nume",value:t.nume,onChange:e,className:"custom-input"})]})}),A.jsx(jn,{md:6,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Numr Telefon"}),A.jsx(Ke.Control,{name:"telefon",value:t.telefon,onChange:e,className:"custom-input"})]})})]}),A.jsxs(aa,{children:[A.jsx(jn,{md:6,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Email"}),A.jsx(Ke.Control,{type:"email",name:"email",value:t.email,onChange:e,className:"custom-input"})]})}),A.jsx(jn,{md:6,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Parol"}),A.jsxs("div",{className:"d-flex gap-2",children:[A.jsx(Ke.Control,{type:"password",value:"",disabled:!0,className:"custom-input"}),A.jsx(sa,{variant:"outline-primary",onClick:n,children:"Schimb"})]})]})})]}),A.jsx(aa,{children:A.jsx(jn,{md:12,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Adres"}),A.jsx(Ke.Control,{name:"adresa",value:t.adresa,onChange:e,className:"custom-input"})]})})})]})})}function $ae({formData:t,onChange:e,isAdmin:n,daysLeft:i,openExtendModal:r}){return A.jsx(Es,{className:"settings-card",children:A.jsxs(Es.Body,{children:[A.jsxs("h3",{className:"section-title mb-4",children:[A.jsx("i",{className:"bi bi-clipboard-check me-2"})," Detalii Contract"]}),A.jsxs(aa,{children:[A.jsx(jn,{md:6,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Numr Contract"}),A.jsx(Ke.Control,{name:"numarContract",value:t.numarContract,onChange:e,className:"custom-input",disabled:!n})]})}),A.jsx(jn,{md:6,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Tip Abonament"}),A.jsxs(Ke.Select,{name:"tipAbonament",value:t.tipAbonament,onChange:e,className:"custom-input",disabled:!n,children:[A.jsx("option",{value:"Basic",children:"Basic"}),A.jsx("option",{value:"Standard",children:"Standard"}),A.jsx("option",{value:"Premium",children:"Premium"}),A.jsx("option",{value:"Enterprise",children:"Enterprise"})]})]})})]}),A.jsxs(aa,{children:[A.jsx(jn,{md:6,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Data Semnare Contract"}),A.jsx(Ke.Control,{type:"date",name:"dataContract",value:t.dataContract||"",onChange:e,className:"custom-input",disabled:!n,readOnly:!n,tabIndex:n?void 0:-1})]})}),A.jsx(jn,{md:6,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Data Expirare"}),A.jsx(Ke.Control,{type:"date",name:"dataExpirare",value:t.dataExpirare||"",onChange:e,className:"custom-input",disabled:!n,readOnly:!n,tabIndex:n?void 0:-1})]})})]}),A.jsx("div",{className:"d-flex justify-content-between align-items-center flex-wrap gap-2",children:A.jsxs("div",{className:"contract-status-box flex-grow-1",children:[A.jsxs("div",{className:"status-item",children:[A.jsx("span",{className:"status-label",children:"Status Contract:"}),A.jsx("span",{className:"badge bg-success",children:"Activ"})]}),A.jsxs("div",{className:"status-item",children:[A.jsx("span",{className:"status-label",children:"Zile rmase:"}),A.jsxs("span",{className:"badge bg-info",children:[Number.isFinite(i)?i:""," zile"]})]}),A.jsxs("div",{className:"status-item",children:[A.jsx("span",{className:"status-label",children:"Facturare:"}),A.jsx("span",{className:"badge bg-secondary",children:"Lunar"})]}),A.jsx("div",{className:"d-flex justify-content-center",children:A.jsxs(sa,{variant:"primary",onClick:r,className:"btn-extend-contract",children:[A.jsx("i",{className:"bi bi-arrow-repeat me-2"}),"Prelungete contractul"]})})]})})]})})}function zae({formData:t,onChange:e}){return A.jsx(Es,{className:"settings-card",children:A.jsxs(Es.Body,{children:[A.jsxs("h3",{className:"section-title mb-4",children:[A.jsx("i",{className:"bi bi-building me-2"})," Informaii Ferm"]}),A.jsxs(aa,{children:[A.jsx(jn,{md:6,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Nume Ferm/Companie"}),A.jsx(Ke.Control,{name:"numeFerma",value:t.numeFerma,onChange:e,className:"custom-input"})]})}),A.jsx(jn,{md:6,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"CUI/CIF"}),A.jsx(Ke.Control,{name:"cui",value:t.cui,onChange:e,className:"custom-input"})]})})]}),A.jsxs(aa,{children:[A.jsx(jn,{md:6,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Suprafa Total (m)"}),A.jsx(Ke.Control,{type:"number",name:"suprafataTotala",value:t.suprafataTotala,onChange:e,className:"custom-input"})]})}),A.jsx(jn,{md:6,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Numr Sere"}),A.jsx(Ke.Control,{type:"number",name:"numarSere",value:t.numarSere,onChange:e,className:"custom-input"})]})})]})]})})}const Gae=[{id:1,sera:"Sera Spanac",message:"Temperatura va crete la 30 n urmtoarele zile.",type:"warning",status:"activ"},{id:2,sera:"Sera Roii",message:"n 5 zile se anun precipitaii de 2 L/mp.",type:"info",status:"activ"},{id:3,sera:"Sera Castravei",message:"Umiditatea solului a depit 80%.",type:"urgent",status:"activ"},{id:4,sera:"Sera Spanac",message:"Recoltarea spanacului se face n 8 zile.",type:"success",status:"activ"},{id:5,sera:"Sera Ardei",message:"Verific nivelul de nutrieni din rezervor.",type:"info",status:"activ"},{id:6,sera:"Sera Castravei",message:"Vnt puternic anunat pentru joi.",type:"warning",status:"activ"},{id:7,sera:"Sera Ardei",message:"Nivelul apei a sczut sub 30%.",type:"urgent",status:"activ"},{id:8,sera:"Sera Roii",message:"Program de udare actualizat.",type:"success",status:"activ"}];function Hae({formData:t,onChange:e}){const[n,i]=O.useState(!1),[r,s]=O.useState([]);O.useEffect(()=>{Cl.seedIfEmpty(Gae)},[]),O.useEffect(()=>Cl.subscribe(s),[]);const a=O.useMemo(()=>r.filter(h=>h.status==="activ").length,[r]),l=h=>Cl.update(h,{status:"realizat"}),f=h=>Cl.update(h,{status:"amanat"}),c=h=>Cl.remove(h);return A.jsxs(A.Fragment,{children:[A.jsxs(Es,{className:"settings-card mb-3",children:[A.jsxs(Es.Header,{as:"button",type:"button",className:"prefs-acc-toggle w-100 d-flex align-items-center justify-content-between",onClick:()=>i(h=>!h),"aria-expanded":n,children:[A.jsxs("span",{children:[A.jsx("i",{className:"bi bi-sliders me-2"})," Preferine Notificri"]}),A.jsx("i",{className:`bi ${n?"bi-chevron-up":"bi-chevron-down"}`})]}),A.jsx(wI,{in:n,children:A.jsx("div",{children:A.jsxs(Es.Body,{children:[A.jsx("h6",{className:"mb-3",children:"Canale de Notificare"}),A.jsxs(aa,{className:"mb-4",children:[A.jsx(jn,{md:4,children:A.jsx(Ke.Check,{type:"switch",id:"email-switch",label:"Email",name:"notificariEmail",checked:!!t.notificariEmail,onChange:e,className:"custom-switch"})}),A.jsx(jn,{md:4,children:A.jsx(Ke.Check,{type:"switch",id:"sms-switch",label:"SMS",name:"notificariSMS",checked:!!t.notificariSMS,onChange:e,className:"custom-switch"})}),A.jsx(jn,{md:4,children:A.jsx(Ke.Check,{type:"switch",id:"push-switch",label:"Push Notifications",name:"notificariPush",checked:!!t.notificariPush,onChange:e,className:"custom-switch"})})]}),A.jsx("h6",{className:"mb-3",children:"Tipuri de Alerte"}),A.jsxs(aa,{children:[A.jsxs(jn,{md:6,children:[A.jsx(Ke.Check,{type:"checkbox",id:"temp-alert",label:"Alerte Temperatur",name:"alerteTemperatura",checked:!!t.alerteTemperatura,onChange:e,className:"custom-checkbox mb-3"}),A.jsx(Ke.Check,{type:"checkbox",id:"humidity-alert",label:"Alerte Umiditate",name:"alerteUmiditate",checked:!!t.alerteUmiditate,onChange:e,className:"custom-checkbox mb-3"}),A.jsx(Ke.Check,{type:"checkbox",id:"wind-alert",label:"Alerte Vnt Puternic",name:"alerteVent",checked:!!t.alerteVent,onChange:e,className:"custom-checkbox"})]}),A.jsx(jn,{md:6,children:A.jsxs("div",{className:"alert-preview",children:[A.jsx("h6",{children:"Preview Notificare:"}),A.jsxs("div",{className:"preview-box d-flex align-items-start gap-2",children:[A.jsx("i",{className:"bi bi-exclamation-triangle-fill text-warning"}),A.jsxs("div",{children:[A.jsx("strong",{children:"Alert Temperatur"}),A.jsx("p",{className:"mb-0 small",children:"Temperatura ntr-o ser a depit 35C"})]})]})]})})]})]})})})]}),A.jsx(Es,{className:"settings-card",children:A.jsx(Es.Body,{children:a===0?A.jsx("div",{className:"text-center text-muted py-4",children:"Nu exist notificri active n acest moment."}):A.jsx("div",{className:"notif-grid notif-grid--4",children:r.filter(h=>h.status==="activ").map(h=>A.jsxs("div",{className:`notif-card ${h.type}`,children:[A.jsx("div",{className:"notif-top",children:A.jsxs("span",{className:"sera-badge",children:[A.jsx("i",{className:"bi bi-house-door"}),h.sera]})}),A.jsx("div",{className:"notif-message",children:h.message}),A.jsxs("div",{className:"notif-actions",children:[A.jsx("button",{onClick:()=>l(h.id),className:"notif-btn btn-ok",children:"Realizat"}),A.jsx("button",{onClick:()=>f(h.id),className:"notif-btn btn-postpone",children:"Amanat"}),A.jsx("button",{onClick:()=>c(h.id),className:"notif-btn btn-cancel",children:"Anulat"})]})]},h.id))})})})]})}function Kae({formData:t,onChange:e,boards:n}){return A.jsx(Es,{className:"settings-card",children:A.jsxs(Es.Body,{children:[A.jsxs("h3",{className:"section-title mb-4",children:[A.jsx("i",{className:"bi bi-gear me-2"})," Setri Sistem"]}),A.jsxs(aa,{children:[A.jsx(jn,{md:6,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Limb"}),A.jsxs(Ke.Select,{name:"limba",value:t.limba,onChange:e,className:"custom-input",children:[A.jsx("option",{value:"ro",children:"Romn"}),A.jsx("option",{value:"en",children:"English"}),A.jsx("option",{value:"hu",children:"Magyar"})]})]})}),A.jsx(jn,{md:6,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Uniti de Msur"}),A.jsxs(Ke.Select,{name:"unitatiMasura",value:t.unitatiMasura,onChange:e,className:"custom-input",children:[A.jsx("option",{value:"metric",children:"Metric (C, m, kg)"}),A.jsx("option",{value:"imperial",children:"Imperial (F, ft, lb)"})]})]})})]}),A.jsxs(aa,{children:[A.jsx(jn,{md:6,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Fus Orar"}),A.jsxs(Ke.Select,{name:"fusOrar",value:t.fusOrar,onChange:e,className:"custom-input",children:[A.jsx("option",{value:"Europe/Bucharest",children:"Bucureti (GMT+2)"}),A.jsx("option",{value:"Europe/London",children:"Londra (GMT+0)"}),A.jsx("option",{value:"Europe/Berlin",children:"Berlin (GMT+1)"})]})]})}),A.jsx(jn,{md:6,children:A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Interval Actualizare Date (secunde)"}),A.jsxs(Ke.Select,{name:"intervalActualizare",value:t.intervalActualizare,onChange:e,className:"custom-input",children:[A.jsx("option",{value:"10",children:"10 secunde"}),A.jsx("option",{value:"30",children:"30 secunde"}),A.jsx("option",{value:"60",children:"1 minut"}),A.jsx("option",{value:"300",children:"5 minute"})]})]})})]}),A.jsxs("div",{className:"system-info",children:[A.jsx("h5",{className:"mb-3",children:"Informaii Sistem"}),A.jsxs("div",{className:"info-grid",children:[A.jsxs("div",{className:"info-item",children:[A.jsx("span",{className:"info-label",children:"Versiune Aplicaie:"}),A.jsx("span",{className:"info-value",children:"v2.4.1"})]}),A.jsxs("div",{className:"info-item",children:[A.jsx("span",{className:"info-label",children:"Ultima Actualizare:"}),A.jsx("span",{className:"info-value",children:"15 Aug 2024"})]}),A.jsxs("div",{className:"info-item",children:[A.jsx("span",{className:"info-label",children:"Plci asociate (ID):"}),A.jsx("span",{className:"info-value",children:n.length?n.map(i=>i.board_id).join(", "):""})]}),A.jsxs("div",{className:"info-item",children:[A.jsx("span",{className:"info-label",children:"Status Server:"}),A.jsx("span",{className:"badge bg-success",children:"Online"})]})]})]})]})})}function qae({show:t,onClose:e,onSubmit:n,data:i,onInputChange:r,saving:s,message:a,forgotEmail:l,onForgotEmailChange:f,onForgotSubmit:c,sendingReset:h}){return A.jsx(gi,{show:t,onHide:e,centered:!0,children:A.jsxs(Ke,{onSubmit:n,children:[A.jsx(gi.Header,{closeButton:!0,children:A.jsx(gi.Title,{children:"Schimb Parola"})}),A.jsxs(gi.Body,{children:[A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Parola Curent"}),A.jsx(Ke.Control,{type:"password",name:"currentPassword",autoComplete:"current-password",value:i.currentPassword,onChange:r})]}),A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Parola Nou"}),A.jsx(Ke.Control,{type:"password",name:"newPassword",autoComplete:"new-password",value:i.newPassword,onChange:r,minLength:8})]}),A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Confirm Parola Nou"}),A.jsx(Ke.Control,{type:"password",name:"confirmPassword",autoComplete:"new-password",value:i.confirmPassword,onChange:r,minLength:8})]}),a&&A.jsx(hm,{variant:a.type,className:"mb-3",children:a.text}),A.jsxs("div",{className:"p-2 border rounded",children:[A.jsx("div",{className:"small text-muted mb-2",children:"Ai uitat parola? Trimite-i un link de resetare pe email."}),A.jsxs("div",{className:"d-flex gap-2",children:[A.jsx(Ke.Control,{type:"email",placeholder:"adresa@exemplu.ro",value:l,onChange:p=>f(p.target.value)}),A.jsx(sa,{variant:"link",className:"text-decoration-underline",type:"button",onClick:c,disabled:h,children:h?"Se trimite":"Trimite link de resetare"})]})]})]}),A.jsxs(gi.Footer,{children:[A.jsx(sa,{variant:"secondary",type:"button",onClick:e,disabled:s,children:"Anuleaz"}),A.jsx(sa,{variant:"success",type:"submit",disabled:s,children:s?A.jsxs(A.Fragment,{children:[A.jsx(Od,{size:"sm",className:"me-2"})," Se salveaz"]}):"Schimb Parola"})]})]})})}function Vae({show:t,onClose:e,months:n,setMonths:i,currentExpiry:r,previewDate:s,onConfirm:a,saving:l}){return A.jsxs(gi,{show:t,onHide:e,centered:!0,children:[A.jsx(gi.Header,{closeButton:!0,children:A.jsx(gi.Title,{children:"Prelungete contractul"})}),A.jsx(gi.Body,{children:A.jsxs(Ke,{children:[A.jsxs(Ke.Group,{className:"mb-3",children:[A.jsx(Ke.Label,{children:"Luni de prelungire"}),A.jsxs(Ke.Select,{value:n,onChange:f=>i(f.target.value),children:[A.jsx("option",{value:"1",children:"1 lun"}),A.jsx("option",{value:"3",children:"3 luni"}),A.jsx("option",{value:"6",children:"6 luni"}),A.jsx("option",{value:"12",children:"12 luni"}),A.jsx("option",{value:"24",children:"24 luni"})]})]}),A.jsxs("div",{className:"small text-muted",children:["Data curent de expirare: ",A.jsx("strong",{children:r||""}),s&&A.jsxs(A.Fragment,{children:[A.jsx("br",{}),"Noua dat (estimare): ",A.jsx("strong",{children:s})]})]})]})}),A.jsxs(gi.Footer,{children:[A.jsx(sa,{variant:"outline-secondary",onClick:e,children:"Anuleaz"}),A.jsx(sa,{variant:"success",onClick:a,disabled:l,children:l?A.jsxs(A.Fragment,{children:[A.jsx(Od,{size:"sm",className:"me-2"})," Se proceseaz"]}):A.jsx(A.Fragment,{children:"Confirm prelungirea"})})]})]})}const qD="".replace(/\/$/,""),VD="".trim();async function Uu(t,e={}){qD||console.warn("[Setari] VITE_API_URL NU e setat!");const n={"Content-Type":"application/json",...VD?{Authorization:`Bearer ${VD}`}:{},...e.headers||{}},i=await fetch(`${qD}${t}`,{headers:n,credentials:"include",...e}),s=(i.headers.get("content-type")||"").includes("application/json"),a=s?await i.json():await i.text();if(!i.ok){let l=s&&a&&typeof a=="object"&&(a.message||a.error)||(typeof a=="string"?a.replace(/<[^>]*>/g,"").trim().slice(0,300):"")||`${i.status} ${i.statusText}`;throw i.status>=500&&(l=`Eroare server (${i.status}). ncearc din nou.`),new Error(l)}return a}function Yae(t,e,n=void 0){return String(e).split(".").reduce((i,r)=>i&&i[r]!==void 0?i[r]:void 0,t)??n}function Nn(t,e,n=""){for(const i of e){const r=Yae(t,i);if(r!=null)return r}return n}function am(t){return!t||typeof t!="object"?t:t.data||t.result||t.payload||t.user||t.settings||t}function Wae(){const[t,e]=O.useState(!0),[n,i]=O.useState(!1),[r,s]=O.useState(""),[a,l]=O.useState(!1),[f,c]=O.useState("notifications"),[h,p]=O.useState(!1),[g,x]=O.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[b,T]=O.useState(!1),[E,C]=O.useState(null),[I,P]=O.useState(""),[M,k]=O.useState(!1),[z,F]=O.useState(!1),[G,K]=O.useState(12),[V,Q]=O.useState(!1),[J,ve]=O.useState({user_id:null,nume:"",telefon:"",email:"",adresa:"",role:"user"}),[se,ye]=O.useState({tipAbonament:"Basic",dataContract:"",dataExpirare:"",numarContract:"",numeFerma:"",cui:"",suprafataTotala:"",numarSere:"",notificariEmail:!0,notificariSMS:!1,notificariPush:!1,alerteTemperatura:!0,alerteUmiditate:!0,alerteVent:!0,limba:"ro",unitatiMasura:"metric",fusOrar:"Europe/Bucharest",intervalActualizare:"30"}),[X,oe]=O.useState([]),ie=J.role==="admin",Ie=O.useMemo(()=>{if(!se.dataExpirare)return null;const Ue=new Date(se.dataExpirare);return Math.ceil((Ue-new Date)/(1e3*60*60*24))},[se.dataExpirare]),Z=O.useMemo(()=>{if(!se.dataExpirare)return"";const Ue=new Date(se.dataExpirare);if(Number.isNaN(Ue.getTime()))return"";const fe=new Date(Ue);return fe.setMonth(fe.getMonth()+Number(G||0)),fe.toISOString().slice(0,10)},[se.dataExpirare,G]);O.useEffect(()=>{let Ue=!0;return(async()=>{try{e(!0),s("");const[fe,je,Ge]=await Promise.all([Uu("/api/me/index.php"),Uu("/api/user-settings/index.php"),Uu("/api/boards/index.php")]);if(!Ue)return;const Pe=am(fe),ot=am(je),ct=Array.isArray(am(Ge))?am(Ge):am(Ge)?.items||[],xe=Pe.user??Pe,we={user_id:Nn(xe,["user_id","id","uid"],null),nume:Nn(xe,["nume","name","full_name"],""),telefon:Nn(xe,["telefon","phone","phone_number"],""),email:Nn(xe,["email"],""),adresa:Nn(xe,["adresa","address"],""),role:Nn(xe,["role","rol"],"user")};ve(we);const Be=(Je,_t=!1)=>Je===!0||Je===1||Je==="1"||Je==="true"?!0:Je===!1||Je===0||Je==="0"||Je==="false"?!1:_t;ye(Je=>({...Je,tipAbonament:Nn(ot,["tipAbonament","plan","subscription"],"Basic"),dataContract:Nn(ot,["dataContract","contract_date"],"")||"",dataExpirare:Nn(ot,["dataExpirare","expires_at"],"")||"",numarContract:Nn(ot,["numarContract","contract_no"],""),numeFerma:Nn(ot,["numeFerma","farmName","company"],""),cui:Nn(ot,["cui","cif","vat"],""),suprafataTotala:String(Nn(ot,["suprafataTotala","area_total"],"")),numarSere:String(Nn(ot,["numarSere","greenhouse_count"],"")),notificariEmail:Be(Nn(ot,["notificariEmail","notify_email"],!0),!0),notificariSMS:Be(Nn(ot,["notificariSMS","notify_sms"],!1),!1),notificariPush:Be(Nn(ot,["notificariPush","notify_push"],!1),!1),alerteTemperatura:Be(Nn(ot,["alerteTemperatura","alert_temp"],!0),!0),alerteUmiditate:Be(Nn(ot,["alerteUmiditate","alert_humidity"],!0),!0),alerteVent:Be(Nn(ot,["alerteVent","alert_wind"],!0),!0),limba:Nn(ot,["limba","lang","language"],"ro"),unitatiMasura:Nn(ot,["unitatiMasura","units"],"metric"),fusOrar:Nn(ot,["fusOrar","timezone"],"Europe/Bucharest"),intervalActualizare:String(Nn(ot,["intervalActualizare","refresh_interval_sec"],"30"))})),oe((ct||[]).map(Je=>({...Je,board_id:Je.board_id??Je.id??Je.identifier??Je.boardId??""})))}catch(fe){s(fe.message||"Nu s-au putut ncrca setrile.")}finally{e(!1)}})(),()=>{Ue=!1}},[]),O.useEffect(()=>{J?.email&&P(J.email)},[J?.email]);const Y=Ue=>{const{name:fe,value:je,type:Ge,checked:Pe}=Ue.target;ye(ot=>({...ot,[fe]:Ge==="checkbox"?Pe:je}))},ne=Ue=>{const{name:fe,value:je}=Ue.target;ve(Ge=>({...Ge,[fe]:je}))};async function me(){const Ue=(I||"").trim();if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Ue)){C({type:"danger",text:"Te rog introdu o adres de email valid."});return}try{k(!0);const je=await Uu("/api/me/request_reset.php",{method:"POST",body:JSON.stringify({email:Ue})}),Ge=je&&typeof je=="object"&&(je.message||je.status)||"Dac emailul exist n sistem, vei primi curnd instruciunile.";C({type:"success",text:String(Ge)})}catch(je){C({type:"danger",text:je.message||"Nu am putut iniia resetarea parolei."})}finally{k(!1)}}async function Te(Ue){Ue.preventDefault(),i(!0),l(!1),s("");try{await Uu("/api/me/index.php",{method:"PUT",body:JSON.stringify({nume:J.nume,telefon:J.telefon,email:J.email,adresa:J.adresa})}),await Uu("/api/user-settings/index.php",{method:"PUT",body:JSON.stringify({tipAbonament:se.tipAbonament,dataContract:se.dataContract||null,dataExpirare:se.dataExpirare||null,numarContract:se.numarContract||null,numeFerma:se.numeFerma||null,cui:se.cui||null,suprafataTotala:se.suprafataTotala?Number(se.suprafataTotala):null,numarSere:se.numarSere?Number(se.numarSere):null,notificariEmail:!!se.notificariEmail,notificariSMS:!!se.notificariSMS,notificariPush:!!se.notificariPush,alerteTemperatura:!!se.alerteTemperatura,alerteUmiditate:!!se.alerteUmiditate,alerteVent:!!se.alerteVent,limba:se.limba,unitatiMasura:se.unitatiMasura,fusOrar:se.fusOrar,intervalActualizare:se.intervalActualizare?Number(se.intervalActualizare):30})}),l(!0),setTimeout(()=>l(!1),2500)}catch(fe){s(fe.message||"Eroare la salvare.")}finally{i(!1)}}function Le(Ue){const{name:fe,value:je}=Ue.target;x(Ge=>({...Ge,[fe]:je}))}async function Ae(Ue){if(Ue&&Ue.preventDefault(),!g.currentPassword||!g.newPassword)return C({type:"danger",text:"Completeaz toate cmpurile."});if(g.newPassword.length<8)return C({type:"danger",text:"Parola nou trebuie s aib minim 8 caractere."});if(g.newPassword!==g.confirmPassword)return C({type:"danger",text:"Parola nou i confirmarea nu coincid."});try{T(!0),C(null);const fe=await Uu("/api/me/password.php",{method:"POST",body:JSON.stringify({currentPassword:g.currentPassword,newPassword:g.newPassword})});C({type:"success",text:fe?.message||"Parola a fost schimbat."}),x({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{p(!1),C(null)},1200)}catch(fe){C({type:"danger",text:fe.message||"Eroare la schimbarea parolei."})}finally{T(!1)}}async function Ve(){try{Q(!0),await Uu("/api/user-settings/index.php",{method:"PUT",body:JSON.stringify({...se,dataExpirare:Z})}),ye(Ue=>({...Ue,dataExpirare:Z})),F(!1),l(!0),setTimeout(()=>l(!1),2e3)}catch(Ue){alert(Ue.message||"Nu am putut prelungi contractul.")}finally{Q(!1)}}return t?A.jsx("section",{className:"section setari-container",children:A.jsxs("div",{className:"container-fluid d-flex align-items-center gap-2",children:[A.jsx(Od,{size:"sm"})," ncarc setrile"]})}):A.jsx("section",{className:"section setari-container",children:A.jsxs("div",{className:"container-fluid",children:[A.jsx(Fae,{role:J.role,activeSection:f,setActiveSection:c,AlertComp:hm,err:r&&A.jsxs(hm,{variant:"danger",className:"mb-3",children:[A.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),r]}),saveOk:a&&A.jsxs(hm,{variant:"success",className:"mb-3",children:[A.jsx("i",{className:"bi bi-check-circle me-2"}),"Modificrile au fost salvate cu succes."]})}),A.jsxs(Ke,{onSubmit:Te,children:[f==="personal"&&A.jsx("div",{className:"two-col-wrap two-col-personal",children:A.jsx(Uae,{me:J,onMeChange:ne,openPasswordModal:()=>{P(J.email||""),p(!0)}})}),f==="contract"&&A.jsx("div",{className:"two-col-wrap two-col-contract",children:A.jsx($ae,{formData:se,onChange:Y,isAdmin:ie,daysLeft:Ie,openExtendModal:()=>F(!0)})}),f==="farm"&&A.jsx("div",{className:"two-col-wrap two-col-farm",children:A.jsx(zae,{formData:se,onChange:Y})}),f==="notifications"&&A.jsx("div",{className:"two-col-notif",children:A.jsx(Hae,{formData:se,onChange:Y})}),f==="system"&&A.jsx("div",{className:"two-col-wrap two-col-system",children:A.jsx(Kae,{formData:se,onChange:Y,boards:X})}),A.jsxs("div",{className:"form-actions",children:[A.jsx(sa,{variant:"success",type:"submit",size:"lg",disabled:n,children:n?A.jsxs(A.Fragment,{children:[A.jsx(Od,{size:"sm",className:"me-2"}),"Se salveaz"]}):A.jsxs(A.Fragment,{children:[A.jsx("i",{className:"bi bi-check-lg me-2"}),"Salveaz Modificrile"]})}),A.jsxs(sa,{variant:"outline-secondary",size:"lg",type:"button",className:"ms-2",onClick:()=>window.location.reload(),children:[A.jsx("i",{className:"bi bi-x-lg me-2"}),"Anuleaz"]})]})]}),A.jsx(qae,{show:h,onClose:()=>p(!1),onSubmit:Ae,data:g,onInputChange:Le,saving:b,message:E,forgotEmail:I,onForgotEmailChange:P,onForgotSubmit:me,sendingReset:M}),A.jsx(Vae,{show:z,onClose:()=>F(!1),months:G,setMonths:K,currentExpiry:se.dataExpirare,previewDate:Z,onConfirm:Ve,saving:V})]})})}function Zae(){return A.jsxs(A.Fragment,{children:[A.jsx(p3,{}),A.jsx("main",{children:A.jsxs(k$,{children:[A.jsx(Ic,{path:"/",element:A.jsx(xse,{})}),A.jsx(Ic,{path:"/statistici",element:A.jsx(bae,{})}),A.jsx(Ic,{path:"/harta-serelor",element:A.jsx(Cae,{})}),A.jsx(Ic,{path:"/agromi",element:A.jsx(Bae,{})}),A.jsx(Ic,{path:"/settings",element:A.jsx(Wae,{})}),A.jsx(Ic,{path:"*",element:A.jsx(I$,{to:"/",replace:!0})})]})})]})}var Yg={exports:{}};/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var Xae=Yg.exports,YD;function Qae(){return YD||(YD=1,function(t,e){(function(n,i){t.exports=i()})(Xae,function(){const n=new Map,i={set($,w,N){n.has($)||n.set($,new Map);const W=n.get($);W.has(w)||W.size===0?W.set(w,N):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(W.keys())[0]}.`)},get:($,w)=>n.has($)&&n.get($).get(w)||null,remove($,w){if(!n.has($))return;const N=n.get($);N.delete(w),N.size===0&&n.delete($)}},r="transitionend",s=$=>($&&window.CSS&&window.CSS.escape&&($=$.replace(/#([^\s"#']+)/g,(w,N)=>`#${CSS.escape(N)}`)),$),a=$=>$==null?`${$}`:Object.prototype.toString.call($).match(/\s([a-z]+)/i)[1].toLowerCase(),l=$=>{$.dispatchEvent(new Event(r))},f=$=>!(!$||typeof $!="object")&&($.jquery!==void 0&&($=$[0]),$.nodeType!==void 0),c=$=>f($)?$.jquery?$[0]:$:typeof $=="string"&&$.length>0?document.querySelector(s($)):null,h=$=>{if(!f($)||$.getClientRects().length===0)return!1;const w=getComputedStyle($).getPropertyValue("visibility")==="visible",N=$.closest("details:not([open])");if(!N)return w;if(N!==$){const W=$.closest("summary");if(W&&W.parentNode!==N||W===null)return!1}return w},p=$=>!$||$.nodeType!==Node.ELEMENT_NODE||!!$.classList.contains("disabled")||($.disabled!==void 0?$.disabled:$.hasAttribute("disabled")&&$.getAttribute("disabled")!=="false"),g=$=>{if(!document.documentElement.attachShadow)return null;if(typeof $.getRootNode=="function"){const w=$.getRootNode();return w instanceof ShadowRoot?w:null}return $ instanceof ShadowRoot?$:$.parentNode?g($.parentNode):null},x=()=>{},b=$=>{$.offsetHeight},T=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,E=[],C=()=>document.documentElement.dir==="rtl",I=$=>{var w;w=()=>{const N=T();if(N){const W=$.NAME,ae=N.fn[W];N.fn[W]=$.jQueryInterface,N.fn[W].Constructor=$,N.fn[W].noConflict=()=>(N.fn[W]=ae,$.jQueryInterface)}},document.readyState==="loading"?(E.length||document.addEventListener("DOMContentLoaded",()=>{for(const N of E)N()}),E.push(w)):w()},P=($,w=[],N=$)=>typeof $=="function"?$.call(...w):N,M=($,w,N=!0)=>{if(!N)return void P($);const W=(Ee=>{if(!Ee)return 0;let{transitionDuration:Me,transitionDelay:Fe}=window.getComputedStyle(Ee);const Ye=Number.parseFloat(Me),We=Number.parseFloat(Fe);return Ye||We?(Me=Me.split(",")[0],Fe=Fe.split(",")[0],1e3*(Number.parseFloat(Me)+Number.parseFloat(Fe))):0})(w)+5;let ae=!1;const le=({target:Ee})=>{Ee===w&&(ae=!0,w.removeEventListener(r,le),P($))};w.addEventListener(r,le),setTimeout(()=>{ae||l(w)},W)},k=($,w,N,W)=>{const ae=$.length;let le=$.indexOf(w);return le===-1?!N&&W?$[ae-1]:$[0]:(le+=N?1:-1,W&&(le=(le+ae)%ae),$[Math.max(0,Math.min(le,ae-1))])},z=/[^.]*(?=\..*)\.|.*/,F=/\..*/,G=/::\d+$/,K={};let V=1;const Q={mouseenter:"mouseover",mouseleave:"mouseout"},J=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ve($,w){return w&&`${w}::${V++}`||$.uidEvent||V++}function se($){const w=ve($);return $.uidEvent=w,K[w]=K[w]||{},K[w]}function ye($,w,N=null){return Object.values($).find(W=>W.callable===w&&W.delegationSelector===N)}function X($,w,N){const W=typeof w=="string",ae=W?N:w||N;let le=Z($);return J.has(le)||(le=$),[W,ae,le]}function oe($,w,N,W,ae){if(typeof w!="string"||!$)return;let[le,Ee,Me]=X(w,N,W);w in Q&&(Ee=(Et=>function(ft){if(!ft.relatedTarget||ft.relatedTarget!==ft.delegateTarget&&!ft.delegateTarget.contains(ft.relatedTarget))return Et.call(this,ft)})(Ee));const Fe=se($),Ye=Fe[Me]||(Fe[Me]={}),We=ye(Ye,Ee,le?N:null);if(We)return void(We.oneOff=We.oneOff&&ae);const ze=ve(Ee,w.replace(z,"")),St=le?function(dt,Et,ft){return function yt(Qt){const en=dt.querySelectorAll(Et);for(let{target:Ct}=Qt;Ct&&Ct!==this;Ct=Ct.parentNode)for(const Rt of en)if(Rt===Ct)return ne(Qt,{delegateTarget:Ct}),yt.oneOff&&Y.off(dt,Qt.type,Et,ft),ft.apply(Ct,[Qt])}}($,N,Ee):function(dt,Et){return function ft(yt){return ne(yt,{delegateTarget:dt}),ft.oneOff&&Y.off(dt,yt.type,Et),Et.apply(dt,[yt])}}($,Ee);St.delegationSelector=le?N:null,St.callable=Ee,St.oneOff=ae,St.uidEvent=ze,Ye[ze]=St,$.addEventListener(Me,St,le)}function ie($,w,N,W,ae){const le=ye(w[N],W,ae);le&&($.removeEventListener(N,le,!!ae),delete w[N][le.uidEvent])}function Ie($,w,N,W){const ae=w[N]||{};for(const[le,Ee]of Object.entries(ae))le.includes(W)&&ie($,w,N,Ee.callable,Ee.delegationSelector)}function Z($){return $=$.replace(F,""),Q[$]||$}const Y={on($,w,N,W){oe($,w,N,W,!1)},one($,w,N,W){oe($,w,N,W,!0)},off($,w,N,W){if(typeof w!="string"||!$)return;const[ae,le,Ee]=X(w,N,W),Me=Ee!==w,Fe=se($),Ye=Fe[Ee]||{},We=w.startsWith(".");if(le===void 0){if(We)for(const ze of Object.keys(Fe))Ie($,Fe,ze,w.slice(1));for(const[ze,St]of Object.entries(Ye)){const dt=ze.replace(G,"");Me&&!w.includes(dt)||ie($,Fe,Ee,St.callable,St.delegationSelector)}}else{if(!Object.keys(Ye).length)return;ie($,Fe,Ee,le,ae?N:null)}},trigger($,w,N){if(typeof w!="string"||!$)return null;const W=T();let ae=null,le=!0,Ee=!0,Me=!1;w!==Z(w)&&W&&(ae=W.Event(w,N),W($).trigger(ae),le=!ae.isPropagationStopped(),Ee=!ae.isImmediatePropagationStopped(),Me=ae.isDefaultPrevented());const Fe=ne(new Event(w,{bubbles:le,cancelable:!0}),N);return Me&&Fe.preventDefault(),Ee&&$.dispatchEvent(Fe),Fe.defaultPrevented&&ae&&ae.preventDefault(),Fe}};function ne($,w={}){for(const[N,W]of Object.entries(w))try{$[N]=W}catch{Object.defineProperty($,N,{configurable:!0,get:()=>W})}return $}function me($){if($==="true")return!0;if($==="false")return!1;if($===Number($).toString())return Number($);if($===""||$==="null")return null;if(typeof $!="string")return $;try{return JSON.parse(decodeURIComponent($))}catch{return $}}function Te($){return $.replace(/[A-Z]/g,w=>`-${w.toLowerCase()}`)}const Le={setDataAttribute($,w,N){$.setAttribute(`data-bs-${Te(w)}`,N)},removeDataAttribute($,w){$.removeAttribute(`data-bs-${Te(w)}`)},getDataAttributes($){if(!$)return{};const w={},N=Object.keys($.dataset).filter(W=>W.startsWith("bs")&&!W.startsWith("bsConfig"));for(const W of N){let ae=W.replace(/^bs/,"");ae=ae.charAt(0).toLowerCase()+ae.slice(1),w[ae]=me($.dataset[W])}return w},getDataAttribute:($,w)=>me($.getAttribute(`data-bs-${Te(w)}`))};class Ae{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(w){return w=this._mergeConfigObj(w),w=this._configAfterMerge(w),this._typeCheckConfig(w),w}_configAfterMerge(w){return w}_mergeConfigObj(w,N){const W=f(N)?Le.getDataAttribute(N,"config"):{};return{...this.constructor.Default,...typeof W=="object"?W:{},...f(N)?Le.getDataAttributes(N):{},...typeof w=="object"?w:{}}}_typeCheckConfig(w,N=this.constructor.DefaultType){for(const[W,ae]of Object.entries(N)){const le=w[W],Ee=f(le)?"element":a(le);if(!new RegExp(ae).test(Ee))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${W}" provided type "${Ee}" but expected type "${ae}".`)}}}class Ve extends Ae{constructor(w,N){super(),(w=c(w))&&(this._element=w,this._config=this._getConfig(N),i.set(this._element,this.constructor.DATA_KEY,this))}dispose(){i.remove(this._element,this.constructor.DATA_KEY),Y.off(this._element,this.constructor.EVENT_KEY);for(const w of Object.getOwnPropertyNames(this))this[w]=null}_queueCallback(w,N,W=!0){M(w,N,W)}_getConfig(w){return w=this._mergeConfigObj(w,this._element),w=this._configAfterMerge(w),this._typeCheckConfig(w),w}static getInstance(w){return i.get(c(w),this.DATA_KEY)}static getOrCreateInstance(w,N={}){return this.getInstance(w)||new this(w,typeof N=="object"?N:null)}static get VERSION(){return"5.3.8"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(w){return`${w}${this.EVENT_KEY}`}}const Ue=$=>{let w=$.getAttribute("data-bs-target");if(!w||w==="#"){let N=$.getAttribute("href");if(!N||!N.includes("#")&&!N.startsWith("."))return null;N.includes("#")&&!N.startsWith("#")&&(N=`#${N.split("#")[1]}`),w=N&&N!=="#"?N.trim():null}return w?w.split(",").map(N=>s(N)).join(","):null},fe={find:($,w=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(w,$)),findOne:($,w=document.documentElement)=>Element.prototype.querySelector.call(w,$),children:($,w)=>[].concat(...$.children).filter(N=>N.matches(w)),parents($,w){const N=[];let W=$.parentNode.closest(w);for(;W;)N.push(W),W=W.parentNode.closest(w);return N},prev($,w){let N=$.previousElementSibling;for(;N;){if(N.matches(w))return[N];N=N.previousElementSibling}return[]},next($,w){let N=$.nextElementSibling;for(;N;){if(N.matches(w))return[N];N=N.nextElementSibling}return[]},focusableChildren($){const w=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(N=>`${N}:not([tabindex^="-"])`).join(",");return this.find(w,$).filter(N=>!p(N)&&h(N))},getSelectorFromElement($){const w=Ue($);return w&&fe.findOne(w)?w:null},getElementFromSelector($){const w=Ue($);return w?fe.findOne(w):null},getMultipleElementsFromSelector($){const w=Ue($);return w?fe.find(w):[]}},je=($,w="hide")=>{const N=`click.dismiss${$.EVENT_KEY}`,W=$.NAME;Y.on(document,N,`[data-bs-dismiss="${W}"]`,function(ae){if(["A","AREA"].includes(this.tagName)&&ae.preventDefault(),p(this))return;const le=fe.getElementFromSelector(this)||this.closest(`.${W}`);$.getOrCreateInstance(le)[w]()})},Ge=".bs.alert",Pe=`close${Ge}`,ot=`closed${Ge}`;class ct extends Ve{static get NAME(){return"alert"}close(){if(Y.trigger(this._element,Pe).defaultPrevented)return;this._element.classList.remove("show");const w=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,w)}_destroyElement(){this._element.remove(),Y.trigger(this._element,ot),this.dispose()}static jQueryInterface(w){return this.each(function(){const N=ct.getOrCreateInstance(this);if(typeof w=="string"){if(N[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);N[w](this)}})}}je(ct,"close"),I(ct);const xe='[data-bs-toggle="button"]';class we extends Ve{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(w){return this.each(function(){const N=we.getOrCreateInstance(this);w==="toggle"&&N[w]()})}}Y.on(document,"click.bs.button.data-api",xe,$=>{$.preventDefault();const w=$.target.closest(xe);we.getOrCreateInstance(w).toggle()}),I(we);const Be=".bs.swipe",Je=`touchstart${Be}`,_t=`touchmove${Be}`,Ft=`touchend${Be}`,kt=`pointerdown${Be}`,Un=`pointerup${Be}`,Gi={endCallback:null,leftCallback:null,rightCallback:null},xi={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class _i extends Ae{constructor(w,N){super(),this._element=w,w&&_i.isSupported()&&(this._config=this._getConfig(N),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Gi}static get DefaultType(){return xi}static get NAME(){return"swipe"}dispose(){Y.off(this._element,Be)}_start(w){this._supportPointerEvents?this._eventIsPointerPenTouch(w)&&(this._deltaX=w.clientX):this._deltaX=w.touches[0].clientX}_end(w){this._eventIsPointerPenTouch(w)&&(this._deltaX=w.clientX-this._deltaX),this._handleSwipe(),P(this._config.endCallback)}_move(w){this._deltaX=w.touches&&w.touches.length>1?0:w.touches[0].clientX-this._deltaX}_handleSwipe(){const w=Math.abs(this._deltaX);if(w<=40)return;const N=w/this._deltaX;this._deltaX=0,N&&P(N>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Y.on(this._element,kt,w=>this._start(w)),Y.on(this._element,Un,w=>this._end(w)),this._element.classList.add("pointer-event")):(Y.on(this._element,Je,w=>this._start(w)),Y.on(this._element,_t,w=>this._move(w)),Y.on(this._element,Ft,w=>this._end(w)))}_eventIsPointerPenTouch(w){return this._supportPointerEvents&&(w.pointerType==="pen"||w.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const rt=".bs.carousel",Kt=".data-api",qn="ArrowLeft",En="ArrowRight",ar="next",Jn="prev",Ds="left",Lr="right",Is=`slide${rt}`,Cr=`slid${rt}`,Wl=`keydown${rt}`,es=`mouseenter${rt}`,nh=`mouseleave${rt}`,ff=`dragstart${rt}`,ic=`load${rt}${Kt}`,Zl=`click${rt}${Kt}`,da="carousel",Xl="active",rc=".active",sc=".carousel-item",ac=rc+sc,oc={[qn]:Lr,[En]:Ds},df={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},lc={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Hi extends Ve{constructor(w,N){super(w,N),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=fe.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===da&&this.cycle()}static get Default(){return df}static get DefaultType(){return lc}static get NAME(){return"carousel"}next(){this._slide(ar)}nextWhenVisible(){!document.hidden&&h(this._element)&&this.next()}prev(){this._slide(Jn)}pause(){this._isSliding&&l(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?Y.one(this._element,Cr,()=>this.cycle()):this.cycle())}to(w){const N=this._getItems();if(w>N.length-1||w<0)return;if(this._isSliding)return void Y.one(this._element,Cr,()=>this.to(w));const W=this._getItemIndex(this._getActive());if(W===w)return;const ae=w>W?ar:Jn;this._slide(ae,N[w])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(w){return w.defaultInterval=w.interval,w}_addEventListeners(){this._config.keyboard&&Y.on(this._element,Wl,w=>this._keydown(w)),this._config.pause==="hover"&&(Y.on(this._element,es,()=>this.pause()),Y.on(this._element,nh,()=>this._maybeEnableCycle())),this._config.touch&&_i.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const N of fe.find(".carousel-item img",this._element))Y.on(N,ff,W=>W.preventDefault());const w={leftCallback:()=>this._slide(this._directionToOrder(Ds)),rightCallback:()=>this._slide(this._directionToOrder(Lr)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new _i(this._element,w)}_keydown(w){if(/input|textarea/i.test(w.target.tagName))return;const N=oc[w.key];N&&(w.preventDefault(),this._slide(this._directionToOrder(N)))}_getItemIndex(w){return this._getItems().indexOf(w)}_setActiveIndicatorElement(w){if(!this._indicatorsElement)return;const N=fe.findOne(rc,this._indicatorsElement);N.classList.remove(Xl),N.removeAttribute("aria-current");const W=fe.findOne(`[data-bs-slide-to="${w}"]`,this._indicatorsElement);W&&(W.classList.add(Xl),W.setAttribute("aria-current","true"))}_updateInterval(){const w=this._activeElement||this._getActive();if(!w)return;const N=Number.parseInt(w.getAttribute("data-bs-interval"),10);this._config.interval=N||this._config.defaultInterval}_slide(w,N=null){if(this._isSliding)return;const W=this._getActive(),ae=w===ar,le=N||k(this._getItems(),W,ae,this._config.wrap);if(le===W)return;const Ee=this._getItemIndex(le),Me=ze=>Y.trigger(this._element,ze,{relatedTarget:le,direction:this._orderToDirection(w),from:this._getItemIndex(W),to:Ee});if(Me(Is).defaultPrevented||!W||!le)return;const Fe=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(Ee),this._activeElement=le;const Ye=ae?"carousel-item-start":"carousel-item-end",We=ae?"carousel-item-next":"carousel-item-prev";le.classList.add(We),b(le),W.classList.add(Ye),le.classList.add(Ye),this._queueCallback(()=>{le.classList.remove(Ye,We),le.classList.add(Xl),W.classList.remove(Xl,We,Ye),this._isSliding=!1,Me(Cr)},W,this._isAnimated()),Fe&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return fe.findOne(ac,this._element)}_getItems(){return fe.find(sc,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(w){return C()?w===Ds?Jn:ar:w===Ds?ar:Jn}_orderToDirection(w){return C()?w===Jn?Ds:Lr:w===Jn?Lr:Ds}static jQueryInterface(w){return this.each(function(){const N=Hi.getOrCreateInstance(this,w);if(typeof w!="number"){if(typeof w=="string"){if(N[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);N[w]()}}else N.to(w)})}}Y.on(document,Zl,"[data-bs-slide], [data-bs-slide-to]",function($){const w=fe.getElementFromSelector(this);if(!w||!w.classList.contains(da))return;$.preventDefault();const N=Hi.getOrCreateInstance(w),W=this.getAttribute("data-bs-slide-to");return W?(N.to(W),void N._maybeEnableCycle()):Le.getDataAttribute(this,"slide")==="next"?(N.next(),void N._maybeEnableCycle()):(N.prev(),void N._maybeEnableCycle())}),Y.on(window,ic,()=>{const $=fe.find('[data-bs-ride="carousel"]');for(const w of $)Hi.getOrCreateInstance(w)}),I(Hi);const In=".bs.collapse",Si=`show${In}`,ro=`shown${In}`,or=`hide${In}`,st=`hidden${In}`,hf=`click${In}.data-api`,Uo="show",yr="collapse",ha="collapsing",Ms=`:scope .${yr} .${yr}`,ts='[data-bs-toggle="collapse"]',Or={parent:null,toggle:!0},ma={parent:"(null|element)",toggle:"boolean"};class vn extends Ve{constructor(w,N){super(w,N),this._isTransitioning=!1,this._triggerArray=[];const W=fe.find(ts);for(const ae of W){const le=fe.getSelectorFromElement(ae),Ee=fe.find(le).filter(Me=>Me===this._element);le!==null&&Ee.length&&this._triggerArray.push(ae)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Or}static get DefaultType(){return ma}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let w=[];if(this._config.parent&&(w=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(ae=>ae!==this._element).map(ae=>vn.getOrCreateInstance(ae,{toggle:!1}))),w.length&&w[0]._isTransitioning||Y.trigger(this._element,Si).defaultPrevented)return;for(const ae of w)ae.hide();const N=this._getDimension();this._element.classList.remove(yr),this._element.classList.add(ha),this._element.style[N]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const W=`scroll${N[0].toUpperCase()+N.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ha),this._element.classList.add(yr,Uo),this._element.style[N]="",Y.trigger(this._element,ro)},this._element,!0),this._element.style[N]=`${this._element[W]}px`}hide(){if(this._isTransitioning||!this._isShown()||Y.trigger(this._element,or).defaultPrevented)return;const w=this._getDimension();this._element.style[w]=`${this._element.getBoundingClientRect()[w]}px`,b(this._element),this._element.classList.add(ha),this._element.classList.remove(yr,Uo);for(const N of this._triggerArray){const W=fe.getElementFromSelector(N);W&&!this._isShown(W)&&this._addAriaAndCollapsedClass([N],!1)}this._isTransitioning=!0,this._element.style[w]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ha),this._element.classList.add(yr),Y.trigger(this._element,st)},this._element,!0)}_isShown(w=this._element){return w.classList.contains(Uo)}_configAfterMerge(w){return w.toggle=!!w.toggle,w.parent=c(w.parent),w}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const w=this._getFirstLevelChildren(ts);for(const N of w){const W=fe.getElementFromSelector(N);W&&this._addAriaAndCollapsedClass([N],this._isShown(W))}}_getFirstLevelChildren(w){const N=fe.find(Ms,this._config.parent);return fe.find(w,this._config.parent).filter(W=>!N.includes(W))}_addAriaAndCollapsedClass(w,N){if(w.length)for(const W of w)W.classList.toggle("collapsed",!N),W.setAttribute("aria-expanded",N)}static jQueryInterface(w){const N={};return typeof w=="string"&&/show|hide/.test(w)&&(N.toggle=!1),this.each(function(){const W=vn.getOrCreateInstance(this,N);if(typeof w=="string"){if(W[w]===void 0)throw new TypeError(`No method named "${w}"`);W[w]()}})}}Y.on(document,hf,ts,function($){($.target.tagName==="A"||$.delegateTarget&&$.delegateTarget.tagName==="A")&&$.preventDefault();for(const w of fe.getMultipleElementsFromSelector(this))vn.getOrCreateInstance(w,{toggle:!1}).toggle()}),I(vn);var ei="top",Ei="bottom",$n="right",On="left",Ql="auto",Rr=[ei,Ei,$n,On],ks="start",so="end",$o="clippingParents",ao="viewport",Ti="popper",oo="reference",Ns=Rr.reduce(function($,w){return $.concat([w+"-"+ks,w+"-"+so])},[]),ns=[].concat(Rr,[Ql]).reduce(function($,w){return $.concat([w,w+"-"+ks,w+"-"+so])},[]),zo="beforeRead",js="read",Nt="afterRead",rn="beforeMain",ti="main",Bs="afterMain",pa="beforeWrite",ga="write",At="afterWrite",sn=[zo,js,Nt,rn,ti,Bs,pa,ga,At];function lr($){return $?($.nodeName||"").toLowerCase():null}function Xt($){if($==null)return window;if($.toString()!=="[object Window]"){var w=$.ownerDocument;return w&&w.defaultView||window}return $}function Mn($){return $ instanceof Xt($).Element||$ instanceof Element}function Ki($){return $ instanceof Xt($).HTMLElement||$ instanceof HTMLElement}function Fs($){return typeof ShadowRoot<"u"&&($ instanceof Xt($).ShadowRoot||$ instanceof ShadowRoot)}const Ai={name:"applyStyles",enabled:!0,phase:"write",fn:function($){var w=$.state;Object.keys(w.elements).forEach(function(N){var W=w.styles[N]||{},ae=w.attributes[N]||{},le=w.elements[N];Ki(le)&&lr(le)&&(Object.assign(le.style,W),Object.keys(ae).forEach(function(Ee){var Me=ae[Ee];Me===!1?le.removeAttribute(Ee):le.setAttribute(Ee,Me===!0?"":Me)}))})},effect:function($){var w=$.state,N={popper:{position:w.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(w.elements.popper.style,N.popper),w.styles=N,w.elements.arrow&&Object.assign(w.elements.arrow.style,N.arrow),function(){Object.keys(w.elements).forEach(function(W){var ae=w.elements[W],le=w.attributes[W]||{},Ee=Object.keys(w.styles.hasOwnProperty(W)?w.styles[W]:N[W]).reduce(function(Me,Fe){return Me[Fe]="",Me},{});Ki(ae)&&lr(ae)&&(Object.assign(ae.style,Ee),Object.keys(le).forEach(function(Me){ae.removeAttribute(Me)}))})}},requires:["computeStyles"]};function zt($){return $.split("-")[0]}var wi=Math.max,qi=Math.min,Pr=Math.round;function lo(){var $=navigator.userAgentData;return $!=null&&$.brands&&Array.isArray($.brands)?$.brands.map(function(w){return w.brand+"/"+w.version}).join(" "):navigator.userAgent}function va(){return!/^((?!chrome|android).)*safari/i.test(lo())}function Dr($,w,N){w===void 0&&(w=!1),N===void 0&&(N=!1);var W=$.getBoundingClientRect(),ae=1,le=1;w&&Ki($)&&(ae=$.offsetWidth>0&&Pr(W.width)/$.offsetWidth||1,le=$.offsetHeight>0&&Pr(W.height)/$.offsetHeight||1);var Ee=(Mn($)?Xt($):window).visualViewport,Me=!va()&&N,Fe=(W.left+(Me&&Ee?Ee.offsetLeft:0))/ae,Ye=(W.top+(Me&&Ee?Ee.offsetTop:0))/le,We=W.width/ae,ze=W.height/le;return{width:We,height:ze,top:Ye,right:Fe+We,bottom:Ye+ze,left:Fe,x:Fe,y:Ye}}function Go($){var w=Dr($),N=$.offsetWidth,W=$.offsetHeight;return Math.abs(w.width-N)<=1&&(N=w.width),Math.abs(w.height-W)<=1&&(W=w.height),{x:$.offsetLeft,y:$.offsetTop,width:N,height:W}}function Ho($,w){var N=w.getRootNode&&w.getRootNode();if($.contains(w))return!0;if(N&&Fs(N)){var W=w;do{if(W&&$.isSameNode(W))return!0;W=W.parentNode||W.host}while(W)}return!1}function Li($){return Xt($).getComputedStyle($)}function Ko($){return["table","td","th"].indexOf(lr($))>=0}function Vi($){return((Mn($)?$.ownerDocument:$.document)||window.document).documentElement}function Ir($){return lr($)==="html"?$:$.assignedSlot||$.parentNode||(Fs($)?$.host:null)||Vi($)}function is($){return Ki($)&&Li($).position!=="fixed"?$.offsetParent:null}function uo($){for(var w=Xt($),N=is($);N&&Ko(N)&&Li(N).position==="static";)N=is(N);return N&&(lr(N)==="html"||lr(N)==="body"&&Li(N).position==="static")?w:N||function(W){var ae=/firefox/i.test(lo());if(/Trident/i.test(lo())&&Ki(W)&&Li(W).position==="fixed")return null;var le=Ir(W);for(Fs(le)&&(le=le.host);Ki(le)&&["html","body"].indexOf(lr(le))<0;){var Ee=Li(le);if(Ee.transform!=="none"||Ee.perspective!=="none"||Ee.contain==="paint"||["transform","perspective"].indexOf(Ee.willChange)!==-1||ae&&Ee.willChange==="filter"||ae&&Ee.filter&&Ee.filter!=="none")return le;le=le.parentNode}return null}($)||w}function pt($){return["top","bottom"].indexOf($)>=0?"x":"y"}function ui($,w,N){return wi($,qi(w,N))}function $t($){return Object.assign({},{top:0,right:0,bottom:0,left:0},$)}function br($,w){return w.reduce(function(N,W){return N[W]=$,N},{})}const co={name:"arrow",enabled:!0,phase:"main",fn:function($){var w,N=$.state,W=$.name,ae=$.options,le=N.elements.arrow,Ee=N.modifiersData.popperOffsets,Me=zt(N.placement),Fe=pt(Me),Ye=[On,$n].indexOf(Me)>=0?"height":"width";if(le&&Ee){var We=function(qt,Ut){return $t(typeof(qt=typeof qt=="function"?qt(Object.assign({},Ut.rects,{placement:Ut.placement})):qt)!="number"?qt:br(qt,Rr))}(ae.padding,N),ze=Go(le),St=Fe==="y"?ei:On,dt=Fe==="y"?Ei:$n,Et=N.rects.reference[Ye]+N.rects.reference[Fe]-Ee[Fe]-N.rects.popper[Ye],ft=Ee[Fe]-N.rects.reference[Fe],yt=uo(le),Qt=yt?Fe==="y"?yt.clientHeight||0:yt.clientWidth||0:0,en=Et/2-ft/2,Ct=We[St],Rt=Qt-ze[Ye]-We[dt],$e=Qt/2-ze[Ye]/2+en,tt=ui(Ct,$e,Rt),gt=Fe;N.modifiersData[W]=((w={})[gt]=tt,w.centerOffset=tt-$e,w)}},effect:function($){var w=$.state,N=$.options.element,W=N===void 0?"[data-popper-arrow]":N;W!=null&&(typeof W!="string"||(W=w.elements.popper.querySelector(W)))&&Ho(w.elements.popper,W)&&(w.elements.arrow=W)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ur($){return $.split("-")[1]}var Mr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function kr($){var w,N=$.popper,W=$.popperRect,ae=$.placement,le=$.variation,Ee=$.offsets,Me=$.position,Fe=$.gpuAcceleration,Ye=$.adaptive,We=$.roundOffsets,ze=$.isFixed,St=Ee.x,dt=St===void 0?0:St,Et=Ee.y,ft=Et===void 0?0:Et,yt=typeof We=="function"?We({x:dt,y:ft}):{x:dt,y:ft};dt=yt.x,ft=yt.y;var Qt=Ee.hasOwnProperty("x"),en=Ee.hasOwnProperty("y"),Ct=On,Rt=ei,$e=window;if(Ye){var tt=uo(N),gt="clientHeight",qt="clientWidth";tt===Xt(N)&&Li(tt=Vi(N)).position!=="static"&&Me==="absolute"&&(gt="scrollHeight",qt="scrollWidth"),(ae===ei||(ae===On||ae===$n)&&le===so)&&(Rt=Ei,ft-=(ze&&tt===$e&&$e.visualViewport?$e.visualViewport.height:tt[gt])-W.height,ft*=Fe?1:-1),ae!==On&&(ae!==ei&&ae!==Ei||le!==so)||(Ct=$n,dt-=(ze&&tt===$e&&$e.visualViewport?$e.visualViewport.width:tt[qt])-W.width,dt*=Fe?1:-1)}var Ut,an=Object.assign({position:Me},Ye&&Mr),Di=We===!0?function(Qi,Vn){var Gr=Qi.x,Gt=Qi.y,wn=Vn.devicePixelRatio||1;return{x:Pr(Gr*wn)/wn||0,y:Pr(Gt*wn)/wn||0}}({x:dt,y:ft},Xt(N)):{x:dt,y:ft};return dt=Di.x,ft=Di.y,Fe?Object.assign({},an,((Ut={})[Rt]=en?"0":"",Ut[Ct]=Qt?"0":"",Ut.transform=($e.devicePixelRatio||1)<=1?"translate("+dt+"px, "+ft+"px)":"translate3d("+dt+"px, "+ft+"px, 0)",Ut)):Object.assign({},an,((w={})[Rt]=en?ft+"px":"",w[Ct]=Qt?dt+"px":"",w.transform="",w))}const Us={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function($){var w=$.state,N=$.options,W=N.gpuAcceleration,ae=W===void 0||W,le=N.adaptive,Ee=le===void 0||le,Me=N.roundOffsets,Fe=Me===void 0||Me,Ye={placement:zt(w.placement),variation:ur(w.placement),popper:w.elements.popper,popperRect:w.rects.popper,gpuAcceleration:ae,isFixed:w.options.strategy==="fixed"};w.modifiersData.popperOffsets!=null&&(w.styles.popper=Object.assign({},w.styles.popper,kr(Object.assign({},Ye,{offsets:w.modifiersData.popperOffsets,position:w.options.strategy,adaptive:Ee,roundOffsets:Fe})))),w.modifiersData.arrow!=null&&(w.styles.arrow=Object.assign({},w.styles.arrow,kr(Object.assign({},Ye,{offsets:w.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Fe})))),w.attributes.popper=Object.assign({},w.attributes.popper,{"data-popper-placement":w.placement})},data:{}};var rs={passive:!0};const Tn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function($){var w=$.state,N=$.instance,W=$.options,ae=W.scroll,le=ae===void 0||ae,Ee=W.resize,Me=Ee===void 0||Ee,Fe=Xt(w.elements.popper),Ye=[].concat(w.scrollParents.reference,w.scrollParents.popper);return le&&Ye.forEach(function(We){We.addEventListener("scroll",N.update,rs)}),Me&&Fe.addEventListener("resize",N.update,rs),function(){le&&Ye.forEach(function(We){We.removeEventListener("scroll",N.update,rs)}),Me&&Fe.removeEventListener("resize",N.update,rs)}},data:{}};var Nr={left:"right",right:"left",bottom:"top",top:"bottom"};function fo($){return $.replace(/left|right|bottom|top/g,function(w){return Nr[w]})}var ci={start:"end",end:"start"};function $s($){return $.replace(/start|end/g,function(w){return ci[w]})}function ya($){var w=Xt($);return{scrollLeft:w.pageXOffset,scrollTop:w.pageYOffset}}function ss($){return Dr(Vi($)).left+ya($).scrollLeft}function uc($){var w=Li($),N=w.overflow,W=w.overflowX,ae=w.overflowY;return/auto|scroll|overlay|hidden/.test(N+ae+W)}function qo($){return["html","body","#document"].indexOf(lr($))>=0?$.ownerDocument.body:Ki($)&&uc($)?$:qo(Ir($))}function Lt($,w){var N;w===void 0&&(w=[]);var W=qo($),ae=W===((N=$.ownerDocument)==null?void 0:N.body),le=Xt(W),Ee=ae?[le].concat(le.visualViewport||[],uc(W)?W:[]):W,Me=w.concat(Ee);return ae?Me:Me.concat(Lt(Ir(Ee)))}function ba($){return Object.assign({},$,{left:$.x,top:$.y,right:$.x+$.width,bottom:$.y+$.height})}function fi($,w,N){return w===ao?ba(function(W,ae){var le=Xt(W),Ee=Vi(W),Me=le.visualViewport,Fe=Ee.clientWidth,Ye=Ee.clientHeight,We=0,ze=0;if(Me){Fe=Me.width,Ye=Me.height;var St=va();(St||!St&&ae==="fixed")&&(We=Me.offsetLeft,ze=Me.offsetTop)}return{width:Fe,height:Ye,x:We+ss(W),y:ze}}($,N)):Mn(w)?function(W,ae){var le=Dr(W,!1,ae==="fixed");return le.top=le.top+W.clientTop,le.left=le.left+W.clientLeft,le.bottom=le.top+W.clientHeight,le.right=le.left+W.clientWidth,le.width=W.clientWidth,le.height=W.clientHeight,le.x=le.left,le.y=le.top,le}(w,N):ba(function(W){var ae,le=Vi(W),Ee=ya(W),Me=(ae=W.ownerDocument)==null?void 0:ae.body,Fe=wi(le.scrollWidth,le.clientWidth,Me?Me.scrollWidth:0,Me?Me.clientWidth:0),Ye=wi(le.scrollHeight,le.clientHeight,Me?Me.scrollHeight:0,Me?Me.clientHeight:0),We=-Ee.scrollLeft+ss(W),ze=-Ee.scrollTop;return Li(Me||le).direction==="rtl"&&(We+=wi(le.clientWidth,Me?Me.clientWidth:0)-Fe),{width:Fe,height:Ye,x:We,y:ze}}(Vi($)))}function xa($){var w,N=$.reference,W=$.element,ae=$.placement,le=ae?zt(ae):null,Ee=ae?ur(ae):null,Me=N.x+N.width/2-W.width/2,Fe=N.y+N.height/2-W.height/2;switch(le){case ei:w={x:Me,y:N.y-W.height};break;case Ei:w={x:Me,y:N.y+N.height};break;case $n:w={x:N.x+N.width,y:Fe};break;case On:w={x:N.x-W.width,y:Fe};break;default:w={x:N.x,y:N.y}}var Ye=le?pt(le):null;if(Ye!=null){var We=Ye==="y"?"height":"width";switch(Ee){case ks:w[Ye]=w[Ye]-(N[We]/2-W[We]/2);break;case so:w[Ye]=w[Ye]+(N[We]/2-W[We]/2)}}return w}function _a($,w){w===void 0&&(w={});var N=w,W=N.placement,ae=W===void 0?$.placement:W,le=N.strategy,Ee=le===void 0?$.strategy:le,Me=N.boundary,Fe=Me===void 0?$o:Me,Ye=N.rootBoundary,We=Ye===void 0?ao:Ye,ze=N.elementContext,St=ze===void 0?Ti:ze,dt=N.altBoundary,Et=dt!==void 0&&dt,ft=N.padding,yt=ft===void 0?0:ft,Qt=$t(typeof yt!="number"?yt:br(yt,Rr)),en=St===Ti?oo:Ti,Ct=$.rects.popper,Rt=$.elements[Et?en:St],$e=function(Vn,Gr,Gt,wn){var Hr=Gr==="clippingParents"?function(Jt){var di=Lt(Ir(Jt)),cr=["absolute","fixed"].indexOf(Li(Jt).position)>=0&&Ki(Jt)?uo(Jt):Jt;return Mn(cr)?di.filter(function(Gn){return Mn(Gn)&&Ho(Gn,cr)&&lr(Gn)!=="body"}):[]}(Vn):[].concat(Gr),ds=[].concat(Hr,[Gt]),fl=ds[0],si=ds.reduce(function(Jt,di){var cr=fi(Vn,di,wn);return Jt.top=wi(cr.top,Jt.top),Jt.right=qi(cr.right,Jt.right),Jt.bottom=qi(cr.bottom,Jt.bottom),Jt.left=wi(cr.left,Jt.left),Jt},fi(Vn,fl,wn));return si.width=si.right-si.left,si.height=si.bottom-si.top,si.x=si.left,si.y=si.top,si}(Mn(Rt)?Rt:Rt.contextElement||Vi($.elements.popper),Fe,We,Ee),tt=Dr($.elements.reference),gt=xa({reference:tt,element:Ct,placement:ae}),qt=ba(Object.assign({},Ct,gt)),Ut=St===Ti?qt:tt,an={top:$e.top-Ut.top+Qt.top,bottom:Ut.bottom-$e.bottom+Qt.bottom,left:$e.left-Ut.left+Qt.left,right:Ut.right-$e.right+Qt.right},Di=$.modifiersData.offset;if(St===Ti&&Di){var Qi=Di[ae];Object.keys(an).forEach(function(Vn){var Gr=[$n,Ei].indexOf(Vn)>=0?1:-1,Gt=[ei,Ei].indexOf(Vn)>=0?"y":"x";an[Vn]+=Qi[Gt]*Gr})}return an}function ih($,w){w===void 0&&(w={});var N=w,W=N.placement,ae=N.boundary,le=N.rootBoundary,Ee=N.padding,Me=N.flipVariations,Fe=N.allowedAutoPlacements,Ye=Fe===void 0?ns:Fe,We=ur(W),ze=We?Me?Ns:Ns.filter(function(Et){return ur(Et)===We}):Rr,St=ze.filter(function(Et){return Ye.indexOf(Et)>=0});St.length===0&&(St=ze);var dt=St.reduce(function(Et,ft){return Et[ft]=_a($,{placement:ft,boundary:ae,rootBoundary:le,padding:Ee})[zt(ft)],Et},{});return Object.keys(dt).sort(function(Et,ft){return dt[Et]-dt[ft]})}const Jl={name:"flip",enabled:!0,phase:"main",fn:function($){var w=$.state,N=$.options,W=$.name;if(!w.modifiersData[W]._skip){for(var ae=N.mainAxis,le=ae===void 0||ae,Ee=N.altAxis,Me=Ee===void 0||Ee,Fe=N.fallbackPlacements,Ye=N.padding,We=N.boundary,ze=N.rootBoundary,St=N.altBoundary,dt=N.flipVariations,Et=dt===void 0||dt,ft=N.allowedAutoPlacements,yt=w.options.placement,Qt=zt(yt),en=Fe||(Qt!==yt&&Et?function(Jt){if(zt(Jt)===Ql)return[];var di=fo(Jt);return[$s(Jt),di,$s(di)]}(yt):[fo(yt)]),Ct=[yt].concat(en).reduce(function(Jt,di){return Jt.concat(zt(di)===Ql?ih(w,{placement:di,boundary:We,rootBoundary:ze,padding:Ye,flipVariations:Et,allowedAutoPlacements:ft}):di)},[]),Rt=w.rects.reference,$e=w.rects.popper,tt=new Map,gt=!0,qt=Ct[0],Ut=0;Ut<Ct.length;Ut++){var an=Ct[Ut],Di=zt(an),Qi=ur(an)===ks,Vn=[ei,Ei].indexOf(Di)>=0,Gr=Vn?"width":"height",Gt=_a(w,{placement:an,boundary:We,rootBoundary:ze,altBoundary:St,padding:Ye}),wn=Vn?Qi?$n:On:Qi?Ei:ei;Rt[Gr]>$e[Gr]&&(wn=fo(wn));var Hr=fo(wn),ds=[];if(le&&ds.push(Gt[Di]<=0),Me&&ds.push(Gt[wn]<=0,Gt[Hr]<=0),ds.every(function(Jt){return Jt})){qt=an,gt=!1;break}tt.set(an,ds)}if(gt)for(var fl=function(Jt){var di=Ct.find(function(cr){var Gn=tt.get(cr);if(Gn)return Gn.slice(0,Jt).every(function(Rn){return Rn})});if(di)return qt=di,"break"},si=Et?3:1;si>0&&fl(si)!=="break";si--);w.placement!==qt&&(w.modifiersData[W]._skip=!0,w.placement=qt,w.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function eu($,w,N){return N===void 0&&(N={x:0,y:0}),{top:$.top-w.height-N.y,right:$.right-w.width+N.x,bottom:$.bottom-w.height+N.y,left:$.left-w.width-N.x}}function cc($){return[ei,$n,Ei,On].some(function(w){return $[w]>=0})}const mf={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function($){var w=$.state,N=$.name,W=w.rects.reference,ae=w.rects.popper,le=w.modifiersData.preventOverflow,Ee=_a(w,{elementContext:"reference"}),Me=_a(w,{altBoundary:!0}),Fe=eu(Ee,W),Ye=eu(Me,ae,le),We=cc(Fe),ze=cc(Ye);w.modifiersData[N]={referenceClippingOffsets:Fe,popperEscapeOffsets:Ye,isReferenceHidden:We,hasPopperEscaped:ze},w.attributes.popper=Object.assign({},w.attributes.popper,{"data-popper-reference-hidden":We,"data-popper-escaped":ze})}},pf={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function($){var w=$.state,N=$.options,W=$.name,ae=N.offset,le=ae===void 0?[0,0]:ae,Ee=ns.reduce(function(We,ze){return We[ze]=function(St,dt,Et){var ft=zt(St),yt=[On,ei].indexOf(ft)>=0?-1:1,Qt=typeof Et=="function"?Et(Object.assign({},dt,{placement:St})):Et,en=Qt[0],Ct=Qt[1];return en=en||0,Ct=(Ct||0)*yt,[On,$n].indexOf(ft)>=0?{x:Ct,y:en}:{x:en,y:Ct}}(ze,w.rects,le),We},{}),Me=Ee[w.placement],Fe=Me.x,Ye=Me.y;w.modifiersData.popperOffsets!=null&&(w.modifiersData.popperOffsets.x+=Fe,w.modifiersData.popperOffsets.y+=Ye),w.modifiersData[W]=Ee}},Vo={name:"popperOffsets",enabled:!0,phase:"read",fn:function($){var w=$.state,N=$.name;w.modifiersData[N]=xa({reference:w.rects.reference,element:w.rects.popper,placement:w.placement})},data:{}},gf={name:"preventOverflow",enabled:!0,phase:"main",fn:function($){var w=$.state,N=$.options,W=$.name,ae=N.mainAxis,le=ae===void 0||ae,Ee=N.altAxis,Me=Ee!==void 0&&Ee,Fe=N.boundary,Ye=N.rootBoundary,We=N.altBoundary,ze=N.padding,St=N.tether,dt=St===void 0||St,Et=N.tetherOffset,ft=Et===void 0?0:Et,yt=_a(w,{boundary:Fe,rootBoundary:Ye,padding:ze,altBoundary:We}),Qt=zt(w.placement),en=ur(w.placement),Ct=!en,Rt=pt(Qt),$e=Rt==="x"?"y":"x",tt=w.modifiersData.popperOffsets,gt=w.rects.reference,qt=w.rects.popper,Ut=typeof ft=="function"?ft(Object.assign({},w.rects,{placement:w.placement})):ft,an=typeof Ut=="number"?{mainAxis:Ut,altAxis:Ut}:Object.assign({mainAxis:0,altAxis:0},Ut),Di=w.modifiersData.offset?w.modifiersData.offset[w.placement]:null,Qi={x:0,y:0};if(tt){if(le){var Vn,Gr=Rt==="y"?ei:On,Gt=Rt==="y"?Ei:$n,wn=Rt==="y"?"height":"width",Hr=tt[Rt],ds=Hr+yt[Gr],fl=Hr-yt[Gt],si=dt?-qt[wn]/2:0,Jt=en===ks?gt[wn]:qt[wn],di=en===ks?-qt[wn]:-gt[wn],cr=w.elements.arrow,Gn=dt&&cr?Go(cr):{width:0,height:0},Rn=w.modifiersData["arrow#persistent"]?w.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},jf=Rn[Gr],vu=Rn[Gt],dl=ui(0,gt[wn],Gn[wn]),uh=Ct?gt[wn]/2-si-dl-jf-an.mainAxis:Jt-dl-jf-an.mainAxis,Ua=Ct?-gt[wn]/2+si+dl+vu+an.mainAxis:di+dl+vu+an.mainAxis,yu=w.elements.arrow&&uo(w.elements.arrow),ch=yu?Rt==="y"?yu.clientTop||0:yu.clientLeft||0:0,Bf=(Vn=Di?.[Rt])!=null?Vn:0,fp=Hr+Ua-Bf,fh=ui(dt?qi(ds,Hr+uh-Bf-ch):ds,Hr,dt?wi(fl,fp):fl);tt[Rt]=fh,Qi[Rt]=fh-Hr}if(Me){var dh,dp=Rt==="x"?ei:On,hp=Rt==="x"?Ei:$n,Eo=tt[$e],bu=$e==="y"?"height":"width",hh=Eo+yt[dp],mp=Eo-yt[hp],Ff=[ei,On].indexOf(Qt)!==-1,mh=(dh=Di?.[$e])!=null?dh:0,ph=Ff?hh:Eo-gt[bu]-qt[bu]-mh+an.altAxis,Uf=Ff?Eo+gt[bu]+qt[bu]-mh-an.altAxis:mp,gh=dt&&Ff?function(pp,gp,$f){var vh=ui(pp,gp,$f);return vh>$f?$f:vh}(ph,Eo,Uf):ui(dt?ph:hh,Eo,dt?Uf:mp);tt[$e]=gh,Qi[$e]=gh-Eo}w.modifiersData[W]=Qi}},requiresIfExists:["offset"]};function xr($,w,N){N===void 0&&(N=!1);var W,ae,le=Ki(w),Ee=Ki(w)&&function(ze){var St=ze.getBoundingClientRect(),dt=Pr(St.width)/ze.offsetWidth||1,Et=Pr(St.height)/ze.offsetHeight||1;return dt!==1||Et!==1}(w),Me=Vi(w),Fe=Dr($,Ee,N),Ye={scrollLeft:0,scrollTop:0},We={x:0,y:0};return(le||!le&&!N)&&((lr(w)!=="body"||uc(Me))&&(Ye=(W=w)!==Xt(W)&&Ki(W)?{scrollLeft:(ae=W).scrollLeft,scrollTop:ae.scrollTop}:ya(W)),Ki(w)?((We=Dr(w,!0)).x+=w.clientLeft,We.y+=w.clientTop):Me&&(We.x=ss(Me))),{x:Fe.left+Ye.scrollLeft-We.x,y:Fe.top+Ye.scrollTop-We.y,width:Fe.width,height:Fe.height}}function rh($){var w=new Map,N=new Set,W=[];function ae(le){N.add(le.name),[].concat(le.requires||[],le.requiresIfExists||[]).forEach(function(Ee){if(!N.has(Ee)){var Me=w.get(Ee);Me&&ae(Me)}}),W.push(le)}return $.forEach(function(le){w.set(le.name,le)}),$.forEach(function(le){N.has(le.name)||ae(le)}),W}var fc={placement:"bottom",modifiers:[],strategy:"absolute"};function as(){for(var $=arguments.length,w=new Array($),N=0;N<$;N++)w[N]=arguments[N];return!w.some(function(W){return!(W&&typeof W.getBoundingClientRect=="function")})}function Yo($){$===void 0&&($={});var w=$,N=w.defaultModifiers,W=N===void 0?[]:N,ae=w.defaultOptions,le=ae===void 0?fc:ae;return function(Ee,Me,Fe){Fe===void 0&&(Fe=le);var Ye,We,ze={placement:"bottom",orderedModifiers:[],options:Object.assign({},fc,le),modifiersData:{},elements:{reference:Ee,popper:Me},attributes:{},styles:{}},St=[],dt=!1,Et={state:ze,setOptions:function(yt){var Qt=typeof yt=="function"?yt(ze.options):yt;ft(),ze.options=Object.assign({},le,ze.options,Qt),ze.scrollParents={reference:Mn(Ee)?Lt(Ee):Ee.contextElement?Lt(Ee.contextElement):[],popper:Lt(Me)};var en,Ct,Rt=function($e){var tt=rh($e);return sn.reduce(function(gt,qt){return gt.concat(tt.filter(function(Ut){return Ut.phase===qt}))},[])}((en=[].concat(W,ze.options.modifiers),Ct=en.reduce(function($e,tt){var gt=$e[tt.name];return $e[tt.name]=gt?Object.assign({},gt,tt,{options:Object.assign({},gt.options,tt.options),data:Object.assign({},gt.data,tt.data)}):tt,$e},{}),Object.keys(Ct).map(function($e){return Ct[$e]})));return ze.orderedModifiers=Rt.filter(function($e){return $e.enabled}),ze.orderedModifiers.forEach(function($e){var tt=$e.name,gt=$e.options,qt=gt===void 0?{}:gt,Ut=$e.effect;if(typeof Ut=="function"){var an=Ut({state:ze,name:tt,instance:Et,options:qt});St.push(an||function(){})}}),Et.update()},forceUpdate:function(){if(!dt){var yt=ze.elements,Qt=yt.reference,en=yt.popper;if(as(Qt,en)){ze.rects={reference:xr(Qt,uo(en),ze.options.strategy==="fixed"),popper:Go(en)},ze.reset=!1,ze.placement=ze.options.placement,ze.orderedModifiers.forEach(function(Ut){return ze.modifiersData[Ut.name]=Object.assign({},Ut.data)});for(var Ct=0;Ct<ze.orderedModifiers.length;Ct++)if(ze.reset!==!0){var Rt=ze.orderedModifiers[Ct],$e=Rt.fn,tt=Rt.options,gt=tt===void 0?{}:tt,qt=Rt.name;typeof $e=="function"&&(ze=$e({state:ze,options:gt,name:qt,instance:Et})||ze)}else ze.reset=!1,Ct=-1}}},update:(Ye=function(){return new Promise(function(yt){Et.forceUpdate(),yt(ze)})},function(){return We||(We=new Promise(function(yt){Promise.resolve().then(function(){We=void 0,yt(Ye())})})),We}),destroy:function(){ft(),dt=!0}};if(!as(Ee,Me))return Et;function ft(){St.forEach(function(yt){return yt()}),St=[]}return Et.setOptions(Fe).then(function(yt){!dt&&Fe.onFirstUpdate&&Fe.onFirstUpdate(yt)}),Et}}var tu=Yo(),dc=Yo({defaultModifiers:[Tn,Vo,Us,Ai]}),hc=Yo({defaultModifiers:[Tn,Vo,Us,Ai,pf,Jl,gf,co,mf]});const mc=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Bs,afterRead:Nt,afterWrite:At,applyStyles:Ai,arrow:co,auto:Ql,basePlacements:Rr,beforeMain:rn,beforeRead:zo,beforeWrite:pa,bottom:Ei,clippingParents:$o,computeStyles:Us,createPopper:hc,createPopperBase:tu,createPopperLite:dc,detectOverflow:_a,end:so,eventListeners:Tn,flip:Jl,hide:mf,left:On,main:ti,modifierPhases:sn,offset:pf,placements:ns,popper:Ti,popperGenerator:Yo,popperOffsets:Vo,preventOverflow:gf,read:js,reference:oo,right:$n,start:ks,top:ei,variationPlacements:Ns,viewport:ao,write:ga},Symbol.toStringTag,{value:"Module"})),nu="dropdown",Sa=".bs.dropdown",pc=".data-api",gc="ArrowUp",vf="ArrowDown",yf=`hide${Sa}`,bf=`hidden${Sa}`,iu=`show${Sa}`,Ea=`shown${Sa}`,xf=`click${Sa}${pc}`,zs=`keydown${Sa}${pc}`,ni=`keyup${Sa}${pc}`,Ta="show",os='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',_f=`${os}.${Ta}`,Aa=".dropdown-menu",ru=C()?"top-end":"top-start",Sf=C()?"top-start":"top-end",ho=C()?"bottom-end":"bottom-start",Ef=C()?"bottom-start":"bottom-end",sh=C()?"left-start":"right-start",_r=C()?"right-start":"left-start",wa={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Tf={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class yn extends Ve{constructor(w,N){super(w,N),this._popper=null,this._parent=this._element.parentNode,this._menu=fe.next(this._element,Aa)[0]||fe.prev(this._element,Aa)[0]||fe.findOne(Aa,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return wa}static get DefaultType(){return Tf}static get NAME(){return nu}toggle(){return this._isShown()?this.hide():this.show()}show(){if(p(this._element)||this._isShown())return;const w={relatedTarget:this._element};if(!Y.trigger(this._element,iu,w).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const N of[].concat(...document.body.children))Y.on(N,"mouseover",x);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ta),this._element.classList.add(Ta),Y.trigger(this._element,Ea,w)}}hide(){if(p(this._element)||!this._isShown())return;const w={relatedTarget:this._element};this._completeHide(w)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(w){if(!Y.trigger(this._element,yf,w).defaultPrevented){if("ontouchstart"in document.documentElement)for(const N of[].concat(...document.body.children))Y.off(N,"mouseover",x);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ta),this._element.classList.remove(Ta),this._element.setAttribute("aria-expanded","false"),Le.removeDataAttribute(this._menu,"popper"),Y.trigger(this._element,bf,w)}}_getConfig(w){if(typeof(w=super._getConfig(w)).reference=="object"&&!f(w.reference)&&typeof w.reference.getBoundingClientRect!="function")throw new TypeError(`${nu.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return w}_createPopper(){if(mc===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let w=this._element;this._config.reference==="parent"?w=this._parent:f(this._config.reference)?w=c(this._config.reference):typeof this._config.reference=="object"&&(w=this._config.reference);const N=this._getPopperConfig();this._popper=hc(w,this._menu,N)}_isShown(){return this._menu.classList.contains(Ta)}_getPlacement(){const w=this._parent;if(w.classList.contains("dropend"))return sh;if(w.classList.contains("dropstart"))return _r;if(w.classList.contains("dropup-center"))return"top";if(w.classList.contains("dropdown-center"))return"bottom";const N=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return w.classList.contains("dropup")?N?Sf:ru:N?Ef:ho}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:w}=this._config;return typeof w=="string"?w.split(",").map(N=>Number.parseInt(N,10)):typeof w=="function"?N=>w(N,this._element):w}_getPopperConfig(){const w={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Le.setDataAttribute(this._menu,"popper","static"),w.modifiers=[{name:"applyStyles",enabled:!1}]),{...w,...P(this._config.popperConfig,[void 0,w])}}_selectMenuItem({key:w,target:N}){const W=fe.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(ae=>h(ae));W.length&&k(W,N,w===vf,!W.includes(N)).focus()}static jQueryInterface(w){return this.each(function(){const N=yn.getOrCreateInstance(this,w);if(typeof w=="string"){if(N[w]===void 0)throw new TypeError(`No method named "${w}"`);N[w]()}})}static clearMenus(w){if(w.button===2||w.type==="keyup"&&w.key!=="Tab")return;const N=fe.find(_f);for(const W of N){const ae=yn.getInstance(W);if(!ae||ae._config.autoClose===!1)continue;const le=w.composedPath(),Ee=le.includes(ae._menu);if(le.includes(ae._element)||ae._config.autoClose==="inside"&&!Ee||ae._config.autoClose==="outside"&&Ee||ae._menu.contains(w.target)&&(w.type==="keyup"&&w.key==="Tab"||/input|select|option|textarea|form/i.test(w.target.tagName)))continue;const Me={relatedTarget:ae._element};w.type==="click"&&(Me.clickEvent=w),ae._completeHide(Me)}}static dataApiKeydownHandler(w){const N=/input|textarea/i.test(w.target.tagName),W=w.key==="Escape",ae=[gc,vf].includes(w.key);if(!ae&&!W||N&&!W)return;w.preventDefault();const le=this.matches(os)?this:fe.prev(this,os)[0]||fe.next(this,os)[0]||fe.findOne(os,w.delegateTarget.parentNode),Ee=yn.getOrCreateInstance(le);if(ae)return w.stopPropagation(),Ee.show(),void Ee._selectMenuItem(w);Ee._isShown()&&(w.stopPropagation(),Ee.hide(),le.focus())}}Y.on(document,zs,os,yn.dataApiKeydownHandler),Y.on(document,zs,Aa,yn.dataApiKeydownHandler),Y.on(document,xf,yn.clearMenus),Y.on(document,ni,yn.clearMenus),Y.on(document,xf,os,function($){$.preventDefault(),yn.getOrCreateInstance(this).toggle()}),I(yn);const mo="backdrop",La="show",Wo=`mousedown.bs.${mo}`,po={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},vc={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ca extends Ae{constructor(w){super(),this._config=this._getConfig(w),this._isAppended=!1,this._element=null}static get Default(){return po}static get DefaultType(){return vc}static get NAME(){return mo}show(w){if(!this._config.isVisible)return void P(w);this._append();const N=this._getElement();this._config.isAnimated&&b(N),N.classList.add(La),this._emulateAnimation(()=>{P(w)})}hide(w){this._config.isVisible?(this._getElement().classList.remove(La),this._emulateAnimation(()=>{this.dispose(),P(w)})):P(w)}dispose(){this._isAppended&&(Y.off(this._element,Wo),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const w=document.createElement("div");w.className=this._config.className,this._config.isAnimated&&w.classList.add("fade"),this._element=w}return this._element}_configAfterMerge(w){return w.rootElement=c(w.rootElement),w}_append(){if(this._isAppended)return;const w=this._getElement();this._config.rootElement.append(w),Y.on(w,Wo,()=>{P(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(w){M(w,this._getElement(),this._config.isAnimated)}}const go=".bs.focustrap",ls=`focusin${go}`,Zo=`keydown.tab${go}`,yc="backward",bc={autofocus:!0,trapElement:null},ah={autofocus:"boolean",trapElement:"element"};class jr extends Ae{constructor(w){super(),this._config=this._getConfig(w),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return bc}static get DefaultType(){return ah}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Y.off(document,go),Y.on(document,ls,w=>this._handleFocusin(w)),Y.on(document,Zo,w=>this._handleKeydown(w)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Y.off(document,go))}_handleFocusin(w){const{trapElement:N}=this._config;if(w.target===document||w.target===N||N.contains(w.target))return;const W=fe.focusableChildren(N);W.length===0?N.focus():this._lastTabNavDirection===yc?W[W.length-1].focus():W[0].focus()}_handleKeydown(w){w.key==="Tab"&&(this._lastTabNavDirection=w.shiftKey?yc:"forward")}}const Af=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Oa=".sticky-top",ii="padding-right",Ci="margin-right";class Ra{constructor(){this._element=document.body}getWidth(){const w=document.documentElement.clientWidth;return Math.abs(window.innerWidth-w)}hide(){const w=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ii,N=>N+w),this._setElementAttributes(Af,ii,N=>N+w),this._setElementAttributes(Oa,Ci,N=>N-w)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ii),this._resetElementAttributes(Af,ii),this._resetElementAttributes(Oa,Ci)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(w,N,W){const ae=this.getWidth();this._applyManipulationCallback(w,le=>{if(le!==this._element&&window.innerWidth>le.clientWidth+ae)return;this._saveInitialAttribute(le,N);const Ee=window.getComputedStyle(le).getPropertyValue(N);le.style.setProperty(N,`${W(Number.parseFloat(Ee))}px`)})}_saveInitialAttribute(w,N){const W=w.style.getPropertyValue(N);W&&Le.setDataAttribute(w,N,W)}_resetElementAttributes(w,N){this._applyManipulationCallback(w,W=>{const ae=Le.getDataAttribute(W,N);ae!==null?(Le.removeDataAttribute(W,N),W.style.setProperty(N,ae)):W.style.removeProperty(N)})}_applyManipulationCallback(w,N){if(f(w))N(w);else for(const W of fe.find(w,this._element))N(W)}}const Oi=".bs.modal",su=`hide${Oi}`,Xo=`hidePrevented${Oi}`,vo=`hidden${Oi}`,Qo=`show${Oi}`,Sr=`shown${Oi}`,yo=`resize${Oi}`,Pa=`click.dismiss${Oi}`,au=`mousedown.dismiss${Oi}`,wf=`keydown.dismiss${Oi}`,Br=`click${Oi}.data-api`,Da="modal-open",Jo="show",ou="modal-static",Gs={backdrop:!0,focus:!0,keyboard:!0},Lf={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Wn extends Ve{constructor(w,N){super(w,N),this._dialog=fe.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ra,this._addEventListeners()}static get Default(){return Gs}static get DefaultType(){return Lf}static get NAME(){return"modal"}toggle(w){return this._isShown?this.hide():this.show(w)}show(w){this._isShown||this._isTransitioning||Y.trigger(this._element,Qo,{relatedTarget:w}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Da),this._adjustDialog(),this._backdrop.show(()=>this._showElement(w)))}hide(){this._isShown&&!this._isTransitioning&&(Y.trigger(this._element,su).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Jo),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){Y.off(window,Oi),Y.off(this._dialog,Oi),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ca({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new jr({trapElement:this._element})}_showElement(w){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const N=fe.findOne(".modal-body",this._dialog);N&&(N.scrollTop=0),b(this._element),this._element.classList.add(Jo),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Y.trigger(this._element,Sr,{relatedTarget:w})},this._dialog,this._isAnimated())}_addEventListeners(){Y.on(this._element,wf,w=>{w.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),Y.on(window,yo,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Y.on(this._element,au,w=>{Y.one(this._element,Pa,N=>{this._element===w.target&&this._element===N.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Da),this._resetAdjustments(),this._scrollBar.reset(),Y.trigger(this._element,vo)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Y.trigger(this._element,Xo).defaultPrevented)return;const w=this._element.scrollHeight>document.documentElement.clientHeight,N=this._element.style.overflowY;N==="hidden"||this._element.classList.contains(ou)||(w||(this._element.style.overflowY="hidden"),this._element.classList.add(ou),this._queueCallback(()=>{this._element.classList.remove(ou),this._queueCallback(()=>{this._element.style.overflowY=N},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const w=this._element.scrollHeight>document.documentElement.clientHeight,N=this._scrollBar.getWidth(),W=N>0;if(W&&!w){const ae=C()?"paddingLeft":"paddingRight";this._element.style[ae]=`${N}px`}if(!W&&w){const ae=C()?"paddingRight":"paddingLeft";this._element.style[ae]=`${N}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(w,N){return this.each(function(){const W=Wn.getOrCreateInstance(this,w);if(typeof w=="string"){if(W[w]===void 0)throw new TypeError(`No method named "${w}"`);W[w](N)}})}}Y.on(document,Br,'[data-bs-toggle="modal"]',function($){const w=fe.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&$.preventDefault(),Y.one(w,Qo,W=>{W.defaultPrevented||Y.one(w,vo,()=>{h(this)&&this.focus()})});const N=fe.findOne(".modal.show");N&&Wn.getInstance(N).hide(),Wn.getOrCreateInstance(w).toggle(this)}),je(Wn),I(Wn);const Yi=".bs.offcanvas",Cf=".data-api",lu=`load${Yi}${Cf}`,Of="show",uu="showing",xc="hiding",Hs=".offcanvas.show",Er=`show${Yi}`,Ia=`shown${Yi}`,Wi=`hide${Yi}`,Ri=`hidePrevented${Yi}`,Ma=`hidden${Yi}`,Tr=`resize${Yi}`,el=`click${Yi}${Cf}`,tl=`keydown.dismiss${Yi}`,ka={backdrop:!0,keyboard:!0,scroll:!1},bo={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Zi extends Ve{constructor(w,N){super(w,N),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return ka}static get DefaultType(){return bo}static get NAME(){return"offcanvas"}toggle(w){return this._isShown?this.hide():this.show(w)}show(w){this._isShown||Y.trigger(this._element,Er,{relatedTarget:w}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ra().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(uu),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Of),this._element.classList.remove(uu),Y.trigger(this._element,Ia,{relatedTarget:w})},this._element,!0))}hide(){this._isShown&&(Y.trigger(this._element,Wi).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(xc),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Of,xc),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ra().reset(),Y.trigger(this._element,Ma)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const w=!!this._config.backdrop;return new Ca({className:"offcanvas-backdrop",isVisible:w,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:w?()=>{this._config.backdrop!=="static"?this.hide():Y.trigger(this._element,Ri)}:null})}_initializeFocusTrap(){return new jr({trapElement:this._element})}_addEventListeners(){Y.on(this._element,tl,w=>{w.key==="Escape"&&(this._config.keyboard?this.hide():Y.trigger(this._element,Ri))})}static jQueryInterface(w){return this.each(function(){const N=Zi.getOrCreateInstance(this,w);if(typeof w=="string"){if(N[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);N[w](this)}})}}Y.on(document,el,'[data-bs-toggle="offcanvas"]',function($){const w=fe.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&$.preventDefault(),p(this))return;Y.one(w,Ma,()=>{h(this)&&this.focus()});const N=fe.findOne(Hs);N&&N!==w&&Zi.getInstance(N).hide(),Zi.getOrCreateInstance(w).toggle(this)}),Y.on(window,lu,()=>{for(const $ of fe.find(Hs))Zi.getOrCreateInstance($).show()}),Y.on(window,Tr,()=>{for(const $ of fe.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle($).position!=="fixed"&&Zi.getOrCreateInstance($).hide()}),je(Zi),I(Zi);const us={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Na=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Rf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Xi=($,w)=>{const N=$.nodeName.toLowerCase();return w.includes(N)?!Na.has(N)||!!Rf.test($.nodeValue):w.filter(W=>W instanceof RegExp).some(W=>W.test(N))},cu={allowList:us,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Fr={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},_c={entry:"(string|element|function|null)",selector:"(string|element)"};class nl extends Ae{constructor(w){super(),this._config=this._getConfig(w)}static get Default(){return cu}static get DefaultType(){return Fr}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(w=>this._resolvePossibleFunction(w)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(w){return this._checkContent(w),this._config.content={...this._config.content,...w},this}toHtml(){const w=document.createElement("div");w.innerHTML=this._maybeSanitize(this._config.template);for(const[ae,le]of Object.entries(this._config.content))this._setContent(w,le,ae);const N=w.children[0],W=this._resolvePossibleFunction(this._config.extraClass);return W&&N.classList.add(...W.split(" ")),N}_typeCheckConfig(w){super._typeCheckConfig(w),this._checkContent(w.content)}_checkContent(w){for(const[N,W]of Object.entries(w))super._typeCheckConfig({selector:N,entry:W},_c)}_setContent(w,N,W){const ae=fe.findOne(W,w);ae&&((N=this._resolvePossibleFunction(N))?f(N)?this._putElementInTemplate(c(N),ae):this._config.html?ae.innerHTML=this._maybeSanitize(N):ae.textContent=N:ae.remove())}_maybeSanitize(w){return this._config.sanitize?function(N,W,ae){if(!N.length)return N;if(ae&&typeof ae=="function")return ae(N);const le=new window.DOMParser().parseFromString(N,"text/html"),Ee=[].concat(...le.body.querySelectorAll("*"));for(const Me of Ee){const Fe=Me.nodeName.toLowerCase();if(!Object.keys(W).includes(Fe)){Me.remove();continue}const Ye=[].concat(...Me.attributes),We=[].concat(W["*"]||[],W[Fe]||[]);for(const ze of Ye)Xi(ze,We)||Me.removeAttribute(ze.nodeName)}return le.body.innerHTML}(w,this._config.allowList,this._config.sanitizeFn):w}_resolvePossibleFunction(w){return P(w,[void 0,this])}_putElementInTemplate(w,N){if(this._config.html)return N.innerHTML="",void N.append(w);N.textContent=w.textContent}}const Ks=new Set(["sanitize","allowList","sanitizeFn"]),il="fade",ja="show",Ba=".tooltip-inner",Fa=".modal",d="hide.bs.modal",v="hover",_="focus",D="click",j={AUTO:"auto",TOP:"top",RIGHT:C()?"left":"right",BOTTOM:"bottom",LEFT:C()?"right":"left"},H={allowList:us,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},ee={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ue extends Ve{constructor(w,N){if(mc===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(w,N),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return H}static get DefaultType(){return ee}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),Y.off(this._element.closest(Fa),d,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const w=Y.trigger(this._element,this.constructor.eventName("show")),N=(g(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(w.defaultPrevented||!N)return;this._disposePopper();const W=this._getTipElement();this._element.setAttribute("aria-describedby",W.getAttribute("id"));const{container:ae}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(ae.append(W),Y.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(W),W.classList.add(ja),"ontouchstart"in document.documentElement)for(const le of[].concat(...document.body.children))Y.on(le,"mouseover",x);this._queueCallback(()=>{Y.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!Y.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(ja),"ontouchstart"in document.documentElement)for(const w of[].concat(...document.body.children))Y.off(w,"mouseover",x);this._activeTrigger[D]=!1,this._activeTrigger[_]=!1,this._activeTrigger[v]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Y.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(w){const N=this._getTemplateFactory(w).toHtml();if(!N)return null;N.classList.remove(il,ja),N.classList.add(`bs-${this.constructor.NAME}-auto`);const W=(ae=>{do ae+=Math.floor(1e6*Math.random());while(document.getElementById(ae));return ae})(this.constructor.NAME).toString();return N.setAttribute("id",W),this._isAnimated()&&N.classList.add(il),N}setContent(w){this._newContent=w,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(w){return this._templateFactory?this._templateFactory.changeContent(w):this._templateFactory=new nl({...this._config,content:w,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Ba]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(w){return this.constructor.getOrCreateInstance(w.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(il)}_isShown(){return this.tip&&this.tip.classList.contains(ja)}_createPopper(w){const N=P(this._config.placement,[this,w,this._element]),W=j[N.toUpperCase()];return hc(this._element,w,this._getPopperConfig(W))}_getOffset(){const{offset:w}=this._config;return typeof w=="string"?w.split(",").map(N=>Number.parseInt(N,10)):typeof w=="function"?N=>w(N,this._element):w}_resolvePossibleFunction(w){return P(w,[this._element,this._element])}_getPopperConfig(w){const N={placement:w,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:W=>{this._getTipElement().setAttribute("data-popper-placement",W.state.placement)}}]};return{...N,...P(this._config.popperConfig,[void 0,N])}}_setListeners(){const w=this._config.trigger.split(" ");for(const N of w)if(N==="click")Y.on(this._element,this.constructor.eventName("click"),this._config.selector,W=>{const ae=this._initializeOnDelegatedTarget(W);ae._activeTrigger[D]=!(ae._isShown()&&ae._activeTrigger[D]),ae.toggle()});else if(N!=="manual"){const W=N===v?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),ae=N===v?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");Y.on(this._element,W,this._config.selector,le=>{const Ee=this._initializeOnDelegatedTarget(le);Ee._activeTrigger[le.type==="focusin"?_:v]=!0,Ee._enter()}),Y.on(this._element,ae,this._config.selector,le=>{const Ee=this._initializeOnDelegatedTarget(le);Ee._activeTrigger[le.type==="focusout"?_:v]=Ee._element.contains(le.relatedTarget),Ee._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Y.on(this._element.closest(Fa),d,this._hideModalHandler)}_fixTitle(){const w=this._element.getAttribute("title");w&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",w),this._element.setAttribute("data-bs-original-title",w),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(w,N){clearTimeout(this._timeout),this._timeout=setTimeout(w,N)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(w){const N=Le.getDataAttributes(this._element);for(const W of Object.keys(N))Ks.has(W)&&delete N[W];return w={...N,...typeof w=="object"&&w?w:{}},w=this._mergeConfigObj(w),w=this._configAfterMerge(w),this._typeCheckConfig(w),w}_configAfterMerge(w){return w.container=w.container===!1?document.body:c(w.container),typeof w.delay=="number"&&(w.delay={show:w.delay,hide:w.delay}),typeof w.title=="number"&&(w.title=w.title.toString()),typeof w.content=="number"&&(w.content=w.content.toString()),w}_getDelegateConfig(){const w={};for(const[N,W]of Object.entries(this._config))this.constructor.Default[N]!==W&&(w[N]=W);return w.selector=!1,w.trigger="manual",w}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(w){return this.each(function(){const N=ue.getOrCreateInstance(this,w);if(typeof w=="string"){if(N[w]===void 0)throw new TypeError(`No method named "${w}"`);N[w]()}})}}I(ue);const _e=".popover-header",Ne=".popover-body",He={...ue.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ze={...ue.DefaultType,content:"(null|string|element|function)"};class Xe extends ue{static get Default(){return He}static get DefaultType(){return Ze}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[_e]:this._getTitle(),[Ne]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(w){return this.each(function(){const N=Xe.getOrCreateInstance(this,w);if(typeof w=="string"){if(N[w]===void 0)throw new TypeError(`No method named "${w}"`);N[w]()}})}}I(Xe);const ht=".bs.scrollspy",dn=`activate${ht}`,An=`click${ht}`,ri=`load${ht}.data-api`,Zn="active",fu="[href]",Sc=".nav-link",rl=`${Sc}, .nav-item > ${Sc}, .list-group-item`,xo={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Pf={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Ur extends Ve{constructor(w,N){super(w,N),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return xo}static get DefaultType(){return Pf}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const w of this._observableSections.values())this._observer.observe(w)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(w){return w.target=c(w.target)||document.body,w.rootMargin=w.offset?`${w.offset}px 0px -30%`:w.rootMargin,typeof w.threshold=="string"&&(w.threshold=w.threshold.split(",").map(N=>Number.parseFloat(N))),w}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Y.off(this._config.target,An),Y.on(this._config.target,An,fu,w=>{const N=this._observableSections.get(w.target.hash);if(N){w.preventDefault();const W=this._rootElement||window,ae=N.offsetTop-this._element.offsetTop;if(W.scrollTo)return void W.scrollTo({top:ae,behavior:"smooth"});W.scrollTop=ae}}))}_getNewObserver(){const w={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(N=>this._observerCallback(N),w)}_observerCallback(w){const N=Ee=>this._targetLinks.get(`#${Ee.target.id}`),W=Ee=>{this._previousScrollData.visibleEntryTop=Ee.target.offsetTop,this._process(N(Ee))},ae=(this._rootElement||document.documentElement).scrollTop,le=ae>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=ae;for(const Ee of w){if(!Ee.isIntersecting){this._activeTarget=null,this._clearActiveClass(N(Ee));continue}const Me=Ee.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(le&&Me){if(W(Ee),!ae)return}else le||Me||W(Ee)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const w=fe.find(fu,this._config.target);for(const N of w){if(!N.hash||p(N))continue;const W=fe.findOne(decodeURI(N.hash),this._element);h(W)&&(this._targetLinks.set(decodeURI(N.hash),N),this._observableSections.set(N.hash,W))}}_process(w){this._activeTarget!==w&&(this._clearActiveClass(this._config.target),this._activeTarget=w,w.classList.add(Zn),this._activateParents(w),Y.trigger(this._element,dn,{relatedTarget:w}))}_activateParents(w){if(w.classList.contains("dropdown-item"))fe.findOne(".dropdown-toggle",w.closest(".dropdown")).classList.add(Zn);else for(const N of fe.parents(w,".nav, .list-group"))for(const W of fe.prev(N,rl))W.classList.add(Zn)}_clearActiveClass(w){w.classList.remove(Zn);const N=fe.find(`${fu}.${Zn}`,w);for(const W of N)W.classList.remove(Zn)}static jQueryInterface(w){return this.each(function(){const N=Ur.getOrCreateInstance(this,w);if(typeof w=="string"){if(N[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);N[w]()}})}}Y.on(window,ri,()=>{for(const $ of fe.find('[data-bs-spy="scroll"]'))Ur.getOrCreateInstance($)}),I(Ur);const Vt=".bs.tab",$r=`hide${Vt}`,cs=`hidden${Vt}`,qs=`show${Vt}`,fs=`shown${Vt}`,sl=`click${Vt}`,du=`keydown${Vt}`,al=`load${Vt}`,Df="ArrowLeft",_o="ArrowRight",Pi="ArrowUp",Ec="ArrowDown",If="Home",sp="End",ol="active",ap="fade",zn="show",Mf=".dropdown-toggle",ll=`:not(${Mf})`,hu='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Tc=`.nav-link${ll}, .list-group-item${ll}, [role="tab"]${ll}, ${hu}`,mu=`.${ol}[data-bs-toggle="tab"], .${ol}[data-bs-toggle="pill"], .${ol}[data-bs-toggle="list"]`;class zr extends Ve{constructor(w){super(w),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Y.on(this._element,du,N=>this._keydown(N)))}static get NAME(){return"tab"}show(){const w=this._element;if(this._elemIsActive(w))return;const N=this._getActiveElem(),W=N?Y.trigger(N,$r,{relatedTarget:w}):null;Y.trigger(w,qs,{relatedTarget:N}).defaultPrevented||W&&W.defaultPrevented||(this._deactivate(N,w),this._activate(w,N))}_activate(w,N){w&&(w.classList.add(ol),this._activate(fe.getElementFromSelector(w)),this._queueCallback(()=>{w.getAttribute("role")==="tab"?(w.removeAttribute("tabindex"),w.setAttribute("aria-selected",!0),this._toggleDropDown(w,!0),Y.trigger(w,fs,{relatedTarget:N})):w.classList.add(zn)},w,w.classList.contains(ap)))}_deactivate(w,N){w&&(w.classList.remove(ol),w.blur(),this._deactivate(fe.getElementFromSelector(w)),this._queueCallback(()=>{w.getAttribute("role")==="tab"?(w.setAttribute("aria-selected",!1),w.setAttribute("tabindex","-1"),this._toggleDropDown(w,!1),Y.trigger(w,cs,{relatedTarget:N})):w.classList.remove(zn)},w,w.classList.contains(ap)))}_keydown(w){if(![Df,_o,Pi,Ec,If,sp].includes(w.key))return;w.stopPropagation(),w.preventDefault();const N=this._getChildren().filter(ae=>!p(ae));let W;if([If,sp].includes(w.key))W=N[w.key===If?0:N.length-1];else{const ae=[_o,Ec].includes(w.key);W=k(N,w.target,ae,!0)}W&&(W.focus({preventScroll:!0}),zr.getOrCreateInstance(W).show())}_getChildren(){return fe.find(Tc,this._parent)}_getActiveElem(){return this._getChildren().find(w=>this._elemIsActive(w))||null}_setInitialAttributes(w,N){this._setAttributeIfNotExists(w,"role","tablist");for(const W of N)this._setInitialAttributesOnChild(W)}_setInitialAttributesOnChild(w){w=this._getInnerElement(w);const N=this._elemIsActive(w),W=this._getOuterElement(w);w.setAttribute("aria-selected",N),W!==w&&this._setAttributeIfNotExists(W,"role","presentation"),N||w.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(w,"role","tab"),this._setInitialAttributesOnTargetPanel(w)}_setInitialAttributesOnTargetPanel(w){const N=fe.getElementFromSelector(w);N&&(this._setAttributeIfNotExists(N,"role","tabpanel"),w.id&&this._setAttributeIfNotExists(N,"aria-labelledby",`${w.id}`))}_toggleDropDown(w,N){const W=this._getOuterElement(w);if(!W.classList.contains("dropdown"))return;const ae=(le,Ee)=>{const Me=fe.findOne(le,W);Me&&Me.classList.toggle(Ee,N)};ae(Mf,ol),ae(".dropdown-menu",zn),W.setAttribute("aria-expanded",N)}_setAttributeIfNotExists(w,N,W){w.hasAttribute(N)||w.setAttribute(N,W)}_elemIsActive(w){return w.classList.contains(ol)}_getInnerElement(w){return w.matches(Tc)?w:fe.findOne(Tc,w)}_getOuterElement(w){return w.closest(".nav-item, .list-group-item")||w}static jQueryInterface(w){return this.each(function(){const N=zr.getOrCreateInstance(this);if(typeof w=="string"){if(N[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);N[w]()}})}}Y.on(document,sl,hu,function($){["A","AREA"].includes(this.tagName)&&$.preventDefault(),p(this)||zr.getOrCreateInstance(this).show()}),Y.on(window,al,()=>{for(const $ of fe.find(mu))zr.getOrCreateInstance($)}),I(zr);const So=".bs.toast",op=`mouseover${So}`,G0=`mouseout${So}`,lp=`focusin${So}`,ul=`focusout${So}`,oh=`hide${So}`,kf=`hidden${So}`,up=`show${So}`,Ac=`shown${So}`,lh="hide",cl="show",pu="showing",cp={animation:"boolean",autohide:"boolean",delay:"number"},Nf={animation:!0,autohide:!0,delay:5e3};class gu extends Ve{constructor(w,N){super(w,N),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Nf}static get DefaultType(){return cp}static get NAME(){return"toast"}show(){Y.trigger(this._element,up).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(lh),b(this._element),this._element.classList.add(cl,pu),this._queueCallback(()=>{this._element.classList.remove(pu),Y.trigger(this._element,Ac),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(Y.trigger(this._element,oh).defaultPrevented||(this._element.classList.add(pu),this._queueCallback(()=>{this._element.classList.add(lh),this._element.classList.remove(pu,cl),Y.trigger(this._element,kf)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(cl),super.dispose()}isShown(){return this._element.classList.contains(cl)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(w,N){switch(w.type){case"mouseover":case"mouseout":this._hasMouseInteraction=N;break;case"focusin":case"focusout":this._hasKeyboardInteraction=N}if(N)return void this._clearTimeout();const W=w.relatedTarget;this._element===W||this._element.contains(W)||this._maybeScheduleHide()}_setListeners(){Y.on(this._element,op,w=>this._onInteraction(w,!0)),Y.on(this._element,G0,w=>this._onInteraction(w,!1)),Y.on(this._element,lp,w=>this._onInteraction(w,!0)),Y.on(this._element,ul,w=>this._onInteraction(w,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(w){return this.each(function(){const N=gu.getOrCreateInstance(this,w);if(typeof w=="string"){if(N[w]===void 0)throw new TypeError(`No method named "${w}"`);N[w](this)}})}}return je(gu),I(gu),{Alert:ct,Button:we,Carousel:Hi,Collapse:vn,Dropdown:yn,Modal:Wn,Offcanvas:Zi,Popover:Xe,ScrollSpy:Ur,Tab:zr,Toast:gu,Tooltip:ue}})}(Yg)),Yg.exports}Qae();var fm={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Jae=fm.exports,WD;function eoe(){return WD||(WD=1,function(t,e){(function(n,i){i(e)})(Jae,function(n){var i="1.9.4";function r(d){var v,_,D,j;for(_=1,D=arguments.length;_<D;_++){j=arguments[_];for(v in j)d[v]=j[v]}return d}var s=Object.create||function(){function d(){}return function(v){return d.prototype=v,new d}}();function a(d,v){var _=Array.prototype.slice;if(d.bind)return d.bind.apply(d,_.call(arguments,1));var D=_.call(arguments,2);return function(){return d.apply(v,D.length?D.concat(_.call(arguments)):arguments)}}var l=0;function f(d){return"_leaflet_id"in d||(d._leaflet_id=++l),d._leaflet_id}function c(d,v,_){var D,j,H,ee;return ee=function(){D=!1,j&&(H.apply(_,j),j=!1)},H=function(){D?j=arguments:(d.apply(_,arguments),setTimeout(ee,v),D=!0)},H}function h(d,v,_){var D=v[1],j=v[0],H=D-j;return d===D&&_?d:((d-j)%H+H)%H+j}function p(){return!1}function g(d,v){if(v===!1)return d;var _=Math.pow(10,v===void 0?6:v);return Math.round(d*_)/_}function x(d){return d.trim?d.trim():d.replace(/^\s+|\s+$/g,"")}function b(d){return x(d).split(/\s+/)}function T(d,v){Object.prototype.hasOwnProperty.call(d,"options")||(d.options=d.options?s(d.options):{});for(var _ in v)d.options[_]=v[_];return d.options}function E(d,v,_){var D=[];for(var j in d)D.push(encodeURIComponent(_?j.toUpperCase():j)+"="+encodeURIComponent(d[j]));return(!v||v.indexOf("?")===-1?"?":"&")+D.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function I(d,v){return d.replace(C,function(_,D){var j=v[D];if(j===void 0)throw new Error("No value provided for variable "+_);return typeof j=="function"&&(j=j(v)),j})}var P=Array.isArray||function(d){return Object.prototype.toString.call(d)==="[object Array]"};function M(d,v){for(var _=0;_<d.length;_++)if(d[_]===v)return _;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(d){return window["webkit"+d]||window["moz"+d]||window["ms"+d]}var F=0;function G(d){var v=+new Date,_=Math.max(0,16-(v-F));return F=v+_,window.setTimeout(d,_)}var K=window.requestAnimationFrame||z("RequestAnimationFrame")||G,V=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(d){window.clearTimeout(d)};function Q(d,v,_){if(_&&K===G)d.call(v);else return K.call(window,a(d,v))}function J(d){d&&V.call(window,d)}var ve={__proto__:null,extend:r,create:s,bind:a,get lastId(){return l},stamp:f,throttle:c,wrapNum:h,falseFn:p,formatNum:g,trim:x,splitWords:b,setOptions:T,getParamString:E,template:I,isArray:P,indexOf:M,emptyImageUrl:k,requestFn:K,cancelFn:V,requestAnimFrame:Q,cancelAnimFrame:J};function se(){}se.extend=function(d){var v=function(){T(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=v.__super__=this.prototype,D=s(_);D.constructor=v,v.prototype=D;for(var j in this)Object.prototype.hasOwnProperty.call(this,j)&&j!=="prototype"&&j!=="__super__"&&(v[j]=this[j]);return d.statics&&r(v,d.statics),d.includes&&(ye(d.includes),r.apply(null,[D].concat(d.includes))),r(D,d),delete D.statics,delete D.includes,D.options&&(D.options=_.options?s(_.options):{},r(D.options,d.options)),D._initHooks=[],D.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var H=0,ee=D._initHooks.length;H<ee;H++)D._initHooks[H].call(this)}},v},se.include=function(d){var v=this.prototype.options;return r(this.prototype,d),d.options&&(this.prototype.options=v,this.mergeOptions(d.options)),this},se.mergeOptions=function(d){return r(this.prototype.options,d),this},se.addInitHook=function(d){var v=Array.prototype.slice.call(arguments,1),_=typeof d=="function"?d:function(){this[d].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function ye(d){if(!(typeof L>"u"||!L||!L.Mixin)){d=P(d)?d:[d];for(var v=0;v<d.length;v++)d[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var X={on:function(d,v,_){if(typeof d=="object")for(var D in d)this._on(D,d[D],v);else{d=b(d);for(var j=0,H=d.length;j<H;j++)this._on(d[j],v,_)}return this},off:function(d,v,_){if(!arguments.length)delete this._events;else if(typeof d=="object")for(var D in d)this._off(D,d[D],v);else{d=b(d);for(var j=arguments.length===1,H=0,ee=d.length;H<ee;H++)j?this._off(d[H]):this._off(d[H],v,_)}return this},_on:function(d,v,_,D){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(d,v,_)===!1){_===this&&(_=void 0);var j={fn:v,ctx:_};D&&(j.once=!0),this._events=this._events||{},this._events[d]=this._events[d]||[],this._events[d].push(j)}},_off:function(d,v,_){var D,j,H;if(this._events&&(D=this._events[d],!!D)){if(arguments.length===1){if(this._firingCount)for(j=0,H=D.length;j<H;j++)D[j].fn=p;delete this._events[d];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var ee=this._listens(d,v,_);if(ee!==!1){var ue=D[ee];this._firingCount&&(ue.fn=p,this._events[d]=D=D.slice()),D.splice(ee,1)}}},fire:function(d,v,_){if(!this.listens(d,_))return this;var D=r({},v,{type:d,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var j=this._events[d];if(j){this._firingCount=this._firingCount+1||1;for(var H=0,ee=j.length;H<ee;H++){var ue=j[H],_e=ue.fn;ue.once&&this.off(d,_e,ue.ctx),_e.call(ue.ctx||this,D)}this._firingCount--}}return _&&this._propagateEvent(D),this},listens:function(d,v,_,D){typeof d!="string"&&console.warn('"string" type argument expected');var j=v;typeof v!="function"&&(D=!!v,j=void 0,_=void 0);var H=this._events&&this._events[d];if(H&&H.length&&this._listens(d,j,_)!==!1)return!0;if(D){for(var ee in this._eventParents)if(this._eventParents[ee].listens(d,v,_,D))return!0}return!1},_listens:function(d,v,_){if(!this._events)return!1;var D=this._events[d]||[];if(!v)return!!D.length;_===this&&(_=void 0);for(var j=0,H=D.length;j<H;j++)if(D[j].fn===v&&D[j].ctx===_)return j;return!1},once:function(d,v,_){if(typeof d=="object")for(var D in d)this._on(D,d[D],v,!0);else{d=b(d);for(var j=0,H=d.length;j<H;j++)this._on(d[j],v,_,!0)}return this},addEventParent:function(d){return this._eventParents=this._eventParents||{},this._eventParents[f(d)]=d,this},removeEventParent:function(d){return this._eventParents&&delete this._eventParents[f(d)],this},_propagateEvent:function(d){for(var v in this._eventParents)this._eventParents[v].fire(d.type,r({layer:d.target,propagatedFrom:d.target},d),!0)}};X.addEventListener=X.on,X.removeEventListener=X.clearAllEventListeners=X.off,X.addOneTimeEventListener=X.once,X.fireEvent=X.fire,X.hasEventListeners=X.listens;var oe=se.extend(X);function ie(d,v,_){this.x=_?Math.round(d):d,this.y=_?Math.round(v):v}var Ie=Math.trunc||function(d){return d>0?Math.floor(d):Math.ceil(d)};ie.prototype={clone:function(){return new ie(this.x,this.y)},add:function(d){return this.clone()._add(Z(d))},_add:function(d){return this.x+=d.x,this.y+=d.y,this},subtract:function(d){return this.clone()._subtract(Z(d))},_subtract:function(d){return this.x-=d.x,this.y-=d.y,this},divideBy:function(d){return this.clone()._divideBy(d)},_divideBy:function(d){return this.x/=d,this.y/=d,this},multiplyBy:function(d){return this.clone()._multiplyBy(d)},_multiplyBy:function(d){return this.x*=d,this.y*=d,this},scaleBy:function(d){return new ie(this.x*d.x,this.y*d.y)},unscaleBy:function(d){return new ie(this.x/d.x,this.y/d.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ie(this.x),this.y=Ie(this.y),this},distanceTo:function(d){d=Z(d);var v=d.x-this.x,_=d.y-this.y;return Math.sqrt(v*v+_*_)},equals:function(d){return d=Z(d),d.x===this.x&&d.y===this.y},contains:function(d){return d=Z(d),Math.abs(d.x)<=Math.abs(this.x)&&Math.abs(d.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function Z(d,v,_){return d instanceof ie?d:P(d)?new ie(d[0],d[1]):d==null?d:typeof d=="object"&&"x"in d&&"y"in d?new ie(d.x,d.y):new ie(d,v,_)}function Y(d,v){if(d)for(var _=v?[d,v]:d,D=0,j=_.length;D<j;D++)this.extend(_[D])}Y.prototype={extend:function(d){var v,_;if(!d)return this;if(d instanceof ie||typeof d[0]=="number"||"x"in d)v=_=Z(d);else if(d=ne(d),v=d.min,_=d.max,!v||!_)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=_.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(d){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,d)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(d){var v,_;return typeof d[0]=="number"||d instanceof ie?d=Z(d):d=ne(d),d instanceof Y?(v=d.min,_=d.max):v=_=d,v.x>=this.min.x&&_.x<=this.max.x&&v.y>=this.min.y&&_.y<=this.max.y},intersects:function(d){d=ne(d);var v=this.min,_=this.max,D=d.min,j=d.max,H=j.x>=v.x&&D.x<=_.x,ee=j.y>=v.y&&D.y<=_.y;return H&&ee},overlaps:function(d){d=ne(d);var v=this.min,_=this.max,D=d.min,j=d.max,H=j.x>v.x&&D.x<_.x,ee=j.y>v.y&&D.y<_.y;return H&&ee},isValid:function(){return!!(this.min&&this.max)},pad:function(d){var v=this.min,_=this.max,D=Math.abs(v.x-_.x)*d,j=Math.abs(v.y-_.y)*d;return ne(Z(v.x-D,v.y-j),Z(_.x+D,_.y+j))},equals:function(d){return d?(d=ne(d),this.min.equals(d.getTopLeft())&&this.max.equals(d.getBottomRight())):!1}};function ne(d,v){return!d||d instanceof Y?d:new Y(d,v)}function me(d,v){if(d)for(var _=v?[d,v]:d,D=0,j=_.length;D<j;D++)this.extend(_[D])}me.prototype={extend:function(d){var v=this._southWest,_=this._northEast,D,j;if(d instanceof Le)D=d,j=d;else if(d instanceof me){if(D=d._southWest,j=d._northEast,!D||!j)return this}else return d?this.extend(Ae(d)||Te(d)):this;return!v&&!_?(this._southWest=new Le(D.lat,D.lng),this._northEast=new Le(j.lat,j.lng)):(v.lat=Math.min(D.lat,v.lat),v.lng=Math.min(D.lng,v.lng),_.lat=Math.max(j.lat,_.lat),_.lng=Math.max(j.lng,_.lng)),this},pad:function(d){var v=this._southWest,_=this._northEast,D=Math.abs(v.lat-_.lat)*d,j=Math.abs(v.lng-_.lng)*d;return new me(new Le(v.lat-D,v.lng-j),new Le(_.lat+D,_.lng+j))},getCenter:function(){return new Le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Le(this.getNorth(),this.getWest())},getSouthEast:function(){return new Le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(d){typeof d[0]=="number"||d instanceof Le||"lat"in d?d=Ae(d):d=Te(d);var v=this._southWest,_=this._northEast,D,j;return d instanceof me?(D=d.getSouthWest(),j=d.getNorthEast()):D=j=d,D.lat>=v.lat&&j.lat<=_.lat&&D.lng>=v.lng&&j.lng<=_.lng},intersects:function(d){d=Te(d);var v=this._southWest,_=this._northEast,D=d.getSouthWest(),j=d.getNorthEast(),H=j.lat>=v.lat&&D.lat<=_.lat,ee=j.lng>=v.lng&&D.lng<=_.lng;return H&&ee},overlaps:function(d){d=Te(d);var v=this._southWest,_=this._northEast,D=d.getSouthWest(),j=d.getNorthEast(),H=j.lat>v.lat&&D.lat<_.lat,ee=j.lng>v.lng&&D.lng<_.lng;return H&&ee},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(d,v){return d?(d=Te(d),this._southWest.equals(d.getSouthWest(),v)&&this._northEast.equals(d.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Te(d,v){return d instanceof me?d:new me(d,v)}function Le(d,v,_){if(isNaN(d)||isNaN(v))throw new Error("Invalid LatLng object: ("+d+", "+v+")");this.lat=+d,this.lng=+v,_!==void 0&&(this.alt=+_)}Le.prototype={equals:function(d,v){if(!d)return!1;d=Ae(d);var _=Math.max(Math.abs(this.lat-d.lat),Math.abs(this.lng-d.lng));return _<=(v===void 0?1e-9:v)},toString:function(d){return"LatLng("+g(this.lat,d)+", "+g(this.lng,d)+")"},distanceTo:function(d){return Ue.distance(this,Ae(d))},wrap:function(){return Ue.wrapLatLng(this)},toBounds:function(d){var v=180*d/40075017,_=v/Math.cos(Math.PI/180*this.lat);return Te([this.lat-v,this.lng-_],[this.lat+v,this.lng+_])},clone:function(){return new Le(this.lat,this.lng,this.alt)}};function Ae(d,v,_){return d instanceof Le?d:P(d)&&typeof d[0]!="object"?d.length===3?new Le(d[0],d[1],d[2]):d.length===2?new Le(d[0],d[1]):null:d==null?d:typeof d=="object"&&"lat"in d?new Le(d.lat,"lng"in d?d.lng:d.lon,d.alt):v===void 0?null:new Le(d,v,_)}var Ve={latLngToPoint:function(d,v){var _=this.projection.project(d),D=this.scale(v);return this.transformation._transform(_,D)},pointToLatLng:function(d,v){var _=this.scale(v),D=this.transformation.untransform(d,_);return this.projection.unproject(D)},project:function(d){return this.projection.project(d)},unproject:function(d){return this.projection.unproject(d)},scale:function(d){return 256*Math.pow(2,d)},zoom:function(d){return Math.log(d/256)/Math.LN2},getProjectedBounds:function(d){if(this.infinite)return null;var v=this.projection.bounds,_=this.scale(d),D=this.transformation.transform(v.min,_),j=this.transformation.transform(v.max,_);return new Y(D,j)},infinite:!1,wrapLatLng:function(d){var v=this.wrapLng?h(d.lng,this.wrapLng,!0):d.lng,_=this.wrapLat?h(d.lat,this.wrapLat,!0):d.lat,D=d.alt;return new Le(_,v,D)},wrapLatLngBounds:function(d){var v=d.getCenter(),_=this.wrapLatLng(v),D=v.lat-_.lat,j=v.lng-_.lng;if(D===0&&j===0)return d;var H=d.getSouthWest(),ee=d.getNorthEast(),ue=new Le(H.lat-D,H.lng-j),_e=new Le(ee.lat-D,ee.lng-j);return new me(ue,_e)}},Ue=r({},Ve,{wrapLng:[-180,180],R:6371e3,distance:function(d,v){var _=Math.PI/180,D=d.lat*_,j=v.lat*_,H=Math.sin((v.lat-d.lat)*_/2),ee=Math.sin((v.lng-d.lng)*_/2),ue=H*H+Math.cos(D)*Math.cos(j)*ee*ee,_e=2*Math.atan2(Math.sqrt(ue),Math.sqrt(1-ue));return this.R*_e}}),fe=6378137,je={R:fe,MAX_LATITUDE:85.0511287798,project:function(d){var v=Math.PI/180,_=this.MAX_LATITUDE,D=Math.max(Math.min(_,d.lat),-_),j=Math.sin(D*v);return new ie(this.R*d.lng*v,this.R*Math.log((1+j)/(1-j))/2)},unproject:function(d){var v=180/Math.PI;return new Le((2*Math.atan(Math.exp(d.y/this.R))-Math.PI/2)*v,d.x*v/this.R)},bounds:function(){var d=fe*Math.PI;return new Y([-d,-d],[d,d])}()};function Ge(d,v,_,D){if(P(d)){this._a=d[0],this._b=d[1],this._c=d[2],this._d=d[3];return}this._a=d,this._b=v,this._c=_,this._d=D}Ge.prototype={transform:function(d,v){return this._transform(d.clone(),v)},_transform:function(d,v){return v=v||1,d.x=v*(this._a*d.x+this._b),d.y=v*(this._c*d.y+this._d),d},untransform:function(d,v){return v=v||1,new ie((d.x/v-this._b)/this._a,(d.y/v-this._d)/this._c)}};function Pe(d,v,_,D){return new Ge(d,v,_,D)}var ot=r({},Ue,{code:"EPSG:3857",projection:je,transformation:function(){var d=.5/(Math.PI*je.R);return Pe(d,.5,-d,.5)}()}),ct=r({},ot,{code:"EPSG:900913"});function xe(d){return document.createElementNS("http://www.w3.org/2000/svg",d)}function we(d,v){var _="",D,j,H,ee,ue,_e;for(D=0,H=d.length;D<H;D++){for(ue=d[D],j=0,ee=ue.length;j<ee;j++)_e=ue[j],_+=(j?"L":"M")+_e.x+" "+_e.y;_+=v?st.svg?"z":"x":""}return _||"M0 0"}var Be=document.documentElement.style,Je="ActiveXObject"in window,_t=Je&&!document.addEventListener,Ft="msLaunchUri"in navigator&&!("documentMode"in document),kt=or("webkit"),Un=or("android"),Gi=or("android 2")||or("android 3"),xi=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_i=Un&&or("Google")&&xi<537&&!("AudioNode"in window),rt=!!window.opera,Kt=!Ft&&or("chrome"),qn=or("gecko")&&!kt&&!rt&&!Je,En=!Kt&&or("safari"),ar=or("phantom"),Jn="OTransition"in Be,Ds=navigator.platform.indexOf("Win")===0,Lr=Je&&"transition"in Be,Is="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Gi,Cr="MozPerspective"in Be,Wl=!window.L_DISABLE_3D&&(Lr||Is||Cr)&&!Jn&&!ar,es=typeof orientation<"u"||or("mobile"),nh=es&&kt,ff=es&&Is,ic=!window.PointerEvent&&window.MSPointerEvent,Zl=!!(window.PointerEvent||ic),da="ontouchstart"in window||!!window.TouchEvent,Xl=!window.L_NO_TOUCH&&(da||Zl),rc=es&&rt,sc=es&&qn,ac=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,oc=function(){var d=!1;try{var v=Object.defineProperty({},"passive",{get:function(){d=!0}});window.addEventListener("testPassiveEventSupport",p,v),window.removeEventListener("testPassiveEventSupport",p,v)}catch{}return d}(),df=function(){return!!document.createElement("canvas").getContext}(),lc=!!(document.createElementNS&&xe("svg").createSVGRect),Hi=!!lc&&function(){var d=document.createElement("div");return d.innerHTML="<svg/>",(d.firstChild&&d.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),In=!lc&&function(){try{var d=document.createElement("div");d.innerHTML='<v:shape adj="1"/>';var v=d.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch{return!1}}(),Si=navigator.platform.indexOf("Mac")===0,ro=navigator.platform.indexOf("Linux")===0;function or(d){return navigator.userAgent.toLowerCase().indexOf(d)>=0}var st={ie:Je,ielt9:_t,edge:Ft,webkit:kt,android:Un,android23:Gi,androidStock:_i,opera:rt,chrome:Kt,gecko:qn,safari:En,phantom:ar,opera12:Jn,win:Ds,ie3d:Lr,webkit3d:Is,gecko3d:Cr,any3d:Wl,mobile:es,mobileWebkit:nh,mobileWebkit3d:ff,msPointer:ic,pointer:Zl,touch:Xl,touchNative:da,mobileOpera:rc,mobileGecko:sc,retina:ac,passiveEvents:oc,canvas:df,svg:lc,vml:In,inlineSvg:Hi,mac:Si,linux:ro},hf=st.msPointer?"MSPointerDown":"pointerdown",Uo=st.msPointer?"MSPointerMove":"pointermove",yr=st.msPointer?"MSPointerUp":"pointerup",ha=st.msPointer?"MSPointerCancel":"pointercancel",Ms={touchstart:hf,touchmove:Uo,touchend:yr,touchcancel:ha},ts={touchstart:ks,touchmove:Rr,touchend:Rr,touchcancel:Rr},Or={},ma=!1;function vn(d,v,_){return v==="touchstart"&&Ql(),ts[v]?(_=ts[v].bind(this,_),d.addEventListener(Ms[v],_,!1),_):(console.warn("wrong event specified:",v),p)}function ei(d,v,_){if(!Ms[v]){console.warn("wrong event specified:",v);return}d.removeEventListener(Ms[v],_,!1)}function Ei(d){Or[d.pointerId]=d}function $n(d){Or[d.pointerId]&&(Or[d.pointerId]=d)}function On(d){delete Or[d.pointerId]}function Ql(){ma||(document.addEventListener(hf,Ei,!0),document.addEventListener(Uo,$n,!0),document.addEventListener(yr,On,!0),document.addEventListener(ha,On,!0),ma=!0)}function Rr(d,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var _ in Or)v.touches.push(Or[_]);v.changedTouches=[v],d(v)}}function ks(d,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&Tn(v),Rr(d,v)}function so(d){var v={},_,D;for(D in d)_=d[D],v[D]=_&&_.bind?_.bind(d):_;return d=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var $o=200;function ao(d,v){d.addEventListener("dblclick",v);var _=0,D;function j(H){if(H.detail!==1){D=H.detail;return}if(!(H.pointerType==="mouse"||H.sourceCapabilities&&!H.sourceCapabilities.firesTouchEvents)){var ee=fo(H);if(!(ee.some(function(_e){return _e instanceof HTMLLabelElement&&_e.attributes.for})&&!ee.some(function(_e){return _e instanceof HTMLInputElement||_e instanceof HTMLSelectElement}))){var ue=Date.now();ue-_<=$o?(D++,D===2&&v(so(H))):D=1,_=ue}}}return d.addEventListener("click",j),{dblclick:v,simDblclick:j}}function Ti(d,v){d.removeEventListener("dblclick",v.dblclick),d.removeEventListener("click",v.simDblclick)}var oo=Fs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ns=Fs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ns=Ns==="webkitTransition"||Ns==="OTransition"?Ns+"End":"transitionend";function zo(d){return typeof d=="string"?document.getElementById(d):d}function js(d,v){var _=d.style[v]||d.currentStyle&&d.currentStyle[v];if((!_||_==="auto")&&document.defaultView){var D=document.defaultView.getComputedStyle(d,null);_=D?D[v]:null}return _==="auto"?null:_}function Nt(d,v,_){var D=document.createElement(d);return D.className=v||"",_&&_.appendChild(D),D}function rn(d){var v=d.parentNode;v&&v.removeChild(d)}function ti(d){for(;d.firstChild;)d.removeChild(d.firstChild)}function Bs(d){var v=d.parentNode;v&&v.lastChild!==d&&v.appendChild(d)}function pa(d){var v=d.parentNode;v&&v.firstChild!==d&&v.insertBefore(d,v.firstChild)}function ga(d,v){if(d.classList!==void 0)return d.classList.contains(v);var _=Xt(d);return _.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(_)}function At(d,v){if(d.classList!==void 0)for(var _=b(v),D=0,j=_.length;D<j;D++)d.classList.add(_[D]);else if(!ga(d,v)){var H=Xt(d);lr(d,(H?H+" ":"")+v)}}function sn(d,v){d.classList!==void 0?d.classList.remove(v):lr(d,x((" "+Xt(d)+" ").replace(" "+v+" "," ")))}function lr(d,v){d.className.baseVal===void 0?d.className=v:d.className.baseVal=v}function Xt(d){return d.correspondingElement&&(d=d.correspondingElement),d.className.baseVal===void 0?d.className:d.className.baseVal}function Mn(d,v){"opacity"in d.style?d.style.opacity=v:"filter"in d.style&&Ki(d,v)}function Ki(d,v){var _=!1,D="DXImageTransform.Microsoft.Alpha";try{_=d.filters.item(D)}catch{if(v===1)return}v=Math.round(v*100),_?(_.Enabled=v!==100,_.Opacity=v):d.style.filter+=" progid:"+D+"(opacity="+v+")"}function Fs(d){for(var v=document.documentElement.style,_=0;_<d.length;_++)if(d[_]in v)return d[_];return!1}function Ai(d,v,_){var D=v||new ie(0,0);d.style[oo]=(st.ie3d?"translate("+D.x+"px,"+D.y+"px)":"translate3d("+D.x+"px,"+D.y+"px,0)")+(_?" scale("+_+")":"")}function zt(d,v){d._leaflet_pos=v,st.any3d?Ai(d,v):(d.style.left=v.x+"px",d.style.top=v.y+"px")}function wi(d){return d._leaflet_pos||new ie(0,0)}var qi,Pr,lo;if("onselectstart"in document)qi=function(){pt(window,"selectstart",Tn)},Pr=function(){$t(window,"selectstart",Tn)};else{var va=Fs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qi=function(){if(va){var d=document.documentElement.style;lo=d[va],d[va]="none"}},Pr=function(){va&&(document.documentElement.style[va]=lo,lo=void 0)}}function Dr(){pt(window,"dragstart",Tn)}function Go(){$t(window,"dragstart",Tn)}var Ho,Li;function Ko(d){for(;d.tabIndex===-1;)d=d.parentNode;d.style&&(Vi(),Ho=d,Li=d.style.outlineStyle,d.style.outlineStyle="none",pt(window,"keydown",Vi))}function Vi(){Ho&&(Ho.style.outlineStyle=Li,Ho=void 0,Li=void 0,$t(window,"keydown",Vi))}function Ir(d){do d=d.parentNode;while((!d.offsetWidth||!d.offsetHeight)&&d!==document.body);return d}function is(d){var v=d.getBoundingClientRect();return{x:v.width/d.offsetWidth||1,y:v.height/d.offsetHeight||1,boundingClientRect:v}}var uo={__proto__:null,TRANSFORM:oo,TRANSITION:Ns,TRANSITION_END:ns,get:zo,getStyle:js,create:Nt,remove:rn,empty:ti,toFront:Bs,toBack:pa,hasClass:ga,addClass:At,removeClass:sn,setClass:lr,getClass:Xt,setOpacity:Mn,testProp:Fs,setTransform:Ai,setPosition:zt,getPosition:wi,get disableTextSelection(){return qi},get enableTextSelection(){return Pr},disableImageDrag:Dr,enableImageDrag:Go,preventOutline:Ko,restoreOutline:Vi,getSizedParentNode:Ir,getScale:is};function pt(d,v,_,D){if(v&&typeof v=="object")for(var j in v)ur(d,j,v[j],_);else{v=b(v);for(var H=0,ee=v.length;H<ee;H++)ur(d,v[H],_,D)}return this}var ui="_leaflet_events";function $t(d,v,_,D){if(arguments.length===1)br(d),delete d[ui];else if(v&&typeof v=="object")for(var j in v)Mr(d,j,v[j],_);else if(v=b(v),arguments.length===2)br(d,function(ue){return M(v,ue)!==-1});else for(var H=0,ee=v.length;H<ee;H++)Mr(d,v[H],_,D);return this}function br(d,v){for(var _ in d[ui]){var D=_.split(/\d/)[0];(!v||v(D))&&Mr(d,D,null,null,_)}}var co={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ur(d,v,_,D){var j=v+f(_)+(D?"_"+f(D):"");if(d[ui]&&d[ui][j])return this;var H=function(ue){return _.call(D||d,ue||window.event)},ee=H;!st.touchNative&&st.pointer&&v.indexOf("touch")===0?H=vn(d,v,H):st.touch&&v==="dblclick"?H=ao(d,H):"addEventListener"in d?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?d.addEventListener(co[v]||v,H,st.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(H=function(ue){ue=ue||window.event,ss(d,ue)&&ee(ue)},d.addEventListener(co[v],H,!1)):d.addEventListener(v,ee,!1):d.attachEvent("on"+v,H),d[ui]=d[ui]||{},d[ui][j]=H}function Mr(d,v,_,D,j){j=j||v+f(_)+(D?"_"+f(D):"");var H=d[ui]&&d[ui][j];if(!H)return this;!st.touchNative&&st.pointer&&v.indexOf("touch")===0?ei(d,v,H):st.touch&&v==="dblclick"?Ti(d,H):"removeEventListener"in d?d.removeEventListener(co[v]||v,H,!1):d.detachEvent("on"+v,H),d[ui][j]=null}function kr(d){return d.stopPropagation?d.stopPropagation():d.originalEvent?d.originalEvent._stopped=!0:d.cancelBubble=!0,this}function Us(d){return ur(d,"wheel",kr),this}function rs(d){return pt(d,"mousedown touchstart dblclick contextmenu",kr),d._leaflet_disable_click=!0,this}function Tn(d){return d.preventDefault?d.preventDefault():d.returnValue=!1,this}function Nr(d){return Tn(d),kr(d),this}function fo(d){if(d.composedPath)return d.composedPath();for(var v=[],_=d.target;_;)v.push(_),_=_.parentNode;return v}function ci(d,v){if(!v)return new ie(d.clientX,d.clientY);var _=is(v),D=_.boundingClientRect;return new ie((d.clientX-D.left)/_.x-v.clientLeft,(d.clientY-D.top)/_.y-v.clientTop)}var $s=st.linux&&st.chrome?window.devicePixelRatio:st.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ya(d){return st.edge?d.wheelDeltaY/2:d.deltaY&&d.deltaMode===0?-d.deltaY/$s:d.deltaY&&d.deltaMode===1?-d.deltaY*20:d.deltaY&&d.deltaMode===2?-d.deltaY*60:d.deltaX||d.deltaZ?0:d.wheelDelta?(d.wheelDeltaY||d.wheelDelta)/2:d.detail&&Math.abs(d.detail)<32765?-d.detail*20:d.detail?d.detail/-32765*60:0}function ss(d,v){var _=v.relatedTarget;if(!_)return!0;try{for(;_&&_!==d;)_=_.parentNode}catch{return!1}return _!==d}var uc={__proto__:null,on:pt,off:$t,stopPropagation:kr,disableScrollPropagation:Us,disableClickPropagation:rs,preventDefault:Tn,stop:Nr,getPropagationPath:fo,getMousePosition:ci,getWheelDelta:ya,isExternalTarget:ss,addListener:pt,removeListener:$t},qo=oe.extend({run:function(d,v,_,D){this.stop(),this._el=d,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(D||.5,.2),this._startPos=wi(d),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Q(this._animate,this),this._step()},_step:function(d){var v=+new Date-this._startTime,_=this._duration*1e3;v<_?this._runFrame(this._easeOut(v/_),d):(this._runFrame(1),this._complete())},_runFrame:function(d,v){var _=this._startPos.add(this._offset.multiplyBy(d));v&&_._round(),zt(this._el,_),this.fire("step")},_complete:function(){J(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(d){return 1-Math.pow(1-d,this._easeOutPower)}}),Lt=oe.extend({options:{crs:ot,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(d,v){v=T(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(d),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(Ae(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ns&&st.any3d&&!st.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),pt(this._proxy,ns,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(d,v,_){if(v=v===void 0?this._zoom:this._limitZoom(v),d=this._limitCenter(Ae(d),v,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=r({animate:_.animate},_.zoom),_.pan=r({animate:_.animate,duration:_.duration},_.pan));var D=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(d,v,_.zoom):this._tryAnimatedPan(d,_.pan);if(D)return clearTimeout(this._sizeTimer),this}return this._resetView(d,v,_.pan&&_.pan.noMoveStart),this},setZoom:function(d,v){return this._loaded?this.setView(this.getCenter(),d,{zoom:v}):(this._zoom=d,this)},zoomIn:function(d,v){return d=d||(st.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+d,v)},zoomOut:function(d,v){return d=d||(st.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-d,v)},setZoomAround:function(d,v,_){var D=this.getZoomScale(v),j=this.getSize().divideBy(2),H=d instanceof ie?d:this.latLngToContainerPoint(d),ee=H.subtract(j).multiplyBy(1-1/D),ue=this.containerPointToLatLng(j.add(ee));return this.setView(ue,v,{zoom:_})},_getBoundsCenterZoom:function(d,v){v=v||{},d=d.getBounds?d.getBounds():Te(d);var _=Z(v.paddingTopLeft||v.padding||[0,0]),D=Z(v.paddingBottomRight||v.padding||[0,0]),j=this.getBoundsZoom(d,!1,_.add(D));if(j=typeof v.maxZoom=="number"?Math.min(v.maxZoom,j):j,j===1/0)return{center:d.getCenter(),zoom:j};var H=D.subtract(_).divideBy(2),ee=this.project(d.getSouthWest(),j),ue=this.project(d.getNorthEast(),j),_e=this.unproject(ee.add(ue).divideBy(2).add(H),j);return{center:_e,zoom:j}},fitBounds:function(d,v){if(d=Te(d),!d.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(d,v);return this.setView(_.center,_.zoom,v)},fitWorld:function(d){return this.fitBounds([[-90,-180],[90,180]],d)},panTo:function(d,v){return this.setView(d,this._zoom,{pan:v})},panBy:function(d,v){if(d=Z(d).round(),v=v||{},!d.x&&!d.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(d))return this._resetView(this.unproject(this.project(this.getCenter()).add(d)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new qo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){At(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(d).round();this._panAnim.run(this._mapPane,_,v.duration||.25,v.easeLinearity)}else this._rawPanBy(d),this.fire("move").fire("moveend");return this},flyTo:function(d,v,_){if(_=_||{},_.animate===!1||!st.any3d)return this.setView(d,v,_);this._stop();var D=this.project(this.getCenter()),j=this.project(d),H=this.getSize(),ee=this._zoom;d=Ae(d),v=v===void 0?ee:v;var ue=Math.max(H.x,H.y),_e=ue*this.getZoomScale(ee,v),Ne=j.distanceTo(D)||1,He=1.42,Ze=He*He;function Xe(Vt){var $r=Vt?-1:1,cs=Vt?_e:ue,qs=_e*_e-ue*ue+$r*Ze*Ze*Ne*Ne,fs=2*cs*Ze*Ne,sl=qs/fs,du=Math.sqrt(sl*sl+1)-sl,al=du<1e-9?-18:Math.log(du);return al}function ht(Vt){return(Math.exp(Vt)-Math.exp(-Vt))/2}function dn(Vt){return(Math.exp(Vt)+Math.exp(-Vt))/2}function An(Vt){return ht(Vt)/dn(Vt)}var ri=Xe(0);function Zn(Vt){return ue*(dn(ri)/dn(ri+He*Vt))}function fu(Vt){return ue*(dn(ri)*An(ri+He*Vt)-ht(ri))/Ze}function Sc(Vt){return 1-Math.pow(1-Vt,1.5)}var rl=Date.now(),xo=(Xe(1)-ri)/He,Pf=_.duration?1e3*_.duration:1e3*xo*.8;function Ur(){var Vt=(Date.now()-rl)/Pf,$r=Sc(Vt)*xo;Vt<=1?(this._flyToFrame=Q(Ur,this),this._move(this.unproject(D.add(j.subtract(D).multiplyBy(fu($r)/Ne)),ee),this.getScaleZoom(ue/Zn($r),ee),{flyTo:!0})):this._move(d,v)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),Ur.call(this),this},flyToBounds:function(d,v){var _=this._getBoundsCenterZoom(d,v);return this.flyTo(_.center,_.zoom,v)},setMaxBounds:function(d){return d=Te(d),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),d.isValid()?(this.options.maxBounds=d,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(d){var v=this.options.minZoom;return this.options.minZoom=d,this._loaded&&v!==d&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(d):this},setMaxZoom:function(d){var v=this.options.maxZoom;return this.options.maxZoom=d,this._loaded&&v!==d&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(d):this},panInsideBounds:function(d,v){this._enforcingBounds=!0;var _=this.getCenter(),D=this._limitCenter(_,this._zoom,Te(d));return _.equals(D)||this.panTo(D,v),this._enforcingBounds=!1,this},panInside:function(d,v){v=v||{};var _=Z(v.paddingTopLeft||v.padding||[0,0]),D=Z(v.paddingBottomRight||v.padding||[0,0]),j=this.project(this.getCenter()),H=this.project(d),ee=this.getPixelBounds(),ue=ne([ee.min.add(_),ee.max.subtract(D)]),_e=ue.getSize();if(!ue.contains(H)){this._enforcingBounds=!0;var Ne=H.subtract(ue.getCenter()),He=ue.extend(H).getSize().subtract(_e);j.x+=Ne.x<0?-He.x:He.x,j.y+=Ne.y<0?-He.y:He.y,this.panTo(this.unproject(j),v),this._enforcingBounds=!1}return this},invalidateSize:function(d){if(!this._loaded)return this;d=r({animate:!1,pan:!0},d===!0?{animate:!0}:d);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),D=v.divideBy(2).round(),j=_.divideBy(2).round(),H=D.subtract(j);return!H.x&&!H.y?this:(d.animate&&d.pan?this.panBy(H):(d.pan&&this._rawPanBy(H),this.fire("move"),d.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(d){if(d=this._locateOptions=r({timeout:1e4,watch:!1},d),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=a(this._handleGeolocationResponse,this),_=a(this._handleGeolocationError,this);return d.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,_,d):navigator.geolocation.getCurrentPosition(v,_,d),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(d){if(this._container._leaflet_id){var v=d.code,_=d.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(d){if(this._container._leaflet_id){var v=d.coords.latitude,_=d.coords.longitude,D=new Le(v,_),j=D.toBounds(d.coords.accuracy*2),H=this._locateOptions;if(H.setView){var ee=this.getBoundsZoom(j);this.setView(D,H.maxZoom?Math.min(ee,H.maxZoom):ee)}var ue={latlng:D,bounds:j,timestamp:d.timestamp};for(var _e in d.coords)typeof d.coords[_e]=="number"&&(ue[_e]=d.coords[_e]);this.fire("locationfound",ue)}},addHandler:function(d,v){if(!v)return this;var _=this[d]=new v(this);return this._handlers.push(_),this.options[d]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),rn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(J(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var d;for(d in this._layers)this._layers[d].remove();for(d in this._panes)rn(this._panes[d]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(d,v){var _="leaflet-pane"+(d?" leaflet-"+d.replace("Pane","")+"-pane":""),D=Nt("div",_,v||this._mapPane);return d&&(this._panes[d]=D),D},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var d=this.getPixelBounds(),v=this.unproject(d.getBottomLeft()),_=this.unproject(d.getTopRight());return new me(v,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(d,v,_){d=Te(d),_=Z(_||[0,0]);var D=this.getZoom()||0,j=this.getMinZoom(),H=this.getMaxZoom(),ee=d.getNorthWest(),ue=d.getSouthEast(),_e=this.getSize().subtract(_),Ne=ne(this.project(ue,D),this.project(ee,D)).getSize(),He=st.any3d?this.options.zoomSnap:1,Ze=_e.x/Ne.x,Xe=_e.y/Ne.y,ht=v?Math.max(Ze,Xe):Math.min(Ze,Xe);return D=this.getScaleZoom(ht,D),He&&(D=Math.round(D/(He/100))*(He/100),D=v?Math.ceil(D/He)*He:Math.floor(D/He)*He),Math.max(j,Math.min(H,D))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ie(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(d,v){var _=this._getTopLeftPoint(d,v);return new Y(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(d){return this.options.crs.getProjectedBounds(d===void 0?this.getZoom():d)},getPane:function(d){return typeof d=="string"?this._panes[d]:d},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(d,v){var _=this.options.crs;return v=v===void 0?this._zoom:v,_.scale(d)/_.scale(v)},getScaleZoom:function(d,v){var _=this.options.crs;v=v===void 0?this._zoom:v;var D=_.zoom(d*_.scale(v));return isNaN(D)?1/0:D},project:function(d,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(Ae(d),v)},unproject:function(d,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(Z(d),v)},layerPointToLatLng:function(d){var v=Z(d).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(d){var v=this.project(Ae(d))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(d){return this.options.crs.wrapLatLng(Ae(d))},wrapLatLngBounds:function(d){return this.options.crs.wrapLatLngBounds(Te(d))},distance:function(d,v){return this.options.crs.distance(Ae(d),Ae(v))},containerPointToLayerPoint:function(d){return Z(d).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(d){return Z(d).add(this._getMapPanePos())},containerPointToLatLng:function(d){var v=this.containerPointToLayerPoint(Z(d));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(d){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ae(d)))},mouseEventToContainerPoint:function(d){return ci(d,this._container)},mouseEventToLayerPoint:function(d){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(d))},mouseEventToLatLng:function(d){return this.layerPointToLatLng(this.mouseEventToLayerPoint(d))},_initContainer:function(d){var v=this._container=zo(d);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");pt(v,"scroll",this._onScroll,this),this._containerId=f(v)},_initLayout:function(){var d=this._container;this._fadeAnimated=this.options.fadeAnimation&&st.any3d,At(d,"leaflet-container"+(st.touch?" leaflet-touch":"")+(st.retina?" leaflet-retina":"")+(st.ielt9?" leaflet-oldie":"")+(st.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=js(d,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(d.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var d=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),zt(this._mapPane,new ie(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(At(d.markerPane,"leaflet-zoom-hide"),At(d.shadowPane,"leaflet-zoom-hide"))},_resetView:function(d,v,_){zt(this._mapPane,new ie(0,0));var D=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var j=this._zoom!==v;this._moveStart(j,_)._move(d,v)._moveEnd(j),this.fire("viewreset"),D&&this.fire("load")},_moveStart:function(d,v){return d&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(d,v,_,D){v===void 0&&(v=this._zoom);var j=this._zoom!==v;return this._zoom=v,this._lastCenter=d,this._pixelOrigin=this._getNewPixelOrigin(d),D?_&&_.pinch&&this.fire("zoom",_):((j||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(d){return d&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return J(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(d){zt(this._mapPane,this._getMapPanePos().subtract(d))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(d){this._targets={},this._targets[f(this._container)]=this;var v=d?$t:pt;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),st.any3d&&this.options.transform3DLimit&&(d?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){J(this._resizeRequest),this._resizeRequest=Q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var d=this._getMapPanePos();Math.max(Math.abs(d.x),Math.abs(d.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(d,v){for(var _=[],D,j=v==="mouseout"||v==="mouseover",H=d.target||d.srcElement,ee=!1;H;){if(D=this._targets[f(H)],D&&(v==="click"||v==="preclick")&&this._draggableMoved(D)){ee=!0;break}if(D&&D.listens(v,!0)&&(j&&!ss(H,d)||(_.push(D),j))||H===this._container)break;H=H.parentNode}return!_.length&&!ee&&!j&&this.listens(v,!0)&&(_=[this]),_},_isClickDisabled:function(d){for(;d&&d!==this._container;){if(d._leaflet_disable_click)return!0;d=d.parentNode}},_handleDOMEvent:function(d){var v=d.target||d.srcElement;if(!(!this._loaded||v._leaflet_disable_events||d.type==="click"&&this._isClickDisabled(v))){var _=d.type;_==="mousedown"&&Ko(v),this._fireDOMEvent(d,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(d,v,_){if(d.type==="click"){var D=r({},d);D.type="preclick",this._fireDOMEvent(D,D.type,_)}var j=this._findEventTargets(d,v);if(_){for(var H=[],ee=0;ee<_.length;ee++)_[ee].listens(v,!0)&&H.push(_[ee]);j=H.concat(j)}if(j.length){v==="contextmenu"&&Tn(d);var ue=j[0],_e={originalEvent:d};if(d.type!=="keypress"&&d.type!=="keydown"&&d.type!=="keyup"){var Ne=ue.getLatLng&&(!ue._radius||ue._radius<=10);_e.containerPoint=Ne?this.latLngToContainerPoint(ue.getLatLng()):this.mouseEventToContainerPoint(d),_e.layerPoint=this.containerPointToLayerPoint(_e.containerPoint),_e.latlng=Ne?ue.getLatLng():this.layerPointToLatLng(_e.layerPoint)}for(ee=0;ee<j.length;ee++)if(j[ee].fire(v,_e,!0),_e.originalEvent._stopped||j[ee].options.bubblingMouseEvents===!1&&M(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(d){return d=d.dragging&&d.dragging.enabled()?d:this,d.dragging&&d.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var d=0,v=this._handlers.length;d<v;d++)this._handlers[d].disable()},whenReady:function(d,v){return this._loaded?d.call(v||this,{target:this}):this.on("load",d,v),this},_getMapPanePos:function(){return wi(this._mapPane)||new ie(0,0)},_moved:function(){var d=this._getMapPanePos();return d&&!d.equals([0,0])},_getTopLeftPoint:function(d,v){var _=d&&v!==void 0?this._getNewPixelOrigin(d,v):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(d,v){var _=this.getSize()._divideBy(2);return this.project(d,v)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(d,v,_){var D=this._getNewPixelOrigin(_,v);return this.project(d,v)._subtract(D)},_latLngBoundsToNewLayerBounds:function(d,v,_){var D=this._getNewPixelOrigin(_,v);return ne([this.project(d.getSouthWest(),v)._subtract(D),this.project(d.getNorthWest(),v)._subtract(D),this.project(d.getSouthEast(),v)._subtract(D),this.project(d.getNorthEast(),v)._subtract(D)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(d){return this.latLngToLayerPoint(d).subtract(this._getCenterLayerPoint())},_limitCenter:function(d,v,_){if(!_)return d;var D=this.project(d,v),j=this.getSize().divideBy(2),H=new Y(D.subtract(j),D.add(j)),ee=this._getBoundsOffset(H,_,v);return Math.abs(ee.x)<=1&&Math.abs(ee.y)<=1?d:this.unproject(D.add(ee),v)},_limitOffset:function(d,v){if(!v)return d;var _=this.getPixelBounds(),D=new Y(_.min.add(d),_.max.add(d));return d.add(this._getBoundsOffset(D,v))},_getBoundsOffset:function(d,v,_){var D=ne(this.project(v.getNorthEast(),_),this.project(v.getSouthWest(),_)),j=D.min.subtract(d.min),H=D.max.subtract(d.max),ee=this._rebound(j.x,-H.x),ue=this._rebound(j.y,-H.y);return new ie(ee,ue)},_rebound:function(d,v){return d+v>0?Math.round(d-v)/2:Math.max(0,Math.ceil(d))-Math.max(0,Math.floor(v))},_limitZoom:function(d){var v=this.getMinZoom(),_=this.getMaxZoom(),D=st.any3d?this.options.zoomSnap:1;return D&&(d=Math.round(d/D)*D),Math.max(v,Math.min(_,d))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){sn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(d,v){var _=this._getCenterOffset(d)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,v),!0)},_createAnimProxy:function(){var d=this._proxy=Nt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(d),this.on("zoomanim",function(v){var _=oo,D=this._proxy.style[_];Ai(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),D===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){rn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var d=this.getCenter(),v=this.getZoom();Ai(this._proxy,this.project(d,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(d){this._animatingZoom&&d.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(d,v,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var D=this.getZoomScale(v),j=this._getCenterOffset(d)._divideBy(1-1/D);return _.animate!==!0&&!this.getSize().contains(j)?!1:(Q(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(d,v,!0)},this),!0)},_animateZoom:function(d,v,_,D){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=d,this._animateToZoom=v,At(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:d,zoom:v,noUpdate:D}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&sn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ba(d,v){return new Lt(d,v)}var fi=se.extend({options:{position:"topright"},initialize:function(d){T(this,d)},getPosition:function(){return this.options.position},setPosition:function(d){var v=this._map;return v&&v.removeControl(this),this.options.position=d,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(d){this.remove(),this._map=d;var v=this._container=this.onAdd(d),_=this.getPosition(),D=d._controlCorners[_];return At(v,"leaflet-control"),_.indexOf("bottom")!==-1?D.insertBefore(v,D.firstChild):D.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(rn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(d){this._map&&d&&d.screenX>0&&d.screenY>0&&this._map.getContainer().focus()}}),xa=function(d){return new fi(d)};Lt.include({addControl:function(d){return d.addTo(this),this},removeControl:function(d){return d.remove(),this},_initControlPos:function(){var d=this._controlCorners={},v="leaflet-",_=this._controlContainer=Nt("div",v+"control-container",this._container);function D(j,H){var ee=v+j+" "+v+H;d[j+H]=Nt("div",ee,_)}D("top","left"),D("top","right"),D("bottom","left"),D("bottom","right")},_clearControlPos:function(){for(var d in this._controlCorners)rn(this._controlCorners[d]);rn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var _a=fi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(d,v,_,D){return _<D?-1:D<_?1:0}},initialize:function(d,v,_){T(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var D in d)this._addLayer(d[D],D);for(D in v)this._addLayer(v[D],D,!0)},onAdd:function(d){this._initLayout(),this._update(),this._map=d,d.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(d){return fi.prototype.addTo.call(this,d),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(d,v){return this._addLayer(d,v),this._map?this._update():this},addOverlay:function(d,v){return this._addLayer(d,v,!0),this._map?this._update():this},removeLayer:function(d){d.off("add remove",this._onLayerChange,this);var v=this._getLayer(f(d));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){At(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var d=this._map.getSize().y-(this._container.offsetTop+50);return d<this._section.clientHeight?(At(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=d+"px"):sn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return sn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var d="leaflet-control-layers",v=this._container=Nt("div",d),_=this.options.collapsed;v.setAttribute("aria-haspopup",!0),rs(v),Us(v);var D=this._section=Nt("section",d+"-list");_&&(this._map.on("click",this.collapse,this),pt(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var j=this._layersLink=Nt("a",d+"-toggle",v);j.href="#",j.title="Layers",j.setAttribute("role","button"),pt(j,{keydown:function(H){H.keyCode===13&&this._expandSafely()},click:function(H){Tn(H),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=Nt("div",d+"-base",D),this._separator=Nt("div",d+"-separator",D),this._overlaysList=Nt("div",d+"-overlays",D),v.appendChild(D)},_getLayer:function(d){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&f(this._layers[v].layer)===d)return this._layers[v]},_addLayer:function(d,v,_){this._map&&d.on("add remove",this._onLayerChange,this),this._layers.push({layer:d,name:v,overlay:_}),this.options.sortLayers&&this._layers.sort(a(function(D,j){return this.options.sortFunction(D.layer,j.layer,D.name,j.name)},this)),this.options.autoZIndex&&d.setZIndex&&(this._lastZIndex++,d.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ti(this._baseLayersList),ti(this._overlaysList),this._layerControlInputs=[];var d,v,_,D,j=0;for(_=0;_<this._layers.length;_++)D=this._layers[_],this._addItem(D),v=v||D.overlay,d=d||!D.overlay,j+=D.overlay?0:1;return this.options.hideSingleBase&&(d=d&&j>1,this._baseLayersList.style.display=d?"":"none"),this._separator.style.display=v&&d?"":"none",this},_onLayerChange:function(d){this._handlingClick||this._update();var v=this._getLayer(f(d.target)),_=v.overlay?d.type==="add"?"overlayadd":"overlayremove":d.type==="add"?"baselayerchange":null;_&&this._map.fire(_,v)},_createRadioElement:function(d,v){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+d+'"'+(v?' checked="checked"':"")+"/>",D=document.createElement("div");return D.innerHTML=_,D.firstChild},_addItem:function(d){var v=document.createElement("label"),_=this._map.hasLayer(d.layer),D;d.overlay?(D=document.createElement("input"),D.type="checkbox",D.className="leaflet-control-layers-selector",D.defaultChecked=_):D=this._createRadioElement("leaflet-base-layers_"+f(this),_),this._layerControlInputs.push(D),D.layerId=f(d.layer),pt(D,"click",this._onInputClick,this);var j=document.createElement("span");j.innerHTML=" "+d.name;var H=document.createElement("span");v.appendChild(H),H.appendChild(D),H.appendChild(j);var ee=d.overlay?this._overlaysList:this._baseLayersList;return ee.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var d=this._layerControlInputs,v,_,D=[],j=[];this._handlingClick=!0;for(var H=d.length-1;H>=0;H--)v=d[H],_=this._getLayer(v.layerId).layer,v.checked?D.push(_):v.checked||j.push(_);for(H=0;H<j.length;H++)this._map.hasLayer(j[H])&&this._map.removeLayer(j[H]);for(H=0;H<D.length;H++)this._map.hasLayer(D[H])||this._map.addLayer(D[H]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var d=this._layerControlInputs,v,_,D=this._map.getZoom(),j=d.length-1;j>=0;j--)v=d[j],_=this._getLayer(v.layerId).layer,v.disabled=_.options.minZoom!==void 0&&D<_.options.minZoom||_.options.maxZoom!==void 0&&D>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var d=this._section;this._preventClick=!0,pt(d,"click",Tn),this.expand();var v=this;setTimeout(function(){$t(d,"click",Tn),v._preventClick=!1})}}),ih=function(d,v,_){return new _a(d,v,_)},Jl=fi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(d){var v="leaflet-control-zoom",_=Nt("div",v+" leaflet-bar"),D=this.options;return this._zoomInButton=this._createButton(D.zoomInText,D.zoomInTitle,v+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(D.zoomOutText,D.zoomOutTitle,v+"-out",_,this._zoomOut),this._updateDisabled(),d.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(d){d.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(d){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(d.shiftKey?3:1))},_zoomOut:function(d){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(d.shiftKey?3:1))},_createButton:function(d,v,_,D,j){var H=Nt("a",_,D);return H.innerHTML=d,H.href="#",H.title=v,H.setAttribute("role","button"),H.setAttribute("aria-label",v),rs(H),pt(H,"click",Nr),pt(H,"click",j,this),pt(H,"click",this._refocusOnMap,this),H},_updateDisabled:function(){var d=this._map,v="leaflet-disabled";sn(this._zoomInButton,v),sn(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||d._zoom===d.getMinZoom())&&(At(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||d._zoom===d.getMaxZoom())&&(At(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});Lt.mergeOptions({zoomControl:!0}),Lt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Jl,this.addControl(this.zoomControl))});var eu=function(d){return new Jl(d)},cc=fi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(d){var v="leaflet-control-scale",_=Nt("div",v),D=this.options;return this._addScales(D,v+"-line",_),d.on(D.updateWhenIdle?"moveend":"move",this._update,this),d.whenReady(this._update,this),_},onRemove:function(d){d.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(d,v,_){d.metric&&(this._mScale=Nt("div",v,_)),d.imperial&&(this._iScale=Nt("div",v,_))},_update:function(){var d=this._map,v=d.getSize().y/2,_=d.distance(d.containerPointToLatLng([0,v]),d.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(_)},_updateScales:function(d){this.options.metric&&d&&this._updateMetric(d),this.options.imperial&&d&&this._updateImperial(d)},_updateMetric:function(d){var v=this._getRoundNum(d),_=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,_,v/d)},_updateImperial:function(d){var v=d*3.2808399,_,D,j;v>5280?(_=v/5280,D=this._getRoundNum(_),this._updateScale(this._iScale,D+" mi",D/_)):(j=this._getRoundNum(v),this._updateScale(this._iScale,j+" ft",j/v))},_updateScale:function(d,v,_){d.style.width=Math.round(this.options.maxWidth*_)+"px",d.innerHTML=v},_getRoundNum:function(d){var v=Math.pow(10,(Math.floor(d)+"").length-1),_=d/v;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,v*_}}),mf=function(d){return new cc(d)},pf='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Vo=fi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(st.inlineSvg?pf+" ":"")+"Leaflet</a>"},initialize:function(d){T(this,d),this._attributions={}},onAdd:function(d){d.attributionControl=this,this._container=Nt("div","leaflet-control-attribution"),rs(this._container);for(var v in d._layers)d._layers[v].getAttribution&&this.addAttribution(d._layers[v].getAttribution());return this._update(),d.on("layeradd",this._addAttribution,this),this._container},onRemove:function(d){d.off("layeradd",this._addAttribution,this)},_addAttribution:function(d){d.layer.getAttribution&&(this.addAttribution(d.layer.getAttribution()),d.layer.once("remove",function(){this.removeAttribution(d.layer.getAttribution())},this))},setPrefix:function(d){return this.options.prefix=d,this._update(),this},addAttribution:function(d){return d?(this._attributions[d]||(this._attributions[d]=0),this._attributions[d]++,this._update(),this):this},removeAttribution:function(d){return d?(this._attributions[d]&&(this._attributions[d]--,this._update()),this):this},_update:function(){if(this._map){var d=[];for(var v in this._attributions)this._attributions[v]&&d.push(v);var _=[];this.options.prefix&&_.push(this.options.prefix),d.length&&_.push(d.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});Lt.mergeOptions({attributionControl:!0}),Lt.addInitHook(function(){this.options.attributionControl&&new Vo().addTo(this)});var gf=function(d){return new Vo(d)};fi.Layers=_a,fi.Zoom=Jl,fi.Scale=cc,fi.Attribution=Vo,xa.layers=ih,xa.zoom=eu,xa.scale=mf,xa.attribution=gf;var xr=se.extend({initialize:function(d){this._map=d},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xr.addTo=function(d,v){return d.addHandler(v,this),this};var rh={Events:X},fc=st.touch?"touchstart mousedown":"mousedown",as=oe.extend({options:{clickTolerance:3},initialize:function(d,v,_,D){T(this,D),this._element=d,this._dragStartTarget=v||d,this._preventOutline=_},enable:function(){this._enabled||(pt(this._dragStartTarget,fc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(as._dragging===this&&this.finishDrag(!0),$t(this._dragStartTarget,fc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(d){if(this._enabled&&(this._moved=!1,!ga(this._element,"leaflet-zoom-anim"))){if(d.touches&&d.touches.length!==1){as._dragging===this&&this.finishDrag();return}if(!(as._dragging||d.shiftKey||d.which!==1&&d.button!==1&&!d.touches)&&(as._dragging=this,this._preventOutline&&Ko(this._element),Dr(),qi(),!this._moving)){this.fire("down");var v=d.touches?d.touches[0]:d,_=Ir(this._element);this._startPoint=new ie(v.clientX,v.clientY),this._startPos=wi(this._element),this._parentScale=is(_);var D=d.type==="mousedown";pt(document,D?"mousemove":"touchmove",this._onMove,this),pt(document,D?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(d){if(this._enabled){if(d.touches&&d.touches.length>1){this._moved=!0;return}var v=d.touches&&d.touches.length===1?d.touches[0]:d,_=new ie(v.clientX,v.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,Tn(d),this._moved||(this.fire("dragstart"),this._moved=!0,At(document.body,"leaflet-dragging"),this._lastTarget=d.target||d.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),At(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=d,this._updatePosition())}},_updatePosition:function(){var d={originalEvent:this._lastEvent};this.fire("predrag",d),zt(this._element,this._newPos),this.fire("drag",d)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(d){sn(document.body,"leaflet-dragging"),this._lastTarget&&(sn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$t(document,"mousemove touchmove",this._onMove,this),$t(document,"mouseup touchend touchcancel",this._onUp,this),Go(),Pr();var v=this._moved&&this._moving;this._moving=!1,as._dragging=!1,v&&this.fire("dragend",{noInertia:d,distance:this._newPos.distanceTo(this._startPos)})}});function Yo(d,v,_){var D,j=[1,4,2,8],H,ee,ue,_e,Ne,He,Ze,Xe;for(H=0,He=d.length;H<He;H++)d[H]._code=Ea(d[H],v);for(ue=0;ue<4;ue++){for(Ze=j[ue],D=[],H=0,He=d.length,ee=He-1;H<He;ee=H++)_e=d[H],Ne=d[ee],_e._code&Ze?Ne._code&Ze||(Xe=iu(Ne,_e,Ze,v,_),Xe._code=Ea(Xe,v),D.push(Xe)):(Ne._code&Ze&&(Xe=iu(Ne,_e,Ze,v,_),Xe._code=Ea(Xe,v),D.push(Xe)),D.push(_e));d=D}return d}function tu(d,v){var _,D,j,H,ee,ue,_e,Ne,He;if(!d||d.length===0)throw new Error("latlngs not passed");ni(d)||(console.warn("latlngs are not flat! Only the first ring will be used"),d=d[0]);var Ze=Ae([0,0]),Xe=Te(d),ht=Xe.getNorthWest().distanceTo(Xe.getSouthWest())*Xe.getNorthEast().distanceTo(Xe.getNorthWest());ht<1700&&(Ze=dc(d));var dn=d.length,An=[];for(_=0;_<dn;_++){var ri=Ae(d[_]);An.push(v.project(Ae([ri.lat-Ze.lat,ri.lng-Ze.lng])))}for(ue=_e=Ne=0,_=0,D=dn-1;_<dn;D=_++)j=An[_],H=An[D],ee=j.y*H.x-H.y*j.x,_e+=(j.x+H.x)*ee,Ne+=(j.y+H.y)*ee,ue+=ee*3;ue===0?He=An[0]:He=[_e/ue,Ne/ue];var Zn=v.unproject(Z(He));return Ae([Zn.lat+Ze.lat,Zn.lng+Ze.lng])}function dc(d){for(var v=0,_=0,D=0,j=0;j<d.length;j++){var H=Ae(d[j]);v+=H.lat,_+=H.lng,D++}return Ae([v/D,_/D])}var hc={__proto__:null,clipPolygon:Yo,polygonCenter:tu,centroid:dc};function mc(d,v){if(!v||!d.length)return d.slice();var _=v*v;return d=vf(d,_),d=pc(d,_),d}function nu(d,v,_){return Math.sqrt(zs(d,v,_,!0))}function Sa(d,v,_){return zs(d,v,_)}function pc(d,v){var _=d.length,D=typeof Uint8Array<"u"?Uint8Array:Array,j=new D(_);j[0]=j[_-1]=1,gc(d,j,v,0,_-1);var H,ee=[];for(H=0;H<_;H++)j[H]&&ee.push(d[H]);return ee}function gc(d,v,_,D,j){var H=0,ee,ue,_e;for(ue=D+1;ue<=j-1;ue++)_e=zs(d[ue],d[D],d[j],!0),_e>H&&(ee=ue,H=_e);H>_&&(v[ee]=1,gc(d,v,_,D,ee),gc(d,v,_,ee,j))}function vf(d,v){for(var _=[d[0]],D=1,j=0,H=d.length;D<H;D++)xf(d[D],d[j])>v&&(_.push(d[D]),j=D);return j<H-1&&_.push(d[H-1]),_}var yf;function bf(d,v,_,D,j){var H=D?yf:Ea(d,_),ee=Ea(v,_),ue,_e,Ne;for(yf=ee;;){if(!(H|ee))return[d,v];if(H&ee)return!1;ue=H||ee,_e=iu(d,v,ue,_,j),Ne=Ea(_e,_),ue===H?(d=_e,H=Ne):(v=_e,ee=Ne)}}function iu(d,v,_,D,j){var H=v.x-d.x,ee=v.y-d.y,ue=D.min,_e=D.max,Ne,He;return _&8?(Ne=d.x+H*(_e.y-d.y)/ee,He=_e.y):_&4?(Ne=d.x+H*(ue.y-d.y)/ee,He=ue.y):_&2?(Ne=_e.x,He=d.y+ee*(_e.x-d.x)/H):_&1&&(Ne=ue.x,He=d.y+ee*(ue.x-d.x)/H),new ie(Ne,He,j)}function Ea(d,v){var _=0;return d.x<v.min.x?_|=1:d.x>v.max.x&&(_|=2),d.y<v.min.y?_|=4:d.y>v.max.y&&(_|=8),_}function xf(d,v){var _=v.x-d.x,D=v.y-d.y;return _*_+D*D}function zs(d,v,_,D){var j=v.x,H=v.y,ee=_.x-j,ue=_.y-H,_e=ee*ee+ue*ue,Ne;return _e>0&&(Ne=((d.x-j)*ee+(d.y-H)*ue)/_e,Ne>1?(j=_.x,H=_.y):Ne>0&&(j+=ee*Ne,H+=ue*Ne)),ee=d.x-j,ue=d.y-H,D?ee*ee+ue*ue:new ie(j,H)}function ni(d){return!P(d[0])||typeof d[0][0]!="object"&&typeof d[0][0]<"u"}function Ta(d){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ni(d)}function os(d,v){var _,D,j,H,ee,ue,_e,Ne;if(!d||d.length===0)throw new Error("latlngs not passed");ni(d)||(console.warn("latlngs are not flat! Only the first ring will be used"),d=d[0]);var He=Ae([0,0]),Ze=Te(d),Xe=Ze.getNorthWest().distanceTo(Ze.getSouthWest())*Ze.getNorthEast().distanceTo(Ze.getNorthWest());Xe<1700&&(He=dc(d));var ht=d.length,dn=[];for(_=0;_<ht;_++){var An=Ae(d[_]);dn.push(v.project(Ae([An.lat-He.lat,An.lng-He.lng])))}for(_=0,D=0;_<ht-1;_++)D+=dn[_].distanceTo(dn[_+1])/2;if(D===0)Ne=dn[0];else for(_=0,H=0;_<ht-1;_++)if(ee=dn[_],ue=dn[_+1],j=ee.distanceTo(ue),H+=j,H>D){_e=(H-D)/j,Ne=[ue.x-_e*(ue.x-ee.x),ue.y-_e*(ue.y-ee.y)];break}var ri=v.unproject(Z(Ne));return Ae([ri.lat+He.lat,ri.lng+He.lng])}var _f={__proto__:null,simplify:mc,pointToSegmentDistance:nu,closestPointOnSegment:Sa,clipSegment:bf,_getEdgeIntersection:iu,_getBitCode:Ea,_sqClosestPointOnSegment:zs,isFlat:ni,_flat:Ta,polylineCenter:os},Aa={project:function(d){return new ie(d.lng,d.lat)},unproject:function(d){return new Le(d.y,d.x)},bounds:new Y([-180,-90],[180,90])},ru={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Y([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(d){var v=Math.PI/180,_=this.R,D=d.lat*v,j=this.R_MINOR/_,H=Math.sqrt(1-j*j),ee=H*Math.sin(D),ue=Math.tan(Math.PI/4-D/2)/Math.pow((1-ee)/(1+ee),H/2);return D=-_*Math.log(Math.max(ue,1e-10)),new ie(d.lng*v*_,D)},unproject:function(d){for(var v=180/Math.PI,_=this.R,D=this.R_MINOR/_,j=Math.sqrt(1-D*D),H=Math.exp(-d.y/_),ee=Math.PI/2-2*Math.atan(H),ue=0,_e=.1,Ne;ue<15&&Math.abs(_e)>1e-7;ue++)Ne=j*Math.sin(ee),Ne=Math.pow((1-Ne)/(1+Ne),j/2),_e=Math.PI/2-2*Math.atan(H*Ne)-ee,ee+=_e;return new Le(ee*v,d.x*v/_)}},Sf={__proto__:null,LonLat:Aa,Mercator:ru,SphericalMercator:je},ho=r({},Ue,{code:"EPSG:3395",projection:ru,transformation:function(){var d=.5/(Math.PI*ru.R);return Pe(d,.5,-d,.5)}()}),Ef=r({},Ue,{code:"EPSG:4326",projection:Aa,transformation:Pe(1/180,1,-1/180,.5)}),sh=r({},Ve,{projection:Aa,transformation:Pe(1,0,-1,0),scale:function(d){return Math.pow(2,d)},zoom:function(d){return Math.log(d)/Math.LN2},distance:function(d,v){var _=v.lng-d.lng,D=v.lat-d.lat;return Math.sqrt(_*_+D*D)},infinite:!0});Ve.Earth=Ue,Ve.EPSG3395=ho,Ve.EPSG3857=ot,Ve.EPSG900913=ct,Ve.EPSG4326=Ef,Ve.Simple=sh;var _r=oe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(d){return d.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(d){return d&&d.removeLayer(this),this},getPane:function(d){return this._map.getPane(d?this.options[d]||d:this.options.pane)},addInteractiveTarget:function(d){return this._map._targets[f(d)]=this,this},removeInteractiveTarget:function(d){return delete this._map._targets[f(d)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(d){var v=d.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var _=this.getEvents();v.on(_,this),this.once("remove",function(){v.off(_,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});Lt.include({addLayer:function(d){if(!d._layerAdd)throw new Error("The provided object is not a Layer.");var v=f(d);return this._layers[v]?this:(this._layers[v]=d,d._mapToAdd=this,d.beforeAdd&&d.beforeAdd(this),this.whenReady(d._layerAdd,d),this)},removeLayer:function(d){var v=f(d);return this._layers[v]?(this._loaded&&d.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:d}),d.fire("remove")),d._map=d._mapToAdd=null,this):this},hasLayer:function(d){return f(d)in this._layers},eachLayer:function(d,v){for(var _ in this._layers)d.call(v,this._layers[_]);return this},_addLayers:function(d){d=d?P(d)?d:[d]:[];for(var v=0,_=d.length;v<_;v++)this.addLayer(d[v])},_addZoomLimit:function(d){(!isNaN(d.options.maxZoom)||!isNaN(d.options.minZoom))&&(this._zoomBoundLayers[f(d)]=d,this._updateZoomLevels())},_removeZoomLimit:function(d){var v=f(d);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var d=1/0,v=-1/0,_=this._getZoomSpan();for(var D in this._zoomBoundLayers){var j=this._zoomBoundLayers[D].options;d=j.minZoom===void 0?d:Math.min(d,j.minZoom),v=j.maxZoom===void 0?v:Math.max(v,j.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=d===1/0?void 0:d,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var wa=_r.extend({initialize:function(d,v){T(this,v),this._layers={};var _,D;if(d)for(_=0,D=d.length;_<D;_++)this.addLayer(d[_])},addLayer:function(d){var v=this.getLayerId(d);return this._layers[v]=d,this._map&&this._map.addLayer(d),this},removeLayer:function(d){var v=d in this._layers?d:this.getLayerId(d);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(d){var v=typeof d=="number"?d:this.getLayerId(d);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(d){var v=Array.prototype.slice.call(arguments,1),_,D;for(_ in this._layers)D=this._layers[_],D[d]&&D[d].apply(D,v);return this},onAdd:function(d){this.eachLayer(d.addLayer,d)},onRemove:function(d){this.eachLayer(d.removeLayer,d)},eachLayer:function(d,v){for(var _ in this._layers)d.call(v,this._layers[_]);return this},getLayer:function(d){return this._layers[d]},getLayers:function(){var d=[];return this.eachLayer(d.push,d),d},setZIndex:function(d){return this.invoke("setZIndex",d)},getLayerId:function(d){return f(d)}}),Tf=function(d,v){return new wa(d,v)},yn=wa.extend({addLayer:function(d){return this.hasLayer(d)?this:(d.addEventParent(this),wa.prototype.addLayer.call(this,d),this.fire("layeradd",{layer:d}))},removeLayer:function(d){return this.hasLayer(d)?(d in this._layers&&(d=this._layers[d]),d.removeEventParent(this),wa.prototype.removeLayer.call(this,d),this.fire("layerremove",{layer:d})):this},setStyle:function(d){return this.invoke("setStyle",d)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var d=new me;for(var v in this._layers){var _=this._layers[v];d.extend(_.getBounds?_.getBounds():_.getLatLng())}return d}}),mo=function(d,v){return new yn(d,v)},La=se.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(d){T(this,d)},createIcon:function(d){return this._createIcon("icon",d)},createShadow:function(d){return this._createIcon("shadow",d)},_createIcon:function(d,v){var _=this._getIconUrl(d);if(!_){if(d==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var D=this._createImg(_,v&&v.tagName==="IMG"?v:null);return this._setIconStyles(D,d),(this.options.crossOrigin||this.options.crossOrigin==="")&&(D.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),D},_setIconStyles:function(d,v){var _=this.options,D=_[v+"Size"];typeof D=="number"&&(D=[D,D]);var j=Z(D),H=Z(v==="shadow"&&_.shadowAnchor||_.iconAnchor||j&&j.divideBy(2,!0));d.className="leaflet-marker-"+v+" "+(_.className||""),H&&(d.style.marginLeft=-H.x+"px",d.style.marginTop=-H.y+"px"),j&&(d.style.width=j.x+"px",d.style.height=j.y+"px")},_createImg:function(d,v){return v=v||document.createElement("img"),v.src=d,v},_getIconUrl:function(d){return st.retina&&this.options[d+"RetinaUrl"]||this.options[d+"Url"]}});function Wo(d){return new La(d)}var po=La.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(d){return typeof po.imagePath!="string"&&(po.imagePath=this._detectIconPath()),(this.options.imagePath||po.imagePath)+La.prototype._getIconUrl.call(this,d)},_stripUrl:function(d){var v=function(_,D,j){var H=D.exec(_);return H&&H[j]};return d=v(d,/^url\((['"])?(.+)\1\)$/,2),d&&v(d,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var d=Nt("div","leaflet-default-icon-path",document.body),v=js(d,"background-image")||js(d,"backgroundImage");if(document.body.removeChild(d),v=this._stripUrl(v),v)return v;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),vc=xr.extend({initialize:function(d){this._marker=d},addHooks:function(){var d=this._marker._icon;this._draggable||(this._draggable=new as(d,d,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),At(d,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&sn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(d){var v=this._marker,_=v._map,D=this._marker.options.autoPanSpeed,j=this._marker.options.autoPanPadding,H=wi(v._icon),ee=_.getPixelBounds(),ue=_.getPixelOrigin(),_e=ne(ee.min._subtract(ue).add(j),ee.max._subtract(ue).subtract(j));if(!_e.contains(H)){var Ne=Z((Math.max(_e.max.x,H.x)-_e.max.x)/(ee.max.x-_e.max.x)-(Math.min(_e.min.x,H.x)-_e.min.x)/(ee.min.x-_e.min.x),(Math.max(_e.max.y,H.y)-_e.max.y)/(ee.max.y-_e.max.y)-(Math.min(_e.min.y,H.y)-_e.min.y)/(ee.min.y-_e.min.y)).multiplyBy(D);_.panBy(Ne,{animate:!1}),this._draggable._newPos._add(Ne),this._draggable._startPos._add(Ne),zt(v._icon,this._draggable._newPos),this._onDrag(d),this._panRequest=Q(this._adjustPan.bind(this,d))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(d){this._marker.options.autoPan&&(J(this._panRequest),this._panRequest=Q(this._adjustPan.bind(this,d)))},_onDrag:function(d){var v=this._marker,_=v._shadow,D=wi(v._icon),j=v._map.layerPointToLatLng(D);_&&zt(_,D),v._latlng=j,d.latlng=j,d.oldLatLng=this._oldLatLng,v.fire("move",d).fire("drag",d)},_onDragEnd:function(d){J(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",d)}}),Ca=_r.extend({options:{icon:new po,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(d,v){T(this,v),this._latlng=Ae(d)},onAdd:function(d){this._zoomAnimated=this._zoomAnimated&&d.options.markerZoomAnimation,this._zoomAnimated&&d.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(d){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&d.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(d){var v=this._latlng;return this._latlng=Ae(d),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(d){return this.options.zIndexOffset=d,this.update()},getIcon:function(){return this.options.icon},setIcon:function(d){return this.options.icon=d,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var d=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(d)}return this},_initIcon:function(){var d=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=d.icon.createIcon(this._icon),D=!1;_!==this._icon&&(this._icon&&this._removeIcon(),D=!0,d.title&&(_.title=d.title),_.tagName==="IMG"&&(_.alt=d.alt||"")),At(_,v),d.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,d.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&pt(_,"focus",this._panOnFocus,this);var j=d.icon.createShadow(this._shadow),H=!1;j!==this._shadow&&(this._removeShadow(),H=!0),j&&(At(j,v),j.alt=""),this._shadow=j,d.opacity<1&&this._updateOpacity(),D&&this.getPane().appendChild(this._icon),this._initInteraction(),j&&H&&this.getPane(d.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$t(this._icon,"focus",this._panOnFocus,this),rn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&rn(this._shadow),this._shadow=null},_setPos:function(d){this._icon&&zt(this._icon,d),this._shadow&&zt(this._shadow,d),this._zIndex=d.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(d){this._icon&&(this._icon.style.zIndex=this._zIndex+d)},_animateZoom:function(d){var v=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(At(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vc)){var d=this.options.draggable;this.dragging&&(d=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vc(this),d&&this.dragging.enable()}},setOpacity:function(d){return this.options.opacity=d,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var d=this.options.opacity;this._icon&&Mn(this._icon,d),this._shadow&&Mn(this._shadow,d)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var d=this._map;if(d){var v=this.options.icon.options,_=v.iconSize?Z(v.iconSize):Z(0,0),D=v.iconAnchor?Z(v.iconAnchor):Z(0,0);d.panInside(this._latlng,{paddingTopLeft:D,paddingBottomRight:_.subtract(D)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function go(d,v){return new Ca(d,v)}var ls=_r.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(d){this._renderer=d.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(d){return T(this,d),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&d&&Object.prototype.hasOwnProperty.call(d,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Zo=ls.extend({options:{fill:!0,radius:10},initialize:function(d,v){T(this,v),this._latlng=Ae(d),this._radius=this.options.radius},setLatLng:function(d){var v=this._latlng;return this._latlng=Ae(d),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(d){return this.options.radius=this._radius=d,this.redraw()},getRadius:function(){return this._radius},setStyle:function(d){var v=d&&d.radius||this._radius;return ls.prototype.setStyle.call(this,d),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var d=this._radius,v=this._radiusY||d,_=this._clickTolerance(),D=[d+_,v+_];this._pxBounds=new Y(this._point.subtract(D),this._point.add(D))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(d){return d.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function yc(d,v){return new Zo(d,v)}var bc=Zo.extend({initialize:function(d,v,_){if(typeof v=="number"&&(v=r({},_,{radius:v})),T(this,v),this._latlng=Ae(d),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(d){return this._mRadius=d,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var d=[this._radius,this._radiusY||this._radius];return new me(this._map.layerPointToLatLng(this._point.subtract(d)),this._map.layerPointToLatLng(this._point.add(d)))},setStyle:ls.prototype.setStyle,_project:function(){var d=this._latlng.lng,v=this._latlng.lat,_=this._map,D=_.options.crs;if(D.distance===Ue.distance){var j=Math.PI/180,H=this._mRadius/Ue.R/j,ee=_.project([v+H,d]),ue=_.project([v-H,d]),_e=ee.add(ue).divideBy(2),Ne=_.unproject(_e).lat,He=Math.acos((Math.cos(H*j)-Math.sin(v*j)*Math.sin(Ne*j))/(Math.cos(v*j)*Math.cos(Ne*j)))/j;(isNaN(He)||He===0)&&(He=H/Math.cos(Math.PI/180*v)),this._point=_e.subtract(_.getPixelOrigin()),this._radius=isNaN(He)?0:_e.x-_.project([Ne,d-He]).x,this._radiusY=_e.y-ee.y}else{var Ze=D.unproject(D.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(Ze).x}this._updateBounds()}});function ah(d,v,_){return new bc(d,v,_)}var jr=ls.extend({options:{smoothFactor:1,noClip:!1},initialize:function(d,v){T(this,v),this._setLatLngs(d)},getLatLngs:function(){return this._latlngs},setLatLngs:function(d){return this._setLatLngs(d),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(d){for(var v=1/0,_=null,D=zs,j,H,ee=0,ue=this._parts.length;ee<ue;ee++)for(var _e=this._parts[ee],Ne=1,He=_e.length;Ne<He;Ne++){j=_e[Ne-1],H=_e[Ne];var Ze=D(d,j,H,!0);Ze<v&&(v=Ze,_=D(d,j,H))}return _&&(_.distance=Math.sqrt(v)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return os(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(d,v){return v=v||this._defaultShape(),d=Ae(d),v.push(d),this._bounds.extend(d),this.redraw()},_setLatLngs:function(d){this._bounds=new me,this._latlngs=this._convertLatLngs(d)},_defaultShape:function(){return ni(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(d){for(var v=[],_=ni(d),D=0,j=d.length;D<j;D++)_?(v[D]=Ae(d[D]),this._bounds.extend(v[D])):v[D]=this._convertLatLngs(d[D]);return v},_project:function(){var d=new Y;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,d),this._bounds.isValid()&&d.isValid()&&(this._rawPxBounds=d,this._updateBounds())},_updateBounds:function(){var d=this._clickTolerance(),v=new ie(d,d);this._rawPxBounds&&(this._pxBounds=new Y([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(d,v,_){var D=d[0]instanceof Le,j=d.length,H,ee;if(D){for(ee=[],H=0;H<j;H++)ee[H]=this._map.latLngToLayerPoint(d[H]),_.extend(ee[H]);v.push(ee)}else for(H=0;H<j;H++)this._projectLatlngs(d[H],v,_)},_clipPoints:function(){var d=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(d))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,_,D,j,H,ee,ue,_e;for(_=0,j=0,H=this._rings.length;_<H;_++)for(_e=this._rings[_],D=0,ee=_e.length;D<ee-1;D++)ue=bf(_e[D],_e[D+1],d,D,!0),ue&&(v[j]=v[j]||[],v[j].push(ue[0]),(ue[1]!==_e[D+1]||D===ee-2)&&(v[j].push(ue[1]),j++))}},_simplifyPoints:function(){for(var d=this._parts,v=this.options.smoothFactor,_=0,D=d.length;_<D;_++)d[_]=mc(d[_],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(d,v){var _,D,j,H,ee,ue,_e=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(d))return!1;for(_=0,H=this._parts.length;_<H;_++)for(ue=this._parts[_],D=0,ee=ue.length,j=ee-1;D<ee;j=D++)if(!(!v&&D===0)&&nu(d,ue[j],ue[D])<=_e)return!0;return!1}});function Af(d,v){return new jr(d,v)}jr._flat=Ta;var Oa=jr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return tu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(d){var v=jr.prototype._convertLatLngs.call(this,d),_=v.length;return _>=2&&v[0]instanceof Le&&v[0].equals(v[_-1])&&v.pop(),v},_setLatLngs:function(d){jr.prototype._setLatLngs.call(this,d),ni(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ni(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var d=this._renderer._bounds,v=this.options.weight,_=new ie(v,v);if(d=new Y(d.min.subtract(_),d.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(d))){if(this.options.noClip){this._parts=this._rings;return}for(var D=0,j=this._rings.length,H;D<j;D++)H=Yo(this._rings[D],d,!0),H.length&&this._parts.push(H)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(d){var v=!1,_,D,j,H,ee,ue,_e,Ne;if(!this._pxBounds||!this._pxBounds.contains(d))return!1;for(H=0,_e=this._parts.length;H<_e;H++)for(_=this._parts[H],ee=0,Ne=_.length,ue=Ne-1;ee<Ne;ue=ee++)D=_[ee],j=_[ue],D.y>d.y!=j.y>d.y&&d.x<(j.x-D.x)*(d.y-D.y)/(j.y-D.y)+D.x&&(v=!v);return v||jr.prototype._containsPoint.call(this,d,!0)}});function ii(d,v){return new Oa(d,v)}var Ci=yn.extend({initialize:function(d,v){T(this,v),this._layers={},d&&this.addData(d)},addData:function(d){var v=P(d)?d:d.features,_,D,j;if(v){for(_=0,D=v.length;_<D;_++)j=v[_],(j.geometries||j.geometry||j.features||j.coordinates)&&this.addData(j);return this}var H=this.options;if(H.filter&&!H.filter(d))return this;var ee=Ra(d,H);return ee?(ee.feature=yo(d),ee.defaultOptions=ee.options,this.resetStyle(ee),H.onEachFeature&&H.onEachFeature(d,ee),this.addLayer(ee)):this},resetStyle:function(d){return d===void 0?this.eachLayer(this.resetStyle,this):(d.options=r({},d.defaultOptions),this._setLayerStyle(d,this.options.style),this)},setStyle:function(d){return this.eachLayer(function(v){this._setLayerStyle(v,d)},this)},_setLayerStyle:function(d,v){d.setStyle&&(typeof v=="function"&&(v=v(d.feature)),d.setStyle(v))}});function Ra(d,v){var _=d.type==="Feature"?d.geometry:d,D=_?_.coordinates:null,j=[],H=v&&v.pointToLayer,ee=v&&v.coordsToLatLng||su,ue,_e,Ne,He;if(!D&&!_)return null;switch(_.type){case"Point":return ue=ee(D),Oi(H,d,ue,v);case"MultiPoint":for(Ne=0,He=D.length;Ne<He;Ne++)ue=ee(D[Ne]),j.push(Oi(H,d,ue,v));return new yn(j);case"LineString":case"MultiLineString":return _e=Xo(D,_.type==="LineString"?0:1,ee),new jr(_e,v);case"Polygon":case"MultiPolygon":return _e=Xo(D,_.type==="Polygon"?1:2,ee),new Oa(_e,v);case"GeometryCollection":for(Ne=0,He=_.geometries.length;Ne<He;Ne++){var Ze=Ra({geometry:_.geometries[Ne],type:"Feature",properties:d.properties},v);Ze&&j.push(Ze)}return new yn(j);case"FeatureCollection":for(Ne=0,He=_.features.length;Ne<He;Ne++){var Xe=Ra(_.features[Ne],v);Xe&&j.push(Xe)}return new yn(j);default:throw new Error("Invalid GeoJSON object.")}}function Oi(d,v,_,D){return d?d(v,_):new Ca(_,D&&D.markersInheritOptions&&D)}function su(d){return new Le(d[1],d[0],d[2])}function Xo(d,v,_){for(var D=[],j=0,H=d.length,ee;j<H;j++)ee=v?Xo(d[j],v-1,_):(_||su)(d[j]),D.push(ee);return D}function vo(d,v){return d=Ae(d),d.alt!==void 0?[g(d.lng,v),g(d.lat,v),g(d.alt,v)]:[g(d.lng,v),g(d.lat,v)]}function Qo(d,v,_,D){for(var j=[],H=0,ee=d.length;H<ee;H++)j.push(v?Qo(d[H],ni(d[H])?0:v-1,_,D):vo(d[H],D));return!v&&_&&j.length>0&&j.push(j[0].slice()),j}function Sr(d,v){return d.feature?r({},d.feature,{geometry:v}):yo(v)}function yo(d){return d.type==="Feature"||d.type==="FeatureCollection"?d:{type:"Feature",properties:{},geometry:d}}var Pa={toGeoJSON:function(d){return Sr(this,{type:"Point",coordinates:vo(this.getLatLng(),d)})}};Ca.include(Pa),bc.include(Pa),Zo.include(Pa),jr.include({toGeoJSON:function(d){var v=!ni(this._latlngs),_=Qo(this._latlngs,v?1:0,!1,d);return Sr(this,{type:(v?"Multi":"")+"LineString",coordinates:_})}}),Oa.include({toGeoJSON:function(d){var v=!ni(this._latlngs),_=v&&!ni(this._latlngs[0]),D=Qo(this._latlngs,_?2:v?1:0,!0,d);return v||(D=[D]),Sr(this,{type:(_?"Multi":"")+"Polygon",coordinates:D})}}),wa.include({toMultiPoint:function(d){var v=[];return this.eachLayer(function(_){v.push(_.toGeoJSON(d).geometry.coordinates)}),Sr(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(d){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(d);var _=v==="GeometryCollection",D=[];return this.eachLayer(function(j){if(j.toGeoJSON){var H=j.toGeoJSON(d);if(_)D.push(H.geometry);else{var ee=yo(H);ee.type==="FeatureCollection"?D.push.apply(D,ee.features):D.push(ee)}}}),_?Sr(this,{geometries:D,type:"GeometryCollection"}):{type:"FeatureCollection",features:D}}});function au(d,v){return new Ci(d,v)}var wf=au,Br=_r.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(d,v,_){this._url=d,this._bounds=Te(v),T(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(At(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){rn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(d){return this.options.opacity=d,this._image&&this._updateOpacity(),this},setStyle:function(d){return d.opacity&&this.setOpacity(d.opacity),this},bringToFront:function(){return this._map&&Bs(this._image),this},bringToBack:function(){return this._map&&pa(this._image),this},setUrl:function(d){return this._url=d,this._image&&(this._image.src=d),this},setBounds:function(d){return this._bounds=Te(d),this._map&&this._reset(),this},getEvents:function(){var d={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},setZIndex:function(d){return this.options.zIndex=d,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var d=this._url.tagName==="IMG",v=this._image=d?this._url:Nt("img");if(At(v,"leaflet-image-layer"),this._zoomAnimated&&At(v,"leaflet-zoom-animated"),this.options.className&&At(v,this.options.className),v.onselectstart=p,v.onmousemove=p,v.onload=a(this.fire,this,"load"),v.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),d){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(d){var v=this._map.getZoomScale(d.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,d.zoom,d.center).min;Ai(this._image,_,v)},_reset:function(){var d=this._image,v=new Y(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=v.getSize();zt(d,v.min),d.style.width=_.x+"px",d.style.height=_.y+"px"},_updateOpacity:function(){Mn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var d=this.options.errorOverlayUrl;d&&this._url!==d&&(this._url=d,this._image.src=d)},getCenter:function(){return this._bounds.getCenter()}}),Da=function(d,v,_){return new Br(d,v,_)},Jo=Br.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var d=this._url.tagName==="VIDEO",v=this._image=d?this._url:Nt("video");if(At(v,"leaflet-image-layer"),this._zoomAnimated&&At(v,"leaflet-zoom-animated"),this.options.className&&At(v,this.options.className),v.onselectstart=p,v.onmousemove=p,v.onloadeddata=a(this.fire,this,"load"),d){for(var _=v.getElementsByTagName("source"),D=[],j=0;j<_.length;j++)D.push(_[j].src);this._url=_.length>0?D:[v.src];return}P(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var H=0;H<this._url.length;H++){var ee=Nt("source");ee.src=this._url[H],v.appendChild(ee)}}});function ou(d,v,_){return new Jo(d,v,_)}var Gs=Br.extend({_initImage:function(){var d=this._image=this._url;At(d,"leaflet-image-layer"),this._zoomAnimated&&At(d,"leaflet-zoom-animated"),this.options.className&&At(d,this.options.className),d.onselectstart=p,d.onmousemove=p}});function Lf(d,v,_){return new Gs(d,v,_)}var Wn=_r.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(d,v){d&&(d instanceof Le||P(d))?(this._latlng=Ae(d),T(this,v)):(T(this,d),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(d){return d=arguments.length?d:this._source._map,d.hasLayer(this)||d.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(d){return this._map?this.close():(arguments.length?this._source=d:d=this._source,this._prepareOpen(),this.openOn(d._map)),this},onAdd:function(d){this._zoomAnimated=d._zoomAnimated,this._container||this._initLayout(),d._fadeAnimated&&Mn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),d._fadeAnimated&&Mn(this._container,1),this.bringToFront(),this.options.interactive&&(At(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(d){d._fadeAnimated?(Mn(this._container,0),this._removeTimeout=setTimeout(a(rn,void 0,this._container),200)):rn(this._container),this.options.interactive&&(sn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(d){return this._latlng=Ae(d),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(d){return this._content=d,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var d={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Bs(this._container),this},bringToBack:function(){return this._map&&pa(this._container),this},_prepareOpen:function(d){var v=this._source;if(!v._map)return!1;if(v instanceof yn){v=null;var _=this._source._layers;for(var D in _)if(_[D]._map){v=_[D];break}if(!v)return!1;this._source=v}if(!d)if(v.getCenter)d=v.getCenter();else if(v.getLatLng)d=v.getLatLng();else if(v.getBounds)d=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(d),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var d=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")d.innerHTML=v;else{for(;d.hasChildNodes();)d.removeChild(d.firstChild);d.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var d=this._map.latLngToLayerPoint(this._latlng),v=Z(this.options.offset),_=this._getAnchor();this._zoomAnimated?zt(this._container,d.add(_)):v=v.add(d).add(_);var D=this._containerBottom=-v.y,j=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=D+"px",this._container.style.left=j+"px"}},_getAnchor:function(){return[0,0]}});Lt.include({_initOverlay:function(d,v,_,D){var j=v;return j instanceof d||(j=new d(D).setContent(v)),_&&j.setLatLng(_),j}}),_r.include({_initOverlay:function(d,v,_,D){var j=_;return j instanceof d?(T(j,D),j._source=this):(j=v&&!D?v:new d(D,this),j.setContent(_)),j}});var Yi=Wn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(d){return d=arguments.length?d:this._source._map,!d.hasLayer(this)&&d._popup&&d._popup.options.autoClose&&d.removeLayer(d._popup),d._popup=this,Wn.prototype.openOn.call(this,d)},onAdd:function(d){Wn.prototype.onAdd.call(this,d),d.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ls||this._source.on("preclick",kr))},onRemove:function(d){Wn.prototype.onRemove.call(this,d),d.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ls||this._source.off("preclick",kr))},getEvents:function(){var d=Wn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(d.preclick=this.close),this.options.keepInView&&(d.moveend=this._adjustPan),d},_initLayout:function(){var d="leaflet-popup",v=this._container=Nt("div",d+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=Nt("div",d+"-content-wrapper",v);if(this._contentNode=Nt("div",d+"-content",_),rs(v),Us(this._contentNode),pt(v,"contextmenu",kr),this._tipContainer=Nt("div",d+"-tip-container",v),this._tip=Nt("div",d+"-tip",this._tipContainer),this.options.closeButton){var D=this._closeButton=Nt("a",d+"-close-button",v);D.setAttribute("role","button"),D.setAttribute("aria-label","Close popup"),D.href="#close",D.innerHTML='<span aria-hidden="true">&#215;</span>',pt(D,"click",function(j){Tn(j),this.close()},this)}},_updateLayout:function(){var d=this._contentNode,v=d.style;v.width="",v.whiteSpace="nowrap";var _=d.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),v.width=_+1+"px",v.whiteSpace="",v.height="";var D=d.offsetHeight,j=this.options.maxHeight,H="leaflet-popup-scrolled";j&&D>j?(v.height=j+"px",At(d,H)):sn(d,H),this._containerWidth=this._container.offsetWidth},_animateZoom:function(d){var v=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center),_=this._getAnchor();zt(this._container,v.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var d=this._map,v=parseInt(js(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+v,D=this._containerWidth,j=new ie(this._containerLeft,-_-this._containerBottom);j._add(wi(this._container));var H=d.layerPointToContainerPoint(j),ee=Z(this.options.autoPanPadding),ue=Z(this.options.autoPanPaddingTopLeft||ee),_e=Z(this.options.autoPanPaddingBottomRight||ee),Ne=d.getSize(),He=0,Ze=0;H.x+D+_e.x>Ne.x&&(He=H.x+D-Ne.x+_e.x),H.x-He-ue.x<0&&(He=H.x-ue.x),H.y+_+_e.y>Ne.y&&(Ze=H.y+_-Ne.y+_e.y),H.y-Ze-ue.y<0&&(Ze=H.y-ue.y),(He||Ze)&&(this.options.keepInView&&(this._autopanning=!0),d.fire("autopanstart").panBy([He,Ze]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Cf=function(d,v){return new Yi(d,v)};Lt.mergeOptions({closePopupOnClick:!0}),Lt.include({openPopup:function(d,v,_){return this._initOverlay(Yi,d,v,_).openOn(this),this},closePopup:function(d){return d=arguments.length?d:this._popup,d&&d.close(),this}}),_r.include({bindPopup:function(d,v){return this._popup=this._initOverlay(Yi,this._popup,d,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(d){return this._popup&&(this instanceof yn||(this._popup._source=this),this._popup._prepareOpen(d||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(d){return this._popup&&this._popup.setContent(d),this},getPopup:function(){return this._popup},_openPopup:function(d){if(!(!this._popup||!this._map)){Nr(d);var v=d.layer||d.target;if(this._popup._source===v&&!(v instanceof ls)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(d.latlng);return}this._popup._source=v,this.openPopup(d.latlng)}},_movePopup:function(d){this._popup.setLatLng(d.latlng)},_onKeyPress:function(d){d.originalEvent.keyCode===13&&this._openPopup(d)}});var lu=Wn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(d){Wn.prototype.onAdd.call(this,d),this.setOpacity(this.options.opacity),d.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(d){Wn.prototype.onRemove.call(this,d),d.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var d=Wn.prototype.getEvents.call(this);return this.options.permanent||(d.preclick=this.close),d},_initLayout:function(){var d="leaflet-tooltip",v=d+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Nt("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(d){var v,_,D=this._map,j=this._container,H=D.latLngToContainerPoint(D.getCenter()),ee=D.layerPointToContainerPoint(d),ue=this.options.direction,_e=j.offsetWidth,Ne=j.offsetHeight,He=Z(this.options.offset),Ze=this._getAnchor();ue==="top"?(v=_e/2,_=Ne):ue==="bottom"?(v=_e/2,_=0):ue==="center"?(v=_e/2,_=Ne/2):ue==="right"?(v=0,_=Ne/2):ue==="left"?(v=_e,_=Ne/2):ee.x<H.x?(ue="right",v=0,_=Ne/2):(ue="left",v=_e+(He.x+Ze.x)*2,_=Ne/2),d=d.subtract(Z(v,_,!0)).add(He).add(Ze),sn(j,"leaflet-tooltip-right"),sn(j,"leaflet-tooltip-left"),sn(j,"leaflet-tooltip-top"),sn(j,"leaflet-tooltip-bottom"),At(j,"leaflet-tooltip-"+ue),zt(j,d)},_updatePosition:function(){var d=this._map.latLngToLayerPoint(this._latlng);this._setPosition(d)},setOpacity:function(d){this.options.opacity=d,this._container&&Mn(this._container,d)},_animateZoom:function(d){var v=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center);this._setPosition(v)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Of=function(d,v){return new lu(d,v)};Lt.include({openTooltip:function(d,v,_){return this._initOverlay(lu,d,v,_).openOn(this),this},closeTooltip:function(d){return d.close(),this}}),_r.include({bindTooltip:function(d,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(lu,this._tooltip,d,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(d){if(!(!d&&this._tooltipHandlersAdded)){var v=d?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[v](_),this._tooltipHandlersAdded=!d}},openTooltip:function(d){return this._tooltip&&(this instanceof yn||(this._tooltip._source=this),this._tooltip._prepareOpen(d)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(d){return this._tooltip&&this._tooltip.setContent(d),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(d){var v=typeof d.getElement=="function"&&d.getElement();v&&(pt(v,"focus",function(){this._tooltip._source=d,this.openTooltip()},this),pt(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(d){var v=typeof d.getElement=="function"&&d.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(d){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(d)});return}this._tooltip._source=d.layer||d.target,this.openTooltip(this._tooltip.options.sticky?d.latlng:void 0)}},_moveTooltip:function(d){var v=d.latlng,_,D;this._tooltip.options.sticky&&d.originalEvent&&(_=this._map.mouseEventToContainerPoint(d.originalEvent),D=this._map.containerPointToLayerPoint(_),v=this._map.layerPointToLatLng(D)),this._tooltip.setLatLng(v)}});var uu=La.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(d){var v=d&&d.tagName==="DIV"?d:document.createElement("div"),_=this.options;if(_.html instanceof Element?(ti(v),v.appendChild(_.html)):v.innerHTML=_.html!==!1?_.html:"",_.bgPos){var D=Z(_.bgPos);v.style.backgroundPosition=-D.x+"px "+-D.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function xc(d){return new uu(d)}La.Default=po;var Hs=_r.extend({options:{tileSize:256,opacity:1,updateWhenIdle:st.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(d){T(this,d)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(d){d._addZoomLimit(this)},onRemove:function(d){this._removeAllTiles(),rn(this._container),d._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Bs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(pa(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(d){return this.options.opacity=d,this._updateOpacity(),this},setZIndex:function(d){return this.options.zIndex=d,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var d=this._clampZoom(this._map.getZoom());d!==this._tileZoom&&(this._tileZoom=d,this._updateLevels()),this._update()}return this},getEvents:function(){var d={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),d.move=this._onMove),this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},createTile:function(){return document.createElement("div")},getTileSize:function(){var d=this.options.tileSize;return d instanceof ie?d:new ie(d,d)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(d){for(var v=this.getPane().children,_=-d(-1/0,1/0),D=0,j=v.length,H;D<j;D++)H=v[D].style.zIndex,v[D]!==this._container&&H&&(_=d(_,+H));isFinite(_)&&(this.options.zIndex=_+d(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!st.ielt9){Mn(this._container,this.options.opacity);var d=+new Date,v=!1,_=!1;for(var D in this._tiles){var j=this._tiles[D];if(!(!j.current||!j.loaded)){var H=Math.min(1,(d-j.loaded)/200);Mn(j.el,H),H<1?v=!0:(j.active?_=!0:this._onOpaqueTile(j),j.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),v&&(J(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=Nt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var d=this._tileZoom,v=this.options.maxZoom;if(d!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===d?(this._levels[_].el.style.zIndex=v-Math.abs(d-_),this._onUpdateLevel(_)):(rn(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var D=this._levels[d],j=this._map;return D||(D=this._levels[d]={},D.el=Nt("div","leaflet-tile-container leaflet-zoom-animated",this._container),D.el.style.zIndex=v,D.origin=j.project(j.unproject(j.getPixelOrigin()),d).round(),D.zoom=d,this._setZoomTransform(D,j.getCenter(),j.getZoom()),p(D.el.offsetWidth),this._onCreateLevel(D)),this._level=D,D}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var d,v,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(d in this._tiles)v=this._tiles[d],v.retain=v.current;for(d in this._tiles)if(v=this._tiles[d],v.current&&!v.active){var D=v.coords;this._retainParent(D.x,D.y,D.z,D.z-5)||this._retainChildren(D.x,D.y,D.z,D.z+2)}for(d in this._tiles)this._tiles[d].retain||this._removeTile(d)}},_removeTilesAtZoom:function(d){for(var v in this._tiles)this._tiles[v].coords.z===d&&this._removeTile(v)},_removeAllTiles:function(){for(var d in this._tiles)this._removeTile(d)},_invalidateAll:function(){for(var d in this._levels)rn(this._levels[d].el),this._onRemoveLevel(Number(d)),delete this._levels[d];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(d,v,_,D){var j=Math.floor(d/2),H=Math.floor(v/2),ee=_-1,ue=new ie(+j,+H);ue.z=+ee;var _e=this._tileCoordsToKey(ue),Ne=this._tiles[_e];return Ne&&Ne.active?(Ne.retain=!0,!0):(Ne&&Ne.loaded&&(Ne.retain=!0),ee>D?this._retainParent(j,H,ee,D):!1)},_retainChildren:function(d,v,_,D){for(var j=2*d;j<2*d+2;j++)for(var H=2*v;H<2*v+2;H++){var ee=new ie(j,H);ee.z=_+1;var ue=this._tileCoordsToKey(ee),_e=this._tiles[ue];if(_e&&_e.active){_e.retain=!0;continue}else _e&&_e.loaded&&(_e.retain=!0);_+1<D&&this._retainChildren(j,H,_+1,D)}},_resetView:function(d){var v=d&&(d.pinch||d.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(d){this._setView(d.center,d.zoom,!0,d.noUpdate)},_clampZoom:function(d){var v=this.options;return v.minNativeZoom!==void 0&&d<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<d?v.maxNativeZoom:d},_setView:function(d,v,_,D){var j=Math.round(v);this.options.maxZoom!==void 0&&j>this.options.maxZoom||this.options.minZoom!==void 0&&j<this.options.minZoom?j=void 0:j=this._clampZoom(j);var H=this.options.updateWhenZooming&&j!==this._tileZoom;(!D||H)&&(this._tileZoom=j,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),j!==void 0&&this._update(d),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(d,v)},_setZoomTransforms:function(d,v){for(var _ in this._levels)this._setZoomTransform(this._levels[_],d,v)},_setZoomTransform:function(d,v,_){var D=this._map.getZoomScale(_,d.zoom),j=d.origin.multiplyBy(D).subtract(this._map._getNewPixelOrigin(v,_)).round();st.any3d?Ai(d.el,j,D):zt(d.el,j)},_resetGrid:function(){var d=this._map,v=d.options.crs,_=this._tileSize=this.getTileSize(),D=this._tileZoom,j=this._map.getPixelWorldBounds(this._tileZoom);j&&(this._globalTileRange=this._pxBoundsToTileRange(j)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(d.project([0,v.wrapLng[0]],D).x/_.x),Math.ceil(d.project([0,v.wrapLng[1]],D).x/_.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(d.project([v.wrapLat[0],0],D).y/_.x),Math.ceil(d.project([v.wrapLat[1],0],D).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(d){var v=this._map,_=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),D=v.getZoomScale(_,this._tileZoom),j=v.project(d,this._tileZoom).floor(),H=v.getSize().divideBy(D*2);return new Y(j.subtract(H),j.add(H))},_update:function(d){var v=this._map;if(v){var _=this._clampZoom(v.getZoom());if(d===void 0&&(d=v.getCenter()),this._tileZoom!==void 0){var D=this._getTiledPixelBounds(d),j=this._pxBoundsToTileRange(D),H=j.getCenter(),ee=[],ue=this.options.keepBuffer,_e=new Y(j.getBottomLeft().subtract([ue,-ue]),j.getTopRight().add([ue,-ue]));if(!(isFinite(j.min.x)&&isFinite(j.min.y)&&isFinite(j.max.x)&&isFinite(j.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ne in this._tiles){var He=this._tiles[Ne].coords;(He.z!==this._tileZoom||!_e.contains(new ie(He.x,He.y)))&&(this._tiles[Ne].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(d,_);return}for(var Ze=j.min.y;Ze<=j.max.y;Ze++)for(var Xe=j.min.x;Xe<=j.max.x;Xe++){var ht=new ie(Xe,Ze);if(ht.z=this._tileZoom,!!this._isValidTile(ht)){var dn=this._tiles[this._tileCoordsToKey(ht)];dn?dn.current=!0:ee.push(ht)}}if(ee.sort(function(ri,Zn){return ri.distanceTo(H)-Zn.distanceTo(H)}),ee.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var An=document.createDocumentFragment();for(Xe=0;Xe<ee.length;Xe++)this._addTile(ee[Xe],An);this._level.el.appendChild(An)}}}},_isValidTile:function(d){var v=this._map.options.crs;if(!v.infinite){var _=this._globalTileRange;if(!v.wrapLng&&(d.x<_.min.x||d.x>_.max.x)||!v.wrapLat&&(d.y<_.min.y||d.y>_.max.y))return!1}if(!this.options.bounds)return!0;var D=this._tileCoordsToBounds(d);return Te(this.options.bounds).overlaps(D)},_keyToBounds:function(d){return this._tileCoordsToBounds(this._keyToTileCoords(d))},_tileCoordsToNwSe:function(d){var v=this._map,_=this.getTileSize(),D=d.scaleBy(_),j=D.add(_),H=v.unproject(D,d.z),ee=v.unproject(j,d.z);return[H,ee]},_tileCoordsToBounds:function(d){var v=this._tileCoordsToNwSe(d),_=new me(v[0],v[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(d){return d.x+":"+d.y+":"+d.z},_keyToTileCoords:function(d){var v=d.split(":"),_=new ie(+v[0],+v[1]);return _.z=+v[2],_},_removeTile:function(d){var v=this._tiles[d];v&&(rn(v.el),delete this._tiles[d],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(d)}))},_initTile:function(d){At(d,"leaflet-tile");var v=this.getTileSize();d.style.width=v.x+"px",d.style.height=v.y+"px",d.onselectstart=p,d.onmousemove=p,st.ielt9&&this.options.opacity<1&&Mn(d,this.options.opacity)},_addTile:function(d,v){var _=this._getTilePos(d),D=this._tileCoordsToKey(d),j=this.createTile(this._wrapCoords(d),a(this._tileReady,this,d));this._initTile(j),this.createTile.length<2&&Q(a(this._tileReady,this,d,null,j)),zt(j,_),this._tiles[D]={el:j,coords:d,current:!0},v.appendChild(j),this.fire("tileloadstart",{tile:j,coords:d})},_tileReady:function(d,v,_){v&&this.fire("tileerror",{error:v,tile:_,coords:d});var D=this._tileCoordsToKey(d);_=this._tiles[D],_&&(_.loaded=+new Date,this._map._fadeAnimated?(Mn(_.el,0),J(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),v||(At(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:d})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),st.ielt9||!this._map._fadeAnimated?Q(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(d){return d.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(d){var v=new ie(this._wrapX?h(d.x,this._wrapX):d.x,this._wrapY?h(d.y,this._wrapY):d.y);return v.z=d.z,v},_pxBoundsToTileRange:function(d){var v=this.getTileSize();return new Y(d.min.unscaleBy(v).floor(),d.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var d in this._tiles)if(!this._tiles[d].loaded)return!1;return!0}});function Er(d){return new Hs(d)}var Ia=Hs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(d,v){this._url=d,v=T(this,v),v.detectRetina&&st.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(d,v){return this._url===d&&v===void 0&&(v=!0),this._url=d,v||this.redraw(),this},createTile:function(d,v){var _=document.createElement("img");return pt(_,"load",a(this._tileOnLoad,this,v,_)),pt(_,"error",a(this._tileOnError,this,v,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(d),_},getTileUrl:function(d){var v={r:st.retina?"@2x":"",s:this._getSubdomain(d),x:d.x,y:d.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-d.y;this.options.tms&&(v.y=_),v["-y"]=_}return I(this._url,r(v,this.options))},_tileOnLoad:function(d,v){st.ielt9?setTimeout(a(d,this,null,v),0):d(null,v)},_tileOnError:function(d,v,_){var D=this.options.errorTileUrl;D&&v.getAttribute("src")!==D&&(v.src=D),d(_,v)},_onTileRemove:function(d){d.tile.onload=null},_getZoomForUrl:function(){var d=this._tileZoom,v=this.options.maxZoom,_=this.options.zoomReverse,D=this.options.zoomOffset;return _&&(d=v-d),d+D},_getSubdomain:function(d){var v=Math.abs(d.x+d.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var d,v;for(d in this._tiles)if(this._tiles[d].coords.z!==this._tileZoom&&(v=this._tiles[d].el,v.onload=p,v.onerror=p,!v.complete)){v.src=k;var _=this._tiles[d].coords;rn(v),delete this._tiles[d],this.fire("tileabort",{tile:v,coords:_})}},_removeTile:function(d){var v=this._tiles[d];if(v)return v.el.setAttribute("src",k),Hs.prototype._removeTile.call(this,d)},_tileReady:function(d,v,_){if(!(!this._map||_&&_.getAttribute("src")===k))return Hs.prototype._tileReady.call(this,d,v,_)}});function Wi(d,v){return new Ia(d,v)}var Ri=Ia.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(d,v){this._url=d;var _=r({},this.defaultWmsParams);for(var D in v)D in this.options||(_[D]=v[D]);v=T(this,v);var j=v.detectRetina&&st.retina?2:1,H=this.getTileSize();_.width=H.x*j,_.height=H.y*j,this.wmsParams=_},onAdd:function(d){this._crs=this.options.crs||d.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,Ia.prototype.onAdd.call(this,d)},getTileUrl:function(d){var v=this._tileCoordsToNwSe(d),_=this._crs,D=ne(_.project(v[0]),_.project(v[1])),j=D.min,H=D.max,ee=(this._wmsVersion>=1.3&&this._crs===Ef?[j.y,j.x,H.y,H.x]:[j.x,j.y,H.x,H.y]).join(","),ue=Ia.prototype.getTileUrl.call(this,d);return ue+E(this.wmsParams,ue,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ee},setParams:function(d,v){return r(this.wmsParams,d),v||this.redraw(),this}});function Ma(d,v){return new Ri(d,v)}Ia.WMS=Ri,Wi.wms=Ma;var Tr=_r.extend({options:{padding:.1},initialize:function(d){T(this,d),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),At(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var d={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(d.zoomanim=this._onAnimZoom),d},_onAnimZoom:function(d){this._updateTransform(d.center,d.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(d,v){var _=this._map.getZoomScale(v,this._zoom),D=this._map.getSize().multiplyBy(.5+this.options.padding),j=this._map.project(this._center,v),H=D.multiplyBy(-_).add(j).subtract(this._map._getNewPixelOrigin(d,v));st.any3d?Ai(this._container,H,_):zt(this._container,H)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var d in this._layers)this._layers[d]._reset()},_onZoomEnd:function(){for(var d in this._layers)this._layers[d]._project()},_updatePaths:function(){for(var d in this._layers)this._layers[d]._update()},_update:function(){var d=this.options.padding,v=this._map.getSize(),_=this._map.containerPointToLayerPoint(v.multiplyBy(-d)).round();this._bounds=new Y(_,_.add(v.multiplyBy(1+d*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),el=Tr.extend({options:{tolerance:0},getEvents:function(){var d=Tr.prototype.getEvents.call(this);return d.viewprereset=this._onViewPreReset,d},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Tr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var d=this._container=document.createElement("canvas");pt(d,"mousemove",this._onMouseMove,this),pt(d,"click dblclick mousedown mouseup contextmenu",this._onClick,this),pt(d,"mouseout",this._handleMouseOut,this),d._leaflet_disable_events=!0,this._ctx=d.getContext("2d")},_destroyContainer:function(){J(this._redrawRequest),delete this._ctx,rn(this._container),$t(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var d;this._redrawBounds=null;for(var v in this._layers)d=this._layers[v],d._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Tr.prototype._update.call(this);var d=this._bounds,v=this._container,_=d.getSize(),D=st.retina?2:1;zt(v,d.min),v.width=D*_.x,v.height=D*_.y,v.style.width=_.x+"px",v.style.height=_.y+"px",st.retina&&this._ctx.scale(2,2),this._ctx.translate(-d.min.x,-d.min.y),this.fire("update")}},_reset:function(){Tr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(d){this._updateDashArray(d),this._layers[f(d)]=d;var v=d._order={layer:d,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(d){this._requestRedraw(d)},_removePath:function(d){var v=d._order,_=v.next,D=v.prev;_?_.prev=D:this._drawLast=D,D?D.next=_:this._drawFirst=_,delete d._order,delete this._layers[f(d)],this._requestRedraw(d)},_updatePath:function(d){this._extendRedrawBounds(d),d._project(),d._update(),this._requestRedraw(d)},_updateStyle:function(d){this._updateDashArray(d),this._requestRedraw(d)},_updateDashArray:function(d){if(typeof d.options.dashArray=="string"){var v=d.options.dashArray.split(/[, ]+/),_=[],D,j;for(j=0;j<v.length;j++){if(D=Number(v[j]),isNaN(D))return;_.push(D)}d.options._dashArray=_}else d.options._dashArray=d.options.dashArray},_requestRedraw:function(d){this._map&&(this._extendRedrawBounds(d),this._redrawRequest=this._redrawRequest||Q(this._redraw,this))},_extendRedrawBounds:function(d){if(d._pxBounds){var v=(d.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Y,this._redrawBounds.extend(d._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(d._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var d=this._redrawBounds;if(d){var v=d.getSize();this._ctx.clearRect(d.min.x,d.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var d,v=this._redrawBounds;if(this._ctx.save(),v){var _=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var D=this._drawFirst;D;D=D.next)d=D.layer,(!v||d._pxBounds&&d._pxBounds.intersects(v))&&d._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(d,v){if(this._drawing){var _,D,j,H,ee=d._parts,ue=ee.length,_e=this._ctx;if(ue){for(_e.beginPath(),_=0;_<ue;_++){for(D=0,j=ee[_].length;D<j;D++)H=ee[_][D],_e[D?"lineTo":"moveTo"](H.x,H.y);v&&_e.closePath()}this._fillStroke(_e,d)}}},_updateCircle:function(d){if(!(!this._drawing||d._empty())){var v=d._point,_=this._ctx,D=Math.max(Math.round(d._radius),1),j=(Math.max(Math.round(d._radiusY),1)||D)/D;j!==1&&(_.save(),_.scale(1,j)),_.beginPath(),_.arc(v.x,v.y/j,D,0,Math.PI*2,!1),j!==1&&_.restore(),this._fillStroke(_,d)}},_fillStroke:function(d,v){var _=v.options;_.fill&&(d.globalAlpha=_.fillOpacity,d.fillStyle=_.fillColor||_.color,d.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(d.setLineDash&&d.setLineDash(v.options&&v.options._dashArray||[]),d.globalAlpha=_.opacity,d.lineWidth=_.weight,d.strokeStyle=_.color,d.lineCap=_.lineCap,d.lineJoin=_.lineJoin,d.stroke())},_onClick:function(d){for(var v=this._map.mouseEventToLayerPoint(d),_,D,j=this._drawFirst;j;j=j.next)_=j.layer,_.options.interactive&&_._containsPoint(v)&&(!(d.type==="click"||d.type==="preclick")||!this._map._draggableMoved(_))&&(D=_);this._fireEvent(D?[D]:!1,d)},_onMouseMove:function(d){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(d);this._handleMouseHover(d,v)}},_handleMouseOut:function(d){var v=this._hoveredLayer;v&&(sn(this._container,"leaflet-interactive"),this._fireEvent([v],d,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(d,v){if(!this._mouseHoverThrottled){for(var _,D,j=this._drawFirst;j;j=j.next)_=j.layer,_.options.interactive&&_._containsPoint(v)&&(D=_);D!==this._hoveredLayer&&(this._handleMouseOut(d),D&&(At(this._container,"leaflet-interactive"),this._fireEvent([D],d,"mouseover"),this._hoveredLayer=D)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,d),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(d,v,_){this._map._fireDOMEvent(v,_||v.type,d)},_bringToFront:function(d){var v=d._order;if(v){var _=v.next,D=v.prev;if(_)_.prev=D;else return;D?D.next=_:_&&(this._drawFirst=_),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(d)}},_bringToBack:function(d){var v=d._order;if(v){var _=v.next,D=v.prev;if(D)D.next=_;else return;_?_.prev=D:D&&(this._drawLast=D),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(d)}}});function tl(d){return st.canvas?new el(d):null}var ka=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(d){return document.createElement("<lvml:"+d+' class="lvml">')}}catch{}return function(d){return document.createElement("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),bo={_initContainer:function(){this._container=Nt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Tr.prototype._update.call(this),this.fire("update"))},_initPath:function(d){var v=d._container=ka("shape");At(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",d._path=ka("path"),v.appendChild(d._path),this._updateStyle(d),this._layers[f(d)]=d},_addPath:function(d){var v=d._container;this._container.appendChild(v),d.options.interactive&&d.addInteractiveTarget(v)},_removePath:function(d){var v=d._container;rn(v),d.removeInteractiveTarget(v),delete this._layers[f(d)]},_updateStyle:function(d){var v=d._stroke,_=d._fill,D=d.options,j=d._container;j.stroked=!!D.stroke,j.filled=!!D.fill,D.stroke?(v||(v=d._stroke=ka("stroke")),j.appendChild(v),v.weight=D.weight+"px",v.color=D.color,v.opacity=D.opacity,D.dashArray?v.dashStyle=P(D.dashArray)?D.dashArray.join(" "):D.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=D.lineCap.replace("butt","flat"),v.joinstyle=D.lineJoin):v&&(j.removeChild(v),d._stroke=null),D.fill?(_||(_=d._fill=ka("fill")),j.appendChild(_),_.color=D.fillColor||D.color,_.opacity=D.fillOpacity):_&&(j.removeChild(_),d._fill=null)},_updateCircle:function(d){var v=d._point.round(),_=Math.round(d._radius),D=Math.round(d._radiusY||_);this._setPath(d,d._empty()?"M0 0":"AL "+v.x+","+v.y+" "+_+","+D+" 0,"+65535*360)},_setPath:function(d,v){d._path.v=v},_bringToFront:function(d){Bs(d._container)},_bringToBack:function(d){pa(d._container)}},Zi=st.vml?ka:xe,us=Tr.extend({_initContainer:function(){this._container=Zi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Zi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){rn(this._container),$t(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Tr.prototype._update.call(this);var d=this._bounds,v=d.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,_.setAttribute("width",v.x),_.setAttribute("height",v.y)),zt(_,d.min),_.setAttribute("viewBox",[d.min.x,d.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(d){var v=d._path=Zi("path");d.options.className&&At(v,d.options.className),d.options.interactive&&At(v,"leaflet-interactive"),this._updateStyle(d),this._layers[f(d)]=d},_addPath:function(d){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(d._path),d.addInteractiveTarget(d._path)},_removePath:function(d){rn(d._path),d.removeInteractiveTarget(d._path),delete this._layers[f(d)]},_updatePath:function(d){d._project(),d._update()},_updateStyle:function(d){var v=d._path,_=d.options;v&&(_.stroke?(v.setAttribute("stroke",_.color),v.setAttribute("stroke-opacity",_.opacity),v.setAttribute("stroke-width",_.weight),v.setAttribute("stroke-linecap",_.lineCap),v.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?v.setAttribute("stroke-dasharray",_.dashArray):v.removeAttribute("stroke-dasharray"),_.dashOffset?v.setAttribute("stroke-dashoffset",_.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),_.fill?(v.setAttribute("fill",_.fillColor||_.color),v.setAttribute("fill-opacity",_.fillOpacity),v.setAttribute("fill-rule",_.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(d,v){this._setPath(d,we(d._parts,v))},_updateCircle:function(d){var v=d._point,_=Math.max(Math.round(d._radius),1),D=Math.max(Math.round(d._radiusY),1)||_,j="a"+_+","+D+" 0 1,0 ",H=d._empty()?"M0 0":"M"+(v.x-_)+","+v.y+j+_*2+",0 "+j+-_*2+",0 ";this._setPath(d,H)},_setPath:function(d,v){d._path.setAttribute("d",v)},_bringToFront:function(d){Bs(d._path)},_bringToBack:function(d){pa(d._path)}});st.vml&&us.include(bo);function Na(d){return st.svg||st.vml?new us(d):null}Lt.include({getRenderer:function(d){var v=d.options.renderer||this._getPaneRenderer(d.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(d){if(d==="overlayPane"||d===void 0)return!1;var v=this._paneRenderers[d];return v===void 0&&(v=this._createRenderer({pane:d}),this._paneRenderers[d]=v),v},_createRenderer:function(d){return this.options.preferCanvas&&tl(d)||Na(d)}});var Rf=Oa.extend({initialize:function(d,v){Oa.prototype.initialize.call(this,this._boundsToLatLngs(d),v)},setBounds:function(d){return this.setLatLngs(this._boundsToLatLngs(d))},_boundsToLatLngs:function(d){return d=Te(d),[d.getSouthWest(),d.getNorthWest(),d.getNorthEast(),d.getSouthEast()]}});function Xi(d,v){return new Rf(d,v)}us.create=Zi,us.pointsToPath=we,Ci.geometryToLayer=Ra,Ci.coordsToLatLng=su,Ci.coordsToLatLngs=Xo,Ci.latLngToCoords=vo,Ci.latLngsToCoords=Qo,Ci.getFeature=Sr,Ci.asFeature=yo,Lt.mergeOptions({boxZoom:!0});var cu=xr.extend({initialize:function(d){this._map=d,this._container=d._container,this._pane=d._panes.overlayPane,this._resetStateTimeout=0,d.on("unload",this._destroy,this)},addHooks:function(){pt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$t(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){rn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(d){if(!d.shiftKey||d.which!==1&&d.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),qi(),Dr(),this._startPoint=this._map.mouseEventToContainerPoint(d),pt(document,{contextmenu:Nr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(d){this._moved||(this._moved=!0,this._box=Nt("div","leaflet-zoom-box",this._container),At(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(d);var v=new Y(this._point,this._startPoint),_=v.getSize();zt(this._box,v.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(rn(this._box),sn(this._container,"leaflet-crosshair")),Pr(),Go(),$t(document,{contextmenu:Nr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(d){if(!(d.which!==1&&d.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var v=new me(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(d){d.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Lt.addInitHook("addHandler","boxZoom",cu),Lt.mergeOptions({doubleClickZoom:!0});var Fr=xr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(d){var v=this._map,_=v.getZoom(),D=v.options.zoomDelta,j=d.originalEvent.shiftKey?_-D:_+D;v.options.doubleClickZoom==="center"?v.setZoom(j):v.setZoomAround(d.containerPoint,j)}});Lt.addInitHook("addHandler","doubleClickZoom",Fr),Lt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var _c=xr.extend({addHooks:function(){if(!this._draggable){var d=this._map;this._draggable=new as(d._mapPane,d._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),d.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),d.on("zoomend",this._onZoomEnd,this),d.whenReady(this._onZoomEnd,this))}At(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){sn(this._map._container,"leaflet-grab"),sn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var d=this._map;if(d._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=Te(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;d.fire("movestart").fire("dragstart"),d.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(d){if(this._map.options.inertia){var v=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(v),this._prunePositions(v)}this._map.fire("move",d).fire("drag",d)},_prunePositions:function(d){for(;this._positions.length>1&&d-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var d=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(d).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(d,v){return d-(d-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var d=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;d.x<v.min.x&&(d.x=this._viscousLimit(d.x,v.min.x)),d.y<v.min.y&&(d.y=this._viscousLimit(d.y,v.min.y)),d.x>v.max.x&&(d.x=this._viscousLimit(d.x,v.max.x)),d.y>v.max.y&&(d.y=this._viscousLimit(d.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(d)}},_onPreDragWrap:function(){var d=this._worldWidth,v=Math.round(d/2),_=this._initialWorldOffset,D=this._draggable._newPos.x,j=(D-v+_)%d+v-_,H=(D+v+_)%d-v-_,ee=Math.abs(j+_)<Math.abs(H+_)?j:H;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ee},_onDragEnd:function(d){var v=this._map,_=v.options,D=!_.inertia||d.noInertia||this._times.length<2;if(v.fire("dragend",d),D)v.fire("moveend");else{this._prunePositions(+new Date);var j=this._lastPos.subtract(this._positions[0]),H=(this._lastTime-this._times[0])/1e3,ee=_.easeLinearity,ue=j.multiplyBy(ee/H),_e=ue.distanceTo([0,0]),Ne=Math.min(_.inertiaMaxSpeed,_e),He=ue.multiplyBy(Ne/_e),Ze=Ne/(_.inertiaDeceleration*ee),Xe=He.multiplyBy(-Ze/2).round();!Xe.x&&!Xe.y?v.fire("moveend"):(Xe=v._limitOffset(Xe,v.options.maxBounds),Q(function(){v.panBy(Xe,{duration:Ze,easeLinearity:ee,noMoveStart:!0,animate:!0})}))}}});Lt.addInitHook("addHandler","dragging",_c),Lt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nl=xr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(d){this._map=d,this._setPanDelta(d.options.keyboardPanDelta),this._setZoomDelta(d.options.zoomDelta)},addHooks:function(){var d=this._map._container;d.tabIndex<=0&&(d.tabIndex="0"),pt(d,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$t(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var d=document.body,v=document.documentElement,_=d.scrollTop||v.scrollTop,D=d.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo(D,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(d){var v=this._panKeys={},_=this.keyCodes,D,j;for(D=0,j=_.left.length;D<j;D++)v[_.left[D]]=[-1*d,0];for(D=0,j=_.right.length;D<j;D++)v[_.right[D]]=[d,0];for(D=0,j=_.down.length;D<j;D++)v[_.down[D]]=[0,d];for(D=0,j=_.up.length;D<j;D++)v[_.up[D]]=[0,-1*d]},_setZoomDelta:function(d){var v=this._zoomKeys={},_=this.keyCodes,D,j;for(D=0,j=_.zoomIn.length;D<j;D++)v[_.zoomIn[D]]=d;for(D=0,j=_.zoomOut.length;D<j;D++)v[_.zoomOut[D]]=-d},_addHooks:function(){pt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$t(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(d){if(!(d.altKey||d.ctrlKey||d.metaKey)){var v=d.keyCode,_=this._map,D;if(v in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(D=this._panKeys[v],d.shiftKey&&(D=Z(D).multiplyBy(3)),_.options.maxBounds&&(D=_._limitOffset(Z(D),_.options.maxBounds)),_.options.worldCopyJump){var j=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(D)));_.panTo(j)}else _.panBy(D)}else if(v in this._zoomKeys)_.setZoom(_.getZoom()+(d.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;Nr(d)}}});Lt.addInitHook("addHandler","keyboard",nl),Lt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ks=xr.extend({addHooks:function(){pt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$t(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(d){var v=ya(d),_=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(d),this._startTime||(this._startTime=+new Date);var D=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),D),Nr(d)},_performZoom:function(){var d=this._map,v=d.getZoom(),_=this._map.options.zoomSnap||0;d._stop();var D=this._delta/(this._map.options.wheelPxPerZoomLevel*4),j=4*Math.log(2/(1+Math.exp(-Math.abs(D))))/Math.LN2,H=_?Math.ceil(j/_)*_:j,ee=d._limitZoom(v+(this._delta>0?H:-H))-v;this._delta=0,this._startTime=null,ee&&(d.options.scrollWheelZoom==="center"?d.setZoom(v+ee):d.setZoomAround(this._lastMousePos,v+ee))}});Lt.addInitHook("addHandler","scrollWheelZoom",Ks);var il=600;Lt.mergeOptions({tapHold:st.touchNative&&st.safari&&st.mobile,tapTolerance:15});var ja=xr.extend({addHooks:function(){pt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$t(this._map._container,"touchstart",this._onDown,this)},_onDown:function(d){if(clearTimeout(this._holdTimeout),d.touches.length===1){var v=d.touches[0];this._startPos=this._newPos=new ie(v.clientX,v.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(pt(document,"touchend",Tn),pt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),il),pt(document,"touchend touchcancel contextmenu",this._cancel,this),pt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function d(){$t(document,"touchend",Tn),$t(document,"touchend touchcancel",d)},_cancel:function(){clearTimeout(this._holdTimeout),$t(document,"touchend touchcancel contextmenu",this._cancel,this),$t(document,"touchmove",this._onMove,this)},_onMove:function(d){var v=d.touches[0];this._newPos=new ie(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(d,v){var _=new MouseEvent(d,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});_._simulated=!0,v.target.dispatchEvent(_)}});Lt.addInitHook("addHandler","tapHold",ja),Lt.mergeOptions({touchZoom:st.touch,bounceAtZoomLimits:!0});var Ba=xr.extend({addHooks:function(){At(this._map._container,"leaflet-touch-zoom"),pt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){sn(this._map._container,"leaflet-touch-zoom"),$t(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(d){var v=this._map;if(!(!d.touches||d.touches.length!==2||v._animatingZoom||this._zooming)){var _=v.mouseEventToContainerPoint(d.touches[0]),D=v.mouseEventToContainerPoint(d.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(_.add(D)._divideBy(2))),this._startDist=_.distanceTo(D),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),pt(document,"touchmove",this._onTouchMove,this),pt(document,"touchend touchcancel",this._onTouchEnd,this),Tn(d)}},_onTouchMove:function(d){if(!(!d.touches||d.touches.length!==2||!this._zooming)){var v=this._map,_=v.mouseEventToContainerPoint(d.touches[0]),D=v.mouseEventToContainerPoint(d.touches[1]),j=_.distanceTo(D)/this._startDist;if(this._zoom=v.getScaleZoom(j,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&j<1||this._zoom>v.getMaxZoom()&&j>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,j===1)return}else{var H=_._add(D)._divideBy(2)._subtract(this._centerPoint);if(j===1&&H.x===0&&H.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(H),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),J(this._animRequest);var ee=a(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Q(ee,this,!0),Tn(d)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,J(this._animRequest),$t(document,"touchmove",this._onTouchMove,this),$t(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Lt.addInitHook("addHandler","touchZoom",Ba),Lt.BoxZoom=cu,Lt.DoubleClickZoom=Fr,Lt.Drag=_c,Lt.Keyboard=nl,Lt.ScrollWheelZoom=Ks,Lt.TapHold=ja,Lt.TouchZoom=Ba,n.Bounds=Y,n.Browser=st,n.CRS=Ve,n.Canvas=el,n.Circle=bc,n.CircleMarker=Zo,n.Class=se,n.Control=fi,n.DivIcon=uu,n.DivOverlay=Wn,n.DomEvent=uc,n.DomUtil=uo,n.Draggable=as,n.Evented=oe,n.FeatureGroup=yn,n.GeoJSON=Ci,n.GridLayer=Hs,n.Handler=xr,n.Icon=La,n.ImageOverlay=Br,n.LatLng=Le,n.LatLngBounds=me,n.Layer=_r,n.LayerGroup=wa,n.LineUtil=_f,n.Map=Lt,n.Marker=Ca,n.Mixin=rh,n.Path=ls,n.Point=ie,n.PolyUtil=hc,n.Polygon=Oa,n.Polyline=jr,n.Popup=Yi,n.PosAnimation=qo,n.Projection=Sf,n.Rectangle=Rf,n.Renderer=Tr,n.SVG=us,n.SVGOverlay=Gs,n.TileLayer=Ia,n.Tooltip=lu,n.Transformation=Ge,n.Util=ve,n.VideoOverlay=Jo,n.bind=a,n.bounds=ne,n.canvas=tl,n.circle=ah,n.circleMarker=yc,n.control=xa,n.divIcon=xc,n.extend=r,n.featureGroup=mo,n.geoJSON=au,n.geoJson=wf,n.gridLayer=Er,n.icon=Wo,n.imageOverlay=Da,n.latLng=Ae,n.latLngBounds=Te,n.layerGroup=Tf,n.map=ba,n.marker=go,n.point=Z,n.polygon=ii,n.polyline=Af,n.popup=Cf,n.rectangle=Xi,n.setOptions=T,n.stamp=f,n.svg=Na,n.svgOverlay=Lf,n.tileLayer=Wi,n.tooltip=Of,n.transformation=Pe,n.version=i,n.videoOverlay=ou;var Fa=window.L;n.noConflict=function(){return window.L=Fa,this},window.L=n})}(fm,fm.exports)),fm.exports}var toe=eoe();const CF=Qr(toe),noe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",ioe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",roe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";delete CF.Icon.Default.prototype._getIconUrl;CF.Icon.Default.mergeOptions({iconRetinaUrl:noe,iconUrl:ioe,shadowUrl:roe});(function(){const{origin:e,pathname:n,search:i,hash:r}=window.location;if(/^\/(api|ext)\//.test(n)){const s=r&&r.startsWith("#/")?e+r.slice(1):e+"/";window.history.replaceState(null,"",s);return}if(r&&r.startsWith("#/")){const s=e+r.slice(1);window.history.replaceState(null,"",s);return}!/^\/(api|ext)\//.test(n)&&i&&new URLSearchParams(i).has("identifier")&&window.history.replaceState(null,"",e+n)})();GU.createRoot(document.getElementById("root")).render(A.jsx(s3,{children:A.jsx(_3,{children:A.jsx(Zae,{})})}));
